/*! For license information please see main.92180e62.js.LICENSE.txt */
(()=>{var e={39:(e,g,t)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0}),Object.defineProperty(g,"default",{enumerable:!0,get:function(){return I.createSvgIcon}});var I=t(4421)},191:(e,g)=>{"use strict";var t=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler");Symbol.for("react.provider");var o=Symbol.for("react.consumer"),a=Symbol.for("react.context"),r=Symbol.for("react.forward_ref"),i=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),s=Symbol.for("react.offscreen"),u=Symbol.for("react.client.reference");function m(e){if("object"===typeof e&&null!==e){var g=e.$$typeof;switch(g){case t:switch(e=e.type){case n:case C:case l:case i:case c:return e;default:switch(e=e&&e.$$typeof){case a:case r:case d:case A:case o:return e;default:return g}}case I:return g}}}g.vM=r,g.lD=A},219:(e,g,t)=>{"use strict";var I=t(3763),n={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},l={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},C={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function a(e){return I.isMemo(e)?C:o[e.$$typeof]||n}o[I.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[I.Memo]=C;var r=Object.defineProperty,i=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,A=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,s=Object.prototype;e.exports=function e(g,t,I){if("string"!==typeof t){if(s){var n=d(t);n&&n!==s&&e(g,n,I)}var C=i(t);c&&(C=C.concat(c(t)));for(var o=a(g),u=a(t),m=0;m<C.length;++m){var b=C[m];if(!l[b]&&(!I||!I[b])&&(!u||!u[b])&&(!o||!o[b])){var Z=A(t,b);try{r(g,b,Z)}catch(p){}}}}return g}},348:(e,g,t)=>{"use strict";var I=t(4994);g.A=void 0;!function(e,g){if(!g&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=C(g);if(t&&t.has(e))return t.get(e);var I={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=n?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(I,l,o):I[l]=e[l]}I.default=e,t&&t.set(e,I)}(t(5043));var n=I(t(39)),l=t(579);function C(e){if("function"!=typeof WeakMap)return null;var g=new WeakMap,t=new WeakMap;return(C=function(e){return e?t:g})(e)}g.A=(0,n.default)((0,l.jsx)("path",{d:"M5 3h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2m13 2h-2.5A3.5 3.5 0 0 0 12 8.5V11h-2v3h2v7h3v-7h3v-3h-3V9a1 1 0 0 1 1-1h2V5z"}),"Facebook")},457:(e,g,t)=>{"use strict";t.r(g),t.d(g,{default:()=>I.A});var I=t(7868)},579:(e,g,t)=>{"use strict";e.exports=t(1153)},869:(e,g,t)=>{"use strict";t.d(g,{A:()=>l});t(5043);var I=t(3290),n=t(579);function l(e){const{styles:g,defaultTheme:t={}}=e,l="function"===typeof g?e=>{return g(void 0===(I=e)||null===I||0===Object.keys(I).length?t:e);var I}:g;return(0,n.jsx)(I.mL,{styles:l})}},918:(e,g,t)=>{"use strict";function I(e){var g=Object.create(null);return function(t){return void 0===g[t]&&(g[t]=e(t)),g[t]}}t.d(g,{A:()=>I})},950:(e,g,t)=>{"use strict";t.d(g,{A:()=>I});const I=t(3468).A},1052:(e,g,t)=>{"use strict";t.d(g,{A:()=>n});var I=t(5043);function n(e){let{controlled:g,default:t,name:n,state:l="value"}=e;const{current:C}=I.useRef(void 0!==g),[o,a]=I.useState(t);return[C?g:o,I.useCallback((e=>{C||a(e)}),[])]}},1153:(e,g,t)=>{"use strict";var I=t(5043),n=Symbol.for("react.element"),l=Symbol.for("react.fragment"),C=Object.prototype.hasOwnProperty,o=I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function r(e,g,t){var I,l={},r=null,i=null;for(I in void 0!==t&&(r=""+t),void 0!==g.key&&(r=""+g.key),void 0!==g.ref&&(i=g.ref),g)C.call(g,I)&&!a.hasOwnProperty(I)&&(l[I]=g[I]);if(e&&e.defaultProps)for(I in g=e.defaultProps)void 0===l[I]&&(l[I]=g[I]);return{$$typeof:n,type:e,key:r,ref:i,props:l,_owner:o.current}}g.Fragment=l,g.jsx=r,g.jsxs=r},1188:(e,g,t)=>{"use strict";t.d(g,{A:()=>I});const I=function(e){let g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(g,Math.min(e,t))}},1475:(e,g,t)=>{"use strict";t.d(g,{A:()=>n});var I=t(7123);const n=e=>(0,I.A)(e)&&"classes"!==e},1497:(e,g,t)=>{"use strict";var I=t(3218);function n(){}function l(){}l.resetWarningCache=n,e.exports=function(){function e(e,g,t,n,l,C){if(C!==I){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function g(){return e}e.isRequired=e;var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:g,element:e,elementType:e,instanceOf:g,node:e,objectOf:g,oneOf:g,oneOfType:g,shape:g,exact:g,checkPropTypes:l,resetWarningCache:n};return t.PropTypes=t,t}},1668:(e,g,t)=>{"use strict";function I(e){return e&&e.ownerDocument||document}t.d(g,{A:()=>I})},1722:(e,g,t)=>{"use strict";t.d(g,{Rk:()=>I,SF:()=>n,sk:()=>l});function I(e,g,t){var I="";return t.split(" ").forEach((function(t){void 0!==e[t]?g.push(e[t]+";"):t&&(I+=t+" ")})),I}var n=function(e,g,t){var I=e.key+"-"+g.name;!1===t&&void 0===e.registered[I]&&(e.registered[I]=g.styles)},l=function(e,g,t){n(e,g,t);var I=e.key+"-"+g.name;if(void 0===e.inserted[g.name]){var l=g;do{e.insert(g===l?"."+I:"",l,e.sheet,!0),l=l.next}while(void 0!==l)}}},1782:(e,g,t)=>{"use strict";t.d(g,{A:()=>l});var I=t(5043),n=t(4440);const l=function(e){const g=I.useRef(e);return(0,n.A)((()=>{g.current=e})),I.useRef((function(){return(0,g.current)(...arguments)})).current}},2372:(e,g,t)=>{"use strict";t.d(g,{Ay:()=>l});var I=t(9386);const n={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function l(e,g){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const l=n[g];return l?`${t}-${l}`:`${I.A.generate(e)}-${g}`}},2374:(e,g,t)=>{"use strict";g.A=void 0;var I=function(e,g){if(!g&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l(g);if(t&&t.has(e))return t.get(e);var I={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var C in e)if("default"!==C&&Object.prototype.hasOwnProperty.call(e,C)){var o=n?Object.getOwnPropertyDescriptor(e,C):null;o&&(o.get||o.set)?Object.defineProperty(I,C,o):I[C]=e[C]}return I.default=e,t&&t.set(e,I),I}(t(5043)),n=t(3174);function l(e){if("function"!=typeof WeakMap)return null;var g=new WeakMap,t=new WeakMap;return(l=function(e){return e?t:g})(e)}g.A=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const g=I.useContext(n.ThemeContext);return g&&(t=g,0!==Object.keys(t).length)?g:e;var t}},2427:(e,g,t)=>{"use strict";t.d(g,{A:()=>I});const I=t(1668).A},2456:(e,g,t)=>{"use strict";function I(){for(var e=arguments.length,g=new Array(e),t=0;t<e;t++)g[t]=arguments[t];return g.reduce(((e,g)=>null==g?e:function(){for(var t=arguments.length,I=new Array(t),n=0;n<t;n++)I[n]=arguments[n];e.apply(this,I),g.apply(this,I)}),(()=>{}))}t.d(g,{A:()=>I})},2532:(e,g,t)=>{"use strict";t.d(g,{A:()=>n});var I=t(2372);function n(e,g){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const n={};return g.forEach((g=>{n[g]=(0,I.Ay)(e,g,t)})),n}},2730:(e,g,t)=>{"use strict";var I=t(5043),n=t(8853);function l(e){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+e,t=1;t<arguments.length;t++)g+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+e+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var C=new Set,o={};function a(e,g){r(e,g),r(e+"Capture",g)}function r(e,g){for(o[e]=g,e=0;e<g.length;e++)C.add(g[e])}var i=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),c=Object.prototype.hasOwnProperty,A=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},s={};function u(e,g,t,I,n,l,C){this.acceptsBooleans=2===g||3===g||4===g,this.attributeName=I,this.attributeNamespace=n,this.mustUseProperty=t,this.propertyName=e,this.type=g,this.sanitizeURL=l,this.removeEmptyString=C}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new u(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var g=e[0];m[g]=new u(g,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new u(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new u(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new u(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new u(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new u(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new u(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new u(e,5,!1,e.toLowerCase(),null,!1,!1)}));var b=/[\-:]([a-z])/g;function Z(e){return e[1].toUpperCase()}function p(e,g,t,I){var n=m.hasOwnProperty(g)?m[g]:null;(null!==n?0!==n.type:I||!(2<g.length)||"o"!==g[0]&&"O"!==g[0]||"n"!==g[1]&&"N"!==g[1])&&(function(e,g,t,I){if(null===g||"undefined"===typeof g||function(e,g,t,I){if(null!==t&&0===t.type)return!1;switch(typeof g){case"function":case"symbol":return!0;case"boolean":return!I&&(null!==t?!t.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,g,t,I))return!0;if(I)return!1;if(null!==t)switch(t.type){case 3:return!g;case 4:return!1===g;case 5:return isNaN(g);case 6:return isNaN(g)||1>g}return!1}(g,t,n,I)&&(t=null),I||null===n?function(e){return!!c.call(s,e)||!c.call(d,e)&&(A.test(e)?s[e]=!0:(d[e]=!0,!1))}(g)&&(null===t?e.removeAttribute(g):e.setAttribute(g,""+t)):n.mustUseProperty?e[n.propertyName]=null===t?3!==n.type&&"":t:(g=n.attributeName,I=n.attributeNamespace,null===t?e.removeAttribute(g):(t=3===(n=n.type)||4===n&&!0===t?"":""+t,I?e.setAttributeNS(I,g,t):e.setAttribute(g,t))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var g=e.replace(b,Z);m[g]=new u(g,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var g=e.replace(b,Z);m[g]=new u(g,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var g=e.replace(b,Z);m[g]=new u(g,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new u(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new u("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new u(e,1,!1,e.toLowerCase(),null,!0,!0)}));var h=I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,G=Symbol.for("react.element"),y=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),v=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),J=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var Y=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var w=Symbol.iterator;function H(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=w&&e[w]||e["@@iterator"])?e:null}var N,F=Object.assign;function K(e){if(void 0===N)try{throw Error()}catch(t){var g=t.stack.trim().match(/\n( *(at )?)/);N=g&&g[1]||""}return"\n"+N+e}var x=!1;function M(e,g){if(!e||x)return"";x=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(g,[])}catch(r){var I=r}Reflect.construct(e,[],g)}else{try{g.call()}catch(r){I=r}e.call(g.prototype)}else{try{throw Error()}catch(r){I=r}e()}}catch(r){if(r&&I&&"string"===typeof r.stack){for(var n=r.stack.split("\n"),l=I.stack.split("\n"),C=n.length-1,o=l.length-1;1<=C&&0<=o&&n[C]!==l[o];)o--;for(;1<=C&&0<=o;C--,o--)if(n[C]!==l[o]){if(1!==C||1!==o)do{if(C--,0>--o||n[C]!==l[o]){var a="\n"+n[C].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}}while(1<=C&&0<=o);break}}}finally{x=!1,Error.prepareStackTrace=t}return(e=e?e.displayName||e.name:"")?K(e):""}function z(e){switch(e.tag){case 5:return K(e.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return e=M(e.type,!1);case 11:return e=M(e.type.render,!1);case 1:return e=M(e.type,!0);default:return""}}function E(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case B:return"Fragment";case y:return"Portal";case W:return"Profiler";case S:return"StrictMode";case f:return"Suspense";case X:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case v:return(e.displayName||"Context")+".Consumer";case V:return(e._context.displayName||"Context")+".Provider";case R:var g=e.render;return(e=e.displayName)||(e=""!==(e=g.displayName||g.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(g=e.displayName||null)?g:E(e.type)||"Memo";case J:g=e._payload,e=e._init;try{return E(e(g))}catch(t){}}return null}function D(e){var g=e.type;switch(e.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=g.render).displayName||e.name||"",g.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return E(g);case 8:return g===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof g)return g.displayName||g.name||null;if("string"===typeof g)return g}return null}function U(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function T(e){var g=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===g||"radio"===g)}function L(e){e._valueTracker||(e._valueTracker=function(e){var g=T(e)?"checked":"value",t=Object.getOwnPropertyDescriptor(e.constructor.prototype,g),I=""+e[g];if(!e.hasOwnProperty(g)&&"undefined"!==typeof t&&"function"===typeof t.get&&"function"===typeof t.set){var n=t.get,l=t.set;return Object.defineProperty(e,g,{configurable:!0,get:function(){return n.call(this)},set:function(e){I=""+e,l.call(this,e)}}),Object.defineProperty(e,g,{enumerable:t.enumerable}),{getValue:function(){return I},setValue:function(e){I=""+e},stopTracking:function(){e._valueTracker=null,delete e[g]}}}}(e))}function Q(e){if(!e)return!1;var g=e._valueTracker;if(!g)return!0;var t=g.getValue(),I="";return e&&(I=T(e)?e.checked?"true":"false":e.value),(e=I)!==t&&(g.setValue(e),!0)}function j(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(g){return e.body}}function P(e,g){var t=g.checked;return F({},g,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=t?t:e._wrapperState.initialChecked})}function O(e,g){var t=null==g.defaultValue?"":g.defaultValue,I=null!=g.checked?g.checked:g.defaultChecked;t=U(null!=g.value?g.value:t),e._wrapperState={initialChecked:I,initialValue:t,controlled:"checkbox"===g.type||"radio"===g.type?null!=g.checked:null!=g.value}}function q(e,g){null!=(g=g.checked)&&p(e,"checked",g,!1)}function $(e,g){q(e,g);var t=U(g.value),I=g.type;if(null!=t)"number"===I?(0===t&&""===e.value||e.value!=t)&&(e.value=""+t):e.value!==""+t&&(e.value=""+t);else if("submit"===I||"reset"===I)return void e.removeAttribute("value");g.hasOwnProperty("value")?ee(e,g.type,t):g.hasOwnProperty("defaultValue")&&ee(e,g.type,U(g.defaultValue)),null==g.checked&&null!=g.defaultChecked&&(e.defaultChecked=!!g.defaultChecked)}function _(e,g,t){if(g.hasOwnProperty("value")||g.hasOwnProperty("defaultValue")){var I=g.type;if(!("submit"!==I&&"reset"!==I||void 0!==g.value&&null!==g.value))return;g=""+e._wrapperState.initialValue,t||g===e.value||(e.value=g),e.defaultValue=g}""!==(t=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==t&&(e.name=t)}function ee(e,g,t){"number"===g&&j(e.ownerDocument)===e||(null==t?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+t&&(e.defaultValue=""+t))}var ge=Array.isArray;function te(e,g,t,I){if(e=e.options,g){g={};for(var n=0;n<t.length;n++)g["$"+t[n]]=!0;for(t=0;t<e.length;t++)n=g.hasOwnProperty("$"+e[t].value),e[t].selected!==n&&(e[t].selected=n),n&&I&&(e[t].defaultSelected=!0)}else{for(t=""+U(t),g=null,n=0;n<e.length;n++){if(e[n].value===t)return e[n].selected=!0,void(I&&(e[n].defaultSelected=!0));null!==g||e[n].disabled||(g=e[n])}null!==g&&(g.selected=!0)}}function Ie(e,g){if(null!=g.dangerouslySetInnerHTML)throw Error(l(91));return F({},g,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ne(e,g){var t=g.value;if(null==t){if(t=g.children,g=g.defaultValue,null!=t){if(null!=g)throw Error(l(92));if(ge(t)){if(1<t.length)throw Error(l(93));t=t[0]}g=t}null==g&&(g=""),t=g}e._wrapperState={initialValue:U(t)}}function le(e,g){var t=U(g.value),I=U(g.defaultValue);null!=t&&((t=""+t)!==e.value&&(e.value=t),null==g.defaultValue&&e.defaultValue!==t&&(e.defaultValue=t)),null!=I&&(e.defaultValue=""+I)}function Ce(e){var g=e.textContent;g===e._wrapperState.initialValue&&""!==g&&null!==g&&(e.value=g)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ae(e,g){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(g):"http://www.w3.org/2000/svg"===e&&"foreignObject"===g?"http://www.w3.org/1999/xhtml":e}var re,ie,ce=(ie=function(e,g){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=g;else{for((re=re||document.createElement("div")).innerHTML="<svg>"+g.valueOf().toString()+"</svg>",g=re.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;g.firstChild;)e.appendChild(g.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,g,t,I){MSApp.execUnsafeLocalFunction((function(){return ie(e,g)}))}:ie);function Ae(e,g){if(g){var t=e.firstChild;if(t&&t===e.lastChild&&3===t.nodeType)return void(t.nodeValue=g)}e.textContent=g}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},se=["Webkit","ms","Moz","O"];function ue(e,g,t){return null==g||"boolean"===typeof g||""===g?"":t||"number"!==typeof g||0===g||de.hasOwnProperty(e)&&de[e]?(""+g).trim():g+"px"}function me(e,g){for(var t in e=e.style,g)if(g.hasOwnProperty(t)){var I=0===t.indexOf("--"),n=ue(t,g[t],I);"float"===t&&(t="cssFloat"),I?e.setProperty(t,n):e[t]=n}}Object.keys(de).forEach((function(e){se.forEach((function(g){g=g+e.charAt(0).toUpperCase()+e.substring(1),de[g]=de[e]}))}));var be=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ze(e,g){if(g){if(be[e]&&(null!=g.children||null!=g.dangerouslySetInnerHTML))throw Error(l(137,e));if(null!=g.dangerouslySetInnerHTML){if(null!=g.children)throw Error(l(60));if("object"!==typeof g.dangerouslySetInnerHTML||!("__html"in g.dangerouslySetInnerHTML))throw Error(l(61))}if(null!=g.style&&"object"!==typeof g.style)throw Error(l(62))}}function pe(e,g){if(-1===e.indexOf("-"))return"string"===typeof g.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var he=null;function Ge(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ye=null,Be=null,Se=null;function We(e){if(e=pn(e)){if("function"!==typeof ye)throw Error(l(280));var g=e.stateNode;g&&(g=Gn(g),ye(e.stateNode,e.type,g))}}function Ve(e){Be?Se?Se.push(e):Se=[e]:Be=e}function ve(){if(Be){var e=Be,g=Se;if(Se=Be=null,We(e),g)for(e=0;e<g.length;e++)We(g[e])}}function Re(e,g){return e(g)}function fe(){}var Xe=!1;function ke(e,g,t){if(Xe)return e(g,t);Xe=!0;try{return Re(e,g,t)}finally{Xe=!1,(null!==Be||null!==Se)&&(fe(),ve())}}function Je(e,g){var t=e.stateNode;if(null===t)return null;var I=Gn(t);if(null===I)return null;t=I[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(I=!I.disabled)||(I=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!I;break e;default:e=!1}if(e)return null;if(t&&"function"!==typeof t)throw Error(l(231,g,typeof t));return t}var Ye=!1;if(i)try{var we={};Object.defineProperty(we,"passive",{get:function(){Ye=!0}}),window.addEventListener("test",we,we),window.removeEventListener("test",we,we)}catch(ie){Ye=!1}function He(e,g,t,I,n,l,C,o,a){var r=Array.prototype.slice.call(arguments,3);try{g.apply(t,r)}catch(i){this.onError(i)}}var Ne=!1,Fe=null,Ke=!1,xe=null,Me={onError:function(e){Ne=!0,Fe=e}};function ze(e,g,t,I,n,l,C,o,a){Ne=!1,Fe=null,He.apply(Me,arguments)}function Ee(e){var g=e,t=e;if(e.alternate)for(;g.return;)g=g.return;else{e=g;do{0!==(4098&(g=e).flags)&&(t=g.return),e=g.return}while(e)}return 3===g.tag?t:null}function De(e){if(13===e.tag){var g=e.memoizedState;if(null===g&&(null!==(e=e.alternate)&&(g=e.memoizedState)),null!==g)return g.dehydrated}return null}function Ue(e){if(Ee(e)!==e)throw Error(l(188))}function Te(e){return null!==(e=function(e){var g=e.alternate;if(!g){if(null===(g=Ee(e)))throw Error(l(188));return g!==e?null:e}for(var t=e,I=g;;){var n=t.return;if(null===n)break;var C=n.alternate;if(null===C){if(null!==(I=n.return)){t=I;continue}break}if(n.child===C.child){for(C=n.child;C;){if(C===t)return Ue(n),e;if(C===I)return Ue(n),g;C=C.sibling}throw Error(l(188))}if(t.return!==I.return)t=n,I=C;else{for(var o=!1,a=n.child;a;){if(a===t){o=!0,t=n,I=C;break}if(a===I){o=!0,I=n,t=C;break}a=a.sibling}if(!o){for(a=C.child;a;){if(a===t){o=!0,t=C,I=n;break}if(a===I){o=!0,I=C,t=n;break}a=a.sibling}if(!o)throw Error(l(189))}}if(t.alternate!==I)throw Error(l(190))}if(3!==t.tag)throw Error(l(188));return t.stateNode.current===t?e:g}(e))?Le(e):null}function Le(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var g=Le(e);if(null!==g)return g;e=e.sibling}return null}var Qe=n.unstable_scheduleCallback,je=n.unstable_cancelCallback,Pe=n.unstable_shouldYield,Oe=n.unstable_requestPaint,qe=n.unstable_now,$e=n.unstable_getCurrentPriorityLevel,_e=n.unstable_ImmediatePriority,eg=n.unstable_UserBlockingPriority,gg=n.unstable_NormalPriority,tg=n.unstable_LowPriority,Ig=n.unstable_IdlePriority,ng=null,lg=null;var Cg=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(og(e)/ag|0)|0},og=Math.log,ag=Math.LN2;var rg=64,ig=4194304;function cg(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ag(e,g){var t=e.pendingLanes;if(0===t)return 0;var I=0,n=e.suspendedLanes,l=e.pingedLanes,C=268435455&t;if(0!==C){var o=C&~n;0!==o?I=cg(o):0!==(l&=C)&&(I=cg(l))}else 0!==(C=t&~n)?I=cg(C):0!==l&&(I=cg(l));if(0===I)return 0;if(0!==g&&g!==I&&0===(g&n)&&((n=I&-I)>=(l=g&-g)||16===n&&0!==(4194240&l)))return g;if(0!==(4&I)&&(I|=16&t),0!==(g=e.entangledLanes))for(e=e.entanglements,g&=I;0<g;)n=1<<(t=31-Cg(g)),I|=e[t],g&=~n;return I}function dg(e,g){switch(e){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;default:return-1}}function sg(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ug(){var e=rg;return 0===(4194240&(rg<<=1))&&(rg=64),e}function mg(e){for(var g=[],t=0;31>t;t++)g.push(e);return g}function bg(e,g,t){e.pendingLanes|=g,536870912!==g&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[g=31-Cg(g)]=t}function Zg(e,g){var t=e.entangledLanes|=g;for(e=e.entanglements;t;){var I=31-Cg(t),n=1<<I;n&g|e[I]&g&&(e[I]|=g),t&=~n}}var pg=0;function hg(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Gg,yg,Bg,Sg,Wg,Vg=!1,vg=[],Rg=null,fg=null,Xg=null,kg=new Map,Jg=new Map,Yg=[],wg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hg(e,g){switch(e){case"focusin":case"focusout":Rg=null;break;case"dragenter":case"dragleave":fg=null;break;case"mouseover":case"mouseout":Xg=null;break;case"pointerover":case"pointerout":kg.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jg.delete(g.pointerId)}}function Ng(e,g,t,I,n,l){return null===e||e.nativeEvent!==l?(e={blockedOn:g,domEventName:t,eventSystemFlags:I,nativeEvent:l,targetContainers:[n]},null!==g&&(null!==(g=pn(g))&&yg(g)),e):(e.eventSystemFlags|=I,g=e.targetContainers,null!==n&&-1===g.indexOf(n)&&g.push(n),e)}function Fg(e){var g=Zn(e.target);if(null!==g){var t=Ee(g);if(null!==t)if(13===(g=t.tag)){if(null!==(g=De(t)))return e.blockedOn=g,void Wg(e.priority,(function(){Bg(t)}))}else if(3===g&&t.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===t.tag?t.stateNode.containerInfo:null)}e.blockedOn=null}function Kg(e){if(null!==e.blockedOn)return!1;for(var g=e.targetContainers;0<g.length;){var t=Pg(e.domEventName,e.eventSystemFlags,g[0],e.nativeEvent);if(null!==t)return null!==(g=pn(t))&&yg(g),e.blockedOn=t,!1;var I=new(t=e.nativeEvent).constructor(t.type,t);he=I,t.target.dispatchEvent(I),he=null,g.shift()}return!0}function xg(e,g,t){Kg(e)&&t.delete(g)}function Mg(){Vg=!1,null!==Rg&&Kg(Rg)&&(Rg=null),null!==fg&&Kg(fg)&&(fg=null),null!==Xg&&Kg(Xg)&&(Xg=null),kg.forEach(xg),Jg.forEach(xg)}function zg(e,g){e.blockedOn===g&&(e.blockedOn=null,Vg||(Vg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Mg)))}function Eg(e){function g(g){return zg(g,e)}if(0<vg.length){zg(vg[0],e);for(var t=1;t<vg.length;t++){var I=vg[t];I.blockedOn===e&&(I.blockedOn=null)}}for(null!==Rg&&zg(Rg,e),null!==fg&&zg(fg,e),null!==Xg&&zg(Xg,e),kg.forEach(g),Jg.forEach(g),t=0;t<Yg.length;t++)(I=Yg[t]).blockedOn===e&&(I.blockedOn=null);for(;0<Yg.length&&null===(t=Yg[0]).blockedOn;)Fg(t),null===t.blockedOn&&Yg.shift()}var Dg=h.ReactCurrentBatchConfig,Ug=!0;function Tg(e,g,t,I){var n=pg,l=Dg.transition;Dg.transition=null;try{pg=1,Qg(e,g,t,I)}finally{pg=n,Dg.transition=l}}function Lg(e,g,t,I){var n=pg,l=Dg.transition;Dg.transition=null;try{pg=4,Qg(e,g,t,I)}finally{pg=n,Dg.transition=l}}function Qg(e,g,t,I){if(Ug){var n=Pg(e,g,t,I);if(null===n)DI(e,g,I,jg,t),Hg(e,I);else if(function(e,g,t,I,n){switch(g){case"focusin":return Rg=Ng(Rg,e,g,t,I,n),!0;case"dragenter":return fg=Ng(fg,e,g,t,I,n),!0;case"mouseover":return Xg=Ng(Xg,e,g,t,I,n),!0;case"pointerover":var l=n.pointerId;return kg.set(l,Ng(kg.get(l)||null,e,g,t,I,n)),!0;case"gotpointercapture":return l=n.pointerId,Jg.set(l,Ng(Jg.get(l)||null,e,g,t,I,n)),!0}return!1}(n,e,g,t,I))I.stopPropagation();else if(Hg(e,I),4&g&&-1<wg.indexOf(e)){for(;null!==n;){var l=pn(n);if(null!==l&&Gg(l),null===(l=Pg(e,g,t,I))&&DI(e,g,I,jg,t),l===n)break;n=l}null!==n&&I.stopPropagation()}else DI(e,g,I,null,t)}}var jg=null;function Pg(e,g,t,I){if(jg=null,null!==(e=Zn(e=Ge(I))))if(null===(g=Ee(e)))e=null;else if(13===(t=g.tag)){if(null!==(e=De(g)))return e;e=null}else if(3===t){if(g.stateNode.current.memoizedState.isDehydrated)return 3===g.tag?g.stateNode.containerInfo:null;e=null}else g!==e&&(e=null);return jg=e,null}function Og(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case _e:return 1;case eg:return 4;case gg:case tg:return 16;case Ig:return 536870912;default:return 16}default:return 16}}var qg=null,$g=null,_g=null;function et(){if(_g)return _g;var e,g,t=$g,I=t.length,n="value"in qg?qg.value:qg.textContent,l=n.length;for(e=0;e<I&&t[e]===n[e];e++);var C=I-e;for(g=1;g<=C&&t[I-g]===n[l-g];g++);return _g=n.slice(e,1<g?1-g:void 0)}function gt(e){var g=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===g&&(e=13):e=g,10===e&&(e=13),32<=e||13===e?e:0}function tt(){return!0}function It(){return!1}function nt(e){function g(g,t,I,n,l){for(var C in this._reactName=g,this._targetInst=I,this.type=t,this.nativeEvent=n,this.target=l,this.currentTarget=null,e)e.hasOwnProperty(C)&&(g=e[C],this[C]=g?g(n):n[C]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?tt:It,this.isPropagationStopped=It,this}return F(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tt)},persist:function(){},isPersistent:tt}),g}var lt,Ct,ot,at={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rt=nt(at),it=F({},at,{view:0,detail:0}),ct=nt(it),At=F({},it,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:St,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ot&&(ot&&"mousemove"===e.type?(lt=e.screenX-ot.screenX,Ct=e.screenY-ot.screenY):Ct=lt=0,ot=e),lt)},movementY:function(e){return"movementY"in e?e.movementY:Ct}}),dt=nt(At),st=nt(F({},At,{dataTransfer:0})),ut=nt(F({},it,{relatedTarget:0})),mt=nt(F({},at,{animationName:0,elapsedTime:0,pseudoElement:0})),bt=F({},at,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Zt=nt(bt),pt=nt(F({},at,{data:0})),ht={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bt(e){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(e):!!(e=yt[e])&&!!g[e]}function St(){return Bt}var Wt=F({},it,{key:function(e){if(e.key){var g=ht[e.key]||e.key;if("Unidentified"!==g)return g}return"keypress"===e.type?13===(e=gt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Gt[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:St,charCode:function(e){return"keypress"===e.type?gt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?gt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Vt=nt(Wt),vt=nt(F({},At,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rt=nt(F({},it,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:St})),ft=nt(F({},at,{propertyName:0,elapsedTime:0,pseudoElement:0})),Xt=F({},At,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kt=nt(Xt),Jt=[9,13,27,32],Yt=i&&"CompositionEvent"in window,wt=null;i&&"documentMode"in document&&(wt=document.documentMode);var Ht=i&&"TextEvent"in window&&!wt,Nt=i&&(!Yt||wt&&8<wt&&11>=wt),Ft=String.fromCharCode(32),Kt=!1;function xt(e,g){switch(e){case"keyup":return-1!==Jt.indexOf(g.keyCode);case"keydown":return 229!==g.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mt(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zt=!1;var Et={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dt(e){var g=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===g?!!Et[e.type]:"textarea"===g}function Ut(e,g,t,I){Ve(I),0<(g=TI(g,"onChange")).length&&(t=new rt("onChange","change",null,t,I),e.push({event:t,listeners:g}))}var Tt=null,Lt=null;function Qt(e){FI(e,0)}function jt(e){if(Q(hn(e)))return e}function Pt(e,g){if("change"===e)return g}var Ot=!1;if(i){var qt;if(i){var $t="oninput"in document;if(!$t){var _t=document.createElement("div");_t.setAttribute("oninput","return;"),$t="function"===typeof _t.oninput}qt=$t}else qt=!1;Ot=qt&&(!document.documentMode||9<document.documentMode)}function eI(){Tt&&(Tt.detachEvent("onpropertychange",gI),Lt=Tt=null)}function gI(e){if("value"===e.propertyName&&jt(Lt)){var g=[];Ut(g,Lt,e,Ge(e)),ke(Qt,g)}}function tI(e,g,t){"focusin"===e?(eI(),Lt=t,(Tt=g).attachEvent("onpropertychange",gI)):"focusout"===e&&eI()}function II(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return jt(Lt)}function nI(e,g){if("click"===e)return jt(g)}function lI(e,g){if("input"===e||"change"===e)return jt(g)}var CI="function"===typeof Object.is?Object.is:function(e,g){return e===g&&(0!==e||1/e===1/g)||e!==e&&g!==g};function oI(e,g){if(CI(e,g))return!0;if("object"!==typeof e||null===e||"object"!==typeof g||null===g)return!1;var t=Object.keys(e),I=Object.keys(g);if(t.length!==I.length)return!1;for(I=0;I<t.length;I++){var n=t[I];if(!c.call(g,n)||!CI(e[n],g[n]))return!1}return!0}function aI(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rI(e,g){var t,I=aI(e);for(e=0;I;){if(3===I.nodeType){if(t=e+I.textContent.length,e<=g&&t>=g)return{node:I,offset:g-e};e=t}e:{for(;I;){if(I.nextSibling){I=I.nextSibling;break e}I=I.parentNode}I=void 0}I=aI(I)}}function iI(e,g){return!(!e||!g)&&(e===g||(!e||3!==e.nodeType)&&(g&&3===g.nodeType?iI(e,g.parentNode):"contains"in e?e.contains(g):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(g))))}function cI(){for(var e=window,g=j();g instanceof e.HTMLIFrameElement;){try{var t="string"===typeof g.contentWindow.location.href}catch(I){t=!1}if(!t)break;g=j((e=g.contentWindow).document)}return g}function AI(e){var g=e&&e.nodeName&&e.nodeName.toLowerCase();return g&&("input"===g&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===g||"true"===e.contentEditable)}function dI(e){var g=cI(),t=e.focusedElem,I=e.selectionRange;if(g!==t&&t&&t.ownerDocument&&iI(t.ownerDocument.documentElement,t)){if(null!==I&&AI(t))if(g=I.start,void 0===(e=I.end)&&(e=g),"selectionStart"in t)t.selectionStart=g,t.selectionEnd=Math.min(e,t.value.length);else if((e=(g=t.ownerDocument||document)&&g.defaultView||window).getSelection){e=e.getSelection();var n=t.textContent.length,l=Math.min(I.start,n);I=void 0===I.end?l:Math.min(I.end,n),!e.extend&&l>I&&(n=I,I=l,l=n),n=rI(t,l);var C=rI(t,I);n&&C&&(1!==e.rangeCount||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==C.node||e.focusOffset!==C.offset)&&((g=g.createRange()).setStart(n.node,n.offset),e.removeAllRanges(),l>I?(e.addRange(g),e.extend(C.node,C.offset)):(g.setEnd(C.node,C.offset),e.addRange(g)))}for(g=[],e=t;e=e.parentNode;)1===e.nodeType&&g.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof t.focus&&t.focus(),t=0;t<g.length;t++)(e=g[t]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var sI=i&&"documentMode"in document&&11>=document.documentMode,uI=null,mI=null,bI=null,ZI=!1;function pI(e,g,t){var I=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;ZI||null==uI||uI!==j(I)||("selectionStart"in(I=uI)&&AI(I)?I={start:I.selectionStart,end:I.selectionEnd}:I={anchorNode:(I=(I.ownerDocument&&I.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:I.anchorOffset,focusNode:I.focusNode,focusOffset:I.focusOffset},bI&&oI(bI,I)||(bI=I,0<(I=TI(mI,"onSelect")).length&&(g=new rt("onSelect","select",null,g,t),e.push({event:g,listeners:I}),g.target=uI)))}function hI(e,g){var t={};return t[e.toLowerCase()]=g.toLowerCase(),t["Webkit"+e]="webkit"+g,t["Moz"+e]="moz"+g,t}var GI={animationend:hI("Animation","AnimationEnd"),animationiteration:hI("Animation","AnimationIteration"),animationstart:hI("Animation","AnimationStart"),transitionend:hI("Transition","TransitionEnd")},yI={},BI={};function SI(e){if(yI[e])return yI[e];if(!GI[e])return e;var g,t=GI[e];for(g in t)if(t.hasOwnProperty(g)&&g in BI)return yI[e]=t[g];return e}i&&(BI=document.createElement("div").style,"AnimationEvent"in window||(delete GI.animationend.animation,delete GI.animationiteration.animation,delete GI.animationstart.animation),"TransitionEvent"in window||delete GI.transitionend.transition);var WI=SI("animationend"),VI=SI("animationiteration"),vI=SI("animationstart"),RI=SI("transitionend"),fI=new Map,XI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kI(e,g){fI.set(e,g),a(g,[e])}for(var JI=0;JI<XI.length;JI++){var YI=XI[JI];kI(YI.toLowerCase(),"on"+(YI[0].toUpperCase()+YI.slice(1)))}kI(WI,"onAnimationEnd"),kI(VI,"onAnimationIteration"),kI(vI,"onAnimationStart"),kI("dblclick","onDoubleClick"),kI("focusin","onFocus"),kI("focusout","onBlur"),kI(RI,"onTransitionEnd"),r("onMouseEnter",["mouseout","mouseover"]),r("onMouseLeave",["mouseout","mouseover"]),r("onPointerEnter",["pointerout","pointerover"]),r("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wI="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HI=new Set("cancel close invalid load scroll toggle".split(" ").concat(wI));function NI(e,g,t){var I=e.type||"unknown-event";e.currentTarget=t,function(e,g,t,I,n,C,o,a,r){if(ze.apply(this,arguments),Ne){if(!Ne)throw Error(l(198));var i=Fe;Ne=!1,Fe=null,Ke||(Ke=!0,xe=i)}}(I,g,void 0,e),e.currentTarget=null}function FI(e,g){g=0!==(4&g);for(var t=0;t<e.length;t++){var I=e[t],n=I.event;I=I.listeners;e:{var l=void 0;if(g)for(var C=I.length-1;0<=C;C--){var o=I[C],a=o.instance,r=o.currentTarget;if(o=o.listener,a!==l&&n.isPropagationStopped())break e;NI(n,o,r),l=a}else for(C=0;C<I.length;C++){if(a=(o=I[C]).instance,r=o.currentTarget,o=o.listener,a!==l&&n.isPropagationStopped())break e;NI(n,o,r),l=a}}}if(Ke)throw e=xe,Ke=!1,xe=null,e}function KI(e,g){var t=g[un];void 0===t&&(t=g[un]=new Set);var I=e+"__bubble";t.has(I)||(EI(g,e,2,!1),t.add(I))}function xI(e,g,t){var I=0;g&&(I|=4),EI(t,e,I,g)}var MI="_reactListening"+Math.random().toString(36).slice(2);function zI(e){if(!e[MI]){e[MI]=!0,C.forEach((function(g){"selectionchange"!==g&&(HI.has(g)||xI(g,!1,e),xI(g,!0,e))}));var g=9===e.nodeType?e:e.ownerDocument;null===g||g[MI]||(g[MI]=!0,xI("selectionchange",!1,g))}}function EI(e,g,t,I){switch(Og(g)){case 1:var n=Tg;break;case 4:n=Lg;break;default:n=Qg}t=n.bind(null,g,t,e),n=void 0,!Ye||"touchstart"!==g&&"touchmove"!==g&&"wheel"!==g||(n=!0),I?void 0!==n?e.addEventListener(g,t,{capture:!0,passive:n}):e.addEventListener(g,t,!0):void 0!==n?e.addEventListener(g,t,{passive:n}):e.addEventListener(g,t,!1)}function DI(e,g,t,I,n){var l=I;if(0===(1&g)&&0===(2&g)&&null!==I)e:for(;;){if(null===I)return;var C=I.tag;if(3===C||4===C){var o=I.stateNode.containerInfo;if(o===n||8===o.nodeType&&o.parentNode===n)break;if(4===C)for(C=I.return;null!==C;){var a=C.tag;if((3===a||4===a)&&((a=C.stateNode.containerInfo)===n||8===a.nodeType&&a.parentNode===n))return;C=C.return}for(;null!==o;){if(null===(C=Zn(o)))return;if(5===(a=C.tag)||6===a){I=l=C;continue e}o=o.parentNode}}I=I.return}ke((function(){var I=l,n=Ge(t),C=[];e:{var o=fI.get(e);if(void 0!==o){var a=rt,r=e;switch(e){case"keypress":if(0===gt(t))break e;case"keydown":case"keyup":a=Vt;break;case"focusin":r="focus",a=ut;break;case"focusout":r="blur",a=ut;break;case"beforeblur":case"afterblur":a=ut;break;case"click":if(2===t.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":a=dt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":a=st;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":a=Rt;break;case WI:case VI:case vI:a=mt;break;case RI:a=ft;break;case"scroll":a=ct;break;case"wheel":a=kt;break;case"copy":case"cut":case"paste":a=Zt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":a=vt}var i=0!==(4&g),c=!i&&"scroll"===e,A=i?null!==o?o+"Capture":null:o;i=[];for(var d,s=I;null!==s;){var u=(d=s).stateNode;if(5===d.tag&&null!==u&&(d=u,null!==A&&(null!=(u=Je(s,A))&&i.push(UI(s,u,d)))),c)break;s=s.return}0<i.length&&(o=new a(o,r,null,t,n),C.push({event:o,listeners:i}))}}if(0===(7&g)){if(a="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||t===he||!(r=t.relatedTarget||t.fromElement)||!Zn(r)&&!r[sn])&&(a||o)&&(o=n.window===n?n:(o=n.ownerDocument)?o.defaultView||o.parentWindow:window,a?(a=I,null!==(r=(r=t.relatedTarget||t.toElement)?Zn(r):null)&&(r!==(c=Ee(r))||5!==r.tag&&6!==r.tag)&&(r=null)):(a=null,r=I),a!==r)){if(i=dt,u="onMouseLeave",A="onMouseEnter",s="mouse","pointerout"!==e&&"pointerover"!==e||(i=vt,u="onPointerLeave",A="onPointerEnter",s="pointer"),c=null==a?o:hn(a),d=null==r?o:hn(r),(o=new i(u,s+"leave",a,t,n)).target=c,o.relatedTarget=d,u=null,Zn(n)===I&&((i=new i(A,s+"enter",r,t,n)).target=d,i.relatedTarget=c,u=i),c=u,a&&r)e:{for(A=r,s=0,d=i=a;d;d=LI(d))s++;for(d=0,u=A;u;u=LI(u))d++;for(;0<s-d;)i=LI(i),s--;for(;0<d-s;)A=LI(A),d--;for(;s--;){if(i===A||null!==A&&i===A.alternate)break e;i=LI(i),A=LI(A)}i=null}else i=null;null!==a&&QI(C,o,a,i,!1),null!==r&&null!==c&&QI(C,c,r,i,!0)}if("select"===(a=(o=I?hn(I):window).nodeName&&o.nodeName.toLowerCase())||"input"===a&&"file"===o.type)var m=Pt;else if(Dt(o))if(Ot)m=lI;else{m=II;var b=tI}else(a=o.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=nI);switch(m&&(m=m(e,I))?Ut(C,m,t,n):(b&&b(e,o,I),"focusout"===e&&(b=o._wrapperState)&&b.controlled&&"number"===o.type&&ee(o,"number",o.value)),b=I?hn(I):window,e){case"focusin":(Dt(b)||"true"===b.contentEditable)&&(uI=b,mI=I,bI=null);break;case"focusout":bI=mI=uI=null;break;case"mousedown":ZI=!0;break;case"contextmenu":case"mouseup":case"dragend":ZI=!1,pI(C,t,n);break;case"selectionchange":if(sI)break;case"keydown":case"keyup":pI(C,t,n)}var Z;if(Yt)e:{switch(e){case"compositionstart":var p="onCompositionStart";break e;case"compositionend":p="onCompositionEnd";break e;case"compositionupdate":p="onCompositionUpdate";break e}p=void 0}else zt?xt(e,t)&&(p="onCompositionEnd"):"keydown"===e&&229===t.keyCode&&(p="onCompositionStart");p&&(Nt&&"ko"!==t.locale&&(zt||"onCompositionStart"!==p?"onCompositionEnd"===p&&zt&&(Z=et()):($g="value"in(qg=n)?qg.value:qg.textContent,zt=!0)),0<(b=TI(I,p)).length&&(p=new pt(p,e,null,t,n),C.push({event:p,listeners:b}),Z?p.data=Z:null!==(Z=Mt(t))&&(p.data=Z))),(Z=Ht?function(e,g){switch(e){case"compositionend":return Mt(g);case"keypress":return 32!==g.which?null:(Kt=!0,Ft);case"textInput":return(e=g.data)===Ft&&Kt?null:e;default:return null}}(e,t):function(e,g){if(zt)return"compositionend"===e||!Yt&&xt(e,g)?(e=et(),_g=$g=qg=null,zt=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return Nt&&"ko"!==g.locale?null:g.data}}(e,t))&&(0<(I=TI(I,"onBeforeInput")).length&&(n=new pt("onBeforeInput","beforeinput",null,t,n),C.push({event:n,listeners:I}),n.data=Z))}FI(C,g)}))}function UI(e,g,t){return{instance:e,listener:g,currentTarget:t}}function TI(e,g){for(var t=g+"Capture",I=[];null!==e;){var n=e,l=n.stateNode;5===n.tag&&null!==l&&(n=l,null!=(l=Je(e,t))&&I.unshift(UI(e,l,n)),null!=(l=Je(e,g))&&I.push(UI(e,l,n))),e=e.return}return I}function LI(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function QI(e,g,t,I,n){for(var l=g._reactName,C=[];null!==t&&t!==I;){var o=t,a=o.alternate,r=o.stateNode;if(null!==a&&a===I)break;5===o.tag&&null!==r&&(o=r,n?null!=(a=Je(t,l))&&C.unshift(UI(t,a,o)):n||null!=(a=Je(t,l))&&C.push(UI(t,a,o))),t=t.return}0!==C.length&&e.push({event:g,listeners:C})}var jI=/\r\n?/g,PI=/\u0000|\uFFFD/g;function OI(e){return("string"===typeof e?e:""+e).replace(jI,"\n").replace(PI,"")}function qI(e,g,t){if(g=OI(g),OI(e)!==g&&t)throw Error(l(425))}function $I(){}var _I=null,en=null;function gn(e,g){return"textarea"===e||"noscript"===e||"string"===typeof g.children||"number"===typeof g.children||"object"===typeof g.dangerouslySetInnerHTML&&null!==g.dangerouslySetInnerHTML&&null!=g.dangerouslySetInnerHTML.__html}var tn="function"===typeof setTimeout?setTimeout:void 0,In="function"===typeof clearTimeout?clearTimeout:void 0,nn="function"===typeof Promise?Promise:void 0,ln="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof nn?function(e){return nn.resolve(null).then(e).catch(Cn)}:tn;function Cn(e){setTimeout((function(){throw e}))}function on(e,g){var t=g,I=0;do{var n=t.nextSibling;if(e.removeChild(t),n&&8===n.nodeType)if("/$"===(t=n.data)){if(0===I)return e.removeChild(n),void Eg(g);I--}else"$"!==t&&"$?"!==t&&"$!"!==t||I++;t=n}while(t);Eg(g)}function an(e){for(;null!=e;e=e.nextSibling){var g=e.nodeType;if(1===g||3===g)break;if(8===g){if("$"===(g=e.data)||"$!"===g||"$?"===g)break;if("/$"===g)return null}}return e}function rn(e){e=e.previousSibling;for(var g=0;e;){if(8===e.nodeType){var t=e.data;if("$"===t||"$!"===t||"$?"===t){if(0===g)return e;g--}else"/$"===t&&g++}e=e.previousSibling}return null}var cn=Math.random().toString(36).slice(2),An="__reactFiber$"+cn,dn="__reactProps$"+cn,sn="__reactContainer$"+cn,un="__reactEvents$"+cn,mn="__reactListeners$"+cn,bn="__reactHandles$"+cn;function Zn(e){var g=e[An];if(g)return g;for(var t=e.parentNode;t;){if(g=t[sn]||t[An]){if(t=g.alternate,null!==g.child||null!==t&&null!==t.child)for(e=rn(e);null!==e;){if(t=e[An])return t;e=rn(e)}return g}t=(e=t).parentNode}return null}function pn(e){return!(e=e[An]||e[sn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function hn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(l(33))}function Gn(e){return e[dn]||null}var yn=[],Bn=-1;function Sn(e){return{current:e}}function Wn(e){0>Bn||(e.current=yn[Bn],yn[Bn]=null,Bn--)}function Vn(e,g){Bn++,yn[Bn]=e.current,e.current=g}var vn={},Rn=Sn(vn),fn=Sn(!1),Xn=vn;function kn(e,g){var t=e.type.contextTypes;if(!t)return vn;var I=e.stateNode;if(I&&I.__reactInternalMemoizedUnmaskedChildContext===g)return I.__reactInternalMemoizedMaskedChildContext;var n,l={};for(n in t)l[n]=g[n];return I&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=g,e.__reactInternalMemoizedMaskedChildContext=l),l}function Jn(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Yn(){Wn(fn),Wn(Rn)}function wn(e,g,t){if(Rn.current!==vn)throw Error(l(168));Vn(Rn,g),Vn(fn,t)}function Hn(e,g,t){var I=e.stateNode;if(g=g.childContextTypes,"function"!==typeof I.getChildContext)return t;for(var n in I=I.getChildContext())if(!(n in g))throw Error(l(108,D(e)||"Unknown",n));return F({},t,I)}function Nn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||vn,Xn=Rn.current,Vn(Rn,e),Vn(fn,fn.current),!0}function Fn(e,g,t){var I=e.stateNode;if(!I)throw Error(l(169));t?(e=Hn(e,g,Xn),I.__reactInternalMemoizedMergedChildContext=e,Wn(fn),Wn(Rn),Vn(Rn,e)):Wn(fn),Vn(fn,t)}var Kn=null,xn=!1,Mn=!1;function zn(e){null===Kn?Kn=[e]:Kn.push(e)}function En(){if(!Mn&&null!==Kn){Mn=!0;var e=0,g=pg;try{var t=Kn;for(pg=1;e<t.length;e++){var I=t[e];do{I=I(!0)}while(null!==I)}Kn=null,xn=!1}catch(n){throw null!==Kn&&(Kn=Kn.slice(e+1)),Qe(_e,En),n}finally{pg=g,Mn=!1}}return null}var Dn=[],Un=0,Tn=null,Ln=0,Qn=[],jn=0,Pn=null,On=1,qn="";function $n(e,g){Dn[Un++]=Ln,Dn[Un++]=Tn,Tn=e,Ln=g}function _n(e,g,t){Qn[jn++]=On,Qn[jn++]=qn,Qn[jn++]=Pn,Pn=e;var I=On;e=qn;var n=32-Cg(I)-1;I&=~(1<<n),t+=1;var l=32-Cg(g)+n;if(30<l){var C=n-n%5;l=(I&(1<<C)-1).toString(32),I>>=C,n-=C,On=1<<32-Cg(g)+n|t<<n|I,qn=l+e}else On=1<<l|t<<n|I,qn=e}function el(e){null!==e.return&&($n(e,1),_n(e,1,0))}function gl(e){for(;e===Tn;)Tn=Dn[--Un],Dn[Un]=null,Ln=Dn[--Un],Dn[Un]=null;for(;e===Pn;)Pn=Qn[--jn],Qn[jn]=null,qn=Qn[--jn],Qn[jn]=null,On=Qn[--jn],Qn[jn]=null}var tl=null,Il=null,nl=!1,ll=null;function Cl(e,g){var t=kr(5,null,null,0);t.elementType="DELETED",t.stateNode=g,t.return=e,null===(g=e.deletions)?(e.deletions=[t],e.flags|=16):g.push(t)}function ol(e,g){switch(e.tag){case 5:var t=e.type;return null!==(g=1!==g.nodeType||t.toLowerCase()!==g.nodeName.toLowerCase()?null:g)&&(e.stateNode=g,tl=e,Il=an(g.firstChild),!0);case 6:return null!==(g=""===e.pendingProps||3!==g.nodeType?null:g)&&(e.stateNode=g,tl=e,Il=null,!0);case 13:return null!==(g=8!==g.nodeType?null:g)&&(t=null!==Pn?{id:On,overflow:qn}:null,e.memoizedState={dehydrated:g,treeContext:t,retryLane:1073741824},(t=kr(18,null,null,0)).stateNode=g,t.return=e,e.child=t,tl=e,Il=null,!0);default:return!1}}function al(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function rl(e){if(nl){var g=Il;if(g){var t=g;if(!ol(e,g)){if(al(e))throw Error(l(418));g=an(t.nextSibling);var I=tl;g&&ol(e,g)?Cl(I,t):(e.flags=-4097&e.flags|2,nl=!1,tl=e)}}else{if(al(e))throw Error(l(418));e.flags=-4097&e.flags|2,nl=!1,tl=e}}}function il(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;tl=e}function cl(e){if(e!==tl)return!1;if(!nl)return il(e),nl=!0,!1;var g;if((g=3!==e.tag)&&!(g=5!==e.tag)&&(g="head"!==(g=e.type)&&"body"!==g&&!gn(e.type,e.memoizedProps)),g&&(g=Il)){if(al(e))throw Al(),Error(l(418));for(;g;)Cl(e,g),g=an(g.nextSibling)}if(il(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(l(317));e:{for(e=e.nextSibling,g=0;e;){if(8===e.nodeType){var t=e.data;if("/$"===t){if(0===g){Il=an(e.nextSibling);break e}g--}else"$"!==t&&"$!"!==t&&"$?"!==t||g++}e=e.nextSibling}Il=null}}else Il=tl?an(e.stateNode.nextSibling):null;return!0}function Al(){for(var e=Il;e;)e=an(e.nextSibling)}function dl(){Il=tl=null,nl=!1}function sl(e){null===ll?ll=[e]:ll.push(e)}var ul=h.ReactCurrentBatchConfig;function ml(e,g,t){if(null!==(e=t.ref)&&"function"!==typeof e&&"object"!==typeof e){if(t._owner){if(t=t._owner){if(1!==t.tag)throw Error(l(309));var I=t.stateNode}if(!I)throw Error(l(147,e));var n=I,C=""+e;return null!==g&&null!==g.ref&&"function"===typeof g.ref&&g.ref._stringRef===C?g.ref:(g=function(e){var g=n.refs;null===e?delete g[C]:g[C]=e},g._stringRef=C,g)}if("string"!==typeof e)throw Error(l(284));if(!t._owner)throw Error(l(290,e))}return e}function bl(e,g){throw e=Object.prototype.toString.call(g),Error(l(31,"[object Object]"===e?"object with keys {"+Object.keys(g).join(", ")+"}":e))}function Zl(e){return(0,e._init)(e._payload)}function pl(e){function g(g,t){if(e){var I=g.deletions;null===I?(g.deletions=[t],g.flags|=16):I.push(t)}}function t(t,I){if(!e)return null;for(;null!==I;)g(t,I),I=I.sibling;return null}function I(e,g){for(e=new Map;null!==g;)null!==g.key?e.set(g.key,g):e.set(g.index,g),g=g.sibling;return e}function n(e,g){return(e=Yr(e,g)).index=0,e.sibling=null,e}function C(g,t,I){return g.index=I,e?null!==(I=g.alternate)?(I=I.index)<t?(g.flags|=2,t):I:(g.flags|=2,t):(g.flags|=1048576,t)}function o(g){return e&&null===g.alternate&&(g.flags|=2),g}function a(e,g,t,I){return null===g||6!==g.tag?((g=Fr(t,e.mode,I)).return=e,g):((g=n(g,t)).return=e,g)}function r(e,g,t,I){var l=t.type;return l===B?c(e,g,t.props.children,I,t.key):null!==g&&(g.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===J&&Zl(l)===g.type)?((I=n(g,t.props)).ref=ml(e,g,t),I.return=e,I):((I=wr(t.type,t.key,t.props,null,e.mode,I)).ref=ml(e,g,t),I.return=e,I)}function i(e,g,t,I){return null===g||4!==g.tag||g.stateNode.containerInfo!==t.containerInfo||g.stateNode.implementation!==t.implementation?((g=Kr(t,e.mode,I)).return=e,g):((g=n(g,t.children||[])).return=e,g)}function c(e,g,t,I,l){return null===g||7!==g.tag?((g=Hr(t,e.mode,I,l)).return=e,g):((g=n(g,t)).return=e,g)}function A(e,g,t){if("string"===typeof g&&""!==g||"number"===typeof g)return(g=Fr(""+g,e.mode,t)).return=e,g;if("object"===typeof g&&null!==g){switch(g.$$typeof){case G:return(t=wr(g.type,g.key,g.props,null,e.mode,t)).ref=ml(e,null,g),t.return=e,t;case y:return(g=Kr(g,e.mode,t)).return=e,g;case J:return A(e,(0,g._init)(g._payload),t)}if(ge(g)||H(g))return(g=Hr(g,e.mode,t,null)).return=e,g;bl(e,g)}return null}function d(e,g,t,I){var n=null!==g?g.key:null;if("string"===typeof t&&""!==t||"number"===typeof t)return null!==n?null:a(e,g,""+t,I);if("object"===typeof t&&null!==t){switch(t.$$typeof){case G:return t.key===n?r(e,g,t,I):null;case y:return t.key===n?i(e,g,t,I):null;case J:return d(e,g,(n=t._init)(t._payload),I)}if(ge(t)||H(t))return null!==n?null:c(e,g,t,I,null);bl(e,t)}return null}function s(e,g,t,I,n){if("string"===typeof I&&""!==I||"number"===typeof I)return a(g,e=e.get(t)||null,""+I,n);if("object"===typeof I&&null!==I){switch(I.$$typeof){case G:return r(g,e=e.get(null===I.key?t:I.key)||null,I,n);case y:return i(g,e=e.get(null===I.key?t:I.key)||null,I,n);case J:return s(e,g,t,(0,I._init)(I._payload),n)}if(ge(I)||H(I))return c(g,e=e.get(t)||null,I,n,null);bl(g,I)}return null}function u(n,l,o,a){for(var r=null,i=null,c=l,u=l=0,m=null;null!==c&&u<o.length;u++){c.index>u?(m=c,c=null):m=c.sibling;var b=d(n,c,o[u],a);if(null===b){null===c&&(c=m);break}e&&c&&null===b.alternate&&g(n,c),l=C(b,l,u),null===i?r=b:i.sibling=b,i=b,c=m}if(u===o.length)return t(n,c),nl&&$n(n,u),r;if(null===c){for(;u<o.length;u++)null!==(c=A(n,o[u],a))&&(l=C(c,l,u),null===i?r=c:i.sibling=c,i=c);return nl&&$n(n,u),r}for(c=I(n,c);u<o.length;u++)null!==(m=s(c,n,u,o[u],a))&&(e&&null!==m.alternate&&c.delete(null===m.key?u:m.key),l=C(m,l,u),null===i?r=m:i.sibling=m,i=m);return e&&c.forEach((function(e){return g(n,e)})),nl&&$n(n,u),r}function m(n,o,a,r){var i=H(a);if("function"!==typeof i)throw Error(l(150));if(null==(a=i.call(a)))throw Error(l(151));for(var c=i=null,u=o,m=o=0,b=null,Z=a.next();null!==u&&!Z.done;m++,Z=a.next()){u.index>m?(b=u,u=null):b=u.sibling;var p=d(n,u,Z.value,r);if(null===p){null===u&&(u=b);break}e&&u&&null===p.alternate&&g(n,u),o=C(p,o,m),null===c?i=p:c.sibling=p,c=p,u=b}if(Z.done)return t(n,u),nl&&$n(n,m),i;if(null===u){for(;!Z.done;m++,Z=a.next())null!==(Z=A(n,Z.value,r))&&(o=C(Z,o,m),null===c?i=Z:c.sibling=Z,c=Z);return nl&&$n(n,m),i}for(u=I(n,u);!Z.done;m++,Z=a.next())null!==(Z=s(u,n,m,Z.value,r))&&(e&&null!==Z.alternate&&u.delete(null===Z.key?m:Z.key),o=C(Z,o,m),null===c?i=Z:c.sibling=Z,c=Z);return e&&u.forEach((function(e){return g(n,e)})),nl&&$n(n,m),i}return function e(I,l,C,a){if("object"===typeof C&&null!==C&&C.type===B&&null===C.key&&(C=C.props.children),"object"===typeof C&&null!==C){switch(C.$$typeof){case G:e:{for(var r=C.key,i=l;null!==i;){if(i.key===r){if((r=C.type)===B){if(7===i.tag){t(I,i.sibling),(l=n(i,C.props.children)).return=I,I=l;break e}}else if(i.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===J&&Zl(r)===i.type){t(I,i.sibling),(l=n(i,C.props)).ref=ml(I,i,C),l.return=I,I=l;break e}t(I,i);break}g(I,i),i=i.sibling}C.type===B?((l=Hr(C.props.children,I.mode,a,C.key)).return=I,I=l):((a=wr(C.type,C.key,C.props,null,I.mode,a)).ref=ml(I,l,C),a.return=I,I=a)}return o(I);case y:e:{for(i=C.key;null!==l;){if(l.key===i){if(4===l.tag&&l.stateNode.containerInfo===C.containerInfo&&l.stateNode.implementation===C.implementation){t(I,l.sibling),(l=n(l,C.children||[])).return=I,I=l;break e}t(I,l);break}g(I,l),l=l.sibling}(l=Kr(C,I.mode,a)).return=I,I=l}return o(I);case J:return e(I,l,(i=C._init)(C._payload),a)}if(ge(C))return u(I,l,C,a);if(H(C))return m(I,l,C,a);bl(I,C)}return"string"===typeof C&&""!==C||"number"===typeof C?(C=""+C,null!==l&&6===l.tag?(t(I,l.sibling),(l=n(l,C)).return=I,I=l):(t(I,l),(l=Fr(C,I.mode,a)).return=I,I=l),o(I)):t(I,l)}}var hl=pl(!0),Gl=pl(!1),yl=Sn(null),Bl=null,Sl=null,Wl=null;function Vl(){Wl=Sl=Bl=null}function vl(e){var g=yl.current;Wn(yl),e._currentValue=g}function Rl(e,g,t){for(;null!==e;){var I=e.alternate;if((e.childLanes&g)!==g?(e.childLanes|=g,null!==I&&(I.childLanes|=g)):null!==I&&(I.childLanes&g)!==g&&(I.childLanes|=g),e===t)break;e=e.return}}function fl(e,g){Bl=e,Wl=Sl=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&g)&&(po=!0),e.firstContext=null)}function Xl(e){var g=e._currentValue;if(Wl!==e)if(e={context:e,memoizedValue:g,next:null},null===Sl){if(null===Bl)throw Error(l(308));Sl=e,Bl.dependencies={lanes:0,firstContext:e}}else Sl=Sl.next=e;return g}var kl=null;function Jl(e){null===kl?kl=[e]:kl.push(e)}function Yl(e,g,t,I){var n=g.interleaved;return null===n?(t.next=t,Jl(g)):(t.next=n.next,n.next=t),g.interleaved=t,wl(e,I)}function wl(e,g){e.lanes|=g;var t=e.alternate;for(null!==t&&(t.lanes|=g),t=e,e=e.return;null!==e;)e.childLanes|=g,null!==(t=e.alternate)&&(t.childLanes|=g),t=e,e=e.return;return 3===t.tag?t.stateNode:null}var Hl=!1;function Nl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fl(e,g){e=e.updateQueue,g.updateQueue===e&&(g.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Kl(e,g){return{eventTime:e,lane:g,tag:0,payload:null,callback:null,next:null}}function xl(e,g,t){var I=e.updateQueue;if(null===I)return null;if(I=I.shared,0!==(2&Ra)){var n=I.pending;return null===n?g.next=g:(g.next=n.next,n.next=g),I.pending=g,wl(e,t)}return null===(n=I.interleaved)?(g.next=g,Jl(I)):(g.next=n.next,n.next=g),I.interleaved=g,wl(e,t)}function Ml(e,g,t){if(null!==(g=g.updateQueue)&&(g=g.shared,0!==(4194240&t))){var I=g.lanes;t|=I&=e.pendingLanes,g.lanes=t,Zg(e,t)}}function zl(e,g){var t=e.updateQueue,I=e.alternate;if(null!==I&&t===(I=I.updateQueue)){var n=null,l=null;if(null!==(t=t.firstBaseUpdate)){do{var C={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};null===l?n=l=C:l=l.next=C,t=t.next}while(null!==t);null===l?n=l=g:l=l.next=g}else n=l=g;return t={baseState:I.baseState,firstBaseUpdate:n,lastBaseUpdate:l,shared:I.shared,effects:I.effects},void(e.updateQueue=t)}null===(e=t.lastBaseUpdate)?t.firstBaseUpdate=g:e.next=g,t.lastBaseUpdate=g}function El(e,g,t,I){var n=e.updateQueue;Hl=!1;var l=n.firstBaseUpdate,C=n.lastBaseUpdate,o=n.shared.pending;if(null!==o){n.shared.pending=null;var a=o,r=a.next;a.next=null,null===C?l=r:C.next=r,C=a;var i=e.alternate;null!==i&&((o=(i=i.updateQueue).lastBaseUpdate)!==C&&(null===o?i.firstBaseUpdate=r:o.next=r,i.lastBaseUpdate=a))}if(null!==l){var c=n.baseState;for(C=0,i=r=a=null,o=l;;){var A=o.lane,d=o.eventTime;if((I&A)===A){null!==i&&(i=i.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var s=e,u=o;switch(A=g,d=t,u.tag){case 1:if("function"===typeof(s=u.payload)){c=s.call(d,c,A);break e}c=s;break e;case 3:s.flags=-65537&s.flags|128;case 0:if(null===(A="function"===typeof(s=u.payload)?s.call(d,c,A):s)||void 0===A)break e;c=F({},c,A);break e;case 2:Hl=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(A=n.effects)?n.effects=[o]:A.push(o))}else d={eventTime:d,lane:A,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===i?(r=i=d,a=c):i=i.next=d,C|=A;if(null===(o=o.next)){if(null===(o=n.shared.pending))break;o=(A=o).next,A.next=null,n.lastBaseUpdate=A,n.shared.pending=null}}if(null===i&&(a=c),n.baseState=a,n.firstBaseUpdate=r,n.lastBaseUpdate=i,null!==(g=n.shared.interleaved)){n=g;do{C|=n.lane,n=n.next}while(n!==g)}else null===l&&(n.shared.lanes=0);Na|=C,e.lanes=C,e.memoizedState=c}}function Dl(e,g,t){if(e=g.effects,g.effects=null,null!==e)for(g=0;g<e.length;g++){var I=e[g],n=I.callback;if(null!==n){if(I.callback=null,I=t,"function"!==typeof n)throw Error(l(191,n));n.call(I)}}}var Ul={},Tl=Sn(Ul),Ll=Sn(Ul),Ql=Sn(Ul);function jl(e){if(e===Ul)throw Error(l(174));return e}function Pl(e,g){switch(Vn(Ql,g),Vn(Ll,e),Vn(Tl,Ul),e=g.nodeType){case 9:case 11:g=(g=g.documentElement)?g.namespaceURI:ae(null,"");break;default:g=ae(g=(e=8===e?g.parentNode:g).namespaceURI||null,e=e.tagName)}Wn(Tl),Vn(Tl,g)}function Ol(){Wn(Tl),Wn(Ll),Wn(Ql)}function ql(e){jl(Ql.current);var g=jl(Tl.current),t=ae(g,e.type);g!==t&&(Vn(Ll,e),Vn(Tl,t))}function $l(e){Ll.current===e&&(Wn(Tl),Wn(Ll))}var _l=Sn(0);function eC(e){for(var g=e;null!==g;){if(13===g.tag){var t=g.memoizedState;if(null!==t&&(null===(t=t.dehydrated)||"$?"===t.data||"$!"===t.data))return g}else if(19===g.tag&&void 0!==g.memoizedProps.revealOrder){if(0!==(128&g.flags))return g}else if(null!==g.child){g.child.return=g,g=g.child;continue}if(g===e)break;for(;null===g.sibling;){if(null===g.return||g.return===e)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var gC=[];function tC(){for(var e=0;e<gC.length;e++)gC[e]._workInProgressVersionPrimary=null;gC.length=0}var IC=h.ReactCurrentDispatcher,nC=h.ReactCurrentBatchConfig,lC=0,CC=null,oC=null,aC=null,rC=!1,iC=!1,cC=0,AC=0;function dC(){throw Error(l(321))}function sC(e,g){if(null===g)return!1;for(var t=0;t<g.length&&t<e.length;t++)if(!CI(e[t],g[t]))return!1;return!0}function uC(e,g,t,I,n,C){if(lC=C,CC=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,IC.current=null===e||null===e.memoizedState?$C:_C,e=t(I,n),iC){C=0;do{if(iC=!1,cC=0,25<=C)throw Error(l(301));C+=1,aC=oC=null,g.updateQueue=null,IC.current=eo,e=t(I,n)}while(iC)}if(IC.current=qC,g=null!==oC&&null!==oC.next,lC=0,aC=oC=CC=null,rC=!1,g)throw Error(l(300));return e}function mC(){var e=0!==cC;return cC=0,e}function bC(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===aC?CC.memoizedState=aC=e:aC=aC.next=e,aC}function ZC(){if(null===oC){var e=CC.alternate;e=null!==e?e.memoizedState:null}else e=oC.next;var g=null===aC?CC.memoizedState:aC.next;if(null!==g)aC=g,oC=e;else{if(null===e)throw Error(l(310));e={memoizedState:(oC=e).memoizedState,baseState:oC.baseState,baseQueue:oC.baseQueue,queue:oC.queue,next:null},null===aC?CC.memoizedState=aC=e:aC=aC.next=e}return aC}function pC(e,g){return"function"===typeof g?g(e):g}function hC(e){var g=ZC(),t=g.queue;if(null===t)throw Error(l(311));t.lastRenderedReducer=e;var I=oC,n=I.baseQueue,C=t.pending;if(null!==C){if(null!==n){var o=n.next;n.next=C.next,C.next=o}I.baseQueue=n=C,t.pending=null}if(null!==n){C=n.next,I=I.baseState;var a=o=null,r=null,i=C;do{var c=i.lane;if((lC&c)===c)null!==r&&(r=r.next={lane:0,action:i.action,hasEagerState:i.hasEagerState,eagerState:i.eagerState,next:null}),I=i.hasEagerState?i.eagerState:e(I,i.action);else{var A={lane:c,action:i.action,hasEagerState:i.hasEagerState,eagerState:i.eagerState,next:null};null===r?(a=r=A,o=I):r=r.next=A,CC.lanes|=c,Na|=c}i=i.next}while(null!==i&&i!==C);null===r?o=I:r.next=a,CI(I,g.memoizedState)||(po=!0),g.memoizedState=I,g.baseState=o,g.baseQueue=r,t.lastRenderedState=I}if(null!==(e=t.interleaved)){n=e;do{C=n.lane,CC.lanes|=C,Na|=C,n=n.next}while(n!==e)}else null===n&&(t.lanes=0);return[g.memoizedState,t.dispatch]}function GC(e){var g=ZC(),t=g.queue;if(null===t)throw Error(l(311));t.lastRenderedReducer=e;var I=t.dispatch,n=t.pending,C=g.memoizedState;if(null!==n){t.pending=null;var o=n=n.next;do{C=e(C,o.action),o=o.next}while(o!==n);CI(C,g.memoizedState)||(po=!0),g.memoizedState=C,null===g.baseQueue&&(g.baseState=C),t.lastRenderedState=C}return[C,I]}function yC(){}function BC(e,g){var t=CC,I=ZC(),n=g(),C=!CI(I.memoizedState,n);if(C&&(I.memoizedState=n,po=!0),I=I.queue,HC(VC.bind(null,t,I,e),[e]),I.getSnapshot!==g||C||null!==aC&&1&aC.memoizedState.tag){if(t.flags|=2048,XC(9,WC.bind(null,t,I,n,g),void 0,null),null===fa)throw Error(l(349));0!==(30&lC)||SC(t,g,n)}return n}function SC(e,g,t){e.flags|=16384,e={getSnapshot:g,value:t},null===(g=CC.updateQueue)?(g={lastEffect:null,stores:null},CC.updateQueue=g,g.stores=[e]):null===(t=g.stores)?g.stores=[e]:t.push(e)}function WC(e,g,t,I){g.value=t,g.getSnapshot=I,vC(g)&&RC(e)}function VC(e,g,t){return t((function(){vC(g)&&RC(e)}))}function vC(e){var g=e.getSnapshot;e=e.value;try{var t=g();return!CI(e,t)}catch(I){return!0}}function RC(e){var g=wl(e,1);null!==g&&tr(g,e,1,-1)}function fC(e){var g=bC();return"function"===typeof e&&(e=e()),g.memoizedState=g.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pC,lastRenderedState:e},g.queue=e,e=e.dispatch=QC.bind(null,CC,e),[g.memoizedState,e]}function XC(e,g,t,I){return e={tag:e,create:g,destroy:t,deps:I,next:null},null===(g=CC.updateQueue)?(g={lastEffect:null,stores:null},CC.updateQueue=g,g.lastEffect=e.next=e):null===(t=g.lastEffect)?g.lastEffect=e.next=e:(I=t.next,t.next=e,e.next=I,g.lastEffect=e),e}function kC(){return ZC().memoizedState}function JC(e,g,t,I){var n=bC();CC.flags|=e,n.memoizedState=XC(1|g,t,void 0,void 0===I?null:I)}function YC(e,g,t,I){var n=ZC();I=void 0===I?null:I;var l=void 0;if(null!==oC){var C=oC.memoizedState;if(l=C.destroy,null!==I&&sC(I,C.deps))return void(n.memoizedState=XC(g,t,l,I))}CC.flags|=e,n.memoizedState=XC(1|g,t,l,I)}function wC(e,g){return JC(8390656,8,e,g)}function HC(e,g){return YC(2048,8,e,g)}function NC(e,g){return YC(4,2,e,g)}function FC(e,g){return YC(4,4,e,g)}function KC(e,g){return"function"===typeof g?(e=e(),g(e),function(){g(null)}):null!==g&&void 0!==g?(e=e(),g.current=e,function(){g.current=null}):void 0}function xC(e,g,t){return t=null!==t&&void 0!==t?t.concat([e]):null,YC(4,4,KC.bind(null,g,e),t)}function MC(){}function zC(e,g){var t=ZC();g=void 0===g?null:g;var I=t.memoizedState;return null!==I&&null!==g&&sC(g,I[1])?I[0]:(t.memoizedState=[e,g],e)}function EC(e,g){var t=ZC();g=void 0===g?null:g;var I=t.memoizedState;return null!==I&&null!==g&&sC(g,I[1])?I[0]:(e=e(),t.memoizedState=[e,g],e)}function DC(e,g,t){return 0===(21&lC)?(e.baseState&&(e.baseState=!1,po=!0),e.memoizedState=t):(CI(t,g)||(t=ug(),CC.lanes|=t,Na|=t,e.baseState=!0),g)}function UC(e,g){var t=pg;pg=0!==t&&4>t?t:4,e(!0);var I=nC.transition;nC.transition={};try{e(!1),g()}finally{pg=t,nC.transition=I}}function TC(){return ZC().memoizedState}function LC(e,g,t){var I=gr(e);if(t={lane:I,action:t,hasEagerState:!1,eagerState:null,next:null},jC(e))PC(g,t);else if(null!==(t=Yl(e,g,t,I))){tr(t,e,I,er()),OC(t,g,I)}}function QC(e,g,t){var I=gr(e),n={lane:I,action:t,hasEagerState:!1,eagerState:null,next:null};if(jC(e))PC(g,n);else{var l=e.alternate;if(0===e.lanes&&(null===l||0===l.lanes)&&null!==(l=g.lastRenderedReducer))try{var C=g.lastRenderedState,o=l(C,t);if(n.hasEagerState=!0,n.eagerState=o,CI(o,C)){var a=g.interleaved;return null===a?(n.next=n,Jl(g)):(n.next=a.next,a.next=n),void(g.interleaved=n)}}catch(r){}null!==(t=Yl(e,g,n,I))&&(tr(t,e,I,n=er()),OC(t,g,I))}}function jC(e){var g=e.alternate;return e===CC||null!==g&&g===CC}function PC(e,g){iC=rC=!0;var t=e.pending;null===t?g.next=g:(g.next=t.next,t.next=g),e.pending=g}function OC(e,g,t){if(0!==(4194240&t)){var I=g.lanes;t|=I&=e.pendingLanes,g.lanes=t,Zg(e,t)}}var qC={readContext:Xl,useCallback:dC,useContext:dC,useEffect:dC,useImperativeHandle:dC,useInsertionEffect:dC,useLayoutEffect:dC,useMemo:dC,useReducer:dC,useRef:dC,useState:dC,useDebugValue:dC,useDeferredValue:dC,useTransition:dC,useMutableSource:dC,useSyncExternalStore:dC,useId:dC,unstable_isNewReconciler:!1},$C={readContext:Xl,useCallback:function(e,g){return bC().memoizedState=[e,void 0===g?null:g],e},useContext:Xl,useEffect:wC,useImperativeHandle:function(e,g,t){return t=null!==t&&void 0!==t?t.concat([e]):null,JC(4194308,4,KC.bind(null,g,e),t)},useLayoutEffect:function(e,g){return JC(4194308,4,e,g)},useInsertionEffect:function(e,g){return JC(4,2,e,g)},useMemo:function(e,g){var t=bC();return g=void 0===g?null:g,e=e(),t.memoizedState=[e,g],e},useReducer:function(e,g,t){var I=bC();return g=void 0!==t?t(g):g,I.memoizedState=I.baseState=g,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:g},I.queue=e,e=e.dispatch=LC.bind(null,CC,e),[I.memoizedState,e]},useRef:function(e){return e={current:e},bC().memoizedState=e},useState:fC,useDebugValue:MC,useDeferredValue:function(e){return bC().memoizedState=e},useTransition:function(){var e=fC(!1),g=e[0];return e=UC.bind(null,e[1]),bC().memoizedState=e,[g,e]},useMutableSource:function(){},useSyncExternalStore:function(e,g,t){var I=CC,n=bC();if(nl){if(void 0===t)throw Error(l(407));t=t()}else{if(t=g(),null===fa)throw Error(l(349));0!==(30&lC)||SC(I,g,t)}n.memoizedState=t;var C={value:t,getSnapshot:g};return n.queue=C,wC(VC.bind(null,I,C,e),[e]),I.flags|=2048,XC(9,WC.bind(null,I,C,t,g),void 0,null),t},useId:function(){var e=bC(),g=fa.identifierPrefix;if(nl){var t=qn;g=":"+g+"R"+(t=(On&~(1<<32-Cg(On)-1)).toString(32)+t),0<(t=cC++)&&(g+="H"+t.toString(32)),g+=":"}else g=":"+g+"r"+(t=AC++).toString(32)+":";return e.memoizedState=g},unstable_isNewReconciler:!1},_C={readContext:Xl,useCallback:zC,useContext:Xl,useEffect:HC,useImperativeHandle:xC,useInsertionEffect:NC,useLayoutEffect:FC,useMemo:EC,useReducer:hC,useRef:kC,useState:function(){return hC(pC)},useDebugValue:MC,useDeferredValue:function(e){return DC(ZC(),oC.memoizedState,e)},useTransition:function(){return[hC(pC)[0],ZC().memoizedState]},useMutableSource:yC,useSyncExternalStore:BC,useId:TC,unstable_isNewReconciler:!1},eo={readContext:Xl,useCallback:zC,useContext:Xl,useEffect:HC,useImperativeHandle:xC,useInsertionEffect:NC,useLayoutEffect:FC,useMemo:EC,useReducer:GC,useRef:kC,useState:function(){return GC(pC)},useDebugValue:MC,useDeferredValue:function(e){var g=ZC();return null===oC?g.memoizedState=e:DC(g,oC.memoizedState,e)},useTransition:function(){return[GC(pC)[0],ZC().memoizedState]},useMutableSource:yC,useSyncExternalStore:BC,useId:TC,unstable_isNewReconciler:!1};function go(e,g){if(e&&e.defaultProps){for(var t in g=F({},g),e=e.defaultProps)void 0===g[t]&&(g[t]=e[t]);return g}return g}function to(e,g,t,I){t=null===(t=t(I,g=e.memoizedState))||void 0===t?g:F({},g,t),e.memoizedState=t,0===e.lanes&&(e.updateQueue.baseState=t)}var Io={isMounted:function(e){return!!(e=e._reactInternals)&&Ee(e)===e},enqueueSetState:function(e,g,t){e=e._reactInternals;var I=er(),n=gr(e),l=Kl(I,n);l.payload=g,void 0!==t&&null!==t&&(l.callback=t),null!==(g=xl(e,l,n))&&(tr(g,e,n,I),Ml(g,e,n))},enqueueReplaceState:function(e,g,t){e=e._reactInternals;var I=er(),n=gr(e),l=Kl(I,n);l.tag=1,l.payload=g,void 0!==t&&null!==t&&(l.callback=t),null!==(g=xl(e,l,n))&&(tr(g,e,n,I),Ml(g,e,n))},enqueueForceUpdate:function(e,g){e=e._reactInternals;var t=er(),I=gr(e),n=Kl(t,I);n.tag=2,void 0!==g&&null!==g&&(n.callback=g),null!==(g=xl(e,n,I))&&(tr(g,e,I,t),Ml(g,e,I))}};function no(e,g,t,I,n,l,C){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(I,l,C):!g.prototype||!g.prototype.isPureReactComponent||(!oI(t,I)||!oI(n,l))}function lo(e,g,t){var I=!1,n=vn,l=g.contextType;return"object"===typeof l&&null!==l?l=Xl(l):(n=Jn(g)?Xn:Rn.current,l=(I=null!==(I=g.contextTypes)&&void 0!==I)?kn(e,n):vn),g=new g(t,l),e.memoizedState=null!==g.state&&void 0!==g.state?g.state:null,g.updater=Io,e.stateNode=g,g._reactInternals=e,I&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=l),g}function Co(e,g,t,I){e=g.state,"function"===typeof g.componentWillReceiveProps&&g.componentWillReceiveProps(t,I),"function"===typeof g.UNSAFE_componentWillReceiveProps&&g.UNSAFE_componentWillReceiveProps(t,I),g.state!==e&&Io.enqueueReplaceState(g,g.state,null)}function oo(e,g,t,I){var n=e.stateNode;n.props=t,n.state=e.memoizedState,n.refs={},Nl(e);var l=g.contextType;"object"===typeof l&&null!==l?n.context=Xl(l):(l=Jn(g)?Xn:Rn.current,n.context=kn(e,l)),n.state=e.memoizedState,"function"===typeof(l=g.getDerivedStateFromProps)&&(to(e,g,l,t),n.state=e.memoizedState),"function"===typeof g.getDerivedStateFromProps||"function"===typeof n.getSnapshotBeforeUpdate||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||(g=n.state,"function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),g!==n.state&&Io.enqueueReplaceState(n,n.state,null),El(e,t,n,I),n.state=e.memoizedState),"function"===typeof n.componentDidMount&&(e.flags|=4194308)}function ao(e,g){try{var t="",I=g;do{t+=z(I),I=I.return}while(I);var n=t}catch(l){n="\nError generating stack: "+l.message+"\n"+l.stack}return{value:e,source:g,stack:n,digest:null}}function ro(e,g,t){return{value:e,source:null,stack:null!=t?t:null,digest:null!=g?g:null}}function io(e,g){try{console.error(g.value)}catch(t){setTimeout((function(){throw t}))}}var co="function"===typeof WeakMap?WeakMap:Map;function Ao(e,g,t){(t=Kl(-1,t)).tag=3,t.payload={element:null};var I=g.value;return t.callback=function(){Ua||(Ua=!0,Ta=I),io(0,g)},t}function so(e,g,t){(t=Kl(-1,t)).tag=3;var I=e.type.getDerivedStateFromError;if("function"===typeof I){var n=g.value;t.payload=function(){return I(n)},t.callback=function(){io(0,g)}}var l=e.stateNode;return null!==l&&"function"===typeof l.componentDidCatch&&(t.callback=function(){io(0,g),"function"!==typeof I&&(null===La?La=new Set([this]):La.add(this));var e=g.stack;this.componentDidCatch(g.value,{componentStack:null!==e?e:""})}),t}function uo(e,g,t){var I=e.pingCache;if(null===I){I=e.pingCache=new co;var n=new Set;I.set(g,n)}else void 0===(n=I.get(g))&&(n=new Set,I.set(g,n));n.has(t)||(n.add(t),e=Wr.bind(null,e,g,t),g.then(e,e))}function mo(e){do{var g;if((g=13===e.tag)&&(g=null===(g=e.memoizedState)||null!==g.dehydrated),g)return e;e=e.return}while(null!==e);return null}function bo(e,g,t,I,n){return 0===(1&e.mode)?(e===g?e.flags|=65536:(e.flags|=128,t.flags|=131072,t.flags&=-52805,1===t.tag&&(null===t.alternate?t.tag=17:((g=Kl(-1,1)).tag=2,xl(t,g,1))),t.lanes|=1),e):(e.flags|=65536,e.lanes=n,e)}var Zo=h.ReactCurrentOwner,po=!1;function ho(e,g,t,I){g.child=null===e?Gl(g,null,t,I):hl(g,e.child,t,I)}function Go(e,g,t,I,n){t=t.render;var l=g.ref;return fl(g,n),I=uC(e,g,t,I,l,n),t=mC(),null===e||po?(nl&&t&&el(g),g.flags|=1,ho(e,g,I,n),g.child):(g.updateQueue=e.updateQueue,g.flags&=-2053,e.lanes&=~n,Uo(e,g,n))}function yo(e,g,t,I,n){if(null===e){var l=t.type;return"function"!==typeof l||Jr(l)||void 0!==l.defaultProps||null!==t.compare||void 0!==t.defaultProps?((e=wr(t.type,null,I,g,g.mode,n)).ref=g.ref,e.return=g,g.child=e):(g.tag=15,g.type=l,Bo(e,g,l,I,n))}if(l=e.child,0===(e.lanes&n)){var C=l.memoizedProps;if((t=null!==(t=t.compare)?t:oI)(C,I)&&e.ref===g.ref)return Uo(e,g,n)}return g.flags|=1,(e=Yr(l,I)).ref=g.ref,e.return=g,g.child=e}function Bo(e,g,t,I,n){if(null!==e){var l=e.memoizedProps;if(oI(l,I)&&e.ref===g.ref){if(po=!1,g.pendingProps=I=l,0===(e.lanes&n))return g.lanes=e.lanes,Uo(e,g,n);0!==(131072&e.flags)&&(po=!0)}}return Vo(e,g,t,I,n)}function So(e,g,t){var I=g.pendingProps,n=I.children,l=null!==e?e.memoizedState:null;if("hidden"===I.mode)if(0===(1&g.mode))g.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vn(Ya,Ja),Ja|=t;else{if(0===(1073741824&t))return e=null!==l?l.baseLanes|t:t,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:e,cachePool:null,transitions:null},g.updateQueue=null,Vn(Ya,Ja),Ja|=e,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},I=null!==l?l.baseLanes:t,Vn(Ya,Ja),Ja|=I}else null!==l?(I=l.baseLanes|t,g.memoizedState=null):I=t,Vn(Ya,Ja),Ja|=I;return ho(e,g,n,t),g.child}function Wo(e,g){var t=g.ref;(null===e&&null!==t||null!==e&&e.ref!==t)&&(g.flags|=512,g.flags|=2097152)}function Vo(e,g,t,I,n){var l=Jn(t)?Xn:Rn.current;return l=kn(g,l),fl(g,n),t=uC(e,g,t,I,l,n),I=mC(),null===e||po?(nl&&I&&el(g),g.flags|=1,ho(e,g,t,n),g.child):(g.updateQueue=e.updateQueue,g.flags&=-2053,e.lanes&=~n,Uo(e,g,n))}function vo(e,g,t,I,n){if(Jn(t)){var l=!0;Nn(g)}else l=!1;if(fl(g,n),null===g.stateNode)Do(e,g),lo(g,t,I),oo(g,t,I,n),I=!0;else if(null===e){var C=g.stateNode,o=g.memoizedProps;C.props=o;var a=C.context,r=t.contextType;"object"===typeof r&&null!==r?r=Xl(r):r=kn(g,r=Jn(t)?Xn:Rn.current);var i=t.getDerivedStateFromProps,c="function"===typeof i||"function"===typeof C.getSnapshotBeforeUpdate;c||"function"!==typeof C.UNSAFE_componentWillReceiveProps&&"function"!==typeof C.componentWillReceiveProps||(o!==I||a!==r)&&Co(g,C,I,r),Hl=!1;var A=g.memoizedState;C.state=A,El(g,I,C,n),a=g.memoizedState,o!==I||A!==a||fn.current||Hl?("function"===typeof i&&(to(g,t,i,I),a=g.memoizedState),(o=Hl||no(g,t,o,I,A,a,r))?(c||"function"!==typeof C.UNSAFE_componentWillMount&&"function"!==typeof C.componentWillMount||("function"===typeof C.componentWillMount&&C.componentWillMount(),"function"===typeof C.UNSAFE_componentWillMount&&C.UNSAFE_componentWillMount()),"function"===typeof C.componentDidMount&&(g.flags|=4194308)):("function"===typeof C.componentDidMount&&(g.flags|=4194308),g.memoizedProps=I,g.memoizedState=a),C.props=I,C.state=a,C.context=r,I=o):("function"===typeof C.componentDidMount&&(g.flags|=4194308),I=!1)}else{C=g.stateNode,Fl(e,g),o=g.memoizedProps,r=g.type===g.elementType?o:go(g.type,o),C.props=r,c=g.pendingProps,A=C.context,"object"===typeof(a=t.contextType)&&null!==a?a=Xl(a):a=kn(g,a=Jn(t)?Xn:Rn.current);var d=t.getDerivedStateFromProps;(i="function"===typeof d||"function"===typeof C.getSnapshotBeforeUpdate)||"function"!==typeof C.UNSAFE_componentWillReceiveProps&&"function"!==typeof C.componentWillReceiveProps||(o!==c||A!==a)&&Co(g,C,I,a),Hl=!1,A=g.memoizedState,C.state=A,El(g,I,C,n);var s=g.memoizedState;o!==c||A!==s||fn.current||Hl?("function"===typeof d&&(to(g,t,d,I),s=g.memoizedState),(r=Hl||no(g,t,r,I,A,s,a)||!1)?(i||"function"!==typeof C.UNSAFE_componentWillUpdate&&"function"!==typeof C.componentWillUpdate||("function"===typeof C.componentWillUpdate&&C.componentWillUpdate(I,s,a),"function"===typeof C.UNSAFE_componentWillUpdate&&C.UNSAFE_componentWillUpdate(I,s,a)),"function"===typeof C.componentDidUpdate&&(g.flags|=4),"function"===typeof C.getSnapshotBeforeUpdate&&(g.flags|=1024)):("function"!==typeof C.componentDidUpdate||o===e.memoizedProps&&A===e.memoizedState||(g.flags|=4),"function"!==typeof C.getSnapshotBeforeUpdate||o===e.memoizedProps&&A===e.memoizedState||(g.flags|=1024),g.memoizedProps=I,g.memoizedState=s),C.props=I,C.state=s,C.context=a,I=r):("function"!==typeof C.componentDidUpdate||o===e.memoizedProps&&A===e.memoizedState||(g.flags|=4),"function"!==typeof C.getSnapshotBeforeUpdate||o===e.memoizedProps&&A===e.memoizedState||(g.flags|=1024),I=!1)}return Ro(e,g,t,I,l,n)}function Ro(e,g,t,I,n,l){Wo(e,g);var C=0!==(128&g.flags);if(!I&&!C)return n&&Fn(g,t,!1),Uo(e,g,l);I=g.stateNode,Zo.current=g;var o=C&&"function"!==typeof t.getDerivedStateFromError?null:I.render();return g.flags|=1,null!==e&&C?(g.child=hl(g,e.child,null,l),g.child=hl(g,null,o,l)):ho(e,g,o,l),g.memoizedState=I.state,n&&Fn(g,t,!0),g.child}function fo(e){var g=e.stateNode;g.pendingContext?wn(0,g.pendingContext,g.pendingContext!==g.context):g.context&&wn(0,g.context,!1),Pl(e,g.containerInfo)}function Xo(e,g,t,I,n){return dl(),sl(n),g.flags|=256,ho(e,g,t,I),g.child}var ko,Jo,Yo,wo,Ho={dehydrated:null,treeContext:null,retryLane:0};function No(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fo(e,g,t){var I,n=g.pendingProps,C=_l.current,o=!1,a=0!==(128&g.flags);if((I=a)||(I=(null===e||null!==e.memoizedState)&&0!==(2&C)),I?(o=!0,g.flags&=-129):null!==e&&null===e.memoizedState||(C|=1),Vn(_l,1&C),null===e)return rl(g),null!==(e=g.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&g.mode)?g.lanes=1:"$!"===e.data?g.lanes=8:g.lanes=1073741824,null):(a=n.children,e=n.fallback,o?(n=g.mode,o=g.child,a={mode:"hidden",children:a},0===(1&n)&&null!==o?(o.childLanes=0,o.pendingProps=a):o=Nr(a,n,0,null),e=Hr(e,n,t,null),o.return=g,e.return=g,o.sibling=e,g.child=o,g.child.memoizedState=No(t),g.memoizedState=Ho,e):Ko(g,a));if(null!==(C=e.memoizedState)&&null!==(I=C.dehydrated))return function(e,g,t,I,n,C,o){if(t)return 256&g.flags?(g.flags&=-257,xo(e,g,o,I=ro(Error(l(422))))):null!==g.memoizedState?(g.child=e.child,g.flags|=128,null):(C=I.fallback,n=g.mode,I=Nr({mode:"visible",children:I.children},n,0,null),(C=Hr(C,n,o,null)).flags|=2,I.return=g,C.return=g,I.sibling=C,g.child=I,0!==(1&g.mode)&&hl(g,e.child,null,o),g.child.memoizedState=No(o),g.memoizedState=Ho,C);if(0===(1&g.mode))return xo(e,g,o,null);if("$!"===n.data){if(I=n.nextSibling&&n.nextSibling.dataset)var a=I.dgst;return I=a,xo(e,g,o,I=ro(C=Error(l(419)),I,void 0))}if(a=0!==(o&e.childLanes),po||a){if(null!==(I=fa)){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}0!==(n=0!==(n&(I.suspendedLanes|o))?0:n)&&n!==C.retryLane&&(C.retryLane=n,wl(e,n),tr(I,e,n,-1))}return ur(),xo(e,g,o,I=ro(Error(l(421))))}return"$?"===n.data?(g.flags|=128,g.child=e.child,g=vr.bind(null,e),n._reactRetry=g,null):(e=C.treeContext,Il=an(n.nextSibling),tl=g,nl=!0,ll=null,null!==e&&(Qn[jn++]=On,Qn[jn++]=qn,Qn[jn++]=Pn,On=e.id,qn=e.overflow,Pn=g),g=Ko(g,I.children),g.flags|=4096,g)}(e,g,a,n,I,C,t);if(o){o=n.fallback,a=g.mode,I=(C=e.child).sibling;var r={mode:"hidden",children:n.children};return 0===(1&a)&&g.child!==C?((n=g.child).childLanes=0,n.pendingProps=r,g.deletions=null):(n=Yr(C,r)).subtreeFlags=14680064&C.subtreeFlags,null!==I?o=Yr(I,o):(o=Hr(o,a,t,null)).flags|=2,o.return=g,n.return=g,n.sibling=o,g.child=n,n=o,o=g.child,a=null===(a=e.child.memoizedState)?No(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~t,g.memoizedState=Ho,n}return e=(o=e.child).sibling,n=Yr(o,{mode:"visible",children:n.children}),0===(1&g.mode)&&(n.lanes=t),n.return=g,n.sibling=null,null!==e&&(null===(t=g.deletions)?(g.deletions=[e],g.flags|=16):t.push(e)),g.child=n,g.memoizedState=null,n}function Ko(e,g){return(g=Nr({mode:"visible",children:g},e.mode,0,null)).return=e,e.child=g}function xo(e,g,t,I){return null!==I&&sl(I),hl(g,e.child,null,t),(e=Ko(g,g.pendingProps.children)).flags|=2,g.memoizedState=null,e}function Mo(e,g,t){e.lanes|=g;var I=e.alternate;null!==I&&(I.lanes|=g),Rl(e.return,g,t)}function zo(e,g,t,I,n){var l=e.memoizedState;null===l?e.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:I,tail:t,tailMode:n}:(l.isBackwards=g,l.rendering=null,l.renderingStartTime=0,l.last=I,l.tail=t,l.tailMode=n)}function Eo(e,g,t){var I=g.pendingProps,n=I.revealOrder,l=I.tail;if(ho(e,g,I.children,t),0!==(2&(I=_l.current)))I=1&I|2,g.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=g.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Mo(e,t,g);else if(19===e.tag)Mo(e,t,g);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===g)break e;for(;null===e.sibling;){if(null===e.return||e.return===g)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}I&=1}if(Vn(_l,I),0===(1&g.mode))g.memoizedState=null;else switch(n){case"forwards":for(t=g.child,n=null;null!==t;)null!==(e=t.alternate)&&null===eC(e)&&(n=t),t=t.sibling;null===(t=n)?(n=g.child,g.child=null):(n=t.sibling,t.sibling=null),zo(g,!1,n,t,l);break;case"backwards":for(t=null,n=g.child,g.child=null;null!==n;){if(null!==(e=n.alternate)&&null===eC(e)){g.child=n;break}e=n.sibling,n.sibling=t,t=n,n=e}zo(g,!0,t,null,l);break;case"together":zo(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function Do(e,g){0===(1&g.mode)&&null!==e&&(e.alternate=null,g.alternate=null,g.flags|=2)}function Uo(e,g,t){if(null!==e&&(g.dependencies=e.dependencies),Na|=g.lanes,0===(t&g.childLanes))return null;if(null!==e&&g.child!==e.child)throw Error(l(153));if(null!==g.child){for(t=Yr(e=g.child,e.pendingProps),g.child=t,t.return=g;null!==e.sibling;)e=e.sibling,(t=t.sibling=Yr(e,e.pendingProps)).return=g;t.sibling=null}return g.child}function To(e,g){if(!nl)switch(e.tailMode){case"hidden":g=e.tail;for(var t=null;null!==g;)null!==g.alternate&&(t=g),g=g.sibling;null===t?e.tail=null:t.sibling=null;break;case"collapsed":t=e.tail;for(var I=null;null!==t;)null!==t.alternate&&(I=t),t=t.sibling;null===I?g||null===e.tail?e.tail=null:e.tail.sibling=null:I.sibling=null}}function Lo(e){var g=null!==e.alternate&&e.alternate.child===e.child,t=0,I=0;if(g)for(var n=e.child;null!==n;)t|=n.lanes|n.childLanes,I|=14680064&n.subtreeFlags,I|=14680064&n.flags,n.return=e,n=n.sibling;else for(n=e.child;null!==n;)t|=n.lanes|n.childLanes,I|=n.subtreeFlags,I|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=I,e.childLanes=t,g}function Qo(e,g,t){var I=g.pendingProps;switch(gl(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lo(g),null;case 1:case 17:return Jn(g.type)&&Yn(),Lo(g),null;case 3:return I=g.stateNode,Ol(),Wn(fn),Wn(Rn),tC(),I.pendingContext&&(I.context=I.pendingContext,I.pendingContext=null),null!==e&&null!==e.child||(cl(g)?g.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&g.flags)||(g.flags|=1024,null!==ll&&(Cr(ll),ll=null))),Jo(e,g),Lo(g),null;case 5:$l(g);var n=jl(Ql.current);if(t=g.type,null!==e&&null!=g.stateNode)Yo(e,g,t,I,n),e.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!I){if(null===g.stateNode)throw Error(l(166));return Lo(g),null}if(e=jl(Tl.current),cl(g)){I=g.stateNode,t=g.type;var C=g.memoizedProps;switch(I[An]=g,I[dn]=C,e=0!==(1&g.mode),t){case"dialog":KI("cancel",I),KI("close",I);break;case"iframe":case"object":case"embed":KI("load",I);break;case"video":case"audio":for(n=0;n<wI.length;n++)KI(wI[n],I);break;case"source":KI("error",I);break;case"img":case"image":case"link":KI("error",I),KI("load",I);break;case"details":KI("toggle",I);break;case"input":O(I,C),KI("invalid",I);break;case"select":I._wrapperState={wasMultiple:!!C.multiple},KI("invalid",I);break;case"textarea":ne(I,C),KI("invalid",I)}for(var a in Ze(t,C),n=null,C)if(C.hasOwnProperty(a)){var r=C[a];"children"===a?"string"===typeof r?I.textContent!==r&&(!0!==C.suppressHydrationWarning&&qI(I.textContent,r,e),n=["children",r]):"number"===typeof r&&I.textContent!==""+r&&(!0!==C.suppressHydrationWarning&&qI(I.textContent,r,e),n=["children",""+r]):o.hasOwnProperty(a)&&null!=r&&"onScroll"===a&&KI("scroll",I)}switch(t){case"input":L(I),_(I,C,!0);break;case"textarea":L(I),Ce(I);break;case"select":case"option":break;default:"function"===typeof C.onClick&&(I.onclick=$I)}I=n,g.updateQueue=I,null!==I&&(g.flags|=4)}else{a=9===n.nodeType?n:n.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(t)),"http://www.w3.org/1999/xhtml"===e?"script"===t?((e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof I.is?e=a.createElement(t,{is:I.is}):(e=a.createElement(t),"select"===t&&(a=e,I.multiple?a.multiple=!0:I.size&&(a.size=I.size))):e=a.createElementNS(e,t),e[An]=g,e[dn]=I,ko(e,g,!1,!1),g.stateNode=e;e:{switch(a=pe(t,I),t){case"dialog":KI("cancel",e),KI("close",e),n=I;break;case"iframe":case"object":case"embed":KI("load",e),n=I;break;case"video":case"audio":for(n=0;n<wI.length;n++)KI(wI[n],e);n=I;break;case"source":KI("error",e),n=I;break;case"img":case"image":case"link":KI("error",e),KI("load",e),n=I;break;case"details":KI("toggle",e),n=I;break;case"input":O(e,I),n=P(e,I),KI("invalid",e);break;case"option":default:n=I;break;case"select":e._wrapperState={wasMultiple:!!I.multiple},n=F({},I,{value:void 0}),KI("invalid",e);break;case"textarea":ne(e,I),n=Ie(e,I),KI("invalid",e)}for(C in Ze(t,n),r=n)if(r.hasOwnProperty(C)){var i=r[C];"style"===C?me(e,i):"dangerouslySetInnerHTML"===C?null!=(i=i?i.__html:void 0)&&ce(e,i):"children"===C?"string"===typeof i?("textarea"!==t||""!==i)&&Ae(e,i):"number"===typeof i&&Ae(e,""+i):"suppressContentEditableWarning"!==C&&"suppressHydrationWarning"!==C&&"autoFocus"!==C&&(o.hasOwnProperty(C)?null!=i&&"onScroll"===C&&KI("scroll",e):null!=i&&p(e,C,i,a))}switch(t){case"input":L(e),_(e,I,!1);break;case"textarea":L(e),Ce(e);break;case"option":null!=I.value&&e.setAttribute("value",""+U(I.value));break;case"select":e.multiple=!!I.multiple,null!=(C=I.value)?te(e,!!I.multiple,C,!1):null!=I.defaultValue&&te(e,!!I.multiple,I.defaultValue,!0);break;default:"function"===typeof n.onClick&&(e.onclick=$I)}switch(t){case"button":case"input":case"select":case"textarea":I=!!I.autoFocus;break e;case"img":I=!0;break e;default:I=!1}}I&&(g.flags|=4)}null!==g.ref&&(g.flags|=512,g.flags|=2097152)}return Lo(g),null;case 6:if(e&&null!=g.stateNode)wo(e,g,e.memoizedProps,I);else{if("string"!==typeof I&&null===g.stateNode)throw Error(l(166));if(t=jl(Ql.current),jl(Tl.current),cl(g)){if(I=g.stateNode,t=g.memoizedProps,I[An]=g,(C=I.nodeValue!==t)&&null!==(e=tl))switch(e.tag){case 3:qI(I.nodeValue,t,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&qI(I.nodeValue,t,0!==(1&e.mode))}C&&(g.flags|=4)}else(I=(9===t.nodeType?t:t.ownerDocument).createTextNode(I))[An]=g,g.stateNode=I}return Lo(g),null;case 13:if(Wn(_l),I=g.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(nl&&null!==Il&&0!==(1&g.mode)&&0===(128&g.flags))Al(),dl(),g.flags|=98560,C=!1;else if(C=cl(g),null!==I&&null!==I.dehydrated){if(null===e){if(!C)throw Error(l(318));if(!(C=null!==(C=g.memoizedState)?C.dehydrated:null))throw Error(l(317));C[An]=g}else dl(),0===(128&g.flags)&&(g.memoizedState=null),g.flags|=4;Lo(g),C=!1}else null!==ll&&(Cr(ll),ll=null),C=!0;if(!C)return 65536&g.flags?g:null}return 0!==(128&g.flags)?(g.lanes=t,g):((I=null!==I)!==(null!==e&&null!==e.memoizedState)&&I&&(g.child.flags|=8192,0!==(1&g.mode)&&(null===e||0!==(1&_l.current)?0===wa&&(wa=3):ur())),null!==g.updateQueue&&(g.flags|=4),Lo(g),null);case 4:return Ol(),Jo(e,g),null===e&&zI(g.stateNode.containerInfo),Lo(g),null;case 10:return vl(g.type._context),Lo(g),null;case 19:if(Wn(_l),null===(C=g.memoizedState))return Lo(g),null;if(I=0!==(128&g.flags),null===(a=C.rendering))if(I)To(C,!1);else{if(0!==wa||null!==e&&0!==(128&e.flags))for(e=g.child;null!==e;){if(null!==(a=eC(e))){for(g.flags|=128,To(C,!1),null!==(I=a.updateQueue)&&(g.updateQueue=I,g.flags|=4),g.subtreeFlags=0,I=t,t=g.child;null!==t;)e=I,(C=t).flags&=14680066,null===(a=C.alternate)?(C.childLanes=0,C.lanes=e,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=a.childLanes,C.lanes=a.lanes,C.child=a.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=a.memoizedProps,C.memoizedState=a.memoizedState,C.updateQueue=a.updateQueue,C.type=a.type,e=a.dependencies,C.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),t=t.sibling;return Vn(_l,1&_l.current|2),g.child}e=e.sibling}null!==C.tail&&qe()>Ea&&(g.flags|=128,I=!0,To(C,!1),g.lanes=4194304)}else{if(!I)if(null!==(e=eC(a))){if(g.flags|=128,I=!0,null!==(t=e.updateQueue)&&(g.updateQueue=t,g.flags|=4),To(C,!0),null===C.tail&&"hidden"===C.tailMode&&!a.alternate&&!nl)return Lo(g),null}else 2*qe()-C.renderingStartTime>Ea&&1073741824!==t&&(g.flags|=128,I=!0,To(C,!1),g.lanes=4194304);C.isBackwards?(a.sibling=g.child,g.child=a):(null!==(t=C.last)?t.sibling=a:g.child=a,C.last=a)}return null!==C.tail?(g=C.tail,C.rendering=g,C.tail=g.sibling,C.renderingStartTime=qe(),g.sibling=null,t=_l.current,Vn(_l,I?1&t|2:1&t),g):(Lo(g),null);case 22:case 23:return cr(),I=null!==g.memoizedState,null!==e&&null!==e.memoizedState!==I&&(g.flags|=8192),I&&0!==(1&g.mode)?0!==(1073741824&Ja)&&(Lo(g),6&g.subtreeFlags&&(g.flags|=8192)):Lo(g),null;case 24:case 25:return null}throw Error(l(156,g.tag))}function jo(e,g){switch(gl(g),g.tag){case 1:return Jn(g.type)&&Yn(),65536&(e=g.flags)?(g.flags=-65537&e|128,g):null;case 3:return Ol(),Wn(fn),Wn(Rn),tC(),0!==(65536&(e=g.flags))&&0===(128&e)?(g.flags=-65537&e|128,g):null;case 5:return $l(g),null;case 13:if(Wn(_l),null!==(e=g.memoizedState)&&null!==e.dehydrated){if(null===g.alternate)throw Error(l(340));dl()}return 65536&(e=g.flags)?(g.flags=-65537&e|128,g):null;case 19:return Wn(_l),null;case 4:return Ol(),null;case 10:return vl(g.type._context),null;case 22:case 23:return cr(),null;default:return null}}ko=function(e,g){for(var t=g.child;null!==t;){if(5===t.tag||6===t.tag)e.appendChild(t.stateNode);else if(4!==t.tag&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===g)break;for(;null===t.sibling;){if(null===t.return||t.return===g)return;t=t.return}t.sibling.return=t.return,t=t.sibling}},Jo=function(){},Yo=function(e,g,t,I){var n=e.memoizedProps;if(n!==I){e=g.stateNode,jl(Tl.current);var l,C=null;switch(t){case"input":n=P(e,n),I=P(e,I),C=[];break;case"select":n=F({},n,{value:void 0}),I=F({},I,{value:void 0}),C=[];break;case"textarea":n=Ie(e,n),I=Ie(e,I),C=[];break;default:"function"!==typeof n.onClick&&"function"===typeof I.onClick&&(e.onclick=$I)}for(i in Ze(t,I),t=null,n)if(!I.hasOwnProperty(i)&&n.hasOwnProperty(i)&&null!=n[i])if("style"===i){var a=n[i];for(l in a)a.hasOwnProperty(l)&&(t||(t={}),t[l]="")}else"dangerouslySetInnerHTML"!==i&&"children"!==i&&"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?C||(C=[]):(C=C||[]).push(i,null));for(i in I){var r=I[i];if(a=null!=n?n[i]:void 0,I.hasOwnProperty(i)&&r!==a&&(null!=r||null!=a))if("style"===i)if(a){for(l in a)!a.hasOwnProperty(l)||r&&r.hasOwnProperty(l)||(t||(t={}),t[l]="");for(l in r)r.hasOwnProperty(l)&&a[l]!==r[l]&&(t||(t={}),t[l]=r[l])}else t||(C||(C=[]),C.push(i,t)),t=r;else"dangerouslySetInnerHTML"===i?(r=r?r.__html:void 0,a=a?a.__html:void 0,null!=r&&a!==r&&(C=C||[]).push(i,r)):"children"===i?"string"!==typeof r&&"number"!==typeof r||(C=C||[]).push(i,""+r):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&(o.hasOwnProperty(i)?(null!=r&&"onScroll"===i&&KI("scroll",e),C||a===r||(C=[])):(C=C||[]).push(i,r))}t&&(C=C||[]).push("style",t);var i=C;(g.updateQueue=i)&&(g.flags|=4)}},wo=function(e,g,t,I){t!==I&&(g.flags|=4)};var Po=!1,Oo=!1,qo="function"===typeof WeakSet?WeakSet:Set,$o=null;function _o(e,g){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(I){Sr(e,g,I)}else t.current=null}function ea(e,g,t){try{t()}catch(I){Sr(e,g,I)}}var ga=!1;function ta(e,g,t){var I=g.updateQueue;if(null!==(I=null!==I?I.lastEffect:null)){var n=I=I.next;do{if((n.tag&e)===e){var l=n.destroy;n.destroy=void 0,void 0!==l&&ea(g,t,l)}n=n.next}while(n!==I)}}function Ia(e,g){if(null!==(g=null!==(g=g.updateQueue)?g.lastEffect:null)){var t=g=g.next;do{if((t.tag&e)===e){var I=t.create;t.destroy=I()}t=t.next}while(t!==g)}}function na(e){var g=e.ref;if(null!==g){var t=e.stateNode;e.tag,e=t,"function"===typeof g?g(e):g.current=e}}function la(e){var g=e.alternate;null!==g&&(e.alternate=null,la(g)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(g=e.stateNode)&&(delete g[An],delete g[dn],delete g[un],delete g[mn],delete g[bn])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ca(e){return 5===e.tag||3===e.tag||4===e.tag}function oa(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Ca(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function aa(e,g,t){var I=e.tag;if(5===I||6===I)e=e.stateNode,g?8===t.nodeType?t.parentNode.insertBefore(e,g):t.insertBefore(e,g):(8===t.nodeType?(g=t.parentNode).insertBefore(e,t):(g=t).appendChild(e),null!==(t=t._reactRootContainer)&&void 0!==t||null!==g.onclick||(g.onclick=$I));else if(4!==I&&null!==(e=e.child))for(aa(e,g,t),e=e.sibling;null!==e;)aa(e,g,t),e=e.sibling}function ra(e,g,t){var I=e.tag;if(5===I||6===I)e=e.stateNode,g?t.insertBefore(e,g):t.appendChild(e);else if(4!==I&&null!==(e=e.child))for(ra(e,g,t),e=e.sibling;null!==e;)ra(e,g,t),e=e.sibling}var ia=null,ca=!1;function Aa(e,g,t){for(t=t.child;null!==t;)da(e,g,t),t=t.sibling}function da(e,g,t){if(lg&&"function"===typeof lg.onCommitFiberUnmount)try{lg.onCommitFiberUnmount(ng,t)}catch(o){}switch(t.tag){case 5:Oo||_o(t,g);case 6:var I=ia,n=ca;ia=null,Aa(e,g,t),ca=n,null!==(ia=I)&&(ca?(e=ia,t=t.stateNode,8===e.nodeType?e.parentNode.removeChild(t):e.removeChild(t)):ia.removeChild(t.stateNode));break;case 18:null!==ia&&(ca?(e=ia,t=t.stateNode,8===e.nodeType?on(e.parentNode,t):1===e.nodeType&&on(e,t),Eg(e)):on(ia,t.stateNode));break;case 4:I=ia,n=ca,ia=t.stateNode.containerInfo,ca=!0,Aa(e,g,t),ia=I,ca=n;break;case 0:case 11:case 14:case 15:if(!Oo&&(null!==(I=t.updateQueue)&&null!==(I=I.lastEffect))){n=I=I.next;do{var l=n,C=l.destroy;l=l.tag,void 0!==C&&(0!==(2&l)||0!==(4&l))&&ea(t,g,C),n=n.next}while(n!==I)}Aa(e,g,t);break;case 1:if(!Oo&&(_o(t,g),"function"===typeof(I=t.stateNode).componentWillUnmount))try{I.props=t.memoizedProps,I.state=t.memoizedState,I.componentWillUnmount()}catch(o){Sr(t,g,o)}Aa(e,g,t);break;case 21:Aa(e,g,t);break;case 22:1&t.mode?(Oo=(I=Oo)||null!==t.memoizedState,Aa(e,g,t),Oo=I):Aa(e,g,t);break;default:Aa(e,g,t)}}function sa(e){var g=e.updateQueue;if(null!==g){e.updateQueue=null;var t=e.stateNode;null===t&&(t=e.stateNode=new qo),g.forEach((function(g){var I=Rr.bind(null,e,g);t.has(g)||(t.add(g),g.then(I,I))}))}}function ua(e,g){var t=g.deletions;if(null!==t)for(var I=0;I<t.length;I++){var n=t[I];try{var C=e,o=g,a=o;e:for(;null!==a;){switch(a.tag){case 5:ia=a.stateNode,ca=!1;break e;case 3:case 4:ia=a.stateNode.containerInfo,ca=!0;break e}a=a.return}if(null===ia)throw Error(l(160));da(C,o,n),ia=null,ca=!1;var r=n.alternate;null!==r&&(r.return=null),n.return=null}catch(i){Sr(n,g,i)}}if(12854&g.subtreeFlags)for(g=g.child;null!==g;)ma(g,e),g=g.sibling}function ma(e,g){var t=e.alternate,I=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ua(g,e),ba(e),4&I){try{ta(3,e,e.return),Ia(3,e)}catch(m){Sr(e,e.return,m)}try{ta(5,e,e.return)}catch(m){Sr(e,e.return,m)}}break;case 1:ua(g,e),ba(e),512&I&&null!==t&&_o(t,t.return);break;case 5:if(ua(g,e),ba(e),512&I&&null!==t&&_o(t,t.return),32&e.flags){var n=e.stateNode;try{Ae(n,"")}catch(m){Sr(e,e.return,m)}}if(4&I&&null!=(n=e.stateNode)){var C=e.memoizedProps,o=null!==t?t.memoizedProps:C,a=e.type,r=e.updateQueue;if(e.updateQueue=null,null!==r)try{"input"===a&&"radio"===C.type&&null!=C.name&&q(n,C),pe(a,o);var i=pe(a,C);for(o=0;o<r.length;o+=2){var c=r[o],A=r[o+1];"style"===c?me(n,A):"dangerouslySetInnerHTML"===c?ce(n,A):"children"===c?Ae(n,A):p(n,c,A,i)}switch(a){case"input":$(n,C);break;case"textarea":le(n,C);break;case"select":var d=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!C.multiple;var s=C.value;null!=s?te(n,!!C.multiple,s,!1):d!==!!C.multiple&&(null!=C.defaultValue?te(n,!!C.multiple,C.defaultValue,!0):te(n,!!C.multiple,C.multiple?[]:"",!1))}n[dn]=C}catch(m){Sr(e,e.return,m)}}break;case 6:if(ua(g,e),ba(e),4&I){if(null===e.stateNode)throw Error(l(162));n=e.stateNode,C=e.memoizedProps;try{n.nodeValue=C}catch(m){Sr(e,e.return,m)}}break;case 3:if(ua(g,e),ba(e),4&I&&null!==t&&t.memoizedState.isDehydrated)try{Eg(g.containerInfo)}catch(m){Sr(e,e.return,m)}break;case 4:default:ua(g,e),ba(e);break;case 13:ua(g,e),ba(e),8192&(n=e.child).flags&&(C=null!==n.memoizedState,n.stateNode.isHidden=C,!C||null!==n.alternate&&null!==n.alternate.memoizedState||(za=qe())),4&I&&sa(e);break;case 22:if(c=null!==t&&null!==t.memoizedState,1&e.mode?(Oo=(i=Oo)||c,ua(g,e),Oo=i):ua(g,e),ba(e),8192&I){if(i=null!==e.memoizedState,(e.stateNode.isHidden=i)&&!c&&0!==(1&e.mode))for($o=e,c=e.child;null!==c;){for(A=$o=c;null!==$o;){switch(s=(d=$o).child,d.tag){case 0:case 11:case 14:case 15:ta(4,d,d.return);break;case 1:_o(d,d.return);var u=d.stateNode;if("function"===typeof u.componentWillUnmount){I=d,t=d.return;try{g=I,u.props=g.memoizedProps,u.state=g.memoizedState,u.componentWillUnmount()}catch(m){Sr(I,t,m)}}break;case 5:_o(d,d.return);break;case 22:if(null!==d.memoizedState){Ga(A);continue}}null!==s?(s.return=d,$o=s):Ga(A)}c=c.sibling}e:for(c=null,A=e;;){if(5===A.tag){if(null===c){c=A;try{n=A.stateNode,i?"function"===typeof(C=n.style).setProperty?C.setProperty("display","none","important"):C.display="none":(a=A.stateNode,o=void 0!==(r=A.memoizedProps.style)&&null!==r&&r.hasOwnProperty("display")?r.display:null,a.style.display=ue("display",o))}catch(m){Sr(e,e.return,m)}}}else if(6===A.tag){if(null===c)try{A.stateNode.nodeValue=i?"":A.memoizedProps}catch(m){Sr(e,e.return,m)}}else if((22!==A.tag&&23!==A.tag||null===A.memoizedState||A===e)&&null!==A.child){A.child.return=A,A=A.child;continue}if(A===e)break e;for(;null===A.sibling;){if(null===A.return||A.return===e)break e;c===A&&(c=null),A=A.return}c===A&&(c=null),A.sibling.return=A.return,A=A.sibling}}break;case 19:ua(g,e),ba(e),4&I&&sa(e);case 21:}}function ba(e){var g=e.flags;if(2&g){try{e:{for(var t=e.return;null!==t;){if(Ca(t)){var I=t;break e}t=t.return}throw Error(l(160))}switch(I.tag){case 5:var n=I.stateNode;32&I.flags&&(Ae(n,""),I.flags&=-33),ra(e,oa(e),n);break;case 3:case 4:var C=I.stateNode.containerInfo;aa(e,oa(e),C);break;default:throw Error(l(161))}}catch(o){Sr(e,e.return,o)}e.flags&=-3}4096&g&&(e.flags&=-4097)}function Za(e,g,t){$o=e,pa(e,g,t)}function pa(e,g,t){for(var I=0!==(1&e.mode);null!==$o;){var n=$o,l=n.child;if(22===n.tag&&I){var C=null!==n.memoizedState||Po;if(!C){var o=n.alternate,a=null!==o&&null!==o.memoizedState||Oo;o=Po;var r=Oo;if(Po=C,(Oo=a)&&!r)for($o=n;null!==$o;)a=(C=$o).child,22===C.tag&&null!==C.memoizedState?ya(n):null!==a?(a.return=C,$o=a):ya(n);for(;null!==l;)$o=l,pa(l,g,t),l=l.sibling;$o=n,Po=o,Oo=r}ha(e)}else 0!==(8772&n.subtreeFlags)&&null!==l?(l.return=n,$o=l):ha(e)}}function ha(e){for(;null!==$o;){var g=$o;if(0!==(8772&g.flags)){var t=g.alternate;try{if(0!==(8772&g.flags))switch(g.tag){case 0:case 11:case 15:Oo||Ia(5,g);break;case 1:var I=g.stateNode;if(4&g.flags&&!Oo)if(null===t)I.componentDidMount();else{var n=g.elementType===g.type?t.memoizedProps:go(g.type,t.memoizedProps);I.componentDidUpdate(n,t.memoizedState,I.__reactInternalSnapshotBeforeUpdate)}var C=g.updateQueue;null!==C&&Dl(g,C,I);break;case 3:var o=g.updateQueue;if(null!==o){if(t=null,null!==g.child)switch(g.child.tag){case 5:case 1:t=g.child.stateNode}Dl(g,o,t)}break;case 5:var a=g.stateNode;if(null===t&&4&g.flags){t=a;var r=g.memoizedProps;switch(g.type){case"button":case"input":case"select":case"textarea":r.autoFocus&&t.focus();break;case"img":r.src&&(t.src=r.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===g.memoizedState){var i=g.alternate;if(null!==i){var c=i.memoizedState;if(null!==c){var A=c.dehydrated;null!==A&&Eg(A)}}}break;default:throw Error(l(163))}Oo||512&g.flags&&na(g)}catch(d){Sr(g,g.return,d)}}if(g===e){$o=null;break}if(null!==(t=g.sibling)){t.return=g.return,$o=t;break}$o=g.return}}function Ga(e){for(;null!==$o;){var g=$o;if(g===e){$o=null;break}var t=g.sibling;if(null!==t){t.return=g.return,$o=t;break}$o=g.return}}function ya(e){for(;null!==$o;){var g=$o;try{switch(g.tag){case 0:case 11:case 15:var t=g.return;try{Ia(4,g)}catch(a){Sr(g,t,a)}break;case 1:var I=g.stateNode;if("function"===typeof I.componentDidMount){var n=g.return;try{I.componentDidMount()}catch(a){Sr(g,n,a)}}var l=g.return;try{na(g)}catch(a){Sr(g,l,a)}break;case 5:var C=g.return;try{na(g)}catch(a){Sr(g,C,a)}}}catch(a){Sr(g,g.return,a)}if(g===e){$o=null;break}var o=g.sibling;if(null!==o){o.return=g.return,$o=o;break}$o=g.return}}var Ba,Sa=Math.ceil,Wa=h.ReactCurrentDispatcher,Va=h.ReactCurrentOwner,va=h.ReactCurrentBatchConfig,Ra=0,fa=null,Xa=null,ka=0,Ja=0,Ya=Sn(0),wa=0,Ha=null,Na=0,Fa=0,Ka=0,xa=null,Ma=null,za=0,Ea=1/0,Da=null,Ua=!1,Ta=null,La=null,Qa=!1,ja=null,Pa=0,Oa=0,qa=null,$a=-1,_a=0;function er(){return 0!==(6&Ra)?qe():-1!==$a?$a:$a=qe()}function gr(e){return 0===(1&e.mode)?1:0!==(2&Ra)&&0!==ka?ka&-ka:null!==ul.transition?(0===_a&&(_a=ug()),_a):0!==(e=pg)?e:e=void 0===(e=window.event)?16:Og(e.type)}function tr(e,g,t,I){if(50<Oa)throw Oa=0,qa=null,Error(l(185));bg(e,t,I),0!==(2&Ra)&&e===fa||(e===fa&&(0===(2&Ra)&&(Fa|=t),4===wa&&or(e,ka)),Ir(e,I),1===t&&0===Ra&&0===(1&g.mode)&&(Ea=qe()+500,xn&&En()))}function Ir(e,g){var t=e.callbackNode;!function(e,g){for(var t=e.suspendedLanes,I=e.pingedLanes,n=e.expirationTimes,l=e.pendingLanes;0<l;){var C=31-Cg(l),o=1<<C,a=n[C];-1===a?0!==(o&t)&&0===(o&I)||(n[C]=dg(o,g)):a<=g&&(e.expiredLanes|=o),l&=~o}}(e,g);var I=Ag(e,e===fa?ka:0);if(0===I)null!==t&&je(t),e.callbackNode=null,e.callbackPriority=0;else if(g=I&-I,e.callbackPriority!==g){if(null!=t&&je(t),1===g)0===e.tag?function(e){xn=!0,zn(e)}(ar.bind(null,e)):zn(ar.bind(null,e)),ln((function(){0===(6&Ra)&&En()})),t=null;else{switch(hg(I)){case 1:t=_e;break;case 4:t=eg;break;case 16:default:t=gg;break;case 536870912:t=Ig}t=fr(t,nr.bind(null,e))}e.callbackPriority=g,e.callbackNode=t}}function nr(e,g){if($a=-1,_a=0,0!==(6&Ra))throw Error(l(327));var t=e.callbackNode;if(yr()&&e.callbackNode!==t)return null;var I=Ag(e,e===fa?ka:0);if(0===I)return null;if(0!==(30&I)||0!==(I&e.expiredLanes)||g)g=mr(e,I);else{g=I;var n=Ra;Ra|=2;var C=sr();for(fa===e&&ka===g||(Da=null,Ea=qe()+500,Ar(e,g));;)try{Zr();break}catch(a){dr(e,a)}Vl(),Wa.current=C,Ra=n,null!==Xa?g=0:(fa=null,ka=0,g=wa)}if(0!==g){if(2===g&&(0!==(n=sg(e))&&(I=n,g=lr(e,n))),1===g)throw t=Ha,Ar(e,0),or(e,I),Ir(e,qe()),t;if(6===g)or(e,I);else{if(n=e.current.alternate,0===(30&I)&&!function(e){for(var g=e;;){if(16384&g.flags){var t=g.updateQueue;if(null!==t&&null!==(t=t.stores))for(var I=0;I<t.length;I++){var n=t[I],l=n.getSnapshot;n=n.value;try{if(!CI(l(),n))return!1}catch(o){return!1}}}if(t=g.child,16384&g.subtreeFlags&&null!==t)t.return=g,g=t;else{if(g===e)break;for(;null===g.sibling;){if(null===g.return||g.return===e)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}(n)&&(2===(g=mr(e,I))&&(0!==(C=sg(e))&&(I=C,g=lr(e,C))),1===g))throw t=Ha,Ar(e,0),or(e,I),Ir(e,qe()),t;switch(e.finishedWork=n,e.finishedLanes=I,g){case 0:case 1:throw Error(l(345));case 2:case 5:Gr(e,Ma,Da);break;case 3:if(or(e,I),(130023424&I)===I&&10<(g=za+500-qe())){if(0!==Ag(e,0))break;if(((n=e.suspendedLanes)&I)!==I){er(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=tn(Gr.bind(null,e,Ma,Da),g);break}Gr(e,Ma,Da);break;case 4:if(or(e,I),(4194240&I)===I)break;for(g=e.eventTimes,n=-1;0<I;){var o=31-Cg(I);C=1<<o,(o=g[o])>n&&(n=o),I&=~C}if(I=n,10<(I=(120>(I=qe()-I)?120:480>I?480:1080>I?1080:1920>I?1920:3e3>I?3e3:4320>I?4320:1960*Sa(I/1960))-I)){e.timeoutHandle=tn(Gr.bind(null,e,Ma,Da),I);break}Gr(e,Ma,Da);break;default:throw Error(l(329))}}}return Ir(e,qe()),e.callbackNode===t?nr.bind(null,e):null}function lr(e,g){var t=xa;return e.current.memoizedState.isDehydrated&&(Ar(e,g).flags|=256),2!==(e=mr(e,g))&&(g=Ma,Ma=t,null!==g&&Cr(g)),e}function Cr(e){null===Ma?Ma=e:Ma.push.apply(Ma,e)}function or(e,g){for(g&=~Ka,g&=~Fa,e.suspendedLanes|=g,e.pingedLanes&=~g,e=e.expirationTimes;0<g;){var t=31-Cg(g),I=1<<t;e[t]=-1,g&=~I}}function ar(e){if(0!==(6&Ra))throw Error(l(327));yr();var g=Ag(e,0);if(0===(1&g))return Ir(e,qe()),null;var t=mr(e,g);if(0!==e.tag&&2===t){var I=sg(e);0!==I&&(g=I,t=lr(e,I))}if(1===t)throw t=Ha,Ar(e,0),or(e,g),Ir(e,qe()),t;if(6===t)throw Error(l(345));return e.finishedWork=e.current.alternate,e.finishedLanes=g,Gr(e,Ma,Da),Ir(e,qe()),null}function rr(e,g){var t=Ra;Ra|=1;try{return e(g)}finally{0===(Ra=t)&&(Ea=qe()+500,xn&&En())}}function ir(e){null!==ja&&0===ja.tag&&0===(6&Ra)&&yr();var g=Ra;Ra|=1;var t=va.transition,I=pg;try{if(va.transition=null,pg=1,e)return e()}finally{pg=I,va.transition=t,0===(6&(Ra=g))&&En()}}function cr(){Ja=Ya.current,Wn(Ya)}function Ar(e,g){e.finishedWork=null,e.finishedLanes=0;var t=e.timeoutHandle;if(-1!==t&&(e.timeoutHandle=-1,In(t)),null!==Xa)for(t=Xa.return;null!==t;){var I=t;switch(gl(I),I.tag){case 1:null!==(I=I.type.childContextTypes)&&void 0!==I&&Yn();break;case 3:Ol(),Wn(fn),Wn(Rn),tC();break;case 5:$l(I);break;case 4:Ol();break;case 13:case 19:Wn(_l);break;case 10:vl(I.type._context);break;case 22:case 23:cr()}t=t.return}if(fa=e,Xa=e=Yr(e.current,null),ka=Ja=g,wa=0,Ha=null,Ka=Fa=Na=0,Ma=xa=null,null!==kl){for(g=0;g<kl.length;g++)if(null!==(I=(t=kl[g]).interleaved)){t.interleaved=null;var n=I.next,l=t.pending;if(null!==l){var C=l.next;l.next=n,I.next=C}t.pending=I}kl=null}return e}function dr(e,g){for(;;){var t=Xa;try{if(Vl(),IC.current=qC,rC){for(var I=CC.memoizedState;null!==I;){var n=I.queue;null!==n&&(n.pending=null),I=I.next}rC=!1}if(lC=0,aC=oC=CC=null,iC=!1,cC=0,Va.current=null,null===t||null===t.return){wa=1,Ha=g,Xa=null;break}e:{var C=e,o=t.return,a=t,r=g;if(g=ka,a.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){var i=r,c=a,A=c.tag;if(0===(1&c.mode)&&(0===A||11===A||15===A)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var s=mo(o);if(null!==s){s.flags&=-257,bo(s,o,a,0,g),1&s.mode&&uo(C,i,g),r=i;var u=(g=s).updateQueue;if(null===u){var m=new Set;m.add(r),g.updateQueue=m}else u.add(r);break e}if(0===(1&g)){uo(C,i,g),ur();break e}r=Error(l(426))}else if(nl&&1&a.mode){var b=mo(o);if(null!==b){0===(65536&b.flags)&&(b.flags|=256),bo(b,o,a,0,g),sl(ao(r,a));break e}}C=r=ao(r,a),4!==wa&&(wa=2),null===xa?xa=[C]:xa.push(C),C=o;do{switch(C.tag){case 3:C.flags|=65536,g&=-g,C.lanes|=g,zl(C,Ao(0,r,g));break e;case 1:a=r;var Z=C.type,p=C.stateNode;if(0===(128&C.flags)&&("function"===typeof Z.getDerivedStateFromError||null!==p&&"function"===typeof p.componentDidCatch&&(null===La||!La.has(p)))){C.flags|=65536,g&=-g,C.lanes|=g,zl(C,so(C,a,g));break e}}C=C.return}while(null!==C)}hr(t)}catch(h){g=h,Xa===t&&null!==t&&(Xa=t=t.return);continue}break}}function sr(){var e=Wa.current;return Wa.current=qC,null===e?qC:e}function ur(){0!==wa&&3!==wa&&2!==wa||(wa=4),null===fa||0===(268435455&Na)&&0===(268435455&Fa)||or(fa,ka)}function mr(e,g){var t=Ra;Ra|=2;var I=sr();for(fa===e&&ka===g||(Da=null,Ar(e,g));;)try{br();break}catch(n){dr(e,n)}if(Vl(),Ra=t,Wa.current=I,null!==Xa)throw Error(l(261));return fa=null,ka=0,wa}function br(){for(;null!==Xa;)pr(Xa)}function Zr(){for(;null!==Xa&&!Pe();)pr(Xa)}function pr(e){var g=Ba(e.alternate,e,Ja);e.memoizedProps=e.pendingProps,null===g?hr(e):Xa=g,Va.current=null}function hr(e){var g=e;do{var t=g.alternate;if(e=g.return,0===(32768&g.flags)){if(null!==(t=Qo(t,g,Ja)))return void(Xa=t)}else{if(null!==(t=jo(t,g)))return t.flags&=32767,void(Xa=t);if(null===e)return wa=6,void(Xa=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(g=g.sibling))return void(Xa=g);Xa=g=e}while(null!==g);0===wa&&(wa=5)}function Gr(e,g,t){var I=pg,n=va.transition;try{va.transition=null,pg=1,function(e,g,t,I){do{yr()}while(null!==ja);if(0!==(6&Ra))throw Error(l(327));t=e.finishedWork;var n=e.finishedLanes;if(null===t)return null;if(e.finishedWork=null,e.finishedLanes=0,t===e.current)throw Error(l(177));e.callbackNode=null,e.callbackPriority=0;var C=t.lanes|t.childLanes;if(function(e,g){var t=e.pendingLanes&~g;e.pendingLanes=g,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=g,e.mutableReadLanes&=g,e.entangledLanes&=g,g=e.entanglements;var I=e.eventTimes;for(e=e.expirationTimes;0<t;){var n=31-Cg(t),l=1<<n;g[n]=0,I[n]=-1,e[n]=-1,t&=~l}}(e,C),e===fa&&(Xa=fa=null,ka=0),0===(2064&t.subtreeFlags)&&0===(2064&t.flags)||Qa||(Qa=!0,fr(gg,(function(){return yr(),null}))),C=0!==(15990&t.flags),0!==(15990&t.subtreeFlags)||C){C=va.transition,va.transition=null;var o=pg;pg=1;var a=Ra;Ra|=4,Va.current=null,function(e,g){if(_I=Ug,AI(e=cI())){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var I=(t=(t=e.ownerDocument)&&t.defaultView||window).getSelection&&t.getSelection();if(I&&0!==I.rangeCount){t=I.anchorNode;var n=I.anchorOffset,C=I.focusNode;I=I.focusOffset;try{t.nodeType,C.nodeType}catch(G){t=null;break e}var o=0,a=-1,r=-1,i=0,c=0,A=e,d=null;g:for(;;){for(var s;A!==t||0!==n&&3!==A.nodeType||(a=o+n),A!==C||0!==I&&3!==A.nodeType||(r=o+I),3===A.nodeType&&(o+=A.nodeValue.length),null!==(s=A.firstChild);)d=A,A=s;for(;;){if(A===e)break g;if(d===t&&++i===n&&(a=o),d===C&&++c===I&&(r=o),null!==(s=A.nextSibling))break;d=(A=d).parentNode}A=s}t=-1===a||-1===r?null:{start:a,end:r}}else t=null}t=t||{start:0,end:0}}else t=null;for(en={focusedElem:e,selectionRange:t},Ug=!1,$o=g;null!==$o;)if(e=(g=$o).child,0!==(1028&g.subtreeFlags)&&null!==e)e.return=g,$o=e;else for(;null!==$o;){g=$o;try{var u=g.alternate;if(0!==(1024&g.flags))switch(g.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==u){var m=u.memoizedProps,b=u.memoizedState,Z=g.stateNode,p=Z.getSnapshotBeforeUpdate(g.elementType===g.type?m:go(g.type,m),b);Z.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var h=g.stateNode.containerInfo;1===h.nodeType?h.textContent="":9===h.nodeType&&h.documentElement&&h.removeChild(h.documentElement);break;default:throw Error(l(163))}}catch(G){Sr(g,g.return,G)}if(null!==(e=g.sibling)){e.return=g.return,$o=e;break}$o=g.return}u=ga,ga=!1}(e,t),ma(t,e),dI(en),Ug=!!_I,en=_I=null,e.current=t,Za(t,e,n),Oe(),Ra=a,pg=o,va.transition=C}else e.current=t;if(Qa&&(Qa=!1,ja=e,Pa=n),C=e.pendingLanes,0===C&&(La=null),function(e){if(lg&&"function"===typeof lg.onCommitFiberRoot)try{lg.onCommitFiberRoot(ng,e,void 0,128===(128&e.current.flags))}catch(g){}}(t.stateNode),Ir(e,qe()),null!==g)for(I=e.onRecoverableError,t=0;t<g.length;t++)n=g[t],I(n.value,{componentStack:n.stack,digest:n.digest});if(Ua)throw Ua=!1,e=Ta,Ta=null,e;0!==(1&Pa)&&0!==e.tag&&yr(),C=e.pendingLanes,0!==(1&C)?e===qa?Oa++:(Oa=0,qa=e):Oa=0,En()}(e,g,t,I)}finally{va.transition=n,pg=I}return null}function yr(){if(null!==ja){var e=hg(Pa),g=va.transition,t=pg;try{if(va.transition=null,pg=16>e?16:e,null===ja)var I=!1;else{if(e=ja,ja=null,Pa=0,0!==(6&Ra))throw Error(l(331));var n=Ra;for(Ra|=4,$o=e.current;null!==$o;){var C=$o,o=C.child;if(0!==(16&$o.flags)){var a=C.deletions;if(null!==a){for(var r=0;r<a.length;r++){var i=a[r];for($o=i;null!==$o;){var c=$o;switch(c.tag){case 0:case 11:case 15:ta(8,c,C)}var A=c.child;if(null!==A)A.return=c,$o=A;else for(;null!==$o;){var d=(c=$o).sibling,s=c.return;if(la(c),c===i){$o=null;break}if(null!==d){d.return=s,$o=d;break}$o=s}}}var u=C.alternate;if(null!==u){var m=u.child;if(null!==m){u.child=null;do{var b=m.sibling;m.sibling=null,m=b}while(null!==m)}}$o=C}}if(0!==(2064&C.subtreeFlags)&&null!==o)o.return=C,$o=o;else e:for(;null!==$o;){if(0!==(2048&(C=$o).flags))switch(C.tag){case 0:case 11:case 15:ta(9,C,C.return)}var Z=C.sibling;if(null!==Z){Z.return=C.return,$o=Z;break e}$o=C.return}}var p=e.current;for($o=p;null!==$o;){var h=(o=$o).child;if(0!==(2064&o.subtreeFlags)&&null!==h)h.return=o,$o=h;else e:for(o=p;null!==$o;){if(0!==(2048&(a=$o).flags))try{switch(a.tag){case 0:case 11:case 15:Ia(9,a)}}catch(y){Sr(a,a.return,y)}if(a===o){$o=null;break e}var G=a.sibling;if(null!==G){G.return=a.return,$o=G;break e}$o=a.return}}if(Ra=n,En(),lg&&"function"===typeof lg.onPostCommitFiberRoot)try{lg.onPostCommitFiberRoot(ng,e)}catch(y){}I=!0}return I}finally{pg=t,va.transition=g}}return!1}function Br(e,g,t){e=xl(e,g=Ao(0,g=ao(t,g),1),1),g=er(),null!==e&&(bg(e,1,g),Ir(e,g))}function Sr(e,g,t){if(3===e.tag)Br(e,e,t);else for(;null!==g;){if(3===g.tag){Br(g,e,t);break}if(1===g.tag){var I=g.stateNode;if("function"===typeof g.type.getDerivedStateFromError||"function"===typeof I.componentDidCatch&&(null===La||!La.has(I))){g=xl(g,e=so(g,e=ao(t,e),1),1),e=er(),null!==g&&(bg(g,1,e),Ir(g,e));break}}g=g.return}}function Wr(e,g,t){var I=e.pingCache;null!==I&&I.delete(g),g=er(),e.pingedLanes|=e.suspendedLanes&t,fa===e&&(ka&t)===t&&(4===wa||3===wa&&(130023424&ka)===ka&&500>qe()-za?Ar(e,0):Ka|=t),Ir(e,g)}function Vr(e,g){0===g&&(0===(1&e.mode)?g=1:(g=ig,0===(130023424&(ig<<=1))&&(ig=4194304)));var t=er();null!==(e=wl(e,g))&&(bg(e,g,t),Ir(e,t))}function vr(e){var g=e.memoizedState,t=0;null!==g&&(t=g.retryLane),Vr(e,t)}function Rr(e,g){var t=0;switch(e.tag){case 13:var I=e.stateNode,n=e.memoizedState;null!==n&&(t=n.retryLane);break;case 19:I=e.stateNode;break;default:throw Error(l(314))}null!==I&&I.delete(g),Vr(e,t)}function fr(e,g){return Qe(e,g)}function Xr(e,g,t,I){this.tag=e,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=I,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kr(e,g,t,I){return new Xr(e,g,t,I)}function Jr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Yr(e,g){var t=e.alternate;return null===t?((t=kr(e.tag,g,e.key,e.mode)).elementType=e.elementType,t.type=e.type,t.stateNode=e.stateNode,t.alternate=e,e.alternate=t):(t.pendingProps=g,t.type=e.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=14680064&e.flags,t.childLanes=e.childLanes,t.lanes=e.lanes,t.child=e.child,t.memoizedProps=e.memoizedProps,t.memoizedState=e.memoizedState,t.updateQueue=e.updateQueue,g=e.dependencies,t.dependencies=null===g?null:{lanes:g.lanes,firstContext:g.firstContext},t.sibling=e.sibling,t.index=e.index,t.ref=e.ref,t}function wr(e,g,t,I,n,C){var o=2;if(I=e,"function"===typeof e)Jr(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case B:return Hr(t.children,n,C,g);case S:o=8,n|=8;break;case W:return(e=kr(12,t,g,2|n)).elementType=W,e.lanes=C,e;case f:return(e=kr(13,t,g,n)).elementType=f,e.lanes=C,e;case X:return(e=kr(19,t,g,n)).elementType=X,e.lanes=C,e;case Y:return Nr(t,n,C,g);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case V:o=10;break e;case v:o=9;break e;case R:o=11;break e;case k:o=14;break e;case J:o=16,I=null;break e}throw Error(l(130,null==e?e:typeof e,""))}return(g=kr(o,t,g,n)).elementType=e,g.type=I,g.lanes=C,g}function Hr(e,g,t,I){return(e=kr(7,e,I,g)).lanes=t,e}function Nr(e,g,t,I){return(e=kr(22,e,I,g)).elementType=Y,e.lanes=t,e.stateNode={isHidden:!1},e}function Fr(e,g,t){return(e=kr(6,e,null,g)).lanes=t,e}function Kr(e,g,t){return(g=kr(4,null!==e.children?e.children:[],e.key,g)).lanes=t,g.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},g}function xr(e,g,t,I,n){this.tag=g,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mg(0),this.expirationTimes=mg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mg(0),this.identifierPrefix=I,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Mr(e,g,t,I,n,l,C,o,a){return e=new xr(e,g,t,o,a),1===g?(g=1,!0===l&&(g|=8)):g=0,l=kr(3,null,null,g),e.current=l,l.stateNode=e,l.memoizedState={element:I,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nl(l),e}function zr(e){if(!e)return vn;e:{if(Ee(e=e._reactInternals)!==e||1!==e.tag)throw Error(l(170));var g=e;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(Jn(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(null!==g);throw Error(l(171))}if(1===e.tag){var t=e.type;if(Jn(t))return Hn(e,t,g)}return g}function Er(e,g,t,I,n,l,C,o,a){return(e=Mr(t,I,!0,e,0,l,0,o,a)).context=zr(null),t=e.current,(l=Kl(I=er(),n=gr(t))).callback=void 0!==g&&null!==g?g:null,xl(t,l,n),e.current.lanes=n,bg(e,n,I),Ir(e,I),e}function Dr(e,g,t,I){var n=g.current,l=er(),C=gr(n);return t=zr(t),null===g.context?g.context=t:g.pendingContext=t,(g=Kl(l,C)).payload={element:e},null!==(I=void 0===I?null:I)&&(g.callback=I),null!==(e=xl(n,g,C))&&(tr(e,n,C,l),Ml(e,n,C)),C}function Ur(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Tr(e,g){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var t=e.retryLane;e.retryLane=0!==t&&t<g?t:g}}function Lr(e,g){Tr(e,g),(e=e.alternate)&&Tr(e,g)}Ba=function(e,g,t){if(null!==e)if(e.memoizedProps!==g.pendingProps||fn.current)po=!0;else{if(0===(e.lanes&t)&&0===(128&g.flags))return po=!1,function(e,g,t){switch(g.tag){case 3:fo(g),dl();break;case 5:ql(g);break;case 1:Jn(g.type)&&Nn(g);break;case 4:Pl(g,g.stateNode.containerInfo);break;case 10:var I=g.type._context,n=g.memoizedProps.value;Vn(yl,I._currentValue),I._currentValue=n;break;case 13:if(null!==(I=g.memoizedState))return null!==I.dehydrated?(Vn(_l,1&_l.current),g.flags|=128,null):0!==(t&g.child.childLanes)?Fo(e,g,t):(Vn(_l,1&_l.current),null!==(e=Uo(e,g,t))?e.sibling:null);Vn(_l,1&_l.current);break;case 19:if(I=0!==(t&g.childLanes),0!==(128&e.flags)){if(I)return Eo(e,g,t);g.flags|=128}if(null!==(n=g.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),Vn(_l,_l.current),I)break;return null;case 22:case 23:return g.lanes=0,So(e,g,t)}return Uo(e,g,t)}(e,g,t);po=0!==(131072&e.flags)}else po=!1,nl&&0!==(1048576&g.flags)&&_n(g,Ln,g.index);switch(g.lanes=0,g.tag){case 2:var I=g.type;Do(e,g),e=g.pendingProps;var n=kn(g,Rn.current);fl(g,t),n=uC(null,g,I,e,n,t);var C=mC();return g.flags|=1,"object"===typeof n&&null!==n&&"function"===typeof n.render&&void 0===n.$$typeof?(g.tag=1,g.memoizedState=null,g.updateQueue=null,Jn(I)?(C=!0,Nn(g)):C=!1,g.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,Nl(g),n.updater=Io,g.stateNode=n,n._reactInternals=g,oo(g,I,e,t),g=Ro(null,g,I,!0,C,t)):(g.tag=0,nl&&C&&el(g),ho(null,g,n,t),g=g.child),g;case 16:I=g.elementType;e:{switch(Do(e,g),e=g.pendingProps,I=(n=I._init)(I._payload),g.type=I,n=g.tag=function(e){if("function"===typeof e)return Jr(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===R)return 11;if(e===k)return 14}return 2}(I),e=go(I,e),n){case 0:g=Vo(null,g,I,e,t);break e;case 1:g=vo(null,g,I,e,t);break e;case 11:g=Go(null,g,I,e,t);break e;case 14:g=yo(null,g,I,go(I.type,e),t);break e}throw Error(l(306,I,""))}return g;case 0:return I=g.type,n=g.pendingProps,Vo(e,g,I,n=g.elementType===I?n:go(I,n),t);case 1:return I=g.type,n=g.pendingProps,vo(e,g,I,n=g.elementType===I?n:go(I,n),t);case 3:e:{if(fo(g),null===e)throw Error(l(387));I=g.pendingProps,n=(C=g.memoizedState).element,Fl(e,g),El(g,I,null,t);var o=g.memoizedState;if(I=o.element,C.isDehydrated){if(C={element:I,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},g.updateQueue.baseState=C,g.memoizedState=C,256&g.flags){g=Xo(e,g,I,t,n=ao(Error(l(423)),g));break e}if(I!==n){g=Xo(e,g,I,t,n=ao(Error(l(424)),g));break e}for(Il=an(g.stateNode.containerInfo.firstChild),tl=g,nl=!0,ll=null,t=Gl(g,null,I,t),g.child=t;t;)t.flags=-3&t.flags|4096,t=t.sibling}else{if(dl(),I===n){g=Uo(e,g,t);break e}ho(e,g,I,t)}g=g.child}return g;case 5:return ql(g),null===e&&rl(g),I=g.type,n=g.pendingProps,C=null!==e?e.memoizedProps:null,o=n.children,gn(I,n)?o=null:null!==C&&gn(I,C)&&(g.flags|=32),Wo(e,g),ho(e,g,o,t),g.child;case 6:return null===e&&rl(g),null;case 13:return Fo(e,g,t);case 4:return Pl(g,g.stateNode.containerInfo),I=g.pendingProps,null===e?g.child=hl(g,null,I,t):ho(e,g,I,t),g.child;case 11:return I=g.type,n=g.pendingProps,Go(e,g,I,n=g.elementType===I?n:go(I,n),t);case 7:return ho(e,g,g.pendingProps,t),g.child;case 8:case 12:return ho(e,g,g.pendingProps.children,t),g.child;case 10:e:{if(I=g.type._context,n=g.pendingProps,C=g.memoizedProps,o=n.value,Vn(yl,I._currentValue),I._currentValue=o,null!==C)if(CI(C.value,o)){if(C.children===n.children&&!fn.current){g=Uo(e,g,t);break e}}else for(null!==(C=g.child)&&(C.return=g);null!==C;){var a=C.dependencies;if(null!==a){o=C.child;for(var r=a.firstContext;null!==r;){if(r.context===I){if(1===C.tag){(r=Kl(-1,t&-t)).tag=2;var i=C.updateQueue;if(null!==i){var c=(i=i.shared).pending;null===c?r.next=r:(r.next=c.next,c.next=r),i.pending=r}}C.lanes|=t,null!==(r=C.alternate)&&(r.lanes|=t),Rl(C.return,t,g),a.lanes|=t;break}r=r.next}}else if(10===C.tag)o=C.type===g.type?null:C.child;else if(18===C.tag){if(null===(o=C.return))throw Error(l(341));o.lanes|=t,null!==(a=o.alternate)&&(a.lanes|=t),Rl(o,t,g),o=C.sibling}else o=C.child;if(null!==o)o.return=C;else for(o=C;null!==o;){if(o===g){o=null;break}if(null!==(C=o.sibling)){C.return=o.return,o=C;break}o=o.return}C=o}ho(e,g,n.children,t),g=g.child}return g;case 9:return n=g.type,I=g.pendingProps.children,fl(g,t),I=I(n=Xl(n)),g.flags|=1,ho(e,g,I,t),g.child;case 14:return n=go(I=g.type,g.pendingProps),yo(e,g,I,n=go(I.type,n),t);case 15:return Bo(e,g,g.type,g.pendingProps,t);case 17:return I=g.type,n=g.pendingProps,n=g.elementType===I?n:go(I,n),Do(e,g),g.tag=1,Jn(I)?(e=!0,Nn(g)):e=!1,fl(g,t),lo(g,I,n),oo(g,I,n,t),Ro(null,g,I,!0,e,t);case 19:return Eo(e,g,t);case 22:return So(e,g,t)}throw Error(l(156,g.tag))};var Qr="function"===typeof reportError?reportError:function(e){console.error(e)};function jr(e){this._internalRoot=e}function Pr(e){this._internalRoot=e}function Or(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function qr(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $r(){}function _r(e,g,t,I,n){var l=t._reactRootContainer;if(l){var C=l;if("function"===typeof n){var o=n;n=function(){var e=Ur(C);o.call(e)}}Dr(g,C,e,n)}else C=function(e,g,t,I,n){if(n){if("function"===typeof I){var l=I;I=function(){var e=Ur(C);l.call(e)}}var C=Er(g,I,e,0,null,!1,0,"",$r);return e._reactRootContainer=C,e[sn]=C.current,zI(8===e.nodeType?e.parentNode:e),ir(),C}for(;n=e.lastChild;)e.removeChild(n);if("function"===typeof I){var o=I;I=function(){var e=Ur(a);o.call(e)}}var a=Mr(e,0,!1,null,0,!1,0,"",$r);return e._reactRootContainer=a,e[sn]=a.current,zI(8===e.nodeType?e.parentNode:e),ir((function(){Dr(g,a,t,I)})),a}(t,g,e,n,I);return Ur(C)}Pr.prototype.render=jr.prototype.render=function(e){var g=this._internalRoot;if(null===g)throw Error(l(409));Dr(e,g,null,null)},Pr.prototype.unmount=jr.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var g=e.containerInfo;ir((function(){Dr(null,e,null,null)})),g[sn]=null}},Pr.prototype.unstable_scheduleHydration=function(e){if(e){var g=Sg();e={blockedOn:null,target:e,priority:g};for(var t=0;t<Yg.length&&0!==g&&g<Yg[t].priority;t++);Yg.splice(t,0,e),0===t&&Fg(e)}},Gg=function(e){switch(e.tag){case 3:var g=e.stateNode;if(g.current.memoizedState.isDehydrated){var t=cg(g.pendingLanes);0!==t&&(Zg(g,1|t),Ir(g,qe()),0===(6&Ra)&&(Ea=qe()+500,En()))}break;case 13:ir((function(){var g=wl(e,1);if(null!==g){var t=er();tr(g,e,1,t)}})),Lr(e,1)}},yg=function(e){if(13===e.tag){var g=wl(e,134217728);if(null!==g)tr(g,e,134217728,er());Lr(e,134217728)}},Bg=function(e){if(13===e.tag){var g=gr(e),t=wl(e,g);if(null!==t)tr(t,e,g,er());Lr(e,g)}},Sg=function(){return pg},Wg=function(e,g){var t=pg;try{return pg=e,g()}finally{pg=t}},ye=function(e,g,t){switch(g){case"input":if($(e,t),g=t.name,"radio"===t.type&&null!=g){for(t=e;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+g)+'][type="radio"]'),g=0;g<t.length;g++){var I=t[g];if(I!==e&&I.form===e.form){var n=Gn(I);if(!n)throw Error(l(90));Q(I),$(I,n)}}}break;case"textarea":le(e,t);break;case"select":null!=(g=t.value)&&te(e,!!t.multiple,g,!1)}},Re=rr,fe=ir;var ei={usingClientEntryPoint:!1,Events:[pn,hn,Gn,Ve,ve,rr]},gi={findFiberByHostInstance:Zn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ti={bundleType:gi.bundleType,version:gi.version,rendererPackageName:gi.rendererPackageName,rendererConfig:gi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:h.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Te(e))?null:e.stateNode},findFiberByHostInstance:gi.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Ii=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ii.isDisabled&&Ii.supportsFiber)try{ng=Ii.inject(ti),lg=Ii}catch(ie){}}g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ei,g.createPortal=function(e,g){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Or(g))throw Error(l(200));return function(e,g,t){var I=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:y,key:null==I?null:""+I,children:e,containerInfo:g,implementation:t}}(e,g,null,t)},g.createRoot=function(e,g){if(!Or(e))throw Error(l(299));var t=!1,I="",n=Qr;return null!==g&&void 0!==g&&(!0===g.unstable_strictMode&&(t=!0),void 0!==g.identifierPrefix&&(I=g.identifierPrefix),void 0!==g.onRecoverableError&&(n=g.onRecoverableError)),g=Mr(e,1,!1,null,0,t,0,I,n),e[sn]=g.current,zI(8===e.nodeType?e.parentNode:e),new jr(g)},g.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var g=e._reactInternals;if(void 0===g){if("function"===typeof e.render)throw Error(l(188));throw e=Object.keys(e).join(","),Error(l(268,e))}return e=null===(e=Te(g))?null:e.stateNode},g.flushSync=function(e){return ir(e)},g.hydrate=function(e,g,t){if(!qr(g))throw Error(l(200));return _r(null,e,g,!0,t)},g.hydrateRoot=function(e,g,t){if(!Or(e))throw Error(l(405));var I=null!=t&&t.hydratedSources||null,n=!1,C="",o=Qr;if(null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(C=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),g=Er(g,null,e,1,null!=t?t:null,n,0,C,o),e[sn]=g.current,zI(e),I)for(e=0;e<I.length;e++)n=(n=(t=I[e])._getVersion)(t._source),null==g.mutableSourceEagerHydrationData?g.mutableSourceEagerHydrationData=[t,n]:g.mutableSourceEagerHydrationData.push(t,n);return new Pr(g)},g.render=function(e,g,t){if(!qr(g))throw Error(l(200));return _r(null,e,g,!1,t)},g.unmountComponentAtNode=function(e){if(!qr(e))throw Error(l(40));return!!e._reactRootContainer&&(ir((function(){_r(null,null,e,!1,(function(){e._reactRootContainer=null,e[sn]=null}))})),!0)},g.unstable_batchedUpdates=rr,g.unstable_renderSubtreeIntoContainer=function(e,g,t,I){if(!qr(t))throw Error(l(200));if(null==e||void 0===e._reactInternals)throw Error(l(38));return _r(e,g,t,!1,I)},g.version="18.3.1-next-f1338f8080-20240426"},3030:(e,g,t)=>{"use strict";t.d(g,{A:()=>n});var I=t(8168);function n(e,g){const t=(0,I.A)({},g);return Object.keys(e).forEach((l=>{if(l.toString().match(/^(components|slots)$/))t[l]=(0,I.A)({},e[l],t[l]);else if(l.toString().match(/^(componentsProps|slotProps)$/)){const C=e[l]||{},o=g[l];t[l]={},o&&Object.keys(o)?C&&Object.keys(C)?(t[l]=(0,I.A)({},o),Object.keys(C).forEach((e=>{t[l][e]=n(C[e],o[e])}))):t[l]=o:t[l]=C}else void 0===t[l]&&(t[l]=e[l])})),t}},3174:(e,g,t)=>{"use strict";t.r(g),t.d(g,{GlobalStyles:()=>y.A,StyledEngineProvider:()=>G,ThemeContext:()=>n.T,css:()=>b.AH,default:()=>B,internal_processStyles:()=>S,keyframes:()=>b.i7});var I=t(8168),n=t(9369),l=t(6598),C=t(9436),o=t(1722),a=t(5043),r=t(918),i=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,c=(0,r.A)((function(e){return i.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),A=function(e){return"theme"!==e},d=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?c:A},s=function(e,g,t){var I;if(g){var n=g.shouldForwardProp;I=e.__emotion_forwardProp&&n?function(g){return e.__emotion_forwardProp(g)&&n(g)}:n}return"function"!==typeof I&&t&&(I=e.__emotion_forwardProp),I},u=function(e){var g=e.cache,t=e.serialized,I=e.isStringTag;return(0,o.SF)(g,t,I),(0,C.s)((function(){return(0,o.sk)(g,t,I)})),null},m=function e(g,t){var C,r,i=g.__emotion_real===g,c=i&&g.__emotion_base||g;void 0!==t&&(C=t.label,r=t.target);var A=s(g,t,i),m=A||d(c),b=!m("as");return function(){var Z=arguments,p=i&&void 0!==g.__emotion_styles?g.__emotion_styles.slice(0):[];if(void 0!==C&&p.push("label:"+C+";"),null==Z[0]||void 0===Z[0].raw)p.push.apply(p,Z);else{var h=Z[0];p.push(h[0]);for(var G=Z.length,y=1;y<G;y++)p.push(Z[y],h[y])}var B=(0,n.w)((function(e,g,t){var I=b&&e.as||c,C="",i=[],s=e;if(null==e.theme){for(var Z in s={},e)s[Z]=e[Z];s.theme=a.useContext(n.T)}"string"===typeof e.className?C=(0,o.Rk)(g.registered,i,e.className):null!=e.className&&(C=e.className+" ");var h=(0,l.J)(p.concat(i),g.registered,s);C+=g.key+"-"+h.name,void 0!==r&&(C+=" "+r);var G=b&&void 0===A?d(I):m,y={};for(var B in e)b&&"as"===B||G(B)&&(y[B]=e[B]);return y.className=C,t&&(y.ref=t),a.createElement(a.Fragment,null,a.createElement(u,{cache:g,serialized:h,isStringTag:"string"===typeof I}),a.createElement(I,y))}));return B.displayName=void 0!==C?C:"Styled("+("string"===typeof c?c:c.displayName||c.name||"Component")+")",B.defaultProps=g.defaultProps,B.__emotion_real=B,B.__emotion_base=c,B.__emotion_styles=p,B.__emotion_forwardProp=A,Object.defineProperty(B,"toString",{value:function(){return"."+r}}),B.withComponent=function(g,n){return e(g,(0,I.A)({},t,n,{shouldForwardProp:s(B,n,!0)})).apply(void 0,p)},B}}.bind(null);["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){m[e]=m(e)}));var b=t(3290),Z=t(3803),p=t(579);let h;function G(e){const{injectFirst:g,children:t}=e;return g&&h?(0,p.jsx)(n.C,{value:h,children:t}):t}"object"===typeof document&&(h=(0,Z.A)({key:"css",prepend:!0}));var y=t(869);function B(e,g){return m(e,g)}const S=(e,g)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=g(e.__emotion_styles))}},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3234:(e,g,t)=>{"use strict";t.r(g),t.d(g,{default:()=>I.A,extendSxProp:()=>n.A,unstable_createStyleFunctionSx:()=>I.k,unstable_defaultSxConfig:()=>l.A});var I=t(8812),n=t(8698),l=t(7758)},3290:(e,g,t)=>{"use strict";t.d(g,{AH:()=>i,i7:()=>c,mL:()=>r});var I=t(9369),n=t(5043),l=t(1722),C=t(9436),o=t(6598),a=(t(3803),t(219),function(e,g){var t=arguments;if(null==g||!I.h.call(g,"css"))return n.createElement.apply(void 0,t);var l=t.length,C=new Array(l);C[0]=I.E,C[1]=(0,I.c)(e,g);for(var o=2;o<l;o++)C[o]=t[o];return n.createElement.apply(null,C)});!function(e){var g;g||(g=e.JSX||(e.JSX={}))}(a||(a={}));var r=(0,I.w)((function(e,g){var t=e.styles,a=(0,o.J)([t],void 0,n.useContext(I.T)),r=n.useRef();return(0,C.i)((function(){var e=g.key+"-global",t=new g.sheet.constructor({key:e,nonce:g.sheet.nonce,container:g.sheet.container,speedy:g.sheet.isSpeedy}),I=!1,n=document.querySelector('style[data-emotion="'+e+" "+a.name+'"]');return g.sheet.tags.length&&(t.before=g.sheet.tags[0]),null!==n&&(I=!0,n.setAttribute("data-emotion",e),t.hydrate([n])),r.current=[t,I],function(){t.flush()}}),[g]),(0,C.i)((function(){var e=r.current,t=e[0];if(e[1])e[1]=!1;else{if(void 0!==a.next&&(0,l.sk)(g,a.next,!0),t.tags.length){var I=t.tags[t.tags.length-1].nextElementSibling;t.before=I,t.flush()}g.insert("",a,t,!1)}}),[g,a.name]),null}));function i(){for(var e=arguments.length,g=new Array(e),t=0;t<e;t++)g[t]=arguments[t];return(0,o.J)(g)}function c(){var e=i.apply(void 0,arguments),g="animation-"+e.name;return{name:g,styles:"@keyframes "+g+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}},3319:(e,g,t)=>{"use strict";t.d(g,{A:()=>I});const I=t(1782).A},3375:(e,g,t)=>{"use strict";t.d(g,{A:()=>I});const I="$$material"},3382:(e,g,t)=>{"use strict";t.r(g),t.d(g,{default:()=>a,getFunctionName:()=>l});var I=t(191);const n=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function l(e){const g=`${e}`.match(n);return g&&g[1]||""}function C(e){let g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.displayName||e.name||l(e)||g}function o(e,g,t){const I=C(g);return e.displayName||(""!==I?`${t}(${I})`:t)}function a(e){if(null!=e){if("string"===typeof e)return e;if("function"===typeof e)return C(e,"Component");if("object"===typeof e)switch(e.$$typeof){case I.vM:return o(e,e.render,"ForwardRef");case I.lD:return o(e,e.type,"memo");default:return}}}},3462:(e,g,t)=>{"use strict";t.d(g,{A:()=>l});var I=t(5043),n=t(6564);function l(){for(var e=arguments.length,g=new Array(e),t=0;t<e;t++)g[t]=arguments[t];return I.useMemo((()=>g.every((e=>null==e))?null:e=>{g.forEach((g=>{(0,n.A)(g,e)}))}),g)}},3468:(e,g,t)=>{"use strict";function I(e){let g,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function I(){for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];clearTimeout(g),g=setTimeout((()=>{e.apply(this,n)}),t)}return I.clear=()=>{clearTimeout(g)},I}t.d(g,{A:()=>I})},3471:(e,g,t)=>{"use strict";var I=t(4994);g.A=void 0;var n=I(t(39)),l=t(579);g.A=(0,n.default)((0,l.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},3574:(e,g,t)=>{"use strict";t.d(g,{A:()=>d});var I=t(5043),n=t(9303);let l=!0,C=!1;const o=new n.E,a={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function r(e){e.metaKey||e.altKey||e.ctrlKey||(l=!0)}function i(){l=!1}function c(){"hidden"===this.visibilityState&&C&&(l=!0)}function A(e){const{target:g}=e;try{return g.matches(":focus-visible")}catch(t){}return l||function(e){const{type:g,tagName:t}=e;return!("INPUT"!==t||!a[g]||e.readOnly)||"TEXTAREA"===t&&!e.readOnly||!!e.isContentEditable}(g)}const d=function(){const e=I.useCallback((e=>{var g;null!=e&&((g=e.ownerDocument).addEventListener("keydown",r,!0),g.addEventListener("mousedown",i,!0),g.addEventListener("pointerdown",i,!0),g.addEventListener("touchstart",i,!0),g.addEventListener("visibilitychange",c,!0))}),[]),g=I.useRef(!1);return{isFocusVisibleRef:g,onFocus:function(e){return!!A(e)&&(g.current=!0,!0)},onBlur:function(){return!!g.current&&(C=!0,o.start(100,(()=>{C=!1})),g.current=!1,!0)},ref:e}}},3654:(e,g,t)=>{"use strict";t.d(g,{A:()=>a,b:()=>o});var I=t(5043),n=t(3030),l=t(579);const C=I.createContext(void 0);function o(e){let{props:g,name:t}=e;return function(e){const{theme:g,name:t,props:I}=e;if(!g||!g.components||!g.components[t])return I;const l=g.components[t];return l.defaultProps?(0,n.A)(l.defaultProps,I):l.styleOverrides||l.variants?I:(0,n.A)(l,I)}({props:g,name:t,theme:{components:I.useContext(C)}})}const a=function(e){let{value:g,children:t}=e;return(0,l.jsx)(C.Provider,{value:g,children:t})}},3763:(e,g,t)=>{"use strict";e.exports=t(4983)},3803:(e,g,t)=>{"use strict";t.d(g,{A:()=>ne});var I=function(){function e(e){var g=this;this._insertTag=function(e){var t;t=0===g.tags.length?g.insertionPoint?g.insertionPoint.nextSibling:g.prepend?g.container.firstChild:g.before:g.tags[g.tags.length-1].nextSibling,g.container.insertBefore(e,t),g.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var g=e.prototype;return g.hydrate=function(e){e.forEach(this._insertTag)},g.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var g=document.createElement("style");return g.setAttribute("data-emotion",e.key),void 0!==e.nonce&&g.setAttribute("nonce",e.nonce),g.appendChild(document.createTextNode("")),g.setAttribute("data-s",""),g}(this));var g=this.tags[this.tags.length-1];if(this.isSpeedy){var t=function(e){if(e.sheet)return e.sheet;for(var g=0;g<document.styleSheets.length;g++)if(document.styleSheets[g].ownerNode===e)return document.styleSheets[g]}(g);try{t.insertRule(e,t.cssRules.length)}catch(I){}}else g.appendChild(document.createTextNode(e));this.ctr++},g.flush=function(){this.tags.forEach((function(e){var g;return null==(g=e.parentNode)?void 0:g.removeChild(e)})),this.tags=[],this.ctr=0},e}(),n=Math.abs,l=String.fromCharCode,C=Object.assign;function o(e){return e.trim()}function a(e,g,t){return e.replace(g,t)}function r(e,g){return e.indexOf(g)}function i(e,g){return 0|e.charCodeAt(g)}function c(e,g,t){return e.slice(g,t)}function A(e){return e.length}function d(e){return e.length}function s(e,g){return g.push(e),e}var u=1,m=1,b=0,Z=0,p=0,h="";function G(e,g,t,I,n,l,C){return{value:e,root:g,parent:t,type:I,props:n,children:l,line:u,column:m,length:C,return:""}}function y(e,g){return C(G("",null,null,"",null,null,0),e,{length:-e.length},g)}function B(){return p=Z>0?i(h,--Z):0,m--,10===p&&(m=1,u--),p}function S(){return p=Z<b?i(h,Z++):0,m++,10===p&&(m=1,u++),p}function W(){return i(h,Z)}function V(){return Z}function v(e,g){return c(h,e,g)}function R(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function f(e){return u=m=1,b=A(h=e),Z=0,[]}function X(e){return h="",e}function k(e){return o(v(Z-1,w(91===e?e+2:40===e?e+1:e)))}function J(e){for(;(p=W())&&p<33;)S();return R(e)>2||R(p)>3?"":" "}function Y(e,g){for(;--g&&S()&&!(p<48||p>102||p>57&&p<65||p>70&&p<97););return v(e,V()+(g<6&&32==W()&&32==S()))}function w(e){for(;S();)switch(p){case e:return Z;case 34:case 39:34!==e&&39!==e&&w(p);break;case 40:41===e&&w(e);break;case 92:S()}return Z}function H(e,g){for(;S()&&e+p!==57&&(e+p!==84||47!==W()););return"/*"+v(g,Z-1)+"*"+l(47===e?e:S())}function N(e){for(;!R(W());)S();return v(e,Z)}var F="-ms-",K="-moz-",x="-webkit-",M="comm",z="rule",E="decl",D="@keyframes";function U(e,g){for(var t="",I=d(e),n=0;n<I;n++)t+=g(e[n],n,e,g)||"";return t}function T(e,g,t,I){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case E:return e.return=e.return||e.value;case M:return"";case D:return e.return=e.value+"{"+U(e.children,I)+"}";case z:e.value=e.props.join(",")}return A(t=U(e.children,I))?e.return=e.value+"{"+t+"}":""}function L(e){return X(Q("",null,null,null,[""],e=f(e),0,[0],e))}function Q(e,g,t,I,n,C,o,c,d){for(var u=0,m=0,b=o,Z=0,p=0,h=0,G=1,y=1,v=1,R=0,f="",X=n,w=C,F=I,K=f;y;)switch(h=R,R=S()){case 40:if(108!=h&&58==i(K,b-1)){-1!=r(K+=a(k(R),"&","&\f"),"&\f")&&(v=-1);break}case 34:case 39:case 91:K+=k(R);break;case 9:case 10:case 13:case 32:K+=J(h);break;case 92:K+=Y(V()-1,7);continue;case 47:switch(W()){case 42:case 47:s(P(H(S(),V()),g,t),d);break;default:K+="/"}break;case 123*G:c[u++]=A(K)*v;case 125*G:case 59:case 0:switch(R){case 0:case 125:y=0;case 59+m:-1==v&&(K=a(K,/\f/g,"")),p>0&&A(K)-b&&s(p>32?O(K+";",I,t,b-1):O(a(K," ","")+";",I,t,b-2),d);break;case 59:K+=";";default:if(s(F=j(K,g,t,u,m,n,c,f,X=[],w=[],b),C),123===R)if(0===m)Q(K,g,F,F,X,C,b,c,w);else switch(99===Z&&110===i(K,3)?100:Z){case 100:case 108:case 109:case 115:Q(e,F,F,I&&s(j(e,F,F,0,0,n,c,f,n,X=[],b),w),n,w,b,c,I?X:w);break;default:Q(K,F,F,F,[""],w,0,c,w)}}u=m=p=0,G=v=1,f=K="",b=o;break;case 58:b=1+A(K),p=h;default:if(G<1)if(123==R)--G;else if(125==R&&0==G++&&125==B())continue;switch(K+=l(R),R*G){case 38:v=m>0?1:(K+="\f",-1);break;case 44:c[u++]=(A(K)-1)*v,v=1;break;case 64:45===W()&&(K+=k(S())),Z=W(),m=b=A(f=K+=N(V())),R++;break;case 45:45===h&&2==A(K)&&(G=0)}}return C}function j(e,g,t,I,l,C,r,i,A,s,u){for(var m=l-1,b=0===l?C:[""],Z=d(b),p=0,h=0,y=0;p<I;++p)for(var B=0,S=c(e,m+1,m=n(h=r[p])),W=e;B<Z;++B)(W=o(h>0?b[B]+" "+S:a(S,/&\f/g,b[B])))&&(A[y++]=W);return G(e,g,t,0===l?z:i,A,s,u)}function P(e,g,t){return G(e,g,t,M,l(p),c(e,2,-2),0)}function O(e,g,t,I){return G(e,g,t,E,c(e,0,I),c(e,I+1,-1),I)}var q=function(e,g,t){for(var I=0,n=0;I=n,n=W(),38===I&&12===n&&(g[t]=1),!R(n);)S();return v(e,Z)},$=function(e,g){return X(function(e,g){var t=-1,I=44;do{switch(R(I)){case 0:38===I&&12===W()&&(g[t]=1),e[t]+=q(Z-1,g,t);break;case 2:e[t]+=k(I);break;case 4:if(44===I){e[++t]=58===W()?"&\f":"",g[t]=e[t].length;break}default:e[t]+=l(I)}}while(I=S());return e}(f(e),g))},_=new WeakMap,ee=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var g=e.value,t=e.parent,I=e.column===t.column&&e.line===t.line;"rule"!==t.type;)if(!(t=t.parent))return;if((1!==e.props.length||58===g.charCodeAt(0)||_.get(t))&&!I){_.set(e,!0);for(var n=[],l=$(g,n),C=t.props,o=0,a=0;o<l.length;o++)for(var r=0;r<C.length;r++,a++)e.props[a]=n[o]?l[o].replace(/&\f/g,C[r]):C[r]+" "+l[o]}}},ge=function(e){if("decl"===e.type){var g=e.value;108===g.charCodeAt(0)&&98===g.charCodeAt(2)&&(e.return="",e.value="")}};function te(e,g){switch(function(e,g){return 45^i(e,0)?(((g<<2^i(e,0))<<2^i(e,1))<<2^i(e,2))<<2^i(e,3):0}(e,g)){case 5103:return x+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return x+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return x+e+K+e+F+e+e;case 6828:case 4268:return x+e+F+e+e;case 6165:return x+e+F+"flex-"+e+e;case 5187:return x+e+a(e,/(\w+).+(:[^]+)/,x+"box-$1$2"+F+"flex-$1$2")+e;case 5443:return x+e+F+"flex-item-"+a(e,/flex-|-self/,"")+e;case 4675:return x+e+F+"flex-line-pack"+a(e,/align-content|flex-|-self/,"")+e;case 5548:return x+e+F+a(e,"shrink","negative")+e;case 5292:return x+e+F+a(e,"basis","preferred-size")+e;case 6060:return x+"box-"+a(e,"-grow","")+x+e+F+a(e,"grow","positive")+e;case 4554:return x+a(e,/([^-])(transform)/g,"$1"+x+"$2")+e;case 6187:return a(a(a(e,/(zoom-|grab)/,x+"$1"),/(image-set)/,x+"$1"),e,"")+e;case 5495:case 3959:return a(e,/(image-set\([^]*)/,x+"$1$`$1");case 4968:return a(a(e,/(.+:)(flex-)?(.*)/,x+"box-pack:$3"+F+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+x+e+e;case 4095:case 3583:case 4068:case 2532:return a(e,/(.+)-inline(.+)/,x+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(A(e)-1-g>6)switch(i(e,g+1)){case 109:if(45!==i(e,g+4))break;case 102:return a(e,/(.+:)(.+)-([^]+)/,"$1"+x+"$2-$3$1"+K+(108==i(e,g+3)?"$3":"$2-$3"))+e;case 115:return~r(e,"stretch")?te(a(e,"stretch","fill-available"),g)+e:e}break;case 4949:if(115!==i(e,g+1))break;case 6444:switch(i(e,A(e)-3-(~r(e,"!important")&&10))){case 107:return a(e,":",":"+x)+e;case 101:return a(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+x+(45===i(e,14)?"inline-":"")+"box$3$1"+x+"$2$3$1"+F+"$2box$3")+e}break;case 5936:switch(i(e,g+11)){case 114:return x+e+F+a(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return x+e+F+a(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return x+e+F+a(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return x+e+F+e+e}return e}var Ie=[function(e,g,t,I){if(e.length>-1&&!e.return)switch(e.type){case E:e.return=te(e.value,e.length);break;case D:return U([y(e,{value:a(e.value,"@","@"+x)})],I);case z:if(e.length)return function(e,g){return e.map(g).join("")}(e.props,(function(g){switch(function(e,g){return(e=g.exec(e))?e[0]:e}(g,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return U([y(e,{props:[a(g,/:(read-\w+)/,":-moz-$1")]})],I);case"::placeholder":return U([y(e,{props:[a(g,/:(plac\w+)/,":"+x+"input-$1")]}),y(e,{props:[a(g,/:(plac\w+)/,":-moz-$1")]}),y(e,{props:[a(g,/:(plac\w+)/,F+"input-$1")]})],I)}return""}))}}],ne=function(e){var g=e.key;if("css"===g){var t=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(t,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var n,l,C=e.stylisPlugins||Ie,o={},a=[];n=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+g+' "]'),(function(e){for(var g=e.getAttribute("data-emotion").split(" "),t=1;t<g.length;t++)o[g[t]]=!0;a.push(e)}));var r,i,c=[T,(i=function(e){r.insert(e)},function(e){e.root||(e=e.return)&&i(e)})],A=function(e){var g=d(e);return function(t,I,n,l){for(var C="",o=0;o<g;o++)C+=e[o](t,I,n,l)||"";return C}}([ee,ge].concat(C,c));l=function(e,g,t,I){r=t,U(L(e?e+"{"+g.styles+"}":g.styles),A),I&&(s.inserted[g.name]=!0)};var s={key:g,sheet:new I({key:g,container:n,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:l};return s.sheet.hydrate(a),s}},3815:(e,g,t)=>{"use strict";t.d(g,{A:()=>n});var I=t(9172);const n=function(e,g){return g?(0,I.A)(e,g,{clone:!1}):e}},3940:(e,g,t)=>{"use strict";t.d(g,{A:()=>n});var I=t(1668);function n(e){return(0,I.A)(e).defaultView||window}},4202:(e,g)=>{"use strict";var t=Symbol.for("react.element"),I=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),r=Symbol.for("react.forward_ref"),i=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),d=Symbol.iterator;var s={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},u=Object.assign,m={};function b(e,g,t){this.props=e,this.context=g,this.refs=m,this.updater=t||s}function Z(){}function p(e,g,t){this.props=e,this.context=g,this.refs=m,this.updater=t||s}b.prototype.isReactComponent={},b.prototype.setState=function(e,g){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,g,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},Z.prototype=b.prototype;var h=p.prototype=new Z;h.constructor=p,u(h,b.prototype),h.isPureReactComponent=!0;var G=Array.isArray,y=Object.prototype.hasOwnProperty,B={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function W(e,g,I){var n,l={},C=null,o=null;if(null!=g)for(n in void 0!==g.ref&&(o=g.ref),void 0!==g.key&&(C=""+g.key),g)y.call(g,n)&&!S.hasOwnProperty(n)&&(l[n]=g[n]);var a=arguments.length-2;if(1===a)l.children=I;else if(1<a){for(var r=Array(a),i=0;i<a;i++)r[i]=arguments[i+2];l.children=r}if(e&&e.defaultProps)for(n in a=e.defaultProps)void 0===l[n]&&(l[n]=a[n]);return{$$typeof:t,type:e,key:C,ref:o,props:l,_owner:B.current}}function V(e){return"object"===typeof e&&null!==e&&e.$$typeof===t}var v=/\/+/g;function R(e,g){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var g={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return g[e]}))}(""+e.key):g.toString(36)}function f(e,g,n,l,C){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var a=!1;if(null===e)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case t:case I:a=!0}}if(a)return C=C(a=e),e=""===l?"."+R(a,0):l,G(C)?(n="",null!=e&&(n=e.replace(v,"$&/")+"/"),f(C,g,n,"",(function(e){return e}))):null!=C&&(V(C)&&(C=function(e,g){return{$$typeof:t,type:e.type,key:g,ref:e.ref,props:e.props,_owner:e._owner}}(C,n+(!C.key||a&&a.key===C.key?"":(""+C.key).replace(v,"$&/")+"/")+e)),g.push(C)),1;if(a=0,l=""===l?".":l+":",G(e))for(var r=0;r<e.length;r++){var i=l+R(o=e[r],r);a+=f(o,g,n,i,C)}else if(i=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof i)for(e=i.call(e),r=0;!(o=e.next()).done;)a+=f(o=o.value,g,n,i=l+R(o,r++),C);else if("object"===o)throw g=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===g?"object with keys {"+Object.keys(e).join(", ")+"}":g)+"). If you meant to render a collection of children, use an array instead.");return a}function X(e,g,t){if(null==e)return e;var I=[],n=0;return f(e,I,"","",(function(e){return g.call(t,e,n++)})),I}function k(e){if(-1===e._status){var g=e._result;(g=g()).then((function(g){0!==e._status&&-1!==e._status||(e._status=1,e._result=g)}),(function(g){0!==e._status&&-1!==e._status||(e._status=2,e._result=g)})),-1===e._status&&(e._status=0,e._result=g)}if(1===e._status)return e._result.default;throw e._result}var J={current:null},Y={transition:null},w={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:Y,ReactCurrentOwner:B};function H(){throw Error("act(...) is not supported in production builds of React.")}g.Children={map:X,forEach:function(e,g,t){X(e,(function(){g.apply(this,arguments)}),t)},count:function(e){var g=0;return X(e,(function(){g++})),g},toArray:function(e){return X(e,(function(e){return e}))||[]},only:function(e){if(!V(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},g.Component=b,g.Fragment=n,g.Profiler=C,g.PureComponent=p,g.StrictMode=l,g.Suspense=i,g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w,g.act=H,g.cloneElement=function(e,g,I){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=u({},e.props),l=e.key,C=e.ref,o=e._owner;if(null!=g){if(void 0!==g.ref&&(C=g.ref,o=B.current),void 0!==g.key&&(l=""+g.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(r in g)y.call(g,r)&&!S.hasOwnProperty(r)&&(n[r]=void 0===g[r]&&void 0!==a?a[r]:g[r])}var r=arguments.length-2;if(1===r)n.children=I;else if(1<r){a=Array(r);for(var i=0;i<r;i++)a[i]=arguments[i+2];n.children=a}return{$$typeof:t,type:e.type,key:l,ref:C,props:n,_owner:o}},g.createContext=function(e){return(e={$$typeof:a,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},g.createElement=W,g.createFactory=function(e){var g=W.bind(null,e);return g.type=e,g},g.createRef=function(){return{current:null}},g.forwardRef=function(e){return{$$typeof:r,render:e}},g.isValidElement=V,g.lazy=function(e){return{$$typeof:A,_payload:{_status:-1,_result:e},_init:k}},g.memo=function(e,g){return{$$typeof:c,type:e,compare:void 0===g?null:g}},g.startTransition=function(e){var g=Y.transition;Y.transition={};try{e()}finally{Y.transition=g}},g.unstable_act=H,g.useCallback=function(e,g){return J.current.useCallback(e,g)},g.useContext=function(e){return J.current.useContext(e)},g.useDebugValue=function(){},g.useDeferredValue=function(e){return J.current.useDeferredValue(e)},g.useEffect=function(e,g){return J.current.useEffect(e,g)},g.useId=function(){return J.current.useId()},g.useImperativeHandle=function(e,g,t){return J.current.useImperativeHandle(e,g,t)},g.useInsertionEffect=function(e,g){return J.current.useInsertionEffect(e,g)},g.useLayoutEffect=function(e,g){return J.current.useLayoutEffect(e,g)},g.useMemo=function(e,g){return J.current.useMemo(e,g)},g.useReducer=function(e,g,t){return J.current.useReducer(e,g,t)},g.useRef=function(e){return J.current.useRef(e)},g.useState=function(e){return J.current.useState(e)},g.useSyncExternalStore=function(e,g,t){return J.current.useSyncExternalStore(e,g,t)},g.useTransition=function(){return J.current.useTransition()},g.version="18.3.1"},4391:(e,g,t)=>{"use strict";var I=t(7950);g.createRoot=I.createRoot,g.hydrateRoot=I.hydrateRoot},4421:(e,g,t)=>{"use strict";t.r(g),t.d(g,{capitalize:()=>n.A,createChainedFunction:()=>l,createSvgIcon:()=>C.A,debounce:()=>o.A,deprecatedPropType:()=>a,isMuiElement:()=>r.A,ownerDocument:()=>i.A,ownerWindow:()=>c.A,requirePropFactory:()=>A,setRef:()=>d,unstable_ClassNameGenerator:()=>G,unstable_useEnhancedEffect:()=>s.A,unstable_useId:()=>u.A,unsupportedProp:()=>m,useControlled:()=>b.A,useEventCallback:()=>Z.A,useForkRef:()=>p.A,useIsFocusVisible:()=>h.A});var I=t(9386),n=t(6803);const l=t(2456).A;var C=t(9662),o=t(950);const a=function(e,g){return()=>null};var r=t(7328),i=t(2427),c=t(6078);t(8168);const A=function(e,g){return()=>null};const d=t(6564).A;var s=t(5013),u=t(5879);const m=function(e,g,t,I,n){return null};var b=t(4516),Z=t(3319),p=t(5849),h=t(3574);const G={configure:e=>{I.A.configure(e)}}},4440:(e,g,t)=>{"use strict";t.d(g,{A:()=>n});var I=t(5043);const n="undefined"!==typeof window?I.useLayoutEffect:I.useEffect},4516:(e,g,t)=>{"use strict";t.d(g,{A:()=>I});const I=t(1052).A},4535:(e,g,t)=>{"use strict";t.d(g,{Ay:()=>o});var I=t(8052),n=t(5170),l=t(3375),C=t(1475);const o=(0,I.Ay)({themeId:l.A,defaultTheme:n.A,rootShouldForwardProp:C.A})},4634:e=>{function g(){return e.exports=g=Object.assign?Object.assign.bind():function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var I in t)({}).hasOwnProperty.call(t,I)&&(e[I]=t[I])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,g.apply(null,arguments)}e.exports=g,e.exports.__esModule=!0,e.exports.default=e.exports},4853:(e,g,t)=>{"use strict";t.d(g,{A:()=>o});var I=t(8587),n=t(8168);const l=["values","unit","step"],C=e=>{const g=Object.keys(e).map((g=>({key:g,val:e[g]})))||[];return g.sort(((e,g)=>e.val-g.val)),g.reduce(((e,g)=>(0,n.A)({},e,{[g.key]:g.val})),{})};function o(e){const{values:g={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:o=5}=e,a=(0,I.A)(e,l),r=C(g),i=Object.keys(r);function c(e){return`@media (min-width:${"number"===typeof g[e]?g[e]:e}${t})`}function A(e){return`@media (max-width:${("number"===typeof g[e]?g[e]:e)-o/100}${t})`}function d(e,I){const n=i.indexOf(I);return`@media (min-width:${"number"===typeof g[e]?g[e]:e}${t}) and (max-width:${(-1!==n&&"number"===typeof g[i[n]]?g[i[n]]:I)-o/100}${t})`}return(0,n.A)({keys:i,values:r,up:c,down:A,between:d,only:function(e){return i.indexOf(e)+1<i.length?d(e,i[i.indexOf(e)+1]):c(e)},not:function(e){const g=i.indexOf(e);return 0===g?c(i[1]):g===i.length-1?A(i[g]):d(e,i[i.indexOf(e)+1]).replace("@media","@media not all and")},unit:t},a)}},4893:e=>{e.exports=function(e,g){if(null==e)return{};var t={};for(var I in e)if({}.hasOwnProperty.call(e,I)){if(-1!==g.indexOf(I))continue;t[I]=e[I]}return t},e.exports.__esModule=!0,e.exports.default=e.exports},4983:(e,g)=>{"use strict";var t="function"===typeof Symbol&&Symbol.for,I=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,l=t?Symbol.for("react.fragment"):60107,C=t?Symbol.for("react.strict_mode"):60108,o=t?Symbol.for("react.profiler"):60114,a=t?Symbol.for("react.provider"):60109,r=t?Symbol.for("react.context"):60110,i=t?Symbol.for("react.async_mode"):60111,c=t?Symbol.for("react.concurrent_mode"):60111,A=t?Symbol.for("react.forward_ref"):60112,d=t?Symbol.for("react.suspense"):60113,s=t?Symbol.for("react.suspense_list"):60120,u=t?Symbol.for("react.memo"):60115,m=t?Symbol.for("react.lazy"):60116,b=t?Symbol.for("react.block"):60121,Z=t?Symbol.for("react.fundamental"):60117,p=t?Symbol.for("react.responder"):60118,h=t?Symbol.for("react.scope"):60119;function G(e){if("object"===typeof e&&null!==e){var g=e.$$typeof;switch(g){case I:switch(e=e.type){case i:case c:case l:case o:case C:case d:return e;default:switch(e=e&&e.$$typeof){case r:case A:case m:case u:case a:return e;default:return g}}case n:return g}}}function y(e){return G(e)===c}g.AsyncMode=i,g.ConcurrentMode=c,g.ContextConsumer=r,g.ContextProvider=a,g.Element=I,g.ForwardRef=A,g.Fragment=l,g.Lazy=m,g.Memo=u,g.Portal=n,g.Profiler=o,g.StrictMode=C,g.Suspense=d,g.isAsyncMode=function(e){return y(e)||G(e)===i},g.isConcurrentMode=y,g.isContextConsumer=function(e){return G(e)===r},g.isContextProvider=function(e){return G(e)===a},g.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===I},g.isForwardRef=function(e){return G(e)===A},g.isFragment=function(e){return G(e)===l},g.isLazy=function(e){return G(e)===m},g.isMemo=function(e){return G(e)===u},g.isPortal=function(e){return G(e)===n},g.isProfiler=function(e){return G(e)===o},g.isStrictMode=function(e){return G(e)===C},g.isSuspense=function(e){return G(e)===d},g.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===l||e===c||e===o||e===C||e===d||e===s||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===u||e.$$typeof===a||e.$$typeof===r||e.$$typeof===A||e.$$typeof===Z||e.$$typeof===p||e.$$typeof===h||e.$$typeof===b)},g.typeOf=G},4989:(e,g,t)=>{"use strict";t.r(g),t.d(g,{default:()=>I.A,private_createBreakpoints:()=>n.A,unstable_applyStyles:()=>l.A});var I=t(8280),n=t(4853),l=t(9703)},4994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},5013:(e,g,t)=>{"use strict";t.d(g,{A:()=>I});const I=t(4440).A},5043:(e,g,t)=>{"use strict";e.exports=t(4202)},5170:(e,g,t)=>{"use strict";t.d(g,{A:()=>I});const I=(0,t(8279).A)()},5173:(e,g,t)=>{e.exports=t(1497)()},5540:(e,g,t)=>{"use strict";var I=t(4994);g.A=void 0;var n=I(t(39)),l=t(579);g.A=(0,n.default)((0,l.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},5844:(e,g,t)=>{"use strict";var I;t.d(g,{A:()=>o});var n=t(5043);let l=0;const C=(I||(I=t.t(n,2)))["useId".toString()];function o(e){if(void 0!==C){const g=C();return null!=e?e:g}return function(e){const[g,t]=n.useState(e),I=e||g;return n.useEffect((()=>{null==g&&(l+=1,t(`mui-${l}`))}),[g]),I}(e)}},5849:(e,g,t)=>{"use strict";t.d(g,{A:()=>I});const I=t(3462).A},5879:(e,g,t)=>{"use strict";t.d(g,{A:()=>I});const I=t(5844).A},6078:(e,g,t)=>{"use strict";t.d(g,{A:()=>I});const I=t(3940).A},6531:(e,g,t)=>{"use strict";t.r(g),t.d(g,{default:()=>I.A});var I=t(1188)},6564:(e,g,t)=>{"use strict";function I(e,g){"function"===typeof e?e(g):e&&(e.current=g)}t.d(g,{A:()=>I})},6598:(e,g,t)=>{"use strict";t.d(g,{J:()=>m});var I={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},n=t(918),l=!1,C=/[A-Z]|^ms/g,o=/_EMO_([^_]+?)_([^]*?)_EMO_/g,a=function(e){return 45===e.charCodeAt(1)},r=function(e){return null!=e&&"boolean"!==typeof e},i=(0,n.A)((function(e){return a(e)?e:e.replace(C,"-$&").toLowerCase()})),c=function(e,g){switch(e){case"animation":case"animationName":if("string"===typeof g)return g.replace(o,(function(e,g,t){return s={name:g,styles:t,next:s},g}))}return 1===I[e]||a(e)||"number"!==typeof g||0===g?g:g+"px"},A="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function d(e,g,t){if(null==t)return"";var I=t;if(void 0!==I.__emotion_styles)return I;switch(typeof t){case"boolean":return"";case"object":var n=t;if(1===n.anim)return s={name:n.name,styles:n.styles,next:s},n.name;var C=t;if(void 0!==C.styles){var o=C.next;if(void 0!==o)for(;void 0!==o;)s={name:o.name,styles:o.styles,next:s},o=o.next;return C.styles+";"}return function(e,g,t){var I="";if(Array.isArray(t))for(var n=0;n<t.length;n++)I+=d(e,g,t[n])+";";else for(var C in t){var o=t[C];if("object"!==typeof o){var a=o;null!=g&&void 0!==g[a]?I+=C+"{"+g[a]+"}":r(a)&&(I+=i(C)+":"+c(C,a)+";")}else{if("NO_COMPONENT_SELECTOR"===C&&l)throw new Error(A);if(!Array.isArray(o)||"string"!==typeof o[0]||null!=g&&void 0!==g[o[0]]){var s=d(e,g,o);switch(C){case"animation":case"animationName":I+=i(C)+":"+s+";";break;default:I+=C+"{"+s+"}"}}else for(var u=0;u<o.length;u++)r(o[u])&&(I+=i(C)+":"+c(C,o[u])+";")}}return I}(e,g,t);case"function":if(void 0!==e){var a=s,u=t(e);return s=a,d(e,g,u)}}var m=t;if(null==g)return m;var b=g[m];return void 0!==b?b:m}var s,u=/label:\s*([^\s;{]+)\s*(;|$)/g;function m(e,g,t){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var I=!0,n="";s=void 0;var l=e[0];null==l||void 0===l.raw?(I=!1,n+=d(t,g,l)):n+=l[0];for(var C=1;C<e.length;C++){if(n+=d(t,g,e[C]),I)n+=l[C]}u.lastIndex=0;for(var o,a="";null!==(o=u.exec(n));)a+="-"+o[1];var r=function(e){for(var g,t=0,I=0,n=e.length;n>=4;++I,n-=4)g=1540483477*(65535&(g=255&e.charCodeAt(I)|(255&e.charCodeAt(++I))<<8|(255&e.charCodeAt(++I))<<16|(255&e.charCodeAt(++I))<<24))+(59797*(g>>>16)<<16),t=1540483477*(65535&(g^=g>>>24))+(59797*(g>>>16)<<16)^1540483477*(65535&t)+(59797*(t>>>16)<<16);switch(n){case 3:t^=(255&e.charCodeAt(I+2))<<16;case 2:t^=(255&e.charCodeAt(I+1))<<8;case 1:t=1540483477*(65535&(t^=255&e.charCodeAt(I)))+(59797*(t>>>16)<<16)}return(((t=1540483477*(65535&(t^=t>>>13))+(59797*(t>>>16)<<16))^t>>>15)>>>0).toString(36)}(n)+a;return{name:r,styles:n,next:s}}},6723:(e,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var t=function(e,g){switch(e){case"P":return g.date({width:"short"});case"PP":return g.date({width:"medium"});case"PPP":return g.date({width:"long"});default:return g.date({width:"full"})}},I=function(e,g){switch(e){case"p":return g.time({width:"short"});case"pp":return g.time({width:"medium"});case"ppp":return g.time({width:"long"});default:return g.time({width:"full"})}},n={p:I,P:function(e,g){var n,l=e.match(/(P+)(p+)?/)||[],C=l[1],o=l[2];if(!o)return t(e,g);switch(C){case"P":n=g.dateTime({width:"short"});break;case"PP":n=g.dateTime({width:"medium"});break;case"PPP":n=g.dateTime({width:"long"});break;default:n=g.dateTime({width:"full"})}return n.replace("{{date}}",t(C,g)).replace("{{time}}",I(o,g))}};g.default=n,e.exports=g.default},6803:(e,g,t)=>{"use strict";t.d(g,{A:()=>I});const I=t(7598).A},7123:(e,g,t)=>{"use strict";t.d(g,{A:()=>I});const I=function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}},7162:(e,g,t)=>{"use strict";t.d(g,{Ay:()=>o,BO:()=>C,Yn:()=>l});var I=t(7598),n=t(9751);function l(e,g){let t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!g||"string"!==typeof g)return null;if(e&&e.vars&&t){const t=`vars.${g}`.split(".").reduce(((e,g)=>e&&e[g]?e[g]:null),e);if(null!=t)return t}return g.split(".").reduce(((e,g)=>e&&null!=e[g]?e[g]:null),e)}function C(e,g,t){let I,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t;return I="function"===typeof e?e(t):Array.isArray(e)?e[t]||n:l(e,t)||n,g&&(I=g(I,n,e)),I}const o=function(e){const{prop:g,cssProperty:t=e.prop,themeKey:o,transform:a}=e,r=e=>{if(null==e[g])return null;const r=e[g],i=l(e.theme,o)||{};return(0,n.NI)(e,r,(e=>{let n=C(i,a,e);return e===n&&"string"===typeof e&&(n=C(i,a,`${g}${"default"===e?"":(0,I.A)(e)}`,e)),!1===t?n:{[t]:n}}))};return r.propTypes={},r.filterProps=[g],r}},7234:(e,g)=>{"use strict";function t(e,g){var t=e.length;e.push(g);e:for(;0<t;){var I=t-1>>>1,n=e[I];if(!(0<l(n,g)))break e;e[I]=g,e[t]=n,t=I}}function I(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var g=e[0],t=e.pop();if(t!==g){e[0]=t;e:for(var I=0,n=e.length,C=n>>>1;I<C;){var o=2*(I+1)-1,a=e[o],r=o+1,i=e[r];if(0>l(a,t))r<n&&0>l(i,a)?(e[I]=i,e[r]=t,I=r):(e[I]=a,e[o]=t,I=o);else{if(!(r<n&&0>l(i,t)))break e;e[I]=i,e[r]=t,I=r}}}return g}function l(e,g){var t=e.sortIndex-g.sortIndex;return 0!==t?t:e.id-g.id}if("object"===typeof performance&&"function"===typeof performance.now){var C=performance;g.unstable_now=function(){return C.now()}}else{var o=Date,a=o.now();g.unstable_now=function(){return o.now()-a}}var r=[],i=[],c=1,A=null,d=3,s=!1,u=!1,m=!1,b="function"===typeof setTimeout?setTimeout:null,Z="function"===typeof clearTimeout?clearTimeout:null,p="undefined"!==typeof setImmediate?setImmediate:null;function h(e){for(var g=I(i);null!==g;){if(null===g.callback)n(i);else{if(!(g.startTime<=e))break;n(i),g.sortIndex=g.expirationTime,t(r,g)}g=I(i)}}function G(e){if(m=!1,h(e),!u)if(null!==I(r))u=!0,Y(y);else{var g=I(i);null!==g&&w(G,g.startTime-e)}}function y(e,t){u=!1,m&&(m=!1,Z(V),V=-1),s=!0;var l=d;try{for(h(t),A=I(r);null!==A&&(!(A.expirationTime>t)||e&&!f());){var C=A.callback;if("function"===typeof C){A.callback=null,d=A.priorityLevel;var o=C(A.expirationTime<=t);t=g.unstable_now(),"function"===typeof o?A.callback=o:A===I(r)&&n(r),h(t)}else n(r);A=I(r)}if(null!==A)var a=!0;else{var c=I(i);null!==c&&w(G,c.startTime-t),a=!1}return a}finally{A=null,d=l,s=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var B,S=!1,W=null,V=-1,v=5,R=-1;function f(){return!(g.unstable_now()-R<v)}function X(){if(null!==W){var e=g.unstable_now();R=e;var t=!0;try{t=W(!0,e)}finally{t?B():(S=!1,W=null)}}else S=!1}if("function"===typeof p)B=function(){p(X)};else if("undefined"!==typeof MessageChannel){var k=new MessageChannel,J=k.port2;k.port1.onmessage=X,B=function(){J.postMessage(null)}}else B=function(){b(X,0)};function Y(e){W=e,S||(S=!0,B())}function w(e,t){V=b((function(){e(g.unstable_now())}),t)}g.unstable_IdlePriority=5,g.unstable_ImmediatePriority=1,g.unstable_LowPriority=4,g.unstable_NormalPriority=3,g.unstable_Profiling=null,g.unstable_UserBlockingPriority=2,g.unstable_cancelCallback=function(e){e.callback=null},g.unstable_continueExecution=function(){u||s||(u=!0,Y(y))},g.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<e?Math.floor(1e3/e):5},g.unstable_getCurrentPriorityLevel=function(){return d},g.unstable_getFirstCallbackNode=function(){return I(r)},g.unstable_next=function(e){switch(d){case 1:case 2:case 3:var g=3;break;default:g=d}var t=d;d=g;try{return e()}finally{d=t}},g.unstable_pauseExecution=function(){},g.unstable_requestPaint=function(){},g.unstable_runWithPriority=function(e,g){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var t=d;d=e;try{return g()}finally{d=t}},g.unstable_scheduleCallback=function(e,n,l){var C=g.unstable_now();switch("object"===typeof l&&null!==l?l="number"===typeof(l=l.delay)&&0<l?C+l:C:l=C,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:c++,callback:n,priorityLevel:e,startTime:l,expirationTime:o=l+o,sortIndex:-1},l>C?(e.sortIndex=l,t(i,e),null===I(r)&&e===I(i)&&(m?(Z(V),V=-1):m=!0,w(G,l-C))):(e.sortIndex=o,t(r,e),u||s||(u=!0,Y(y))),e},g.unstable_shouldYield=f,g.unstable_wrapCallback=function(e){var g=d;return function(){var t=d;d=g;try{return e.apply(this,arguments)}finally{d=t}}}},7266:(e,g,t)=>{"use strict";var I=t(4994);g.X4=d,g.e$=s,g.eM=function(e,g){const t=A(e),I=A(g);return(Math.max(t,I)+.05)/(Math.min(t,I)+.05)},g.a=u;var n=I(t(457)),l=I(t(6531));function C(e){let g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,l.default)(e,g,t)}function o(e){e=e.slice(1);const g=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let t=e.match(g);return t&&1===t[0].length&&(t=t.map((e=>e+e))),t?`rgb${4===t.length?"a":""}(${t.map(((e,g)=>g<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}function a(e){if(e.type)return e;if("#"===e.charAt(0))return a(o(e));const g=e.indexOf("("),t=e.substring(0,g);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(t))throw new Error((0,n.default)(9,e));let I,l=e.substring(g+1,e.length-1);if("color"===t){if(l=l.split(" "),I=l.shift(),4===l.length&&"/"===l[3].charAt(0)&&(l[3]=l[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(I))throw new Error((0,n.default)(10,I))}else l=l.split(",");return l=l.map((e=>parseFloat(e))),{type:t,values:l,colorSpace:I}}const r=e=>{const g=a(e);return g.values.slice(0,3).map(((e,t)=>-1!==g.type.indexOf("hsl")&&0!==t?`${e}%`:e)).join(" ")};function i(e){const{type:g,colorSpace:t}=e;let{values:I}=e;return-1!==g.indexOf("rgb")?I=I.map(((e,g)=>g<3?parseInt(e,10):e)):-1!==g.indexOf("hsl")&&(I[1]=`${I[1]}%`,I[2]=`${I[2]}%`),I=-1!==g.indexOf("color")?`${t} ${I.join(" ")}`:`${I.join(", ")}`,`${g}(${I})`}function c(e){e=a(e);const{values:g}=e,t=g[0],I=g[1]/100,n=g[2]/100,l=I*Math.min(n,1-n),C=function(e){let g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+t/30)%12;return n-l*Math.max(Math.min(g-3,9-g,1),-1)};let o="rgb";const r=[Math.round(255*C(0)),Math.round(255*C(8)),Math.round(255*C(4))];return"hsla"===e.type&&(o+="a",r.push(g[3])),i({type:o,values:r})}function A(e){let g="hsl"===(e=a(e)).type||"hsla"===e.type?a(c(e)).values:e.values;return g=g.map((g=>("color"!==e.type&&(g/=255),g<=.03928?g/12.92:((g+.055)/1.055)**2.4))),Number((.2126*g[0]+.7152*g[1]+.0722*g[2]).toFixed(3))}function d(e,g){return e=a(e),g=C(g),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]=`/${g}`:e.values[3]=g,i(e)}function s(e,g){if(e=a(e),g=C(g),-1!==e.type.indexOf("hsl"))e.values[2]*=1-g;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let t=0;t<3;t+=1)e.values[t]*=1-g;return i(e)}function u(e,g){if(e=a(e),g=C(g),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*g;else if(-1!==e.type.indexOf("rgb"))for(let t=0;t<3;t+=1)e.values[t]+=(255-e.values[t])*g;else if(-1!==e.type.indexOf("color"))for(let t=0;t<3;t+=1)e.values[t]+=(1-e.values[t])*g;return i(e)}function m(e){let g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return A(e)>.5?s(e,g):u(e,g)}},7328:(e,g,t)=>{"use strict";t.d(g,{A:()=>n});var I=t(5043);const n=function(e,g){var t,n;return I.isValidElement(e)&&-1!==g.indexOf(null!=(t=e.type.muiName)?t:null==(n=e.type)||null==(n=n._payload)||null==(n=n.value)?void 0:n.muiName)}},7598:(e,g,t)=>{"use strict";t.d(g,{A:()=>n});var I=t(7868);function n(e){if("string"!==typeof e)throw new Error((0,I.A)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},7758:(e,g,t)=>{"use strict";t.d(g,{A:()=>w});var I=t(8604),n=t(7162),l=t(3815);const C=function(){for(var e=arguments.length,g=new Array(e),t=0;t<e;t++)g[t]=arguments[t];const I=g.reduce(((e,g)=>(g.filterProps.forEach((t=>{e[t]=g})),e)),{}),n=e=>Object.keys(e).reduce(((g,t)=>I[t]?(0,l.A)(g,I[t](e)):g),{});return n.propTypes={},n.filterProps=g.reduce(((e,g)=>e.concat(g.filterProps)),[]),n};var o=t(9751);function a(e){return"number"!==typeof e?e:`${e}px solid`}function r(e,g){return(0,n.Ay)({prop:e,themeKey:"borders",transform:g})}const i=r("border",a),c=r("borderTop",a),A=r("borderRight",a),d=r("borderBottom",a),s=r("borderLeft",a),u=r("borderColor"),m=r("borderTopColor"),b=r("borderRightColor"),Z=r("borderBottomColor"),p=r("borderLeftColor"),h=r("outline",a),G=r("outlineColor"),y=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const g=(0,I.MA)(e.theme,"shape.borderRadius",4,"borderRadius"),t=e=>({borderRadius:(0,I._W)(g,e)});return(0,o.NI)(e,e.borderRadius,t)}return null};y.propTypes={},y.filterProps=["borderRadius"];C(i,c,A,d,s,u,m,b,Z,p,y,h,G);const B=e=>{if(void 0!==e.gap&&null!==e.gap){const g=(0,I.MA)(e.theme,"spacing",8,"gap"),t=e=>({gap:(0,I._W)(g,e)});return(0,o.NI)(e,e.gap,t)}return null};B.propTypes={},B.filterProps=["gap"];const S=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const g=(0,I.MA)(e.theme,"spacing",8,"columnGap"),t=e=>({columnGap:(0,I._W)(g,e)});return(0,o.NI)(e,e.columnGap,t)}return null};S.propTypes={},S.filterProps=["columnGap"];const W=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const g=(0,I.MA)(e.theme,"spacing",8,"rowGap"),t=e=>({rowGap:(0,I._W)(g,e)});return(0,o.NI)(e,e.rowGap,t)}return null};W.propTypes={},W.filterProps=["rowGap"];C(B,S,W,(0,n.Ay)({prop:"gridColumn"}),(0,n.Ay)({prop:"gridRow"}),(0,n.Ay)({prop:"gridAutoFlow"}),(0,n.Ay)({prop:"gridAutoColumns"}),(0,n.Ay)({prop:"gridAutoRows"}),(0,n.Ay)({prop:"gridTemplateColumns"}),(0,n.Ay)({prop:"gridTemplateRows"}),(0,n.Ay)({prop:"gridTemplateAreas"}),(0,n.Ay)({prop:"gridArea"}));function V(e,g){return"grey"===g?g:e}C((0,n.Ay)({prop:"color",themeKey:"palette",transform:V}),(0,n.Ay)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:V}),(0,n.Ay)({prop:"backgroundColor",themeKey:"palette",transform:V}));function v(e){return e<=1&&0!==e?100*e+"%":e}const R=(0,n.Ay)({prop:"width",transform:v}),f=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const g=g=>{var t,I;const n=(null==(t=e.theme)||null==(t=t.breakpoints)||null==(t=t.values)?void 0:t[g])||o.zu[g];return n?"px"!==(null==(I=e.theme)||null==(I=I.breakpoints)?void 0:I.unit)?{maxWidth:`${n}${e.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:v(g)}};return(0,o.NI)(e,e.maxWidth,g)}return null};f.filterProps=["maxWidth"];const X=(0,n.Ay)({prop:"minWidth",transform:v}),k=(0,n.Ay)({prop:"height",transform:v}),J=(0,n.Ay)({prop:"maxHeight",transform:v}),Y=(0,n.Ay)({prop:"minHeight",transform:v}),w=((0,n.Ay)({prop:"size",cssProperty:"width",transform:v}),(0,n.Ay)({prop:"size",cssProperty:"height",transform:v}),C(R,f,X,k,J,Y,(0,n.Ay)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:a},borderTop:{themeKey:"borders",transform:a},borderRight:{themeKey:"borders",transform:a},borderBottom:{themeKey:"borders",transform:a},borderLeft:{themeKey:"borders",transform:a},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:a},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:y},color:{themeKey:"palette",transform:V},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:V},backgroundColor:{themeKey:"palette",transform:V},p:{style:I.Ms},pt:{style:I.Ms},pr:{style:I.Ms},pb:{style:I.Ms},pl:{style:I.Ms},px:{style:I.Ms},py:{style:I.Ms},padding:{style:I.Ms},paddingTop:{style:I.Ms},paddingRight:{style:I.Ms},paddingBottom:{style:I.Ms},paddingLeft:{style:I.Ms},paddingX:{style:I.Ms},paddingY:{style:I.Ms},paddingInline:{style:I.Ms},paddingInlineStart:{style:I.Ms},paddingInlineEnd:{style:I.Ms},paddingBlock:{style:I.Ms},paddingBlockStart:{style:I.Ms},paddingBlockEnd:{style:I.Ms},m:{style:I.Lc},mt:{style:I.Lc},mr:{style:I.Lc},mb:{style:I.Lc},ml:{style:I.Lc},mx:{style:I.Lc},my:{style:I.Lc},margin:{style:I.Lc},marginTop:{style:I.Lc},marginRight:{style:I.Lc},marginBottom:{style:I.Lc},marginLeft:{style:I.Lc},marginX:{style:I.Lc},marginY:{style:I.Lc},marginInline:{style:I.Lc},marginInlineStart:{style:I.Lc},marginInlineEnd:{style:I.Lc},marginBlock:{style:I.Lc},marginBlockStart:{style:I.Lc},marginBlockEnd:{style:I.Lc},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:B},rowGap:{style:W},columnGap:{style:S},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:v},maxWidth:{style:f},minWidth:{transform:v},height:{transform:v},maxHeight:{transform:v},minHeight:{transform:v},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},7868:(e,g,t)=>{"use strict";function I(e){let g="https://mui.com/production-error/?code="+e;for(let t=1;t<arguments.length;t+=1)g+="&args[]="+encodeURIComponent(arguments[t]);return"Minified MUI error #"+e+"; visit "+g+" for the full message."}t.d(g,{A:()=>I})},7918:(e,g,t)=>{"use strict";t.r(g),t.d(g,{default:()=>I.A});var I=t(7598)},7950:(e,g,t)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(g){console.error(g)}}(),e.exports=t(2730)},8052:(e,g,t)=>{"use strict";var I=t(4994);g.Ay=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:g,defaultTheme:t=u,rootShouldForwardProp:I=s,slotShouldForwardProp:a=s}=e,i=e=>(0,r.default)((0,n.default)({},e,{theme:b((0,n.default)({},e,{defaultTheme:t,themeId:g}))}));return i.__mui_systemSx=!0,function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,C.internal_processStyles)(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:c,slot:d,skipVariantsResolver:u,skipSx:h,overridesResolver:G=Z(m(d))}=r,y=(0,l.default)(r,A),B=void 0!==u?u:d&&"Root"!==d&&"root"!==d||!1,S=h||!1;let W=s;"Root"===d||"root"===d?W=I:d?W=a:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(W=void 0);const V=(0,C.default)(e,(0,n.default)({shouldForwardProp:W,label:undefined},y)),v=e=>"function"===typeof e&&e.__emotion_real!==e||(0,o.isPlainObject)(e)?I=>p(e,(0,n.default)({},I,{theme:b({theme:I.theme,defaultTheme:t,themeId:g})})):e,R=function(I){let l=v(I);for(var C=arguments.length,o=new Array(C>1?C-1:0),a=1;a<C;a++)o[a-1]=arguments[a];const r=o?o.map(v):[];c&&G&&r.push((e=>{const I=b((0,n.default)({},e,{defaultTheme:t,themeId:g}));if(!I.components||!I.components[c]||!I.components[c].styleOverrides)return null;const l=I.components[c].styleOverrides,C={};return Object.entries(l).forEach((g=>{let[t,l]=g;C[t]=p(l,(0,n.default)({},e,{theme:I}))})),G(e,C)})),c&&!B&&r.push((e=>{var I;const l=b((0,n.default)({},e,{defaultTheme:t,themeId:g}));return p({variants:null==l||null==(I=l.components)||null==(I=I[c])?void 0:I.variants},(0,n.default)({},e,{theme:l}))})),S||r.push(i);const A=r.length-o.length;if(Array.isArray(I)&&A>0){const e=new Array(A).fill("");l=[...I,...e],l.raw=[...I.raw,...e]}const d=V(l,...r);return e.muiName&&(d.muiName=e.muiName),d};return V.withConfig&&(R.withConfig=V.withConfig),R}};var n=I(t(4634)),l=I(t(4893)),C=function(e,g){if(!g&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=d(g);if(t&&t.has(e))return t.get(e);var I={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var C=n?Object.getOwnPropertyDescriptor(e,l):null;C&&(C.get||C.set)?Object.defineProperty(I,l,C):I[l]=e[l]}return I.default=e,t&&t.set(e,I),I}(t(3174)),o=t(9482),a=(I(t(7918)),I(t(3382)),I(t(4989))),r=I(t(3234));const i=["ownerState"],c=["variants"],A=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function d(e){if("function"!=typeof WeakMap)return null;var g=new WeakMap,t=new WeakMap;return(d=function(e){return e?t:g})(e)}function s(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const u=(0,a.default)(),m=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function b(e){let{defaultTheme:g,theme:t,themeId:I}=e;return n=t,0===Object.keys(n).length?g:t[I]||t;var n}function Z(e){return e?(g,t)=>t[e]:null}function p(e,g){let{ownerState:t}=g,I=(0,l.default)(g,i);const C="function"===typeof e?e((0,n.default)({ownerState:t},I)):e;if(Array.isArray(C))return C.flatMap((e=>p(e,(0,n.default)({ownerState:t},I))));if(C&&"object"===typeof C&&Array.isArray(C.variants)){const{variants:e=[]}=C;let g=(0,l.default)(C,c);return e.forEach((e=>{let l=!0;"function"===typeof e.props?l=e.props((0,n.default)({ownerState:t},I,t)):Object.keys(e.props).forEach((g=>{(null==t?void 0:t[g])!==e.props[g]&&I[g]!==e.props[g]&&(l=!1)})),l&&(Array.isArray(g)||(g=[g]),g.push("function"===typeof e.style?e.style((0,n.default)({ownerState:t},I,t)):e.style))})),g}return C}},8168:(e,g,t)=>{"use strict";function I(){return I=Object.assign?Object.assign.bind():function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var I in t)({}).hasOwnProperty.call(t,I)&&(e[I]=t[I])}return e},I.apply(null,arguments)}t.d(g,{A:()=>I})},8206:(e,g,t)=>{"use strict";t.d(g,{b:()=>n});t(5043);var I=t(3654);t(579);function n(e){return(0,I.b)(e)}},8279:(e,g,t)=>{"use strict";t.d(g,{A:()=>x});var I=t(8168),n=t(8587),l=t(7868),C=t(9172),o=t(7758),a=t(8812),r=t(8280);var i=t(7266);const c={black:"#000",white:"#fff"},A={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},d={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},s={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},u={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},m={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},b={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Z={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},p=["mode","contrastThreshold","tonalOffset"],h={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:c.white,default:c.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},G={text:{primary:c.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:c.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function y(e,g,t,I){const n=I.light||I,l=I.dark||1.5*I;e[g]||(e.hasOwnProperty(t)?e[g]=e[t]:"light"===g?e.light=(0,i.a)(e.main,n):"dark"===g&&(e.dark=(0,i.e$)(e.main,l)))}function B(e){const{mode:g="light",contrastThreshold:t=3,tonalOffset:o=.2}=e,a=(0,n.A)(e,p),r=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[200],light:m[50],dark:m[400]}:{main:m[700],light:m[400],dark:m[800]}}(g),B=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:d[200],light:d[50],dark:d[400]}:{main:d[500],light:d[300],dark:d[700]}}(g),S=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:s[500],light:s[300],dark:s[700]}:{main:s[700],light:s[400],dark:s[800]}}(g),W=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:b[400],light:b[300],dark:b[700]}:{main:b[700],light:b[500],dark:b[900]}}(g),V=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Z[400],light:Z[300],dark:Z[700]}:{main:Z[800],light:Z[500],dark:Z[900]}}(g),v=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:u[400],light:u[300],dark:u[700]}:{main:"#ed6c02",light:u[500],dark:u[900]}}(g);function R(e){return(0,i.eM)(e,G.text.primary)>=t?G.text.primary:h.text.primary}const f=e=>{let{color:g,name:t,mainShade:n=500,lightShade:C=300,darkShade:a=700}=e;if(g=(0,I.A)({},g),!g.main&&g[n]&&(g.main=g[n]),!g.hasOwnProperty("main"))throw new Error((0,l.A)(11,t?` (${t})`:"",n));if("string"!==typeof g.main)throw new Error((0,l.A)(12,t?` (${t})`:"",JSON.stringify(g.main)));return y(g,"light",C,o),y(g,"dark",a,o),g.contrastText||(g.contrastText=R(g.main)),g},X={dark:G,light:h};return(0,C.A)((0,I.A)({common:(0,I.A)({},c),mode:g,primary:f({color:r,name:"primary"}),secondary:f({color:B,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:f({color:S,name:"error"}),warning:f({color:v,name:"warning"}),info:f({color:W,name:"info"}),success:f({color:V,name:"success"}),grey:A,contrastThreshold:t,getContrastText:R,augmentColor:f,tonalOffset:o},X[g]),a)}const S=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const W={textTransform:"uppercase"},V='"Roboto", "Helvetica", "Arial", sans-serif';function v(e,g){const t="function"===typeof g?g(e):g,{fontFamily:l=V,fontSize:o=14,fontWeightLight:a=300,fontWeightRegular:r=400,fontWeightMedium:i=500,fontWeightBold:c=700,htmlFontSize:A=16,allVariants:d,pxToRem:s}=t,u=(0,n.A)(t,S);const m=o/14,b=s||(e=>e/A*m+"rem"),Z=(e,g,t,n,C)=>{return(0,I.A)({fontFamily:l,fontWeight:e,fontSize:b(g),lineHeight:t},l===V?{letterSpacing:(o=n/g,Math.round(1e5*o)/1e5)+"em"}:{},C,d);var o},p={h1:Z(a,96,1.167,-1.5),h2:Z(a,60,1.2,-.5),h3:Z(r,48,1.167,0),h4:Z(r,34,1.235,.25),h5:Z(r,24,1.334,0),h6:Z(i,20,1.6,.15),subtitle1:Z(r,16,1.75,.15),subtitle2:Z(i,14,1.57,.1),body1:Z(r,16,1.5,.15),body2:Z(r,14,1.43,.15),button:Z(i,14,1.75,.4,W),caption:Z(r,12,1.66,.4),overline:Z(r,12,2.66,1,W),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return(0,C.A)((0,I.A)({htmlFontSize:A,pxToRem:b,fontFamily:l,fontSize:o,fontWeightLight:a,fontWeightRegular:r,fontWeightMedium:i,fontWeightBold:c},p),u,{clone:!1})}function R(){return[`${arguments.length<=0?void 0:arguments[0]}px ${arguments.length<=1?void 0:arguments[1]}px ${arguments.length<=2?void 0:arguments[2]}px ${arguments.length<=3?void 0:arguments[3]}px rgba(0,0,0,0.2)`,`${arguments.length<=4?void 0:arguments[4]}px ${arguments.length<=5?void 0:arguments[5]}px ${arguments.length<=6?void 0:arguments[6]}px ${arguments.length<=7?void 0:arguments[7]}px rgba(0,0,0,0.14)`,`${arguments.length<=8?void 0:arguments[8]}px ${arguments.length<=9?void 0:arguments[9]}px ${arguments.length<=10?void 0:arguments[10]}px ${arguments.length<=11?void 0:arguments[11]}px rgba(0,0,0,0.12)`].join(",")}const f=["none",R(0,2,1,-1,0,1,1,0,0,1,3,0),R(0,3,1,-2,0,2,2,0,0,1,5,0),R(0,3,3,-2,0,3,4,0,0,1,8,0),R(0,2,4,-1,0,4,5,0,0,1,10,0),R(0,3,5,-1,0,5,8,0,0,1,14,0),R(0,3,5,-1,0,6,10,0,0,1,18,0),R(0,4,5,-2,0,7,10,1,0,2,16,1),R(0,5,5,-3,0,8,10,1,0,3,14,2),R(0,5,6,-3,0,9,12,1,0,3,16,2),R(0,6,6,-3,0,10,14,1,0,4,18,3),R(0,6,7,-4,0,11,15,1,0,4,20,3),R(0,7,8,-4,0,12,17,2,0,5,22,4),R(0,7,8,-4,0,13,19,2,0,5,24,4),R(0,7,9,-4,0,14,21,2,0,5,26,4),R(0,8,9,-5,0,15,22,2,0,6,28,5),R(0,8,10,-5,0,16,24,2,0,6,30,5),R(0,8,11,-5,0,17,26,2,0,6,32,5),R(0,9,11,-5,0,18,28,2,0,7,34,6),R(0,9,12,-6,0,19,29,2,0,7,36,6),R(0,10,13,-6,0,20,31,3,0,8,38,7),R(0,10,13,-6,0,21,33,3,0,8,40,7),R(0,10,14,-6,0,22,35,3,0,8,42,7),R(0,11,14,-7,0,23,36,3,0,9,44,8),R(0,11,15,-7,0,24,38,3,0,9,46,8)],X=["duration","easing","delay"],k={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},J={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Y(e){return`${Math.round(e)}ms`}function w(e){if(!e)return 0;const g=e/36;return Math.round(10*(4+15*g**.25+g/5))}function H(e){const g=(0,I.A)({},k,e.easing),t=(0,I.A)({},J,e.duration);return(0,I.A)({getAutoHeightDuration:w,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:l=t.standard,easing:C=g.easeInOut,delay:o=0}=I;(0,n.A)(I,X);return(Array.isArray(e)?e:[e]).map((e=>`${e} ${"string"===typeof l?l:Y(l)} ${C} ${"string"===typeof o?o:Y(o)}`)).join(",")}},e,{easing:g,duration:t})}const N={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},F=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function K(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mixins:g={},palette:t={},transitions:i={},typography:c={}}=e,A=(0,n.A)(e,F);if(e.vars)throw new Error((0,l.A)(18));const d=B(t),s=(0,r.A)(e);let u=(0,C.A)(s,{mixins:(m=s.breakpoints,b=g,(0,I.A)({toolbar:{minHeight:56,[m.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[m.up("sm")]:{minHeight:64}}},b)),palette:d,shadows:f.slice(),typography:v(d,c),transitions:H(i),zIndex:(0,I.A)({},N)});var m,b;u=(0,C.A)(u,A);for(var Z=arguments.length,p=new Array(Z>1?Z-1:0),h=1;h<Z;h++)p[h-1]=arguments[h];return u=p.reduce(((e,g)=>(0,C.A)(e,g)),u),u.unstable_sxConfig=(0,I.A)({},o.A,null==A?void 0:A.unstable_sxConfig),u.unstable_sx=function(e){return(0,a.A)({sx:e,theme:this})},u}const x=K},8280:(e,g,t)=>{"use strict";t.d(g,{A:()=>d});var I=t(8168),n=t(8587),l=t(9172),C=t(4853);const o={borderRadius:4};var a=t(8604);var r=t(8812),i=t(7758),c=t(9703);const A=["breakpoints","palette","spacing","shape"];const d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:g={},palette:t={},spacing:d,shape:s={}}=e,u=(0,n.A)(e,A),m=(0,C.A)(g),b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;const g=(0,a.LX)({spacing:e}),t=function(){for(var e=arguments.length,t=new Array(e),I=0;I<e;I++)t[I]=arguments[I];return(0===t.length?[1]:t).map((e=>{const t=g(e);return"number"===typeof t?`${t}px`:t})).join(" ")};return t.mui=!0,t}(d);let Z=(0,l.A)({breakpoints:m,direction:"ltr",components:{},palette:(0,I.A)({mode:"light"},t),spacing:b,shape:(0,I.A)({},o,s)},u);Z.applyStyles=c.A;for(var p=arguments.length,h=new Array(p>1?p-1:0),G=1;G<p;G++)h[G-1]=arguments[G];return Z=h.reduce(((e,g)=>(0,l.A)(e,g)),Z),Z.unstable_sxConfig=(0,I.A)({},i.A,null==u?void 0:u.unstable_sxConfig),Z.unstable_sx=function(e){return(0,r.A)({sx:e,theme:this})},Z}},8387:(e,g,t)=>{"use strict";function I(e){var g,t,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var l=e.length;for(g=0;g<l;g++)e[g]&&(t=I(e[g]))&&(n&&(n+=" "),n+=t)}else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}t.d(g,{A:()=>n});const n=function(){for(var e,g,t=0,n="",l=arguments.length;t<l;t++)(e=arguments[t])&&(g=I(e))&&(n&&(n+=" "),n+=g);return n}},8587:(e,g,t)=>{"use strict";function I(e,g){if(null==e)return{};var t={};for(var I in e)if({}.hasOwnProperty.call(e,I)){if(-1!==g.indexOf(I))continue;t[I]=e[I]}return t}t.d(g,{A:()=>I})},8604:(e,g,t)=>{"use strict";t.d(g,{LX:()=>s,MA:()=>d,_W:()=>u,Lc:()=>Z,Ms:()=>p});var I=t(9751),n=t(7162),l=t(3815);const C={m:"margin",p:"padding"},o={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},a={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},r=function(e){const g={};return t=>(void 0===g[t]&&(g[t]=e(t)),g[t])}((e=>{if(e.length>2){if(!a[e])return[e];e=a[e]}const[g,t]=e.split(""),I=C[g],n=o[t]||"";return Array.isArray(n)?n.map((e=>I+e)):[I+n]})),i=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],c=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],A=[...i,...c];function d(e,g,t,I){var l;const C=null!=(l=(0,n.Yn)(e,g,!1))?l:t;return"number"===typeof C?e=>"string"===typeof e?e:C*e:Array.isArray(C)?e=>"string"===typeof e?e:C[e]:"function"===typeof C?C:()=>{}}function s(e){return d(e,"spacing",8)}function u(e,g){if("string"===typeof g||null==g)return g;const t=e(Math.abs(g));return g>=0?t:"number"===typeof t?-t:`-${t}`}function m(e,g,t,n){if(-1===g.indexOf(t))return null;const l=function(e,g){return t=>e.reduce(((e,I)=>(e[I]=u(g,t),e)),{})}(r(t),n),C=e[t];return(0,I.NI)(e,C,l)}function b(e,g){const t=s(e.theme);return Object.keys(e).map((I=>m(e,g,I,t))).reduce(l.A,{})}function Z(e){return b(e,i)}function p(e){return b(e,c)}function h(e){return b(e,A)}Z.propTypes={},Z.filterProps=i,p.propTypes={},p.filterProps=c,h.propTypes={},h.filterProps=A},8610:(e,g,t)=>{"use strict";function I(e,g){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const I={};return Object.keys(e).forEach((n=>{I[n]=e[n].reduce(((e,I)=>{if(I){const n=g(I);""!==n&&e.push(n),t&&t[I]&&e.push(t[I])}return e}),[]).join(" ")})),I}t.d(g,{A:()=>I})},8698:(e,g,t)=>{"use strict";t.d(g,{A:()=>r});var I=t(8168),n=t(8587),l=t(9172),C=t(7758);const o=["sx"],a=e=>{var g,t;const I={systemProps:{},otherProps:{}},n=null!=(g=null==e||null==(t=e.theme)?void 0:t.unstable_sxConfig)?g:C.A;return Object.keys(e).forEach((g=>{n[g]?I.systemProps[g]=e[g]:I.otherProps[g]=e[g]})),I};function r(e){const{sx:g}=e,t=(0,n.A)(e,o),{systemProps:C,otherProps:r}=a(t);let i;return i=Array.isArray(g)?[C,...g]:"function"===typeof g?function(){const e=g(...arguments);return(0,l.Q)(e)?(0,I.A)({},C,e):C}:(0,I.A)({},C,g),(0,I.A)({},r,{sx:i})}},8812:(e,g,t)=>{"use strict";t.d(g,{A:()=>i,k:()=>a});var I=t(7598),n=t(3815),l=t(7162),C=t(9751),o=t(7758);function a(){function e(e,g,t,n){const o={[e]:g,theme:t},a=n[e];if(!a)return{[e]:g};const{cssProperty:r=e,themeKey:i,transform:c,style:A}=a;if(null==g)return null;if("typography"===i&&"inherit"===g)return{[e]:g};const d=(0,l.Yn)(t,i)||{};if(A)return A(o);return(0,C.NI)(o,g,(g=>{let t=(0,l.BO)(d,c,g);return g===t&&"string"===typeof g&&(t=(0,l.BO)(d,c,`${e}${"default"===g?"":(0,I.A)(g)}`,g)),!1===r?t:{[r]:t}}))}return function g(t){var I;const{sx:l,theme:a={}}=t||{};if(!l)return null;const r=null!=(I=a.unstable_sxConfig)?I:o.A;function i(t){let I=t;if("function"===typeof t)I=t(a);else if("object"!==typeof t)return t;if(!I)return null;const l=(0,C.EU)(a.breakpoints),o=Object.keys(l);let i=l;return Object.keys(I).forEach((t=>{const l=(o=I[t],c=a,"function"===typeof o?o(c):o);var o,c;if(null!==l&&void 0!==l)if("object"===typeof l)if(r[t])i=(0,n.A)(i,e(t,l,a,r));else{const e=(0,C.NI)({theme:a},l,(e=>({[t]:e})));!function(){for(var e=arguments.length,g=new Array(e),t=0;t<e;t++)g[t]=arguments[t];const I=g.reduce(((e,g)=>e.concat(Object.keys(g))),[]),n=new Set(I);return g.every((e=>n.size===Object.keys(e).length))}(e,l)?i=(0,n.A)(i,e):i[t]=g({sx:l,theme:a})}else i=(0,n.A)(i,e(t,l,a,r))})),(0,C.vf)(o,i)}return Array.isArray(l)?l.map(i):i(l)}}const r=a();r.filterProps=["sx"];const i=r},8853:(e,g,t)=>{"use strict";e.exports=t(7234)},9172:(e,g,t)=>{"use strict";t.d(g,{A:()=>o,Q:()=>l});var I=t(8168),n=t(5043);function l(e){if("object"!==typeof e||null===e)return!1;const g=Object.getPrototypeOf(e);return(null===g||g===Object.prototype||null===Object.getPrototypeOf(g))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function C(e){if(n.isValidElement(e)||!l(e))return e;const g={};return Object.keys(e).forEach((t=>{g[t]=C(e[t])})),g}function o(e,g){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const a=t.clone?(0,I.A)({},e):e;return l(e)&&l(g)&&Object.keys(g).forEach((I=>{n.isValidElement(g[I])?a[I]=g[I]:l(g[I])&&Object.prototype.hasOwnProperty.call(e,I)&&l(e[I])?a[I]=o(e[I],g[I],t):t.clone?a[I]=l(g[I])?C(g[I]):g[I]:a[I]=g[I]})),a}},9303:(e,g,t)=>{"use strict";t.d(g,{E:()=>C,A:()=>o});var I=t(5043);const n={};const l=[];class C{constructor(){this.currentId=null,this.clear=()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new C}start(e,g){this.clear(),this.currentId=setTimeout((()=>{this.currentId=null,g()}),e)}}function o(){const e=function(e,g){const t=I.useRef(n);return t.current===n&&(t.current=e(g)),t}(C.create).current;var g;return g=e.disposeEffect,I.useEffect(g,l),e}},9309:function(e,g,t){e.exports=function(e){"use strict";function g(e){if(e&&e.__esModule)return e;var g=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var I=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(g,t,I.get?I:{enumerable:!0,get:function(){return e[t]}})}})),g.default=e,Object.freeze(g)}var t=g(e);function I(){return I=Object.assign?Object.assign.bind():function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var I in t)Object.prototype.hasOwnProperty.call(t,I)&&(e[I]=t[I])}return e},I.apply(this,arguments)}function n(e,g,t){return g in e?Object.defineProperty(e,g,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[g]=t,e}function l(e){if(Array.isArray(e))return e}function C(e,g){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var I,n,l=[],C=!0,o=!1;try{for(t=t.call(e);!(C=(I=t.next()).done)&&(l.push(I.value),!g||l.length!==g);C=!0);}catch(a){o=!0,n=a}finally{try{C||null==t.return||t.return()}finally{if(o)throw n}}return l}}function o(e,g){(null==g||g>e.length)&&(g=e.length);for(var t=0,I=new Array(g);t<g;t++)I[t]=e[t];return I}function a(e,g){if(e){if("string"===typeof e)return o(e,g);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?o(e,g):void 0}}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,g){return l(e)||C(e,g)||a(e,g)||r()}function c(e,g){if(null==e)return{};var t,I,n={},l=Object.keys(e);for(I=0;I<l.length;I++)t=l[I],g.indexOf(t)>=0||(n[t]=e[t]);return n}function A(e,g){if(null==e)return{};var t,I,n=c(e,g);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(I=0;I<l.length;I++)t=l[I],g.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var d={exports:{}},s={exports:{}},u={},m="function"===typeof Symbol&&Symbol.for,b=m?Symbol.for("react.element"):60103,Z=m?Symbol.for("react.portal"):60106,p=m?Symbol.for("react.fragment"):60107,h=m?Symbol.for("react.strict_mode"):60108,G=m?Symbol.for("react.profiler"):60114,y=m?Symbol.for("react.provider"):60109,B=m?Symbol.for("react.context"):60110,S=m?Symbol.for("react.async_mode"):60111,W=m?Symbol.for("react.concurrent_mode"):60111,V=m?Symbol.for("react.forward_ref"):60112,v=m?Symbol.for("react.suspense"):60113,R=m?Symbol.for("react.suspense_list"):60120,f=m?Symbol.for("react.memo"):60115,X=m?Symbol.for("react.lazy"):60116,k=m?Symbol.for("react.block"):60121,J=m?Symbol.for("react.fundamental"):60117,Y=m?Symbol.for("react.responder"):60118,w=m?Symbol.for("react.scope"):60119;function H(e){if("object"===typeof e&&null!==e){var g=e.$$typeof;switch(g){case b:switch(e=e.type){case S:case W:case p:case G:case h:case v:return e;default:switch(e=e&&e.$$typeof){case B:case V:case X:case f:case y:return e;default:return g}}case Z:return g}}}function N(e){return H(e)===W}u.AsyncMode=S,u.ConcurrentMode=W,u.ContextConsumer=B,u.ContextProvider=y,u.Element=b,u.ForwardRef=V,u.Fragment=p,u.Lazy=X,u.Memo=f,u.Portal=Z,u.Profiler=G,u.StrictMode=h,u.Suspense=v,u.isAsyncMode=function(e){return N(e)||H(e)===S},u.isConcurrentMode=N,u.isContextConsumer=function(e){return H(e)===B},u.isContextProvider=function(e){return H(e)===y},u.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===b},u.isForwardRef=function(e){return H(e)===V},u.isFragment=function(e){return H(e)===p},u.isLazy=function(e){return H(e)===X},u.isMemo=function(e){return H(e)===f},u.isPortal=function(e){return H(e)===Z},u.isProfiler=function(e){return H(e)===G},u.isStrictMode=function(e){return H(e)===h},u.isSuspense=function(e){return H(e)===v},u.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===p||e===W||e===G||e===h||e===v||e===R||"object"===typeof e&&null!==e&&(e.$$typeof===X||e.$$typeof===f||e.$$typeof===y||e.$$typeof===B||e.$$typeof===V||e.$$typeof===J||e.$$typeof===Y||e.$$typeof===w||e.$$typeof===k)},u.typeOf=H,s.exports=u;Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function F(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var g={},t=0;t<10;t++)g["_"+String.fromCharCode(t)]=t;var I=Object.getOwnPropertyNames(g).map((function(e){return g[e]}));if("0123456789"!==I.join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(l){return!1}}F()&&Object.assign;var K="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function x(e,g,t,I,n){}Function.call.bind(Object.prototype.hasOwnProperty),x.resetWarningCache=function(){},s.exports;var M=K;function z(){}function E(){}E.resetWarningCache=z;var D=function(){function e(e,g,t,I,n,l){if(l!==M){var C=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw C.name="Invariant Violation",C}}function g(){return e}e.isRequired=e;var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:g,element:e,elementType:e,instanceOf:g,node:e,objectOf:g,oneOf:g,oneOfType:g,shape:g,exact:g,checkPropTypes:E,resetWarningCache:z};return t.PropTypes=t,t};d.exports=D();var U=d.exports;function T(e,g){var t=atob(e);if(g){for(var I=new Uint8Array(t.length),n=0,l=t.length;n<l;++n)I[n]=t.charCodeAt(n);return String.fromCharCode.apply(null,new Uint16Array(I.buffer))}return t}function L(e,g,t){var I=void 0===g?null:g,n=T(e,void 0!==t&&t),l=n.indexOf("\n",10)+1,C=n.substring(l)+(I?"//# sourceMappingURL="+I:""),o=new Blob([C],{type:"application/javascript"});return URL.createObjectURL(o)}function Q(e,g,t){var I;return function(n){return I=I||L(e,g,t),new Worker(I,n)}}var j=Q("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCWZ1bmN0aW9uIGdldEF1Z21lbnRlZE5hbWVzcGFjZShuKSB7CgkJaWYgKG4uX19lc01vZHVsZSkgcmV0dXJuIG47CgkJdmFyIGEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfX2VzTW9kdWxlJywge3ZhbHVlOiB0cnVlfSk7CgkJT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbiAoaykgewoJCQl2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobiwgayk7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBrLCBkLmdldCA/IGQgOiB7CgkJCQllbnVtZXJhYmxlOiB0cnVlLAoJCQkJZ2V0OiBmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuIG5ba107CgkJCQl9CgkJCX0pOwoJCX0pOwoJCXJldHVybiBhOwoJfQoKCXZhciBCaW5hcnlCaXRtYXAkMSA9IHt9OwoKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBFeGNlcHRpb24kMSA9IHt9OwoKCWZ1bmN0aW9uIGZpeFByb3RvKHRhcmdldCwgcHJvdG90eXBlKSB7CgkgIHZhciBzZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZjsKCSAgc2V0UHJvdG90eXBlT2YgPyBzZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvdHlwZSkgOiB0YXJnZXQuX19wcm90b19fID0gcHJvdG90eXBlOwoJfQoJZnVuY3Rpb24gZml4U3RhY2sodGFyZ2V0LCBmbikgewoJICBpZiAoZm4gPT09IHZvaWQgMCkgewoJICAgIGZuID0gdGFyZ2V0LmNvbnN0cnVjdG9yOwoJICB9CgoJICB2YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZTsKCSAgY2FwdHVyZVN0YWNrVHJhY2UgJiYgY2FwdHVyZVN0YWNrVHJhY2UodGFyZ2V0LCBmbik7Cgl9CgoJdmFyIF9fZXh0ZW5kcyRrID0gZnVuY3Rpb24gKCkgewoJICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7CgkgICAgICBfX3Byb3RvX186IFtdCgkgICAgfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICBkLl9fcHJvdG9fXyA9IGI7CgkgICAgfSB8fCBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgZm9yICh2YXIgcCBpbiBiKSB7IGlmIChiLmhhc093blByb3BlcnR5KHApKSB7IGRbcF0gPSBiW3BdOyB9IH0KCSAgICB9OwoKCSAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgfTsKCgkgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgoJICAgIGZ1bmN0aW9uIF9fKCkgewoJICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7CgkgICAgfQoKCSAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgIH07Cgl9KCk7CgoJdmFyIEN1c3RvbUVycm9yID0gZnVuY3Rpb24gKF9zdXBlcikgewoJICBfX2V4dGVuZHMkayhDdXN0b21FcnJvciwgX3N1cGVyKTsKCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKG1lc3NhZ2UpIHsKCSAgICB2YXIgX25ld1RhcmdldCA9IHRoaXMuY29uc3RydWN0b3I7CgoJICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7CgoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ25hbWUnLCB7CgkgICAgICB2YWx1ZTogX25ld1RhcmdldC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmaXhQcm90byhfdGhpcywgX25ld1RhcmdldC5wcm90b3R5cGUpOwoJICAgIGZpeFN0YWNrKF90aGlzKTsKCSAgICByZXR1cm4gX3RoaXM7CgkgIH0KCgkgIHJldHVybiBDdXN0b21FcnJvcjsKCX0oRXJyb3IpOwoKCXZhciBfX3NwcmVhZEFycmF5cyA9IGZ1bmN0aW9uICgpIHsKCSAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzOwoKCSAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7IHMgKz0gYXJndW1lbnRzJDFbaV0ubGVuZ3RoOyB9CgoJICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspIHsgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspIHsgcltrXSA9IGFbal07IH0gfQoKCSAgcmV0dXJuIHI7Cgl9OwoJZnVuY3Rpb24gY3VzdG9tRXJyb3JGYWN0b3J5KGZuLCBwYXJlbnQpIHsKCSAgaWYgKHBhcmVudCA9PT0gdm9pZCAwKSB7CgkgICAgcGFyZW50ID0gRXJyb3I7CgkgIH0KCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKCkgewoJICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50czsKCgkgICAgdmFyIGFyZ3MgPSBbXTsKCgkgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzJDFbX2ldOwoJICAgIH0KCgkgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEN1c3RvbUVycm9yKSkgeyByZXR1cm4gbmV3IChDdXN0b21FcnJvci5iaW5kLmFwcGx5KEN1c3RvbUVycm9yLCBfX3NwcmVhZEFycmF5cyhbdm9pZCAwXSwgYXJncykpKSgpOyB9CgkgICAgcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3MpOwoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbmFtZScsIHsKCSAgICAgIHZhbHVlOiBmbi5uYW1lIHx8IHBhcmVudC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTsKCSAgICBmaXhTdGFjayh0aGlzLCBDdXN0b21FcnJvcik7CgkgIH0KCgkgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhDdXN0b21FcnJvciwgewoJICAgIHByb3RvdHlwZTogewoJICAgICAgdmFsdWU6IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSwgewoJICAgICAgICBjb25zdHJ1Y3RvcjogewoJICAgICAgICAgIHZhbHVlOiBDdXN0b21FcnJvciwKCSAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKCSAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICAgICAgfQoJICAgICAgfSkKCSAgICB9CgkgIH0pOwoJfQoKCXZhciBjdXN0b21FcnJvciA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHsKCQlfX3Byb3RvX186IG51bGwsCgkJQ3VzdG9tRXJyb3I6IEN1c3RvbUVycm9yLAoJCWN1c3RvbUVycm9yRmFjdG9yeTogY3VzdG9tRXJyb3JGYWN0b3J5Cgl9KTsKCgl2YXIgcmVxdWlyZSQkMCA9IC8qQF9fUFVSRV9fKi9nZXRBdWdtZW50ZWROYW1lc3BhY2UoY3VzdG9tRXJyb3IpOwoKCXZhciBfX2V4dGVuZHMkaiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIHRzX2N1c3RvbV9lcnJvcl8xID0gcmVxdWlyZSQkMDsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRqKEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICAvKioKCSAgICAgKiBBbGxvd3MgRXhjZXB0aW9uIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5CgkgICAgICogd2l0aCBzb21lIG1lc3NhZ2UgYW5kIHByb3RvdHlwZSBkZWZpbml0aW9uLgoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEV4Y2VwdGlvbihtZXNzYWdlKSB7CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBFeGNlcHRpb24ucHJvdG90eXBlLmdldEtpbmQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBleCA9IHRoaXMuY29uc3RydWN0b3I7CgkgICAgICAgIHJldHVybiBleC5raW5kOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSXQncyB0eXBlZCBhcyBzdHJpbmcgc28gaXQgY2FuIGJlIGV4dGVuZGVkIGFuZCBvdmVycmlkZW4uCgkgICAgICovCgkgICAgRXhjZXB0aW9uLmtpbmQgPSAnRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRXhjZXB0aW9uOwoJfSh0c19jdXN0b21fZXJyb3JfMS5DdXN0b21FcnJvcikpOwoJRXhjZXB0aW9uJDEuZGVmYXVsdCA9IEV4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSQ5ID0gRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaShJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCkgewoJICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CgkgICAgfQoJICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0lsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbjsKCX0oRXhjZXB0aW9uXzEkOS5kZWZhdWx0KSk7CglJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMS5kZWZhdWx0ID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJ5Qml0bWFwJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgQmluYXJ5Qml0bWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEJpbmFyeUJpdG1hcChiaW5hcml6ZXIpIHsKCSAgICAgICAgdGhpcy5iaW5hcml6ZXIgPSBiaW5hcml6ZXI7CgkgICAgICAgIGlmIChiaW5hcml6ZXIgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhLmRlZmF1bHQoJ0JpbmFyaXplciBtdXN0IGJlIG5vbi1udWxsLicpOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gVGhlIHdpZHRoIG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIGJpdG1hcC4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29udmVydHMgb25lIHJvdyBvZiBsdW1pbmFuY2UgZGF0YSB0byAxIGJpdCBkYXRhLiBNYXkgYWN0dWFsbHkgZG8gdGhlIGNvbnZlcnNpb24sIG9yIHJldHVybgoJICAgICAqIGNhY2hlZCBkYXRhLiBDYWxsZXJzIHNob3VsZCBhc3N1bWUgdGhpcyBtZXRob2QgaXMgZXhwZW5zaXZlIGFuZCBjYWxsIGl0IGFzIHNlbGRvbSBhcyBwb3NzaWJsZS4KCSAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMUQgYmFyY29kZXMgYW5kIG1heSBjaG9vc2UgdG8gYXBwbHkgc2hhcnBlbmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmV0Y2gsIHdoaWNoIG11c3QgYmUgaW4gWzAsIGJpdG1hcCBoZWlnaHQpCgkgICAgICogQHBhcmFtIHJvdyBBbiBvcHRpb25hbCBwcmVhbGxvY2F0ZWQgYXJyYXkuIElmIG51bGwgb3IgdG9vIHNtYWxsLCBpdCB3aWxsIGJlIGlnbm9yZWQuCgkgICAgICogICAgICAgICAgICBJZiB1c2VkLCB0aGUgQmluYXJpemVyIHdpbGwgY2FsbCBCaXRBcnJheS5jbGVhcigpLiBBbHdheXMgdXNlIHRoZSByZXR1cm5lZCBvYmplY3QuCgkgICAgICogQHJldHVybiBUaGUgYXJyYXkgb2YgYml0cyBmb3IgdGhpcyByb3cgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgcm93IGNhbid0IGJlIGJpbmFyaXplZAoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUuZ2V0QmxhY2tSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEJsYWNrUm93KHksIHJvdyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBhIDJEIGFycmF5IG9mIGx1bWluYW5jZSBkYXRhIHRvIDEgYml0LiBBcyBhYm92ZSwgYXNzdW1lIHRoaXMgbWV0aG9kIGlzIGV4cGVuc2l2ZQoJICAgICAqIGFuZCBkbyBub3QgY2FsbCBpdCByZXBlYXRlZGx5LiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMkQgYmFyY29kZXMgYW5kIG1heSBvcgoJICAgICAqIG1heSBub3QgYXBwbHkgc2hhcnBlbmluZy4gVGhlcmVmb3JlLCBhIHJvdyBmcm9tIHRoaXMgbWF0cml4IG1heSBub3QgYmUgaWRlbnRpY2FsIHRvIG9uZQoJICAgICAqIGZldGNoZWQgdXNpbmcgZ2V0QmxhY2tSb3coKSwgc28gZG9uJ3QgbWl4IGFuZCBtYXRjaCBiZXR3ZWVuIHRoZW0uCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIFRoZSAyRCBhcnJheSBvZiBiaXRzIGZvciB0aGUgaW1hZ2UgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgaW1hZ2UgY2FuJ3QgYmUgYmluYXJpemVkIHRvIG1ha2UgYSBtYXRyaXgKCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEJsYWNrTWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBUaGUgbWF0cml4IGlzIGNyZWF0ZWQgb24gZGVtYW5kIHRoZSBmaXJzdCB0aW1lIGl0IGlzIHJlcXVlc3RlZCwgdGhlbiBjYWNoZWQuIFRoZXJlIGFyZSB0d28KCSAgICAgICAgLy8gcmVhc29ucyBmb3IgdGhpczoKCSAgICAgICAgLy8gMS4gVGhpcyB3b3JrIHdpbGwgbmV2ZXIgYmUgZG9uZSBpZiB0aGUgY2FsbGVyIG9ubHkgaW5zdGFsbHMgMUQgUmVhZGVyIG9iamVjdHMsIG9yIGlmIGEKCSAgICAgICAgLy8gICAgMUQgUmVhZGVyIGZpbmRzIGEgYmFyY29kZSBiZWZvcmUgdGhlIDJEIFJlYWRlcnMgcnVuLgoJICAgICAgICAvLyAyLiBUaGlzIHdvcmsgd2lsbCBvbmx5IGJlIGRvbmUgb25jZSBldmVuIGlmIHRoZSBjYWxsZXIgaW5zdGFsbHMgbXVsdGlwbGUgMkQgUmVhZGVycy4KCSAgICAgICAgaWYgKHRoaXMubWF0cml4ID09PSBudWxsIHx8IHRoaXMubWF0cml4ID09PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gdGhpcy5iaW5hcml6ZXIuZ2V0QmxhY2tNYXRyaXgoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhpcyBiaXRtYXAgY2FuIGJlIGNyb3BwZWQuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5pc0Nyb3BTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggY3JvcHBlZCBpbWFnZSBkYXRhLiBJbXBsZW1lbnRhdGlvbnMgbWF5IGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlCgkgICAgICogb3JpZ2luYWwgZGF0YSByYXRoZXIgdGhhbiBhIGNvcHkuIE9ubHkgY2FsbGFibGUgaWYgaXNDcm9wU3VwcG9ydGVkKCkgaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBsZWZ0IFRoZSBsZWZ0IGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0V2lkdGgoKSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB0b3AgY29vcmRpbmF0ZSwgd2hpY2ggbXVzdCBiZSBpbiBbMCxnZXRIZWlnaHQoKSkKCSAgICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZSB0byBjcm9wLgoJICAgICAqIEByZXR1cm4gQSBjcm9wcGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBuZXdTb3VyY2UgPSB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5jcm9wKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIGJpdG1hcCBzdXBwb3J0cyBjb3VudGVyLWNsb2Nrd2lzZSByb3RhdGlvbi4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmlzUm90YXRlU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkuaXNSb3RhdGVTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpOwoJICAgICAgICByZXR1cm4gbmV3IEJpbmFyeUJpdG1hcCh0aGlzLmJpbmFyaXplci5jcmVhdGVCaW5hcml6ZXIobmV3U291cmNlKSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHJvdGF0ZWQgaW1hZ2UgZGF0YSBieSA0NSBkZWdyZWVzIGNvdW50ZXJjbG9ja3dpc2UuCgkgICAgICogT25seSBjYWxsYWJsZSBpZiB7QGxpbmsgI2lzUm90YXRlU3VwcG9ydGVkKCl9IGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIEEgcm90YXRlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxhY2tNYXRyaXgoKS50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlIC8qOiBOb3RGb3VuZEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICByZXR1cm4gJyc7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaW5hcnlCaXRtYXA7Cgl9KCkpOwoJdmFyIF9kZWZhdWx0JDMgPSBCaW5hcnlCaXRtYXAkMS5kZWZhdWx0ID0gQmluYXJ5Qml0bWFwOwoKCXZhciBIeWJyaWRCaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBCaW5hcml6ZXIkMSA9IHt9OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJpemVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogVGhpcyBjbGFzcyBoaWVyYXJjaHkgcHJvdmlkZXMgYSBzZXQgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGx1bWluYW5jZSBkYXRhIHRvIDEgYml0IGRhdGEuCgkgKiBJdCBhbGxvd3MgdGhlIGFsZ29yaXRobSB0byB2YXJ5IHBvbHltb3JwaGljYWxseSwgZm9yIGV4YW1wbGUgYWxsb3dpbmcgYSB2ZXJ5IGV4cGVuc2l2ZQoJICogdGhyZXNob2xkaW5nIHRlY2huaXF1ZSBmb3Igc2VydmVycyBhbmQgYSBmYXN0IG9uZSBmb3IgbW9iaWxlLiBJdCBhbHNvIHBlcm1pdHMgdGhlIGltcGxlbWVudGF0aW9uCgkgKiB0byB2YXJ5LCBlLmcuIGEgSk5JIHZlcnNpb24gZm9yIEFuZHJvaWQgYW5kIGEgSmF2YSBmYWxsYmFjayB2ZXJzaW9uIGZvciBvdGhlciBwbGF0Zm9ybXMuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpbmFyaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBCaW5hcml6ZXIoc291cmNlKSB7CgkgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlOwoJICAgIH0KCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEx1bWluYW5jZVNvdXJjZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlOwoJICAgIH07CgkgICAgQmluYXJpemVyLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgcmV0dXJuIEJpbmFyaXplcjsKCX0oKSk7CglCaW5hcml6ZXIkMS5kZWZhdWx0ID0gQmluYXJpemVyOwoKCXZhciBCaXRBcnJheSQxID0ge307CgoJdmFyIEFycmF5cyQxID0ge307CgoJdmFyIFN5c3RlbSQxID0ge307CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN5c3RlbSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIFN5c3RlbSgpIHsKCSAgICB9CgkgICAgLy8gcHVibGljIHN0YXRpYyB2b2lkIGFycmF5Y29weShPYmplY3Qgc3JjLCBpbnQgc3JjUG9zLCBPYmplY3QgZGVzdCwgaW50IGRlc3RQb3MsIGludCBsZW5ndGgpCgkgICAgLyoqCgkgICAgICogTWFrZXMgYSBjb3B5IG9mIGEgYXJyYXkuCgkgICAgICovCgkgICAgU3lzdGVtLmFycmF5Y29weSA9IGZ1bmN0aW9uIChzcmMsIHNyY1BvcywgZGVzdCwgZGVzdFBvcywgbGVuZ3RoKSB7CgkgICAgICAgIC8vIFRPRE86IGJldHRlciB1c2Ugc3BsaXQgb3Igc2V0PwoJICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHsKCSAgICAgICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGltZSBpbiBtaWxsaXNlY29uZHMuCgkgICAgICovCgkgICAgU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTsKCSAgICB9OwoJICAgIHJldHVybiBTeXN0ZW07Cgl9KCkpOwoJU3lzdGVtJDEuZGVmYXVsdCA9IFN5c3RlbTsKCgl2YXIgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyRoID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDggPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaChJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbi5raW5kID0gJ0luZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ4LmRlZmF1bHQpKTsKCUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXzEgPSBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZyhBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uKGluZGV4LCBtZXNzYWdlKSB7CgkgICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5pbmRleCA9IGluZGV4OwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24ua2luZCA9ICdBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb247Cgl9KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KSk7CglBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoKCXZhciBfX3ZhbHVlcyQ3ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5cyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtXzEkNSA9IFN5c3RlbSQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDkgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMSA9IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxOwoJdmFyIEFycmF5cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBcnJheXMoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQgYXJyYXkKCSAgICAgKiBvZiBpbnRzLgoJICAgICAqCgkgICAgICogQHBhcmFtIGEgdGhlIGFycmF5IHRvIGJlIGZpbGxlZAoJICAgICAqIEBwYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGJlIHN0b3JlZCBpbiBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5CgkgICAgICovCgkgICAgQXJyYXlzLmZpbGwgPSBmdW5jdGlvbiAoYSwgdmFsKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQoJICAgICAgICAgICAgYVtpXSA9IHZhbDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQKCSAgICAgKiByYW5nZSBvZiB0aGUgc3BlY2lmaWVkIGFycmF5IG9mIGludHMuICBUaGUgcmFuZ2UgdG8gYmUgZmlsbGVkCgkgICAgICogZXh0ZW5kcyBmcm9tIGluZGV4IHtAY29kZSBmcm9tSW5kZXh9LCBpbmNsdXNpdmUsIHRvIGluZGV4CgkgICAgICoge0Bjb2RlIHRvSW5kZXh9LCBleGNsdXNpdmUuICAoSWYge0Bjb2RlIGZyb21JbmRleD09dG9JbmRleH0sIHRoZQoJICAgICAqIHJhbmdlIHRvIGJlIGZpbGxlZCBpcyBlbXB0eS4pCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gYmUgZmlsbGVkCgkgICAgICogQHBhcmFtIGZyb21JbmRleCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgKGluY2x1c2l2ZSkgdG8gYmUKCSAgICAgKiAgICAgICAgZmlsbGVkIHdpdGggdGhlIHNwZWNpZmllZCB2YWx1ZQoJICAgICAqIEBwYXJhbSB0b0luZGV4IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IChleGNsdXNpdmUpIHRvIGJlCgkgICAgICogICAgICAgIGZpbGxlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWUKCSAgICAgKiBAcGFyYW0gdmFsIHRoZSB2YWx1ZSB0byBiZSBzdG9yZWQgaW4gYWxsIGVsZW1lbnRzIG9mIHRoZSBhcnJheQoJICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPiB0b0luZGV4fQoJICAgICAqIEB0aHJvd3MgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPCAwfSBvcgoJICAgICAqICAgICAgICAge0Bjb2RlIHRvSW5kZXggPiBhLmxlbmd0aH0KCSAgICAgKi8KCSAgICBBcnJheXMuZmlsbFdpdGhpbiA9IGZ1bmN0aW9uIChhLCBmcm9tSW5kZXgsIHRvSW5kZXgsIHZhbCkgewoJICAgICAgICBBcnJheXMucmFuZ2VDaGVjayhhLmxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZyb21JbmRleDsgaSA8IHRvSW5kZXg7IGkrKykKCSAgICAgICAgICAgIGFbaV0gPSB2YWw7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDaGVja3MgdGhhdCB7QGNvZGUgZnJvbUluZGV4fSBhbmQge0Bjb2RlIHRvSW5kZXh9IGFyZSBpbgoJICAgICAqIHRoZSByYW5nZSBhbmQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiB0aGV5IGFyZW4ndC4KCSAgICAgKi8KCSAgICBBcnJheXMucmFuZ2VDaGVjayA9IGZ1bmN0aW9uIChhcnJheUxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KSB7CgkgICAgICAgIGlmIChmcm9tSW5kZXggPiB0b0luZGV4KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOS5kZWZhdWx0KCdmcm9tSW5kZXgoJyArIGZyb21JbmRleCArICcpID4gdG9JbmRleCgnICsgdG9JbmRleCArICcpJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGZyb21JbmRleCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KGZyb21JbmRleCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvSW5kZXggPiBhcnJheUxlbmd0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbl8xLmRlZmF1bHQodG9JbmRleCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEFycmF5cy5hc0xpc3QgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBhcmdzID0gW107CgkgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CgkgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGFyZ3M7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlID0gZnVuY3Rpb24gKHJvd3MsIGNvbHMsIHZhbHVlKSB7CgkgICAgICAgIHZhciBhcnIgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiByb3dzIH0pOwoJICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlSW50MzJBcnJheSA9IGZ1bmN0aW9uIChyb3dzLCBjb2xzLCB2YWx1ZSkgewoJICAgICAgICB2YXIgYXJyID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogcm93cyB9KTsKCSAgICAgICAgcmV0dXJuIGFyci5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIEludDMyQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuZXF1YWxzID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsKCSAgICAgICAgaWYgKCFmaXJzdCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIGlmICghc2Vjb25kKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKCFmaXJzdC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXNlY29uZC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZmlyc3QubGVuZ3RoICE9PSBzZWNvbmQubGVuZ3RoKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gZmlyc3QubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgaWYgKGZpcnN0W2ldICE9PSBzZWNvbmRbaV0pIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICBBcnJheXMuaGFzaENvZGUgPSBmdW5jdGlvbiAoYSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgaWYgKGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSAxOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgYV8xID0gX192YWx1ZXMkNyhhKSwgYV8xXzEgPSBhXzEubmV4dCgpOyAhYV8xXzEuZG9uZTsgYV8xXzEgPSBhXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAzMSAqIHJlc3VsdCArIGVsZW1lbnQ7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChhXzFfMSAmJiAhYV8xXzEuZG9uZSAmJiAoX2EgPSBhXzEucmV0dXJuKSkgX2EuY2FsbChhXzEpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBBcnJheXMuZmlsbFVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAoYSwgdmFsdWUpIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgIT09IGEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIGFbaV0gPSB2YWx1ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZiA9IGZ1bmN0aW9uIChvcmlnaW5hbCwgbmV3TGVuZ3RoKSB7CgkgICAgICAgIHJldHVybiBvcmlnaW5hbC5zbGljZSgwLCBuZXdMZW5ndGgpOwoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZlVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAob3JpZ2luYWwsIG5ld0xlbmd0aCkgewoJICAgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoIDw9IG5ld0xlbmd0aCkgewoJICAgICAgICAgICAgdmFyIG5ld0FycmF5ID0gbmV3IFVpbnQ4QXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgICAgIG5ld0FycmF5LnNldChvcmlnaW5hbCk7CgkgICAgICAgICAgICByZXR1cm4gbmV3QXJyYXk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG9yaWdpbmFsLnNsaWNlKDAsIG5ld0xlbmd0aCk7CgkgICAgfTsKCSAgICBBcnJheXMuY29weU9mUmFuZ2UgPSBmdW5jdGlvbiAob3JpZ2luYWwsIGZyb20sIHRvKSB7CgkgICAgICAgIHZhciBuZXdMZW5ndGggPSB0byAtIGZyb207CgkgICAgICAgIHZhciBjb3B5ID0gbmV3IEludDMyQXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgU3lzdGVtXzEkNS5kZWZhdWx0LmFycmF5Y29weShvcmlnaW5hbCwgZnJvbSwgY29weSwgMCwgbmV3TGVuZ3RoKTsKCSAgICAgICAgcmV0dXJuIGNvcHk7CgkgICAgfTsKCSAgICAvKgoJICAgICogUmV0dXJucyB0aGUgaW5kZXggb2Ygb2YgdGhlIGVsZW1lbnQgaW4gYSBzb3J0ZWQgYXJyYXkgb3IgKC1uLTEpIHdoZXJlIG4gaXMgdGhlIGluc2VydGlvbiBwb2ludAoJICAgICogZm9yIHRoZSBuZXcgZWxlbWVudC4KCSAgICAqIFBhcmFtZXRlcnM6CgkgICAgKiAgICAgYXIgLSBBIHNvcnRlZCBhcnJheQoJICAgICogICAgIGVsIC0gQW4gZWxlbWVudCB0byBzZWFyY2ggZm9yCgkgICAgKiAgICAgY29tcGFyYXRvciAtIEEgY29tcGFyYXRvciBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIHRha2VzIHR3byBhcmd1bWVudHM6IChhLCBiKSBhbmQgcmV0dXJuczoKCSAgICAqICAgICAgICBhIG5lZ2F0aXZlIG51bWJlciAgaWYgYSBpcyBsZXNzIHRoYW4gYjsKCSAgICAqICAgICAgICAwIGlmIGEgaXMgZXF1YWwgdG8gYjsKCSAgICAqICAgICAgICBhIHBvc2l0aXZlIG51bWJlciBvZiBhIGlzIGdyZWF0ZXIgdGhhbiBiLgoJICAgICogVGhlIGFycmF5IG1heSBjb250YWluIGR1cGxpY2F0ZSBlbGVtZW50cy4gSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgZXF1YWwgZWxlbWVudHMgaW4gdGhlIGFycmF5LAoJICAgICogdGhlIHJldHVybmVkIHZhbHVlIGNhbiBiZSB0aGUgaW5kZXggb2YgYW55IG9uZSBvZiB0aGUgZXF1YWwgZWxlbWVudHMuCgkgICAgKgoJICAgICogaHR0cDovL2pzZmlkZGxlLm5ldC9hcnl6aG92L3BrZnN0NTUwLwoJICAgICovCgkgICAgQXJyYXlzLmJpbmFyeVNlYXJjaCA9IGZ1bmN0aW9uIChhciwgZWwsIGNvbXBhcmF0b3IpIHsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY29tcGFyYXRvcikgewoJICAgICAgICAgICAgY29tcGFyYXRvciA9IEFycmF5cy5udW1iZXJDb21wYXJhdG9yOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtID0gMDsKCSAgICAgICAgdmFyIG4gPSBhci5sZW5ndGggLSAxOwoJICAgICAgICB3aGlsZSAobSA8PSBuKSB7CgkgICAgICAgICAgICB2YXIgayA9IChuICsgbSkgPj4gMTsKCSAgICAgICAgICAgIHZhciBjbXAgPSBjb21wYXJhdG9yKGVsLCBhcltrXSk7CgkgICAgICAgICAgICBpZiAoY21wID4gMCkgewoJICAgICAgICAgICAgICAgIG0gPSBrICsgMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHsKCSAgICAgICAgICAgICAgICBuID0gayAtIDE7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gLW0gLSAxOwoJICAgIH07CgkgICAgQXJyYXlzLm51bWJlckNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikgewoJICAgICAgICByZXR1cm4gYSAtIGI7CgkgICAgfTsKCSAgICByZXR1cm4gQXJyYXlzOwoJfSgpKTsKCUFycmF5cyQxLmRlZmF1bHQgPSBBcnJheXM7CgoJdmFyIEludGVnZXIkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogUG9ueWZpbGwgZm9yIEphdmEncyBJbnRlZ2VyIGNsYXNzLgoJICovCgl2YXIgSW50ZWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBJbnRlZ2VyKCkgewoJICAgIH0KCSAgICBJbnRlZ2VyLm51bWJlck9mVHJhaWxpbmdaZXJvcyA9IGZ1bmN0aW9uIChpKSB7CgkgICAgICAgIHZhciB5OwoJICAgICAgICBpZiAoaSA9PT0gMCkKCSAgICAgICAgICAgIHJldHVybiAzMjsKCSAgICAgICAgdmFyIG4gPSAzMTsKCSAgICAgICAgeSA9IGkgPDwgMTY7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDE2OwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgeSA9IGkgPDwgODsKCSAgICAgICAgaWYgKHkgIT09IDApIHsKCSAgICAgICAgICAgIG4gLT0gODsKCSAgICAgICAgICAgIGkgPSB5OwoJICAgICAgICB9CgkgICAgICAgIHkgPSBpIDw8IDQ7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDQ7CgkgICAgICAgICAgICBpID0geTsKCSAgICAgICAgfQoJICAgICAgICB5ID0gaSA8PCAyOwoJICAgICAgICBpZiAoeSAhPT0gMCkgewoJICAgICAgICAgICAgbiAtPSAyOwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG4gLSAoKGkgPDwgMSkgPj4+IDMxKTsKCSAgICB9OwoJICAgIEludGVnZXIubnVtYmVyT2ZMZWFkaW5nWmVyb3MgPSBmdW5jdGlvbiAoaSkgewoJICAgICAgICAvLyBIRCwgRmlndXJlIDUtNgoJICAgICAgICBpZiAoaSA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDMyOwoJICAgICAgICB9CgkgICAgICAgIHZhciBuID0gMTsKCSAgICAgICAgaWYgKGkgPj4+IDE2ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDE2OwoJICAgICAgICAgICAgaSA8PD0gMTY7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGkgPj4+IDI0ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDg7CgkgICAgICAgICAgICBpIDw8PSA4OwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID4+PiAyOCA9PT0gMCkgewoJICAgICAgICAgICAgbiArPSA0OwoJICAgICAgICAgICAgaSA8PD0gNDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaSA+Pj4gMzAgPT09IDApIHsKCSAgICAgICAgICAgIG4gKz0gMjsKCSAgICAgICAgICAgIGkgPDw9IDI7CgkgICAgICAgIH0KCSAgICAgICAgbiAtPSBpID4+PiAzMTsKCSAgICAgICAgcmV0dXJuIG47CgkgICAgfTsKCSAgICBJbnRlZ2VyLnRvSGV4U3RyaW5nID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgcmV0dXJuIGkudG9TdHJpbmcoMTYpOwoJICAgIH07CgkgICAgSW50ZWdlci50b0JpbmFyeVN0cmluZyA9IGZ1bmN0aW9uIChpbnROdW1iZXIpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZyhwYXJzZUludChTdHJpbmcoaW50TnVtYmVyKSwgMikpOwoJICAgIH07CgkgICAgLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4gVGhpcyBmdW5jdGlvbiBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgdGhlIHBvcHVsYXRpb24gY291bnQuCgkgICAgLy8gUmV0dXJuczoKCSAgICAvLyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4KCSAgICBJbnRlZ2VyLmJpdENvdW50ID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgLy8gSEQsIEZpZ3VyZSA1LTIKCSAgICAgICAgaSA9IGkgLSAoKGkgPj4+IDEpICYgMHg1NTU1NTU1NSk7CgkgICAgICAgIGkgPSAoaSAmIDB4MzMzMzMzMzMpICsgKChpID4+PiAyKSAmIDB4MzMzMzMzMzMpOwoJICAgICAgICBpID0gKGkgKyAoaSA+Pj4gNCkpICYgMHgwZjBmMGYwZjsKCSAgICAgICAgaSA9IGkgKyAoaSA+Pj4gOCk7CgkgICAgICAgIGkgPSBpICsgKGkgPj4+IDE2KTsKCSAgICAgICAgcmV0dXJuIGkgJiAweDNmOwoJICAgIH07CgkgICAgSW50ZWdlci50cnVuY0RpdmlzaW9uID0gZnVuY3Rpb24gKGRpdmlkZW5kLCBkaXZpc29yKSB7CgkgICAgICAgIHJldHVybiBNYXRoLnRydW5jKGRpdmlkZW5kIC8gZGl2aXNvcik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBBIHN0cmluZyB0byBhbiBpbnRlZ2VyLgoJICAgICAqIEBwYXJhbSBzIEEgc3RyaW5nIHRvIGNvbnZlcnQgaW50byBhIG51bWJlci4KCSAgICAgKiBAcGFyYW0gcmFkaXggQSB2YWx1ZSBiZXR3ZWVuIDIgYW5kIDM2IHRoYXQgc3BlY2lmaWVzIHRoZSBiYXNlIG9mIHRoZSBudW1iZXIgaW4gbnVtU3RyaW5nLiBJZiB0aGlzIGFyZ3VtZW50IGlzIG5vdCBzdXBwbGllZCwgc3RyaW5ncyB3aXRoIGEgcHJlZml4IG9mICcweCcgYXJlIGNvbnNpZGVyZWQgaGV4YWRlY2ltYWwuIEFsbCBvdGhlciBzdHJpbmdzIGFyZSBjb25zaWRlcmVkIGRlY2ltYWwuCgkgICAgICovCgkgICAgSW50ZWdlci5wYXJzZUludCA9IGZ1bmN0aW9uIChudW0sIHJhZGl4KSB7CgkgICAgICAgIGlmIChyYWRpeCA9PT0gdm9pZCAwKSB7IHJhZGl4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIHJldHVybiBwYXJzZUludChudW0sIHJhZGl4KTsKCSAgICB9OwoJICAgIEludGVnZXIuTUlOX1ZBTFVFXzMyX0JJVFMgPSAtMjE0NzQ4MzY0ODsKCSAgICBJbnRlZ2VyLk1BWF9WQUxVRSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgIHJldHVybiBJbnRlZ2VyOwoJfSgpKTsKCUludGVnZXIkMS5kZWZhdWx0ID0gSW50ZWdlcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdEFycmF5JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDggPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheXNfMSQxID0gQXJyYXlzJDE7Cgl2YXIgSW50ZWdlcl8xJDIgPSBJbnRlZ2VyJDE7Cgl2YXIgU3lzdGVtXzEkNCA9IFN5c3RlbSQxOwoJLyoqCgkgKiA8cD5BIHNpbXBsZSwgZmFzdCBhcnJheSBvZiBiaXRzLCByZXByZXNlbnRlZCBjb21wYWN0bHkgYnkgYW4gYXJyYXkgb2YgaW50cyBpbnRlcm5hbGx5LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgQml0QXJyYXkgLyppbXBsZW1lbnRzIENsb25lYWJsZSovID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHsKCSAgICAvLyAgIHRoaXMuc2l6ZSA9IDAKCSAgICAvLyAgIHRoaXMuYml0cyA9IG5ldyBJbnQzMkFycmF5KDEpCgkgICAgLy8gfQoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcihzaXplPzogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh1bmRlZmluZWQgPT09IHNpemUpIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gMAoJICAgIC8vICAgfSBlbHNlIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gc2l6ZQoJICAgIC8vICAgfQoJICAgIC8vICAgdGhpcy5iaXRzID0gdGhpcy5tYWtlQXJyYXkoc2l6ZSkKCSAgICAvLyB9CgkgICAgLy8gRm9yIHRlc3Rpbmcgb25seQoJICAgIGZ1bmN0aW9uIEJpdEFycmF5KHNpemUgLyppbnQqLywgYml0cykgewoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBzaXplKSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSAwOwoJICAgICAgICAgICAgdGhpcy5iaXRzID0gbmV3IEludDMyQXJyYXkoMSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSBzaXplOwoJICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gQml0QXJyYXkubWFrZUFycmF5KHNpemUpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTsKCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXRTaXplSW5CeXRlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHRoaXMuc2l6ZSArIDcpIC8gOCk7CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZW5zdXJlQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmIChzaXplID4gdGhpcy5iaXRzLmxlbmd0aCAqIDMyKSB7CgkgICAgICAgICAgICB2YXIgbmV3Qml0cyA9IEJpdEFycmF5Lm1ha2VBcnJheShzaXplKTsKCSAgICAgICAgICAgIFN5c3RlbV8xJDQuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5iaXRzLCAwLCBuZXdCaXRzLCAwLCB0aGlzLmJpdHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBpIGJpdCB0byBnZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGJpdCBpIGlzIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiAodGhpcy5iaXRzW01hdGguZmxvb3IoaSAvIDMyKV0gJiAoMSA8PCAoaSAmIDB4MUYpKSkgIT09IDA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHRoaXMuYml0c1tNYXRoLmZsb29yKGkgLyAzMildIHw9IDEgPDwgKGkgJiAweDFGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEZsaXBzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5mbGlwID0gZnVuY3Rpb24gKGkgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSBePSAxIDw8IChpICYgMHgxRik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBmaXJzdCBiaXQgdG8gY2hlY2sKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIGZpcnN0IGJpdCB0aGF0IGlzIHNldCwgc3RhcnRpbmcgZnJvbSB0aGUgZ2l2ZW4gaW5kZXgsIG9yIHNpemUgaWYgbm9uZSBhcmUgc2V0CgkgICAgICogIGF0IG9yIGJleW9uZCB0aGlzIGdpdmVuIGluZGV4CgkgICAgICogQHNlZSAjZ2V0TmV4dFVuc2V0KGludCkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0TmV4dFNldCA9IGZ1bmN0aW9uIChmcm9tIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7CgkgICAgICAgIGlmIChmcm9tID49IHNpemUpIHsKCSAgICAgICAgICAgIHJldHVybiBzaXplOwoJICAgICAgICB9CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IE1hdGguZmxvb3IoZnJvbSAvIDMyKTsKCSAgICAgICAgdmFyIGN1cnJlbnRCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgLy8gbWFzayBvZmYgbGVzc2VyIGJpdHMgZmlyc3QKCSAgICAgICAgY3VycmVudEJpdHMgJj0gfigoMSA8PCAoZnJvbSAmIDB4MUYpKSAtIDEpOwoJICAgICAgICB2YXIgbGVuZ3RoID0gYml0cy5sZW5ndGg7CgkgICAgICAgIHdoaWxlIChjdXJyZW50Qml0cyA9PT0gMCkgewoJICAgICAgICAgICAgaWYgKCsrYml0c09mZnNldCA9PT0gbGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIHNpemU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjdXJyZW50Qml0cyA9IGJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBpbmRleCB0byBzdGFydCBsb29raW5nIGZvciB1bnNldCBiaXQKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgdW5zZXQgYml0LCBvciB7QGNvZGUgc2l6ZX0gaWYgbm9uZSBhcmUgdW5zZXQgdW50aWwgdGhlIGVuZAoJICAgICAqIEBzZWUgI2dldE5leHRTZXQoaW50KQoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXROZXh0VW5zZXQgPSBmdW5jdGlvbiAoZnJvbSAvKmludCovKSB7CgkgICAgICAgIHZhciBzaXplID0gdGhpcy5zaXplOwoJICAgICAgICBpZiAoZnJvbSA+PSBzaXplKSB7CgkgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIGJpdHNPZmZzZXQgPSBNYXRoLmZsb29yKGZyb20gLyAzMik7CgkgICAgICAgIHZhciBjdXJyZW50Qml0cyA9IH5iaXRzW2JpdHNPZmZzZXRdOwoJICAgICAgICAvLyBtYXNrIG9mZiBsZXNzZXIgYml0cyBmaXJzdAoJICAgICAgICBjdXJyZW50Qml0cyAmPSB+KCgxIDw8IChmcm9tICYgMHgxRikpIC0gMSk7CgkgICAgICAgIHZhciBsZW5ndGggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgd2hpbGUgKGN1cnJlbnRCaXRzID09PSAwKSB7CgkgICAgICAgICAgICBpZiAoKytiaXRzT2Zmc2V0ID09PSBsZW5ndGgpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGN1cnJlbnRCaXRzID0gfmJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgYmxvY2sgb2YgMzIgYml0cywgc3RhcnRpbmcgYXQgYml0IGkuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gaSBmaXJzdCBiaXQgdG8gc2V0CgkgICAgICogQHBhcmFtIG5ld0JpdHMgdGhlIG5ldyB2YWx1ZSBvZiB0aGUgbmV4dCAzMiBiaXRzLiBOb3RlIGFnYWluIHRoYXQgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdAoJICAgICAqIGNvcnJlc3BvbmRzIHRvIGJpdCBpLCB0aGUgbmV4dC1sZWFzdC1zaWduaWZpY2FudCB0byBpKzEsIGFuZCBzbyBvbi4KCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0QnVsayA9IGZ1bmN0aW9uIChpIC8qaW50Ki8sIG5ld0JpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgcmFuZ2Ugb2YgYml0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydCBzdGFydCBvZiByYW5nZSwgaW5jbHVzaXZlLgoJICAgICAqIEBwYXJhbSBlbmQgZW5kIG9mIHJhbmdlLCBleGNsdXNpdmUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQgLyppbnQqLywgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIGVuZC0tOyAvLyB3aWxsIGJlIGVhc2llciB0byB0cmVhdCB0aGlzIGFzIHRoZSBsYXN0IGFjdHVhbGx5IHNldCBiaXQgLS0gaW5jbHVzaXZlCgkgICAgICAgIHZhciBmaXJzdEludCA9IE1hdGguZmxvb3Ioc3RhcnQgLyAzMik7CgkgICAgICAgIHZhciBsYXN0SW50ID0gTWF0aC5mbG9vcihlbmQgLyAzMik7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICBmb3IgKHZhciBpID0gZmlyc3RJbnQ7IGkgPD0gbGFzdEludDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgZmlyc3RCaXQgPSBpID4gZmlyc3RJbnQgPyAwIDogc3RhcnQgJiAweDFGOwoJICAgICAgICAgICAgdmFyIGxhc3RCaXQgPSBpIDwgbGFzdEludCA/IDMxIDogZW5kICYgMHgxRjsKCSAgICAgICAgICAgIC8vIE9uZXMgZnJvbSBmaXJzdEJpdCB0byBsYXN0Qml0LCBpbmNsdXNpdmUKCSAgICAgICAgICAgIHZhciBtYXNrID0gKDIgPDwgbGFzdEJpdCkgLSAoMSA8PCBmaXJzdEJpdCk7CgkgICAgICAgICAgICBiaXRzW2ldIHw9IG1hc2s7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbWF4ID0gdGhpcy5iaXRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGJpdHNbaV0gPSAwOwoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBFZmZpY2llbnQgbWV0aG9kIHRvIGNoZWNrIGlmIGEgcmFuZ2Ugb2YgYml0cyBpcyBzZXQsIG9yIG5vdCBzZXQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnQgc3RhcnQgb2YgcmFuZ2UsIGluY2x1c2l2ZS4KCSAgICAgKiBAcGFyYW0gZW5kIGVuZCBvZiByYW5nZSwgZXhjbHVzaXZlCgkgICAgICogQHBhcmFtIHZhbHVlIGlmIHRydWUsIGNoZWNrcyB0aGF0IGJpdHMgaW4gcmFuZ2UgYXJlIHNldCwgb3RoZXJ3aXNlIGNoZWNrcyB0aGF0IHRoZXkgYXJlIG5vdCBzZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGFsbCBiaXRzIGFyZSBzZXQgb3Igbm90IHNldCBpbiByYW5nZSwgYWNjb3JkaW5nIHRvIHZhbHVlIGFyZ3VtZW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgZW5kIGlzIGxlc3MgdGhhbiBzdGFydCBvciB0aGUgcmFuZ2UgaXMgbm90IGNvbnRhaW5lZCBpbiB0aGUgYXJyYXkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuaXNSYW5nZSA9IGZ1bmN0aW9uIChzdGFydCAvKmludCovLCBlbmQgLyppbnQqLywgdmFsdWUpIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIGVtcHR5IHJhbmdlIG1hdGNoZXMKCSAgICAgICAgfQoJICAgICAgICBlbmQtLTsgLy8gd2lsbCBiZSBlYXNpZXIgdG8gdHJlYXQgdGhpcyBhcyB0aGUgbGFzdCBhY3R1YWxseSBzZXQgYml0IC0tIGluY2x1c2l2ZQoJICAgICAgICB2YXIgZmlyc3RJbnQgPSBNYXRoLmZsb29yKHN0YXJ0IC8gMzIpOwoJICAgICAgICB2YXIgbGFzdEludCA9IE1hdGguZmxvb3IoZW5kIC8gMzIpOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0SW50OyBpIDw9IGxhc3RJbnQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGZpcnN0Qml0ID0gaSA+IGZpcnN0SW50ID8gMCA6IHN0YXJ0ICYgMHgxRjsKCSAgICAgICAgICAgIHZhciBsYXN0Qml0ID0gaSA8IGxhc3RJbnQgPyAzMSA6IGVuZCAmIDB4MUY7CgkgICAgICAgICAgICAvLyBPbmVzIGZyb20gZmlyc3RCaXQgdG8gbGFzdEJpdCwgaW5jbHVzaXZlCgkgICAgICAgICAgICB2YXIgbWFzayA9ICgyIDw8IGxhc3RCaXQpIC0gKDEgPDwgZmlyc3RCaXQpICYgMHhGRkZGRkZGRjsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiAmIDB4RkZGRkZGRkYgYWRkZWQgdG8gZGlzY2FyZCBhbnl0aGluZyBhZnRlciAzMiBiaXRzLCBhcyBFUyBoYXMgNTMgYml0cwoJICAgICAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGlmIHdlJ3JlIGxvb2tpbmcgZm9yIDFzIGFuZCB0aGUgbWFza2VkIGJpdHNbaV0gaXNuJ3QgYWxsIDFzIChpczogdGhhdCwKCSAgICAgICAgICAgIC8vIGVxdWFscyB0aGUgbWFzaywgb3Igd2UncmUgbG9va2luZyBmb3IgMHMgYW5kIHRoZSBtYXNrZWQgcG9ydGlvbiBpcyBub3QgYWxsIDBzCgkgICAgICAgICAgICBpZiAoKGJpdHNbaV0gJiBtYXNrKSAhPT0gKHZhbHVlID8gbWFzayA6IDApKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0cnVlOwoJICAgIH07CgkgICAgQml0QXJyYXkucHJvdG90eXBlLmFwcGVuZEJpdCA9IGZ1bmN0aW9uIChiaXQpIHsKCSAgICAgICAgdGhpcy5lbnN1cmVDYXBhY2l0eSh0aGlzLnNpemUgKyAxKTsKCSAgICAgICAgaWYgKGJpdCkgewoJICAgICAgICAgICAgdGhpcy5iaXRzW01hdGguZmxvb3IodGhpcy5zaXplIC8gMzIpXSB8PSAxIDw8ICh0aGlzLnNpemUgJiAweDFGKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLnNpemUrKzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFwcGVuZHMgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdHMsIGZyb20gdmFsdWUsIGluIG9yZGVyIGZyb20gbW9zdC1zaWduaWZpY2FudCB0bwoJICAgICAqIGxlYXN0LXNpZ25pZmljYW50LiBGb3IgZXhhbXBsZSwgYXBwZW5kaW5nIDYgYml0cyBmcm9tIDB4MDAwMDAxRSB3aWxsIGFwcGVuZCB0aGUgYml0cwoJICAgICAqIDAsIDEsIDEsIDEsIDEsIDAgaW4gdGhhdCBvcmRlci4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB2YWx1ZSB7QGNvZGUgaW50fSBjb250YWluaW5nIGJpdHMgdG8gYXBwZW5kCgkgICAgICogQHBhcmFtIG51bUJpdHMgYml0cyBmcm9tIHZhbHVlIHRvIGFwcGVuZAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5hcHBlbmRCaXRzID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICBpZiAobnVtQml0cyA8IDAgfHwgbnVtQml0cyA+IDMyKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOC5kZWZhdWx0KCdOdW0gYml0cyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMzInKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmVuc3VyZUNhcGFjaXR5KHRoaXMuc2l6ZSArIG51bUJpdHMpOwoJICAgICAgICAvLyBjb25zdCBhcHBlbmRCaXQgPSB0aGlzLmFwcGVuZEJpdDsKCSAgICAgICAgZm9yICh2YXIgbnVtQml0c0xlZnQgPSBudW1CaXRzOyBudW1CaXRzTGVmdCA+IDA7IG51bUJpdHNMZWZ0LS0pIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KCgodmFsdWUgPj4gKG51bUJpdHNMZWZ0IC0gMSkpICYgMHgwMSkgPT09IDEpOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuYXBwZW5kQml0QXJyYXkgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdmFyIG90aGVyU2l6ZSA9IG90aGVyLnNpemU7CgkgICAgICAgIHRoaXMuZW5zdXJlQ2FwYWNpdHkodGhpcy5zaXplICsgb3RoZXJTaXplKTsKCSAgICAgICAgLy8gY29uc3QgYXBwZW5kQml0ID0gdGhpcy5hcHBlbmRCaXQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJTaXplOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KG90aGVyLmdldChpKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDguZGVmYXVsdCgnU2l6ZXMgZG9uXCd0IG1hdGNoJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGJpdHMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgLy8gVGhlIGxhc3QgaW50IGNvdWxkIGJlIGluY29tcGxldGUgKGkuZS4gbm90IGhhdmUgMzIgYml0cyBpbgoJICAgICAgICAgICAgLy8gaXQpIGJ1dCB0aGVyZSBpcyBubyBwcm9ibGVtIHNpbmNlIDAgWE9SIDAgPT0gMC4KCSAgICAgICAgICAgIGJpdHNbaV0gXj0gb3RoZXIuYml0c1tpXTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0T2Zmc2V0IGZpcnN0IGJpdCB0byBzdGFydCB3cml0aW5nCgkgICAgICogQHBhcmFtIGFycmF5IGFycmF5IHRvIHdyaXRlIGludG8uIEJ5dGVzIGFyZSB3cml0dGVuIG1vc3Qtc2lnbmlmaWNhbnQgYnl0ZSBmaXJzdC4gVGhpcyBpcyB0aGUgb3Bwb3NpdGUKCSAgICAgKiAgb2YgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uLCB3aGljaCBpcyBleHBvc2VkIGJ5IHtAbGluayAjZ2V0Qml0QXJyYXkoKX0KCSAgICAgKiBAcGFyYW0gb2Zmc2V0IHBvc2l0aW9uIGluIGFycmF5IHRvIHN0YXJ0IHdyaXRpbmcKCSAgICAgKiBAcGFyYW0gbnVtQnl0ZXMgaG93IG1hbnkgYnl0ZXMgdG8gd3JpdGUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIChiaXRPZmZzZXQgLyppbnQqLywgYXJyYXksIG9mZnNldCAvKmludCovLCBudW1CeXRlcyAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQnl0ZXM7IGkrKykgewoJICAgICAgICAgICAgdmFyIHRoZUJ5dGUgPSAwOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA4OyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXQoYml0T2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICB0aGVCeXRlIHw9IDEgPDwgKDcgLSBqKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBpXSA9IC8qKGJ5dGUpKi8gdGhlQnl0ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB1bmRlcmx5aW5nIGFycmF5IG9mIGludHMuIFRoZSBmaXJzdCBlbGVtZW50IGhvbGRzIHRoZSBmaXJzdCAzMiBiaXRzLCBhbmQgdGhlIGxlYXN0CgkgICAgICogICAgICAgICBzaWduaWZpY2FudCBiaXQgaXMgYml0IDAuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmdldEJpdEFycmF5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV2ZXJzZXMgYWxsIGJpdHMgaW4gdGhlIGFycmF5LgoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3Qml0cyA9IG5ldyBJbnQzMkFycmF5KHRoaXMuYml0cy5sZW5ndGgpOwoJICAgICAgICAvLyByZXZlcnNlIGFsbCBpbnQncyBmaXJzdAoJICAgICAgICB2YXIgbGVuID0gTWF0aC5mbG9vcigodGhpcy5zaXplIC0gMSkgLyAzMik7CgkgICAgICAgIHZhciBvbGRCaXRzTGVuID0gbGVuICsgMTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkQml0c0xlbjsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeCA9IGJpdHNbaV07CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDEpICYgMHg1NTU1NTU1NSkgfCAoKHggJiAweDU1NTU1NTU1KSA8PCAxKTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMikgJiAweDMzMzMzMzMzKSB8ICgoeCAmIDB4MzMzMzMzMzMpIDw8IDIpOwoJICAgICAgICAgICAgeCA9ICgoeCA+PiA0KSAmIDB4MGYwZjBmMGYpIHwgKCh4ICYgMHgwZjBmMGYwZikgPDwgNCk7CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDgpICYgMHgwMGZmMDBmZikgfCAoKHggJiAweDAwZmYwMGZmKSA8PCA4KTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMTYpICYgMHgwMDAwZmZmZikgfCAoKHggJiAweDAwMDBmZmZmKSA8PCAxNik7CgkgICAgICAgICAgICBuZXdCaXRzW2xlbiAtIGldID0gLyooaW50KSovIHg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm93IGNvcnJlY3QgdGhlIGludCdzIGlmIHRoZSBiaXQgc2l6ZSBpc24ndCBhIG11bHRpcGxlIG9mIDMyCgkgICAgICAgIGlmICh0aGlzLnNpemUgIT09IG9sZEJpdHNMZW4gKiAzMikgewoJICAgICAgICAgICAgdmFyIGxlZnRPZmZzZXQgPSBvbGRCaXRzTGVuICogMzIgLSB0aGlzLnNpemU7CgkgICAgICAgICAgICB2YXIgY3VycmVudEludCA9IG5ld0JpdHNbMF0gPj4+IGxlZnRPZmZzZXQ7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IG9sZEJpdHNMZW47IGkrKykgewoJICAgICAgICAgICAgICAgIHZhciBuZXh0SW50ID0gbmV3Qml0c1tpXTsKCSAgICAgICAgICAgICAgICBjdXJyZW50SW50IHw9IG5leHRJbnQgPDwgKDMyIC0gbGVmdE9mZnNldCk7CgkgICAgICAgICAgICAgICAgbmV3Qml0c1tpIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICAgICAgICAgIGN1cnJlbnRJbnQgPSBuZXh0SW50ID4+PiBsZWZ0T2Zmc2V0OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgbmV3Qml0c1tvbGRCaXRzTGVuIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICBCaXRBcnJheS5tYWtlQXJyYXkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShNYXRoLmZsb29yKChzaXplICsgMzEpIC8gMzIpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdEFycmF5KSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IG90aGVyLnNpemUgJiYgQXJyYXlzXzEkMS5kZWZhdWx0LmVxdWFscyh0aGlzLmJpdHMsIG90aGVyLmJpdHMpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogdGhpcy5zaXplICsgQXJyYXlzXzEkMS5kZWZhdWx0Lmhhc2hDb2RlKHRoaXMuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBzaXplID0gdGhpcy5zaXplOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICBpZiAoKGkgJiAweDA3KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnICc7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5nZXQoaSkgPyAnWCcgOiAnLic7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0QXJyYXkodGhpcy5zaXplLCB0aGlzLmJpdHMuc2xpY2UoKSk7CgkgICAgfTsKCSAgICByZXR1cm4gQml0QXJyYXk7Cgl9KCkpOwoJQml0QXJyYXkkMS5kZWZhdWx0ID0gQml0QXJyYXk7CgoJdmFyIEJpdE1hdHJpeCQxID0ge307CgoJdmFyIFN0cmluZ0J1aWxkZXIkMSA9IHt9OwoKCXZhciBTdHJpbmdVdGlscyQxID0ge307CgoJdmFyIERlY29kZUhpbnRUeXBlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERlY29kZUhpbnRUeXBlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIHR5cGUgb2YgaGludCB0aGF0IGEgY2FsbGVyIG1heSBwYXNzIHRvIGEgYmFyY29kZSByZWFkZXIgdG8gaGVscCBpdAoJICogbW9yZSBxdWlja2x5IG9yIGFjY3VyYXRlbHkgZGVjb2RlIGl0LiBJdCBpcyB1cCB0byBpbXBsZW1lbnRhdGlvbnMgdG8gZGVjaWRlIHdoYXQsCgkgKiBpZiBhbnl0aGluZywgdG8gZG8gd2l0aCB0aGUgaW5mb3JtYXRpb24gdGhhdCBpcyBzdXBwbGllZC4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBzZWUgUmVhZGVyI2RlY29kZShCaW5hcnlCaXRtYXAsamF2YS51dGlsLk1hcCkKCSAqLwoJdmFyIERlY29kZUhpbnRUeXBlOwoJKGZ1bmN0aW9uIChEZWNvZGVIaW50VHlwZSkgewoJICAgIC8qKgoJICAgICAqIFVuc3BlY2lmaWVkLCBhcHBsaWNhdGlvbi1zcGVjaWZpYyBoaW50LiBNYXBzIHRvIGFuIHVuc3BlY2lmaWVkIHtAbGluayBPYmplY3R9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJPVEhFUiJdID0gMF0gPSAiT1RIRVIiOyAvKihPYmplY3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJbWFnZSBpcyBhIHB1cmUgbW9ub2Nocm9tZSBpbWFnZSBvZiBhIGJhcmNvZGUuIERvZXNuJ3QgbWF0dGVyIHdoYXQgaXQgbWFwcyB0bzsKCSAgICAgKiB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlBVUkVfQkFSQ09ERSJdID0gMV0gPSAiUFVSRV9CQVJDT0RFIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEltYWdlIGlzIGtub3duIHRvIGJlIG9mIG9uZSBvZiBhIGZldyBwb3NzaWJsZSBmb3JtYXRzLgoJICAgICAqIE1hcHMgdG8gYSB7QGxpbmsgTGlzdH0gb2Yge0BsaW5rIEJhcmNvZGVGb3JtYXR9cy4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiUE9TU0lCTEVfRk9STUFUUyJdID0gMl0gPSAiUE9TU0lCTEVfRk9STUFUUyI7IC8qKExpc3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVuZCBtb3JlIHRpbWUgdG8gdHJ5IHRvIGZpbmQgYSBiYXJjb2RlOyBvcHRpbWl6ZSBmb3IgYWNjdXJhY3ksIG5vdCBzcGVlZC4KCSAgICAgKiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87IHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiVFJZX0hBUkRFUiJdID0gM10gPSAiVFJZX0hBUkRFUiI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVjaWZpZXMgd2hhdCBjaGFyYWN0ZXIgZW5jb2RpbmcgdG8gdXNlIHdoZW4gZGVjb2RpbmcsIHdoZXJlIGFwcGxpY2FibGUgKHR5cGUgU3RyaW5nKQoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJDSEFSQUNURVJfU0VUIl0gPSA0XSA9ICJDSEFSQUNURVJfU0VUIjsgLyooU3RyaW5nLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQWxsb3dlZCBsZW5ndGhzIG9mIGVuY29kZWQgZGF0YSAtLSByZWplY3QgYW55dGhpbmcgZWxzZS4gTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfTEVOR1RIUyJdID0gNV0gPSAiQUxMT1dFRF9MRU5HVEhTIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEFzc3VtZSBDb2RlIDM5IGNvZGVzIGVtcGxveSBhIGNoZWNrIGRpZ2l0LiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87CgkgICAgICogdXNlIHtAbGluayBCb29sZWFuI1RSVUV9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJBU1NVTUVfQ09ERV8zOV9DSEVDS19ESUdJVCJdID0gNl0gPSAiQVNTVU1FX0NPREVfMzlfQ0hFQ0tfRElHSVQiOyAvKihWb2lkLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQXNzdW1lIHRoZSBiYXJjb2RlIGlzIGJlaW5nIHByb2Nlc3NlZCBhcyBhIEdTMSBiYXJjb2RlLCBhbmQgbW9kaWZ5IGJlaGF2aW9yIGFzIG5lZWRlZC4KCSAgICAgKiBGb3IgZXhhbXBsZSB0aGlzIGFmZmVjdHMgRk5DMSBoYW5kbGluZyBmb3IgQ29kZSAxMjggKGFrYSBHUzEtMTI4KS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOwoJICAgICAqIHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiQVNTVU1FX0dTMSJdID0gN10gPSAiQVNTVU1FX0dTMSI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJZiB0cnVlLCByZXR1cm4gdGhlIHN0YXJ0IGFuZCBlbmQgZGlnaXRzIGluIGEgQ29kYWJhciBiYXJjb2RlIGluc3RlYWQgb2Ygc3RyaXBwaW5nIHRoZW0uIFRoZXkKCSAgICAgKiBhcmUgYWxwaGEsIHdoZXJlYXMgdGhlIHJlc3QgYXJlIG51bWVyaWMuIEJ5IGRlZmF1bHQsIHRoZXkgYXJlIHN0cmlwcGVkLCBidXQgdGhpcyBjYXVzZXMgdGhlbQoJICAgICAqIHRvIG5vdCBiZS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOyB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlJFVFVSTl9DT0RBQkFSX1NUQVJUX0VORCJdID0gOF0gPSAiUkVUVVJOX0NPREFCQVJfU1RBUlRfRU5EIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIFRoZSBjYWxsZXIgbmVlZHMgdG8gYmUgbm90aWZpZWQgdmlhIGNhbGxiYWNrIHdoZW4gYSBwb3NzaWJsZSB7QGxpbmsgUmVzdWx0UG9pbnR9CgkgICAgICogaXMgZm91bmQuIE1hcHMgdG8gYSB7QGxpbmsgUmVzdWx0UG9pbnRDYWxsYmFja30uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIk5FRURfUkVTVUxUX1BPSU5UX0NBTExCQUNLIl0gPSA5XSA9ICJORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDSyI7IC8qKFJlc3VsdFBvaW50Q2FsbGJhY2suY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBBbGxvd2VkIGV4dGVuc2lvbiBsZW5ndGhzIGZvciBFQU4gb3IgVVBDIGJhcmNvZGVzLiBPdGhlciBmb3JtYXRzIHdpbGwgaWdub3JlIHRoaXMuCgkgICAgICogTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0gb2YgdGhlIGFsbG93ZWQgZXh0ZW5zaW9uIGxlbmd0aHMsIGZvciBleGFtcGxlIFsyXSwgWzVdLCBvciBbMiwgNV0uCgkgICAgICogSWYgaXQgaXMgb3B0aW9uYWwgdG8gaGF2ZSBhbiBleHRlbnNpb24sIGRvIG5vdCBzZXQgdGhpcyBoaW50LiBJZiB0aGlzIGlzIHNldCwKCSAgICAgKiBhbmQgYSBVUEMgb3IgRUFOIGJhcmNvZGUgaXMgZm91bmQgYnV0IGFuIGV4dGVuc2lvbiBpcyBub3QsIHRoZW4gbm8gcmVzdWx0IHdpbGwgYmUgcmV0dXJuZWQKCSAgICAgKiBhdCBhbGwuCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfRUFOX0VYVEVOU0lPTlMiXSA9IDEwXSA9ICJBTExPV0VEX0VBTl9FWFRFTlNJT05TIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8vIEVuZCBvZiBlbnVtZXJhdGlvbiB2YWx1ZXMuCgkgICAgLyoqCgkgICAgICogRGF0YSB0eXBlIHRoZSBoaW50IGlzIGV4cGVjdGluZy4KCSAgICAgKiBBbW9uZyB0aGUgcG9zc2libGUgdmFsdWVzIHRoZSB7QGxpbmsgVm9pZH0gc3RhbmRzIG91dCBhcyBiZWluZyB1c2VkIGZvcgoJICAgICAqIGhpbnRzIHRoYXQgZG8gbm90IGV4cGVjdCBhIHZhbHVlIHRvIGJlIHN1cHBsaWVkIChmbGFnIGhpbnRzKS4gU3VjaCBoaW50cwoJICAgICAqIHdpbGwgcG9zc2libHkgaGF2ZSB0aGVpciB2YWx1ZSBpZ25vcmVkLCBvciByZXBsYWNlZCBieSBhCgkgICAgICoge0BsaW5rIEJvb2xlYW4jVFJVRX0uIEhpbnQgc3VwcGxpZXJzIHNob3VsZCBwcm9iYWJseSB1c2UKCSAgICAgKiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBhcyBkaXJlY3RlZCBieSB0aGUgYWN0dWFsIGhpbnQgZG9jdW1lbnRhdGlvbi4KCSAgICAgKi8KCSAgICAvLyBwcml2YXRlIHZhbHVlVHlwZTogQ2xhc3M8Pz4KCSAgICAvLyBEZWNvZGVIaW50VHlwZSh2YWx1ZVR5cGU6IENsYXNzPD8+KSB7CgkgICAgLy8gICB0aGlzLnZhbHVlVHlwZSA9IHZhbHVlVHlwZQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgZ2V0VmFsdWVUeXBlKCk6IENsYXNzPD8+IHsKCSAgICAvLyAgIHJldHVybiB2YWx1ZVR5cGUKCSAgICAvLyB9Cgl9KShEZWNvZGVIaW50VHlwZSB8fCAoRGVjb2RlSGludFR5cGUgPSB7fSkpOwoJRGVjb2RlSGludFR5cGUkMS5kZWZhdWx0ID0gRGVjb2RlSGludFR5cGU7CgoJdmFyIENoYXJhY3RlclNldEVDSSA9IHt9OwoKCXZhciBGb3JtYXRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGb3JtYXRFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDcgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRm9ybWF0RXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRmKEZvcm1hdEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBGb3JtYXRFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEV4Y2VwdGlvbigpOwoJICAgIH07CgkgICAgRm9ybWF0RXhjZXB0aW9uLmtpbmQgPSAnRm9ybWF0RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRm9ybWF0RXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ3LmRlZmF1bHQpKTsKCUZvcm1hdEV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBGb3JtYXRFeGNlcHRpb247CgoJKGZ1bmN0aW9uIChleHBvcnRzKSB7CgkvKgoJICogQ29weXJpZ2h0IDIwMDggWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCWV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHZvaWQgMDsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xID0gRm9ybWF0RXhjZXB0aW9uJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsqLwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJdmFyIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnM7CgkoZnVuY3Rpb24gKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMpIHsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwNDM3Il0gPSAwXSA9ICJDcDQzNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEiXSA9IDFdID0gIklTTzg4NTlfMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzIiXSA9IDJdID0gIklTTzg4NTlfMiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzMiXSA9IDNdID0gIklTTzg4NTlfMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzQiXSA9IDRdID0gIklTTzg4NTlfNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzUiXSA9IDVdID0gIklTTzg4NTlfNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzYiXSA9IDZdID0gIklTTzg4NTlfNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzciXSA9IDddID0gIklTTzg4NTlfNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzgiXSA9IDhdID0gIklTTzg4NTlfOCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzkiXSA9IDldID0gIklTTzg4NTlfOSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEwIl0gPSAxMF0gPSAiSVNPODg1OV8xMCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzExIl0gPSAxMV0gPSAiSVNPODg1OV8xMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEzIl0gPSAxMl0gPSAiSVNPODg1OV8xMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE0Il0gPSAxM10gPSAiSVNPODg1OV8xNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE1Il0gPSAxNF0gPSAiSVNPODg1OV8xNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE2Il0gPSAxNV0gPSAiSVNPODg1OV8xNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJTSklTIl0gPSAxNl0gPSAiU0pJUyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTAiXSA9IDE3XSA9ICJDcDEyNTAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQ3AxMjUxIl0gPSAxOF0gPSAiQ3AxMjUxIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwMTI1MiJdID0gMTldID0gIkNwMTI1MiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTYiXSA9IDIwXSA9ICJDcDEyNTYiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siVW5pY29kZUJpZ1VubWFya2VkIl0gPSAyMV0gPSAiVW5pY29kZUJpZ1VubWFya2VkIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIlVURjgiXSA9IDIyXSA9ICJVVEY4IjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkFTQ0lJIl0gPSAyM10gPSAiQVNDSUkiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQmlnNSJdID0gMjRdID0gIkJpZzUiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siR0IxODAzMCJdID0gMjVdID0gIkdCMTgwMzAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siRVVDX0tSIl0gPSAyNl0gPSAiRVVDX0tSIjsKCX0pKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgPSBleHBvcnRzLkNoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgfHwgKGV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHt9KSk7CgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIENoYXJhY3RlciBTZXQgRUNJLCBhY2NvcmRpbmcgdG8gIkV4dGVuZGVkIENoYW5uZWwgSW50ZXJwcmV0YXRpb25zIiA1LjMuMS4xCgkgKiBvZiBJU08gMTgwMDQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIENoYXJhY3RlclNldEVDSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBDaGFyYWN0ZXJTZXRFQ0kodmFsdWVJZGVudGlmaWVyLCB2YWx1ZXNQYXJhbSwgbmFtZSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG90aGVyRW5jb2RpbmdOYW1lcyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgb3RoZXJFbmNvZGluZ05hbWVzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmFsdWVJZGVudGlmaWVyID0gdmFsdWVJZGVudGlmaWVyOwoJICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwoJICAgICAgICBpZiAodHlwZW9mIHZhbHVlc1BhcmFtID09PSAnbnVtYmVyJykgewoJICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSBJbnQzMkFycmF5LmZyb20oW3ZhbHVlc1BhcmFtXSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlc1BhcmFtOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzOwoJICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVfSURFTlRJRklFUl9UT19FQ0kuc2V0KHZhbHVlSWRlbnRpZmllciwgdGhpcyk7CgkgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQobmFtZSwgdGhpcyk7CgkgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlczsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gdmFsdWVzLmxlbmd0aDsgaSAhPT0gbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgdmFyIHYgPSB2YWx1ZXNbaV07CgkgICAgICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVTX1RPX0VDSS5zZXQodiwgdGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIG90aGVyRW5jb2RpbmdOYW1lc18xID0gX192YWx1ZXMob3RoZXJFbmNvZGluZ05hbWVzKSwgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKTsgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZTsgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBvdGhlck5hbWUgPSBvdGhlckVuY29kaW5nTmFtZXNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQob3RoZXJOYW1lLCB0aGlzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKG90aGVyRW5jb2RpbmdOYW1lc18xXzEgJiYgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZSAmJiAoX2EgPSBvdGhlckVuY29kaW5nTmFtZXNfMS5yZXR1cm4pKSBfYS5jYWxsKG90aGVyRW5jb2RpbmdOYW1lc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgIH0KCSAgICAvLyBDaGFyYWN0ZXJTZXRFQ0kodmFsdWU6IG51bWJlciAvKmludCovKSB7CgkgICAgLy8gICB0aGlzKG5ldyBJbnQzMkFycmF5IHt2YWx1ZX0pCgkgICAgLy8gfQoJICAgIC8vIENoYXJhY3RlclNldEVDSSh2YWx1ZTogbnVtYmVyIC8qaW50Ki8sIFN0cmluZy4uLiBvdGhlckVuY29kaW5nTmFtZXMpIHsKCSAgICAvLyAgIHRoaXMudmFsdWVzID0gbmV3IEludDMyQXJyYXkge3ZhbHVlfQoJICAgIC8vICAgdGhpcy5vdGhlckVuY29kaW5nTmFtZXMgPSBvdGhlckVuY29kaW5nTmFtZXMKCSAgICAvLyB9CgkgICAgLy8gQ2hhcmFjdGVyU2V0RUNJKHZhbHVlczogSW50MzJBcnJheSwgU3RyaW5nLi4uIG90aGVyRW5jb2RpbmdOYW1lcykgewoJICAgIC8vICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXMKCSAgICAvLyAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzCgkgICAgLy8gfQoJICAgIENoYXJhY3RlclNldEVDSS5wcm90b3R5cGUuZ2V0VmFsdWVJZGVudGlmaWVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUlkZW50aWZpZXI7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm5hbWU7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmFsdWUgY2hhcmFjdGVyIHNldCBFQ0kgdmFsdWUKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBDaGFyYWN0ZXJTZXRFQ0l9IHJlcHJlc2VudGluZyBFQ0kgb2YgZ2l2ZW4gdmFsdWUsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwgYnV0CgkgICAgICogICB1bnN1cHBvcnRlZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIEVDSSB2YWx1ZSBpcyBpbnZhbGlkCgkgICAgICovCgkgICAgQ2hhcmFjdGVyU2V0RUNJLmdldENoYXJhY3RlclNldEVDSUJ5VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPCAwIHx8IHZhbHVlID49IDkwMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGNoYXJhY3RlclNldCA9IENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJLmdldCh2YWx1ZSk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNoYXJhY3RlclNldCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGNoYXJhY3RlclNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBuYW1lIGNoYXJhY3RlciBzZXQgRUNJIGVuY29kaW5nIG5hbWUKCSAgICAgKiBAcmV0dXJuIENoYXJhY3RlclNldEVDSSByZXByZXNlbnRpbmcgRUNJIGZvciBjaGFyYWN0ZXIgZW5jb2RpbmcsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwKCSAgICAgKiAgIGJ1dCB1bnN1cHBvcnRlZAoJICAgICAqLwoJICAgIENoYXJhY3RlclNldEVDSS5nZXRDaGFyYWN0ZXJTZXRFQ0lCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gQ2hhcmFjdGVyU2V0RUNJLk5BTUVfVE9fRUNJLmdldChuYW1lKTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgnaW5jb3JlY3QgdmFsdWUnKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY2hhcmFjdGVyU2V0OwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgQ2hhcmFjdGVyU2V0RUNJKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLmdldE5hbWUoKSA9PT0gb3RoZXIuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlZBTFVFX0lERU5USUZJRVJfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSSA9IG5ldyBNYXAoKTsKCSAgICAvLyBFbnVtIG5hbWUgaXMgYSBKYXZhIGVuY29kaW5nIHZhbGlkIGZvciBqYXZhLmxhbmcgYW5kIGphdmEuaW8KCSAgICAvLyBUWVBFU0NSSVBUUE9SVDogY2hhbmdlZCB0aGUgbWFpbiBsYWJlbCBmb3IgSVNPIGFzIHRoZSBUZXh0RW5jb2RlciBkaWQgbm90IHJlY29nbml6ZWQgdGhlbSBpbiB0aGUgZm9ybSBmcm9tIGphdmEKCSAgICAvLyAoZWcgSVNPODg1OV8xIG11c3QgYmUgSVNPODg1OTEgb3IgSVNPODg1OS0xIG9yIElTTy04ODU5LTEpCgkgICAgLy8gbGF0ZXIgb246IHdlbGwsIGV4Y2VwdCAxNiB3aWNoIGRvZXMgbm90IHdvcmsgd2l0aCBJU084ODU5MTYgc28gdXNlZCBJU08tODg1OS0xIGZvcm0gZm9yIGRlZmF1bHQKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3A0MzcgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3A0MzcsIEludDMyQXJyYXkuZnJvbShbMCwgMl0pLCAnQ3A0MzcnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMSwgSW50MzJBcnJheS5mcm9tKFsxLCAzXSksICdJU08tODg1OS0xJywgJ0lTTzg4NTkxJywgJ0lTTzg4NTlfMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzIgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8yLCA0LCAnSVNPLTg4NTktMicsICdJU084ODU5MicsICdJU084ODU5XzInKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8zID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMywgNSwgJ0lTTy04ODU5LTMnLCAnSVNPODg1OTMnLCAnSVNPODg1OV8zJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzQsIDYsICdJU08tODg1OS00JywgJ0lTTzg4NTk0JywgJ0lTTzg4NTlfNCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV81LCA3LCAnSVNPLTg4NTktNScsICdJU084ODU5NScsICdJU084ODU5XzUnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV82ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfNiwgOCwgJ0lTTy04ODU5LTYnLCAnSVNPODg1OTYnLCAnSVNPODg1OV82Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzcsIDksICdJU08tODg1OS03JywgJ0lTTzg4NTk3JywgJ0lTTzg4NTlfNycpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV84LCAxMCwgJ0lTTy04ODU5LTgnLCAnSVNPODg1OTgnLCAnSVNPODg1OV84Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfOSA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzksIDExLCAnSVNPLTg4NTktOScsICdJU084ODU5OScsICdJU084ODU5XzknKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xMCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzEwLCAxMiwgJ0lTTy04ODU5LTEwJywgJ0lTTzg4NTkxMCcsICdJU084ODU5XzEwJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xMSwgMTMsICdJU08tODg1OS0xMScsICdJU084ODU5MTEnLCAnSVNPODg1OV8xMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzEzID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTMsIDE1LCAnSVNPLTg4NTktMTMnLCAnSVNPODg1OTEzJywgJ0lTTzg4NTlfMTMnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzE0LCAxNiwgJ0lTTy04ODU5LTE0JywgJ0lTTzg4NTkxNCcsICdJU084ODU5XzE0Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xNSwgMTcsICdJU08tODg1OS0xNScsICdJU084ODU5MTUnLCAnSVNPODg1OV8xNScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzE2ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTYsIDE4LCAnSVNPLTg4NTktMTYnLCAnSVNPODg1OTE2JywgJ0lTTzg4NTlfMTYnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuU0pJUyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5TSklTLCAyMCwgJ1NKSVMnLCAnU2hpZnRfSklTJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1MCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTAsIDIxLCAnQ3AxMjUwJywgJ3dpbmRvd3MtMTI1MCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5DcDEyNTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3AxMjUxLCAyMiwgJ0NwMTI1MScsICd3aW5kb3dzLTEyNTEnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3AxMjUyID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkNwMTI1MiwgMjMsICdDcDEyNTInLCAnd2luZG93cy0xMjUyJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1NiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTYsIDI0LCAnQ3AxMjU2JywgJ3dpbmRvd3MtMTI1NicpOwoJICAgIENoYXJhY3RlclNldEVDSS5Vbmljb2RlQmlnVW5tYXJrZWQgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVW5pY29kZUJpZ1VubWFya2VkLCAyNSwgJ1VuaWNvZGVCaWdVbm1hcmtlZCcsICdVVEYtMTZCRScsICdVbmljb2RlQmlnJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlVURjggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVVRGOCwgMjYsICdVVEY4JywgJ1VURi04Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkFTQ0lJID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkFTQ0lJLCBJbnQzMkFycmF5LmZyb20oWzI3LCAxNzBdKSwgJ0FTQ0lJJywgJ1VTLUFTQ0lJJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkJpZzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQmlnNSwgMjgsICdCaWc1Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkdCMTgwMzAgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuR0IxODAzMCwgMjksICdHQjE4MDMwJywgJ0dCMjMxMicsICdFVUNfQ04nLCAnR0JLJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkVVQ19LUiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5FVUNfS1IsIDMwLCAnRVVDX0tSJywgJ0VVQy1LUicpOwoJICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0k7Cgl9KCkpOwoJZXhwb3J0cy5kZWZhdWx0ID0gQ2hhcmFjdGVyU2V0RUNJOwoKCX0oQ2hhcmFjdGVyU2V0RUNJKSk7CgoJdmFyIFN0cmluZ0VuY29kaW5nJDEgPSB7fTsKCgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNiA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbi5raW5kID0gJ1Vuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCkpOwoJVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMS5kZWZhdWx0ID0gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ0VuY29kaW5nJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEgPSBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxOwoJdmFyIENoYXJhY3RlclNldEVDSV8xJDIgPSBDaGFyYWN0ZXJTZXRFQ0k7CgkvKioKCSAqIFJlc3BvbnNpYmxlIGZvciBlbi9kZWNvZGluZyBzdHJpbmdzLgoJICovCgl2YXIgU3RyaW5nRW5jb2RpbmcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nRW5jb2RpbmcoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIERlY29kZXMgc29tZSBVaW50OEFycmF5IHRvIGEgc3RyaW5nIGZvcm1hdC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5kZWNvZGUgPSBmdW5jdGlvbiAoYnl0ZXMsIGVuY29kaW5nKSB7CgkgICAgICAgIHZhciBlbmNvZGluZ05hbWUgPSB0aGlzLmVuY29kaW5nTmFtZShlbmNvZGluZyk7CgkgICAgICAgIGlmICh0aGlzLmN1c3RvbURlY29kZXIpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbURlY29kZXIoYnl0ZXMsIGVuY29kaW5nTmFtZSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSW5jcmVhc2VzIGJyb3dzZXIgc3VwcG9ydC4KCSAgICAgICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5zaG91bGREZWNvZGVPbkZhbGxiYWNrKGVuY29kaW5nTmFtZSkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUZhbGxiYWNrKGJ5dGVzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmdOYW1lKS5kZWNvZGUoYnl0ZXMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ2hlY2tzIGlmIHRoZSBkZWNvZGluZyBtZXRob2Qgc2hvdWxkIHVzZSB0aGUgZmFsbGJhY2sgZm9yIGRlY29kaW5nCgkgICAgICogb25jZSBOb2RlIFRleHREZWNvZGVyIGRvZXNuJ3Qgc3VwcG9ydCBhbGwgZW5jb2RpbmcgZm9ybWF0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBlbmNvZGluZ05hbWUKCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5zaG91bGREZWNvZGVPbkZhbGxiYWNrID0gZnVuY3Rpb24gKGVuY29kaW5nTmFtZSkgewoJICAgICAgICByZXR1cm4gIVN0cmluZ0VuY29kaW5nLmlzQnJvd3NlcigpICYmIGVuY29kaW5nTmFtZSA9PT0gJ0lTTy04ODU5LTEnOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRW5jb2RlcyBzb21lIHN0cmluZyBpbnRvIGEgVWludDhBcnJheS4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGUgPSBmdW5jdGlvbiAocywgZW5jb2RpbmcpIHsKCSAgICAgICAgdmFyIGVuY29kaW5nTmFtZSA9IHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKTsKCSAgICAgICAgaWYgKHRoaXMuY3VzdG9tRW5jb2RlcikgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRW5jb2RlcihzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEluY3JlYXNlcyBicm93c2VyIHN1cHBvcnQuCgkgICAgICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgPT09ICd1bmRlZmluZWQnKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVGYWxsYmFjayhzKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBUZXh0RW5jb2RlciBvbmx5IGVuY29kZXMgdG8gVVRGOCBieSBkZWZhdWx0IGFzIHNwZWNpZmllZCBieSBlbmNvZGluZy5zcGVjLndoYXR3Zy5vcmcKCSAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzQnJvd3NlciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHdpbmRvdykgPT09ICdbb2JqZWN0IFdpbmRvd10nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHN0cmluZyB2YWx1ZSBmcm9tIHNvbWUgZW5jb2RpbmcgY2hhcmFjdGVyIHNldC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGluZ05hbWUgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycKCSAgICAgICAgICAgID8gZW5jb2RpbmcKCSAgICAgICAgICAgIDogZW5jb2RpbmcuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBjaGFyYWN0ZXIgc2V0IGZyb20gc29tZSBlbmNvZGluZyBjaGFyYWN0ZXIgc2V0LgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmVuY29kaW5nQ2hhcmFjdGVyU2V0ID0gZnVuY3Rpb24gKGVuY29kaW5nKSB7CgkgICAgICAgIGlmIChlbmNvZGluZyBpbnN0YW5jZW9mIENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdCkgewoJICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlOYW1lKGVuY29kaW5nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJ1bnMgYSBmYWxsYmFjayBmb3IgdGhlIG5hdGl2ZSBkZWNvZGluZyBmdW5jaW9uLgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmRlY29kZUZhbGxiYWNrID0gZnVuY3Rpb24gKGJ5dGVzLCBlbmNvZGluZykgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gdGhpcy5lbmNvZGluZ0NoYXJhY3RlclNldChlbmNvZGluZyk7CgkgICAgICAgIGlmIChTdHJpbmdFbmNvZGluZy5pc0RlY29kZUZhbGxiYWNrU3VwcG9ydGVkKGNoYXJhY3RlclNldCkpIHsKCSAgICAgICAgICAgIHZhciBzID0gJyc7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzEgPSBieXRlcy5sZW5ndGg7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGggPSBieXRlc1tpXS50b1N0cmluZygxNik7CgkgICAgICAgICAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikgewoJICAgICAgICAgICAgICAgICAgICBoID0gJzAnICsgaDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcyArPSAnJScgKyBoOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuVW5pY29kZUJpZ1VubWFya2VkKSkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQxNkFycmF5KGJ5dGVzLmJ1ZmZlcikpOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgiRW5jb2RpbmcgIiArIHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKSArICIgbm90IHN1cHBvcnRlZCBieSBmYWxsYmFjay4iKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzRGVjb2RlRmFsbGJhY2tTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgIHJldHVybiBjaGFyYWN0ZXJTZXQuZXF1YWxzKENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdC5VVEY4KSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuSVNPODg1OV8xKSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuQVNDSUkpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUnVucyBhIGZhbGxiYWNrIGZvciB0aGUgbmF0aXZlIGVuY29kaW5nIGZ1bmNpb24uCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNzE5Mjg0NS80MzY3NjgzCgkgICAgICovCgkgICAgU3RyaW5nRW5jb2RpbmcuZW5jb2RlRmFsbGJhY2sgPSBmdW5jdGlvbiAocykgewoJICAgICAgICB2YXIgZW5jb2RlZFVSSXN0cmluZyA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHMpKSk7CgkgICAgICAgIHZhciBjaGFyTGlzdCA9IGVuY29kZWRVUklzdHJpbmcuc3BsaXQoJycpOwoJICAgICAgICB2YXIgdWludEFycmF5ID0gW107CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhckxpc3QubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHVpbnRBcnJheS5wdXNoKGNoYXJMaXN0W2ldLmNoYXJDb2RlQXQoMCkpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh1aW50QXJyYXkpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0VuY29kaW5nOwoJfSgpKTsKCVN0cmluZ0VuY29kaW5nJDEuZGVmYXVsdCA9IFN0cmluZ0VuY29kaW5nOwoKCS8qCgkgKiBDb3B5cmlnaHQgKEMpIDIwMTAgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ1V0aWxzJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS5uaW8uY2hhcnNldC5DaGFyc2V0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQzID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSQxID0gQ2hhcmFjdGVyU2V0RUNJOwoJdmFyIFN0cmluZ0VuY29kaW5nXzEkMSA9IFN0cmluZ0VuY29kaW5nJDE7CgkvKioKCSAqIENvbW1vbiBzdHJpbmctcmVsYXRlZCBmdW5jdGlvbnMuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgQWxleCBEdXByZQoJICovCgl2YXIgU3RyaW5nVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nVXRpbHMoKSB7CgkgICAgfQoJICAgIC8vIFNISUZUX0pJUy5lcXVhbHNJZ25vcmVDYXNlKFBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcpIHx8CgkgICAgLy8gRVVDX0pQLmVxdWFsc0lnbm9yZUNhc2UoUExBVEZPUk1fREVGQVVMVF9FTkNPRElORyk7CgkgICAgU3RyaW5nVXRpbHMuY2FzdEFzTm9uVXRmOENoYXIgPSBmdW5jdGlvbiAoY29kZSwgZW5jb2RpbmcpIHsKCSAgICAgICAgaWYgKGVuY29kaW5nID09PSB2b2lkIDApIHsgZW5jb2RpbmcgPSBudWxsOyB9CgkgICAgICAgIC8vIElTTyA4ODU5LTEgaXMgdGhlIEphdmEgZGVmYXVsdCBhcyBVVEYtOCBpcyBKYXZhU2NyaXB0cwoJICAgICAgICAvLyB5b3UgY2FuIHNlZSB0aGlzIG1ldGhvZCBhcyBhIEphdmEgdmVyc2lvbiBvZiBTdHJpbmcuZnJvbUNoYXJDb2RlCgkgICAgICAgIHZhciBlID0gZW5jb2RpbmcgPyBlbmNvZGluZy5nZXROYW1lKCkgOiB0aGlzLklTTzg4NTkxOwoJICAgICAgICAvLyB1c2UgcGFzc2VkIGZvcm1hdCAoZnJvbUNoYXJDb2RlIHdpbGwgcmV0dXJuIFVURjggZW5jb2RpbmcpCgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoW2NvZGVdKSwgZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYnl0ZXMgYnl0ZXMgZW5jb2RpbmcgYSBzdHJpbmcsIHdob3NlIGVuY29kaW5nIHNob3VsZCBiZSBndWVzc2VkCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kZSBoaW50cyBpZiBhcHBsaWNhYmxlCgkgICAgICogQHJldHVybiBuYW1lIG9mIGd1ZXNzZWQgZW5jb2Rpbmc7IGF0IHRoZSBtb21lbnQgd2lsbCBvbmx5IGd1ZXNzIG9uZSBvZjoKCSAgICAgKiAge0BsaW5rICNTSElGVF9KSVN9LCB7QGxpbmsgI1VURjh9LCB7QGxpbmsgI0lTTzg4NTkxfSwgb3IgdGhlIHBsYXRmb3JtCgkgICAgICogIGRlZmF1bHQgZW5jb2RpbmcgaWYgbm9uZSBvZiB0aGVzZSBjYW4gcG9zc2libHkgYmUgY29ycmVjdAoJICAgICAqLwoJICAgIFN0cmluZ1V0aWxzLmd1ZXNzRW5jb2RpbmcgPSBmdW5jdGlvbiAoYnl0ZXMsIGhpbnRzKSB7CgkgICAgICAgIGlmIChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpKSB7CgkgICAgICAgICAgICByZXR1cm4gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpLnRvU3RyaW5nKCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRm9yIG5vdywgbWVyZWx5IHRyaWVzIHRvIGRpc3Rpbmd1aXNoIElTTy04ODU5LTEsIFVURi04IGFuZCBTaGlmdF9KSVMsCgkgICAgICAgIC8vIHdoaWNoIHNob3VsZCBiZSBieSBmYXIgdGhlIG1vc3QgY29tbW9uIGVuY29kaW5ncy4KCSAgICAgICAgdmFyIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDsKCSAgICAgICAgdmFyIGNhbkJlSVNPODg1OTEgPSB0cnVlOwoJICAgICAgICB2YXIgY2FuQmVTaGlmdEpJUyA9IHRydWU7CgkgICAgICAgIHZhciBjYW5CZVVURjggPSB0cnVlOwoJICAgICAgICB2YXIgdXRmOEJ5dGVzTGVmdCA9IDA7CgkgICAgICAgIC8vIGludCB1dGY4TG93Q2hhcnMgPSAwCgkgICAgICAgIHZhciB1dGYyQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGYzQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGY0Qnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciBzamlzQnl0ZXNMZWZ0ID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNMb3dDaGFycyA9IDAKCSAgICAgICAgdmFyIHNqaXNLYXRha2FuYUNoYXJzID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNEb3VibGVCeXRlc0NoYXJzID0gMAoJICAgICAgICB2YXIgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgIHZhciBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgdmFyIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSAwOwoJICAgICAgICB2YXIgc2ppc01heERvdWJsZUJ5dGVzV29yZExlbmd0aCA9IDA7CgkgICAgICAgIC8vIGludCBpc29Mb3dDaGFycyA9IDAKCSAgICAgICAgLy8gaW50IGlzb0hpZ2hDaGFycyA9IDAKCSAgICAgICAgdmFyIGlzb0hpZ2hPdGhlciA9IDA7CgkgICAgICAgIHZhciB1dGY4Ym9tID0gYnl0ZXMubGVuZ3RoID4gMyAmJgoJICAgICAgICAgICAgYnl0ZXNbMF0gPT09IC8qKGJ5dGUpICovIDB4RUYgJiYKCSAgICAgICAgICAgIGJ5dGVzWzFdID09PSAvKihieXRlKSAqLyAweEJCICYmCgkgICAgICAgICAgICBieXRlc1syXSA9PT0gLyooYnl0ZSkgKi8gMHhCRjsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgKGNhbkJlSVNPODg1OTEgfHwgY2FuQmVTaGlmdEpJUyB8fCBjYW5CZVVURjgpOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJ5dGVzW2ldICYgMHhGRjsKCSAgICAgICAgICAgIC8vIFVURi04IHN0dWZmCgkgICAgICAgICAgICBpZiAoY2FuQmVVVEY4KSB7CgkgICAgICAgICAgICAgICAgaWYgKHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDgwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVVVEY4ID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHZhbHVlICYgMHg4MCkgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4NDApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjhCeXRlc0xlZnQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDIwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjJCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4MTApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjNCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDA4KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmNEJ5dGVzQ2hhcnMrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlVVRGOCA9IGZhbHNlOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfSAvLyBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyB1dGY4TG93Q2hhcnMrKwoJICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIElTTy04ODU5LTEgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMHg3RiAmJiB2YWx1ZSA8IDB4QTApIHsKCSAgICAgICAgICAgICAgICAgICAgY2FuQmVJU084ODU5MSA9IGZhbHNlOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IDB4OUYpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHhDMCB8fCB2YWx1ZSA9PT0gMHhENyB8fCB2YWx1ZSA9PT0gMHhGNykgewoJICAgICAgICAgICAgICAgICAgICAgICAgaXNvSGlnaE90aGVyKys7CgkgICAgICAgICAgICAgICAgICAgIH0gLy8gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIGlzb0hpZ2hDaGFycysrCgkgICAgICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgICAgICB9IC8vIGVsc2UgewoJICAgICAgICAgICAgICAgIC8vIGlzb0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAvLyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBTaGlmdF9KSVMgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTKSB7CgkgICAgICAgICAgICAgICAgaWYgKHNqaXNCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4NDAgfHwgdmFsdWUgPT09IDB4N0YgfHwgdmFsdWUgPiAweEZDKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVNoaWZ0SklTID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IDB4ODAgfHwgdmFsdWUgPT09IDB4QTAgfHwgdmFsdWUgPiAweEVGKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhbkJlU2hpZnRKSVMgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPiAweEEwICYmIHZhbHVlIDwgMHhFMCkgewoJICAgICAgICAgICAgICAgICAgICBzamlzS2F0YWthbmFDaGFycysrOwoJICAgICAgICAgICAgICAgICAgICBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCsrOwoJICAgICAgICAgICAgICAgICAgICBpZiAoc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA+IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSBzamlzQ3VyS2F0YWthbmFXb3JkTGVuZ3RoOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gMHg3RikgewoJICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgIC8vIHNqaXNEb3VibGVCeXRlc0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGgrKzsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPiBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gc2ppc0N1ckRvdWJsZUJ5dGVzV29yZExlbmd0aDsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gc2ppc0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPSAwOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmIHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVTaGlmdEpJUyAmJiBzamlzQnl0ZXNMZWZ0ID4gMCkgewoJICAgICAgICAgICAgY2FuQmVTaGlmdEpJUyA9IGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhc3kgLS0gaWYgdGhlcmUgaXMgQk9NIG9yIGF0IGxlYXN0IDEgdmFsaWQgbm90LXNpbmdsZSBieXRlIGNoYXJhY3RlciAoYW5kIG5vIGV2aWRlbmNlIGl0IGNhbid0IGJlIFVURi04KSwgZG9uZQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmICh1dGY4Ym9tIHx8IHV0ZjJCeXRlc0NoYXJzICsgdXRmM0J5dGVzQ2hhcnMgKyB1dGY0Qnl0ZXNDaGFycyA+IDApKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuVVRGODsKCSAgICAgICAgfQoJICAgICAgICAvLyBFYXN5IC0tIGlmIGFzc3VtaW5nIFNoaWZ0X0pJUyBvciBhdCBsZWFzdCAzIHZhbGlkIGNvbnNlY3V0aXZlIG5vdC1hc2NpaSBjaGFyYWN0ZXJzIChhbmQgbm8gZXZpZGVuY2UgaXQgY2FuJ3QgYmUpLCBkb25lCgkgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTICYmIChTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTIHx8IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPj0gMyB8fCBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID49IDMpKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuU0hJRlRfSklTOwoJICAgICAgICB9CgkgICAgICAgIC8vIERpc3Rpbmd1aXNoaW5nIFNoaWZ0X0pJUyBhbmQgSVNPLTg4NTktMSBjYW4gYmUgYSBsaXR0bGUgdG91Z2ggZm9yIHNob3J0IHdvcmRzLiBUaGUgY3J1ZGUgaGV1cmlzdGljIGlzOgoJICAgICAgICAvLyAtIElmIHdlIHNhdwoJICAgICAgICAvLyAgIC0gb25seSB0d28gY29uc2VjdXRpdmUga2F0YWthbmEgY2hhcnMgaW4gdGhlIHdob2xlIHRleHQsIG9yCgkgICAgICAgIC8vICAgLSBhdCBsZWFzdCAxMCUgb2YgYnl0ZXMgdGhhdCBjb3VsZCBiZSAidXBwZXIiIG5vdC1hbHBoYW51bWVyaWMgTGF0aW4xLAoJICAgICAgICAvLyAtIHRoZW4gd2UgY29uY2x1ZGUgU2hpZnRfSklTLCBlbHNlIElTTy04ODU5LTEKCSAgICAgICAgaWYgKGNhbkJlSVNPODg1OTEgJiYgY2FuQmVTaGlmdEpJUykgewoJICAgICAgICAgICAgcmV0dXJuIChzamlzTWF4S2F0YWthbmFXb3JkTGVuZ3RoID09PSAyICYmIHNqaXNLYXRha2FuYUNoYXJzID09PSAyKSB8fCBpc29IaWdoT3RoZXIgKiAxMCA+PSBsZW5ndGgKCSAgICAgICAgICAgICAgICA/IFN0cmluZ1V0aWxzLlNISUZUX0pJUyA6IFN0cmluZ1V0aWxzLklTTzg4NTkxOwoJICAgICAgICB9CgkgICAgICAgIC8vIE90aGVyd2lzZSwgdHJ5IGluIG9yZGVyIElTTy04ODU5LTEsIFNoaWZ0IEpJUywgVVRGLTggYW5kIGZhbGwgYmFjayB0byBkZWZhdWx0IHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuSVNPODg1OTE7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlU2hpZnRKSVMpIHsKCSAgICAgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5TSElGVF9KSVM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlVVRGOCkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLlVURjg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0YWtlIGEgd2lsZCBndWVzcyB3aXRoIHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5QTEFURk9STV9ERUZBVUxUX0VOQ09ESU5HOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMzQzOTcxMS80MzY3NjgzCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYXBwZW5kIFRoZSBuZXcgc3RyaW5nIHRvIGFwcGVuZC4KCSAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWV0cyB2YWx1ZXMgdG8gYmUgZm9ybWF0ZWQuCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZm9ybWF0ID0gZnVuY3Rpb24gKGFwcGVuZCkgewoJICAgICAgICB2YXIgYXJncyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaSA9IC0xOwoJICAgICAgICBmdW5jdGlvbiBjYWxsYmFjayhleHAsIHAwLCBwMSwgcDIsIHAzLCBwNCkgewoJICAgICAgICAgICAgaWYgKGV4cCA9PT0gJyUlJykKCSAgICAgICAgICAgICAgICByZXR1cm4gJyUnOwoJICAgICAgICAgICAgaWYgKGFyZ3NbKytpXSA9PT0gdW5kZWZpbmVkKQoJICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CgkgICAgICAgICAgICBleHAgPSBwMiA/IHBhcnNlSW50KHAyLnN1YnN0cigxKSkgOiB1bmRlZmluZWQ7CgkgICAgICAgICAgICB2YXIgYmFzZSA9IHAzID8gcGFyc2VJbnQocDMuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDsKCSAgICAgICAgICAgIHZhciB2YWw7CgkgICAgICAgICAgICBzd2l0Y2ggKHA0KSB7CgkgICAgICAgICAgICAgICAgY2FzZSAncyc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IGFyZ3NbaV07CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2MnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmdzW2ldWzBdOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdmJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChhcmdzW2ldKS50b0ZpeGVkKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ3AnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvUHJlY2lzaW9uKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2UnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvRXhwb25lbnRpYWwoZXhwKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgY2FzZSAneCc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlSW50KGFyZ3NbaV0pLnRvU3RyaW5nKGJhc2UgPyBiYXNlIDogMTYpOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdkJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChwYXJzZUludChhcmdzW2ldLCBiYXNlID8gYmFzZSA6IDEwKS50b1ByZWNpc2lvbihleHApKS50b0ZpeGVkKDApOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhbCA9IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkodmFsKSA6ICgrdmFsKS50b1N0cmluZyhiYXNlKTsKCSAgICAgICAgICAgIHZhciBzaXplID0gcGFyc2VJbnQocDEpOyAvKiBwYWRkaW5nIHNpemUgKi8KCSAgICAgICAgICAgIHZhciBjaCA9IHAxICYmIChwMVswXSArICcnKSA9PT0gJzAnID8gJzAnIDogJyAnOyAvKiBpc251bGw/ICovCgkgICAgICAgICAgICB3aGlsZSAodmFsLmxlbmd0aCA8IHNpemUpCgkgICAgICAgICAgICAgICAgdmFsID0gcDAgIT09IHVuZGVmaW5lZCA/IHZhbCArIGNoIDogY2ggKyB2YWw7IC8qIGlzbWludXM/ICovCgkgICAgICAgICAgICByZXR1cm4gdmFsOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZWdleCA9IC8lKC0pPygwP1swLTldKyk/KFsuXVswLTldKyk/KFsjXVswLTldKyk/KFtzY2ZwZXhkJV0pL2c7CgkgICAgICAgIHJldHVybiBhcHBlbmQucmVwbGFjZShyZWdleCwgY2FsbGJhY2spOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRCeXRlcyA9IGZ1bmN0aW9uIChzdHIsIGVuY29kaW5nKSB7CgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5lbmNvZGUoc3RyLCBlbmNvZGluZyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIHRoZSBjaGFyY29kZSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IG9yIGF0IGluZGV4IHplcm8uCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUgPSBmdW5jdGlvbiAoc3RyLCBpbmRleCkgewoJICAgICAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkgeyBpbmRleCA9IDA7IH0KCSAgICAgICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KGluZGV4KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgY2hhciBmb3IgZ2l2ZW4gY2hhcmNvZGUKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRDaGFyQXQgPSBmdW5jdGlvbiAoY2hhckNvZGUpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpOwoJICAgIH07CgkgICAgU3RyaW5nVXRpbHMuU0hJRlRfSklTID0gQ2hhcmFjdGVyU2V0RUNJXzEkMS5kZWZhdWx0LlNKSVMuZ2V0TmFtZSgpOyAvLyAiU0pJUyIKCSAgICBTdHJpbmdVdGlscy5HQjIzMTIgPSAnR0IyMzEyJzsKCSAgICBTdHJpbmdVdGlscy5JU084ODU5MSA9IENoYXJhY3RlclNldEVDSV8xJDEuZGVmYXVsdC5JU084ODU5XzEuZ2V0TmFtZSgpOyAvLyAiSVNPODg1OV8xIgoJICAgIFN0cmluZ1V0aWxzLkVVQ19KUCA9ICdFVUNfSlAnOwoJICAgIFN0cmluZ1V0aWxzLlVURjggPSBDaGFyYWN0ZXJTZXRFQ0lfMSQxLmRlZmF1bHQuVVRGOC5nZXROYW1lKCk7IC8vICJVVEY4IgoJICAgIFN0cmluZ1V0aWxzLlBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcgPSBTdHJpbmdVdGlscy5VVEY4OyAvLyAiVVRGOCIvL0NoYXJzZXQuZGVmYXVsdENoYXJzZXQoKS5uYW1lKCkKCSAgICBTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTID0gZmFsc2U7CgkgICAgcmV0dXJuIFN0cmluZ1V0aWxzOwoJfSgpKTsKCVN0cmluZ1V0aWxzJDEuZGVmYXVsdCA9IFN0cmluZ1V0aWxzOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmdCdWlsZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBTdHJpbmdVdGlsc18xJDEgPSBTdHJpbmdVdGlscyQxOwoJdmFyIFN0cmluZ0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nQnVpbGRlcih2YWx1ZSkgewoJICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgeyB2YWx1ZSA9ICcnOyB9CgkgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKCSAgICB9CgkgICAgU3RyaW5nQnVpbGRlci5wcm90b3R5cGUuZW5hYmxlRGVjb2RpbmcgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHsKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gcy50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHRoaXMuZW5jb2RpbmcpIHsKCSAgICAgICAgICAgIC8vIHVzZSBwYXNzZWQgZm9ybWF0IChmcm9tQ2hhckNvZGUgd2lsbCByZXR1cm4gVVRGOCBlbmNvZGluZykKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nVXRpbHNfMSQxLmRlZmF1bHQuY2FzdEFzTm9uVXRmOENoYXIocywgdGhpcy5lbmNvZGluZyk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBjb3JyZWN0bHkgY29udmVydHMgZnJvbSBVVEYtOCwgYnV0IG5vdCBvdGhlciBlbmNvZGluZ3MKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShzKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZENoYXJzID0gZnVuY3Rpb24gKHN0ciwgb2Zmc2V0LCBsZW4pIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IG9mZnNldDsgb2Zmc2V0IDwgb2Zmc2V0ICsgbGVuOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kKHN0cltpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aDsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmNoYXJBdChuKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmRlbGV0ZUNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIHRoaXMudmFsdWUuc3Vic3RyaW5nKG4gKyAxKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnNldENoYXJBdCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgMSk7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zdWJzdHJpbmcgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAbm90ZSBoZWxwZXIgbWV0aG9kIGZvciBSU1MgRXhwYW5kZWQKCSAgICAgKi8KCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zZXRMZW5ndGhUb1plcm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSAnJzsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgYy5sZW5ndGgpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0J1aWxkZXI7Cgl9KCkpOwoJU3RyaW5nQnVpbGRlciQxLmRlZmF1bHQgPSBTdHJpbmdCdWlsZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQml0TWF0cml4JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIEJpdEFycmF5XzEkMSA9IEJpdEFycmF5JDE7Cgl2YXIgU3lzdGVtXzEkMyA9IFN5c3RlbSQxOwoJdmFyIEFycmF5c18xID0gQXJyYXlzJDE7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDIgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNyA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgMkQgbWF0cml4IG9mIGJpdHMuIEluIGZ1bmN0aW9uIGFyZ3VtZW50cyBiZWxvdywgYW5kIHRocm91Z2hvdXQgdGhlIGNvbW1vbgoJICogbW9kdWxlLCB4IGlzIHRoZSBjb2x1bW4gcG9zaXRpb24sIGFuZCB5IGlzIHRoZSByb3cgcG9zaXRpb24uIFRoZSBvcmRlcmluZyBpcyBhbHdheXMgeCwgeS4KCSAqIFRoZSBvcmlnaW4gaXMgYXQgdGhlIHRvcC1sZWZ0LjwvcD4KCSAqCgkgKiA8cD5JbnRlcm5hbGx5IHRoZSBiaXRzIGFyZSByZXByZXNlbnRlZCBpbiBhIDEtRCBhcnJheSBvZiAzMi1iaXQgaW50cy4gSG93ZXZlciwgZWFjaCByb3cgYmVnaW5zCgkgKiB3aXRoIGEgbmV3IGludC4gVGhpcyBpcyBkb25lIGludGVudGlvbmFsbHkgc28gdGhhdCB3ZSBjYW4gY29weSBvdXQgYSByb3cgaW50byBhIEJpdEFycmF5IHZlcnkKCSAqIGVmZmljaWVudGx5LjwvcD4KCSAqCgkgKiA8cD5UaGUgb3JkZXJpbmcgb2YgYml0cyBpcyByb3ctbWFqb3IuIFdpdGhpbiBlYWNoIGludCwgdGhlIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgYXJlIHVzZWQgZmlyc3QsCgkgKiBtZWFuaW5nIHRoZXkgcmVwcmVzZW50IGxvd2VyIHggdmFsdWVzLiBUaGlzIGlzIGNvbXBhdGlibGUgd2l0aCBCaXRBcnJheSdzIGltcGxlbWVudGF0aW9uLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpdE1hdHJpeCAvKmltcGxlbWVudHMgQ2xvbmVhYmxlKi8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSBzcXVhcmUge0BsaW5rIEJpdE1hdHJpeH0uCgkgICAgICoKCSAgICAgKiBAcGFyYW0gZGltZW5zaW9uIGhlaWdodCBhbmQgd2lkdGgKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoZGltZW5zaW9uOiBudW1iZXIgLyppbnQqLykgewoJICAgIC8vICAgdGhpcyhkaW1lbnNpb24sIGRpbWVuc2lvbikKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSB7QGxpbmsgQml0TWF0cml4fS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB3aWR0aCBiaXQgbWF0cml4IHdpZHRoCgkgICAgICogQHBhcmFtIGhlaWdodCBiaXQgbWF0cml4IGhlaWdodAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyIC8qaW50Ki8sIGhlaWdodDogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh3aWR0aCA8IDEgfHwgaGVpZ2h0IDwgMSkgewoJICAgIC8vICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJCb3RoIGRpbWVuc2lvbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIpCgkgICAgLy8gICB9CgkgICAgLy8gICB0aGlzLndpZHRoID0gd2lkdGgKCSAgICAvLyAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0CgkgICAgLy8gICB0aGlzLnJvd1NpemUgPSAod2lkdGggKyAzMSkgLyAzMgoJICAgIC8vICAgYml0cyA9IG5ldyBpbnRbcm93U2l6ZSAqIGhlaWdodF07CgkgICAgLy8gfQoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeCh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgcm93U2l6ZSAvKmludCovLCBiaXRzKSB7CgkgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDsKCSAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CgkgICAgICAgIHRoaXMucm93U2l6ZSA9IHJvd1NpemU7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGhlaWdodCB8fCBudWxsID09PSBoZWlnaHQpIHsKCSAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgICAgICBpZiAod2lkdGggPCAxIHx8IGhlaWdodCA8IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0JvdGggZGltZW5zaW9ucyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gcm93U2l6ZSB8fCBudWxsID09PSByb3dTaXplKSB7CgkgICAgICAgICAgICByb3dTaXplID0gTWF0aC5mbG9vcigod2lkdGggKyAzMSkgLyAzMik7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yb3dTaXplID0gcm93U2l6ZTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICB0aGlzLmJpdHMgPSBuZXcgSW50MzJBcnJheSh0aGlzLnJvd1NpemUgKiB0aGlzLmhlaWdodCk7CgkgICAgICAgIH0KCSAgICB9CgkgICAgLyoqCgkgICAgICogSW50ZXJwcmV0cyBhIDJEIGFycmF5IG9mIGJvb2xlYW5zIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0sIHdoZXJlICJ0cnVlIiBtZWFucyBhbiAib24iIGJpdC4KCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBpbWFnZSBiaXRzIG9mIHRoZSBpbWFnZSwgYXMgYSByb3ctbWFqb3IgMkQgYXJyYXkuIEVsZW1lbnRzIGFyZSBhcnJheXMgcmVwcmVzZW50aW5nIHJvd3MKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCaXRNYXRyaXh9IHJlcHJlc2VudGF0aW9uIG9mIGltYWdlCgkgICAgICovCgkgICAgQml0TWF0cml4LnBhcnNlRnJvbUJvb2xlYW5BcnJheSA9IGZ1bmN0aW9uIChpbWFnZSkgewoJICAgICAgICB2YXIgaGVpZ2h0ID0gaW1hZ2UubGVuZ3RoOwoJICAgICAgICB2YXIgd2lkdGggPSBpbWFnZVswXS5sZW5ndGg7CgkgICAgICAgIHZhciBiaXRzID0gbmV3IEJpdE1hdHJpeCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGltYWdlSSA9IGltYWdlW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB3aWR0aDsgaisrKSB7CgkgICAgICAgICAgICAgICAgaWYgKGltYWdlSVtqXSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldChqLCBpKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBzdHJpbmdSZXByZXNlbnRhdGlvbgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcKCSAgICAgKiBAcGFyYW0gdW5zZXRTdHJpbmcKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucGFyc2VGcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cmluZ1JlcHJlc2VudGF0aW9uLCBzZXRTdHJpbmcsIHVuc2V0U3RyaW5nKSB7CgkgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnc3RyaW5nUmVwcmVzZW50YXRpb24gY2Fubm90IGJlIG51bGwnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBBcnJheShzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpOwoJICAgICAgICB2YXIgYml0c1BvcyA9IDA7CgkgICAgICAgIHZhciByb3dTdGFydFBvcyA9IDA7CgkgICAgICAgIHZhciByb3dMZW5ndGggPSAtMTsKCSAgICAgICAgdmFyIG5Sb3dzID0gMDsKCSAgICAgICAgdmFyIHBvcyA9IDA7CgkgICAgICAgIHdoaWxlIChwb3MgPCBzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpIHsKCSAgICAgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbi5jaGFyQXQocG9zKSA9PT0gJ1xuJyB8fAoJICAgICAgICAgICAgICAgIHN0cmluZ1JlcHJlc2VudGF0aW9uLmNoYXJBdChwb3MpID09PSAnXHInKSB7CgkgICAgICAgICAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgICAgICAgICBpZiAocm93TGVuZ3RoID09PSAtMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcm93TGVuZ3RoID0gYml0c1BvcyAtIHJvd1N0YXJ0UG9zOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJpdHNQb3MgLSByb3dTdGFydFBvcyAhPT0gcm93TGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdyb3cgbGVuZ3RocyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICByb3dTdGFydFBvcyA9IGJpdHNQb3M7CgkgICAgICAgICAgICAgICAgICAgIG5Sb3dzKys7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHBvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoc3RyaW5nUmVwcmVzZW50YXRpb24uc3Vic3RyaW5nKHBvcywgcG9zICsgc2V0U3RyaW5nLmxlbmd0aCkgPT09IHNldFN0cmluZykgewoJICAgICAgICAgICAgICAgIHBvcyArPSBzZXRTdHJpbmcubGVuZ3RoOwoJICAgICAgICAgICAgICAgIGJpdHNbYml0c1Bvc10gPSB0cnVlOwoJICAgICAgICAgICAgICAgIGJpdHNQb3MrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHN0cmluZ1JlcHJlc2VudGF0aW9uLnN1YnN0cmluZyhwb3MsIHBvcyArIHVuc2V0U3RyaW5nLmxlbmd0aCkgPT09IHVuc2V0U3RyaW5nKSB7CgkgICAgICAgICAgICAgICAgcG9zICs9IHVuc2V0U3RyaW5nLmxlbmd0aDsKCSAgICAgICAgICAgICAgICBiaXRzW2JpdHNQb3NdID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgYml0c1BvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnaWxsZWdhbCBjaGFyYWN0ZXIgZW5jb3VudGVyZWQ6ICcgKyBzdHJpbmdSZXByZXNlbnRhdGlvbi5zdWJzdHJpbmcocG9zKSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm8gRU9MIGF0IGVuZD8KCSAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgaWYgKHJvd0xlbmd0aCA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICByb3dMZW5ndGggPSBiaXRzUG9zIC0gcm93U3RhcnRQb3M7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmIChiaXRzUG9zIC0gcm93U3RhcnRQb3MgIT09IHJvd0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ3JvdyBsZW5ndGhzIGRvIG5vdCBtYXRjaCcpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgblJvd3MrKzsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbWF0cml4ID0gbmV3IEJpdE1hdHJpeChyb3dMZW5ndGgsIG5Sb3dzKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaXRzUG9zOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChiaXRzW2ldKSB7CgkgICAgICAgICAgICAgICAgbWF0cml4LnNldChNYXRoLmZsb29yKGkgJSByb3dMZW5ndGgpLCBNYXRoLmZsb29yKGkgLyByb3dMZW5ndGgpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbWF0cml4OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+R2V0cyB0aGUgcmVxdWVzdGVkIGJpdCwgd2hlcmUgdHJ1ZSBtZWFucyBibGFjay48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0geCBUaGUgaG9yaXpvbnRhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggY29sdW1uKQoJICAgICAqIEBwYXJhbSB5IFRoZSB2ZXJ0aWNhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggcm93KQoJICAgICAqIEByZXR1cm4gdmFsdWUgb2YgZ2l2ZW4gYml0IGluIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHggLyppbnQqLywgeSAvKmludCovKSB7CgkgICAgICAgIHZhciBvZmZzZXQgPSB5ICogdGhpcy5yb3dTaXplICsgTWF0aC5mbG9vcih4IC8gMzIpOwoJICAgICAgICByZXR1cm4gKCh0aGlzLmJpdHNbb2Zmc2V0XSA+Pj4gKHggJiAweDFmKSkgJiAxKSAhPT0gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgdGhlIGdpdmVuIGJpdCB0byB0cnVlLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB4IFRoZSBob3Jpem9udGFsIGNvbXBvbmVudCAoaS5lLiB3aGljaCBjb2x1bW4pCgkgICAgICogQHBhcmFtIHkgVGhlIHZlcnRpY2FsIGNvbXBvbmVudCAoaS5lLiB3aGljaCByb3cpCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIHw9ICgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRjsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdICY9IH4oKDEgPDwgKHggJiAweDFmKSkgJiAweEZGRkZGRkZGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkZsaXBzIHRoZSBnaXZlbiBiaXQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHggVGhlIGhvcml6b250YWwgY29tcG9uZW50IChpLmUuIHdoaWNoIGNvbHVtbikKCSAgICAgKiBAcGFyYW0geSBUaGUgdmVydGljYWwgY29tcG9uZW50IChpLmUuIHdoaWNoIHJvdykKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmZsaXAgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIF49ICgoMSA8PCAoeCAmIDB4MWYpKSAmIDB4RkZGRkZGRkYpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRXhjbHVzaXZlLW9yIChYT1IpOiBGbGlwIHRoZSBiaXQgaW4gdGhpcyB7QGNvZGUgQml0TWF0cml4fSBpZiB0aGUgY29ycmVzcG9uZGluZwoJICAgICAqIG1hc2sgYml0IGlzIHNldC4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBtYXNrIFhPUiBtYXNrCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAobWFzaykgewoJICAgICAgICBpZiAodGhpcy53aWR0aCAhPT0gbWFzay5nZXRXaWR0aCgpIHx8IHRoaXMuaGVpZ2h0ICE9PSBtYXNrLmdldEhlaWdodCgpCgkgICAgICAgICAgICB8fCB0aGlzLnJvd1NpemUgIT09IG1hc2suZ2V0Um93U2l6ZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdpbnB1dCBtYXRyaXggZGltZW5zaW9ucyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcm93QXJyYXkgPSBuZXcgQml0QXJyYXlfMSQxLmRlZmF1bHQoTWF0aC5mbG9vcih0aGlzLndpZHRoIC8gMzIpICsgMSk7CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIHZhciBvZmZzZXQgPSB5ICogcm93U2l6ZTsKCSAgICAgICAgICAgIHZhciByb3cgPSBtYXNrLmdldFJvdyh5LCByb3dBcnJheSkuZ2V0Qml0QXJyYXkoKTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgcm93U2l6ZTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgYml0c1tvZmZzZXQgKyB4XSBePSByb3dbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBtYXggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkrKykgewoJICAgICAgICAgICAgYml0c1tpXSA9IDA7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgYSBzcXVhcmUgcmVnaW9uIG9mIHRoZSBiaXQgbWF0cml4IHRvIHRydWUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGxlZnQgVGhlIGhvcml6b250YWwgcG9zaXRpb24gdG8gYmVnaW4gYXQgKGluY2x1c2l2ZSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiB0byBiZWdpbiBhdCAoaW5jbHVzaXZlKQoJICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIHJlZ2lvbgoJICAgICAqIEBwYXJhbSBoZWlnaHQgVGhlIGhlaWdodCBvZiB0aGUgcmVnaW9uCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXRSZWdpb24gPSBmdW5jdGlvbiAobGVmdCAvKmludCovLCB0b3AgLyppbnQqLywgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHRvcCA8IDAgfHwgbGVmdCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0xlZnQgYW5kIHRvcCBtdXN0IGJlIG5vbm5lZ2F0aXZlJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGhlaWdodCA8IDEgfHwgd2lkdGggPCAxKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdIZWlnaHQgYW5kIHdpZHRoIG11c3QgYmUgYXQgbGVhc3QgMScpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDsKCSAgICAgICAgdmFyIGJvdHRvbSA9IHRvcCArIGhlaWdodDsKCSAgICAgICAgaWYgKGJvdHRvbSA+IHRoaXMuaGVpZ2h0IHx8IHJpZ2h0ID4gdGhpcy53aWR0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnVGhlIHJlZ2lvbiBtdXN0IGZpdCBpbnNpZGUgdGhlIG1hdHJpeCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IHRvcDsgeSA8IGJvdHRvbTsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHJvd1NpemU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gbGVmdDsgeCA8IHJpZ2h0OyB4KyspIHsKCSAgICAgICAgICAgICAgICBiaXRzW29mZnNldCArIE1hdGguZmxvb3IoeCAvIDMyKV0gfD0gKCgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRik7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEEgZmFzdCBtZXRob2QgdG8gcmV0cmlldmUgb25lIHJvdyBvZiBkYXRhIGZyb20gdGhlIG1hdHJpeCBhcyBhIEJpdEFycmF5LgoJICAgICAqCgkgICAgICogQHBhcmFtIHkgVGhlIHJvdyB0byByZXRyaWV2ZQoJICAgICAqIEBwYXJhbSByb3cgQW4gb3B0aW9uYWwgY2FsbGVyLWFsbG9jYXRlZCBCaXRBcnJheSwgd2lsbCBiZSBhbGxvY2F0ZWQgaWYgbnVsbCBvciB0b28gc21hbGwKCSAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHRpbmcgQml0QXJyYXkgLSB0aGlzIHJlZmVyZW5jZSBzaG91bGQgYWx3YXlzIGJlIHVzZWQgZXZlbiB3aGVuIHBhc3NpbmcKCSAgICAgKiAgICAgICAgIHlvdXIgb3duIHJvdwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Um93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgcm93ID09PSB1bmRlZmluZWQgfHwgcm93LmdldFNpemUoKSA8IHRoaXMud2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh0aGlzLndpZHRoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHJvdy5jbGVhcigpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiByb3dTaXplOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHJvd1NpemU7IHgrKykgewoJICAgICAgICAgICAgcm93LnNldEJ1bGsoeCAqIDMyLCBiaXRzW29mZnNldCArIHhdKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIHkgcm93IHRvIHNldAoJICAgICAqIEBwYXJhbSByb3cge0BsaW5rIEJpdEFycmF5fSB0byBjb3B5IGZyb20KCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLnNldFJvdyA9IGZ1bmN0aW9uICh5IC8qaW50Ki8sIHJvdykgewoJICAgICAgICBTeXN0ZW1fMSQzLmRlZmF1bHQuYXJyYXljb3B5KHJvdy5nZXRCaXRBcnJheSgpLCAwLCB0aGlzLmJpdHMsIHkgKiB0aGlzLnJvd1NpemUsIHRoaXMucm93U2l6ZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBNb2RpZmllcyB0aGlzIHtAY29kZSBCaXRNYXRyaXh9IHRvIHJlcHJlc2VudCB0aGUgc2FtZSBidXQgcm90YXRlZCAxODAgZGVncmVlcwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUucm90YXRlMTgwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgdG9wUm93ID0gbmV3IEJpdEFycmF5XzEkMS5kZWZhdWx0KHdpZHRoKTsKCSAgICAgICAgdmFyIGJvdHRvbVJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh3aWR0aCk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IE1hdGguZmxvb3IoKGhlaWdodCArIDEpIC8gMik7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB0b3BSb3cgPSB0aGlzLmdldFJvdyhpLCB0b3BSb3cpOwoJICAgICAgICAgICAgYm90dG9tUm93ID0gdGhpcy5nZXRSb3coaGVpZ2h0IC0gMSAtIGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0b3BSb3cucmV2ZXJzZSgpOwoJICAgICAgICAgICAgYm90dG9tUm93LnJldmVyc2UoKTsKCSAgICAgICAgICAgIHRoaXMuc2V0Um93KGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0aGlzLnNldFJvdyhoZWlnaHQgLSAxIC0gaSwgdG9wUm93KTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIHRoZSBlbmNsb3NpbmcgcmVjdGFuZ2xlIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBsZWZ0LHRvcCx3aWR0aCxoZWlnaHR9IGVuY2xvc2luZyByZWN0YW5nbGUgb2YgYWxsIDEgYml0cywgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldEVuY2xvc2luZ1JlY3RhbmdsZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0OwoJICAgICAgICB2YXIgcm93U2l6ZSA9IHRoaXMucm93U2l6ZTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBsZWZ0ID0gd2lkdGg7CgkgICAgICAgIHZhciB0b3AgPSBoZWlnaHQ7CgkgICAgICAgIHZhciByaWdodCA9IC0xOwoJICAgICAgICB2YXIgYm90dG9tID0gLTE7CgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHgzMiA9IDA7IHgzMiA8IHJvd1NpemU7IHgzMisrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHRoZUJpdHMgPSBiaXRzW3kgKiByb3dTaXplICsgeDMyXTsKCSAgICAgICAgICAgICAgICBpZiAodGhlQml0cyAhPT0gMCkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IHRvcCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IGJvdHRvbSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeDMyICogMzIgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHgzMiAqIDMyICsgYml0OwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGlmICh4MzIgKiAzMiArIDMxID4gcmlnaHQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSAzMTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgodGhlQml0cyA+Pj4gYml0KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPiByaWdodCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0geDMyICogMzIgKyBiaXQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJpZ2h0IDwgbGVmdCB8fCBib3R0b20gPCB0b3ApIHsKCSAgICAgICAgICAgIHJldHVybiBudWxsOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2xlZnQsIHRvcCwgcmlnaHQgLSBsZWZ0ICsgMSwgYm90dG9tIC0gdG9wICsgMV0pOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIGEgY29ybmVyIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSB4LHl9IGNvb3JkaW5hdGUgb2YgdG9wLWxlZnQtbW9zdCAxIGJpdCwgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldFRvcExlZnRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IDA7CgkgICAgICAgIHdoaWxlIChiaXRzT2Zmc2V0IDwgYml0cy5sZW5ndGggJiYgYml0c1tiaXRzT2Zmc2V0XSA9PT0gMCkgewoJICAgICAgICAgICAgYml0c09mZnNldCsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChiaXRzT2Zmc2V0ID09PSBiaXRzLmxlbmd0aCkgewoJICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHkgPSBiaXRzT2Zmc2V0IC8gcm93U2l6ZTsKCSAgICAgICAgdmFyIHggPSAoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDA7CgkgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgYml0Kys7CgkgICAgICAgIH0KCSAgICAgICAgeCArPSBiaXQ7CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW3gsIHldKTsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Qm90dG9tUmlnaHRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IGJpdHMubGVuZ3RoIC0gMTsKCSAgICAgICAgd2hpbGUgKGJpdHNPZmZzZXQgPj0gMCAmJiBiaXRzW2JpdHNPZmZzZXRdID09PSAwKSB7CgkgICAgICAgICAgICBiaXRzT2Zmc2V0LS07CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJpdHNPZmZzZXQgPCAwKSB7CgkgICAgICAgICAgICByZXR1cm4gbnVsbDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoYml0c09mZnNldCAvIHJvd1NpemUpOwoJICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDMxOwoJICAgICAgICB3aGlsZSAoKHRoZUJpdHMgPj4+IGJpdCkgPT09IDApIHsKCSAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICB9CgkgICAgICAgIHggKz0gYml0OwoJICAgICAgICByZXR1cm4gSW50MzJBcnJheS5mcm9tKFt4LCB5XSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSByb3cgc2l6ZSBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRSb3dTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yb3dTaXplOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdE1hdHJpeCkpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA9PT0gb3RoZXIud2lkdGggJiYgdGhpcy5oZWlnaHQgPT09IG90aGVyLmhlaWdodCAmJiB0aGlzLnJvd1NpemUgPT09IG90aGVyLnJvd1NpemUgJiYKCSAgICAgICAgICAgIEFycmF5c18xLmRlZmF1bHQuZXF1YWxzKHRoaXMuYml0cywgb3RoZXIuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGhhc2ggPSB0aGlzLndpZHRoOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy53aWR0aDsKCSAgICAgICAgaGFzaCA9IDMxICogaGFzaCArIHRoaXMuaGVpZ2h0OwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy5yb3dTaXplOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgQXJyYXlzXzEuZGVmYXVsdC5oYXNoQ29kZSh0aGlzLmJpdHMpOwoJICAgICAgICByZXR1cm4gaGFzaDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIHVzaW5nICJYIiBmb3Igc2V0IGFuZCAiICIgZm9yIHVuc2V0IGJpdHMKCSAgICAgKi8KCSAgICAvKkBPdmVycmlkZSovCgkgICAgLy8gcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdG9TdHJpbmcoIjogIlgsICIgICIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgdG9TdHJpbmcoc2V0U3RyaW5nOiBzdHJpbmcgPSAiWCAiLCB1bnNldFN0cmluZzogc3RyaW5nID0gIiAgIik6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5idWlsZFRvU3RyaW5nKHNldFN0cmluZywgdW5zZXRTdHJpbmcsICJcbiIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEBwYXJhbSBsaW5lU2VwYXJhdG9yIG5ld2xpbmUgY2hhcmFjdGVyIGluIHN0cmluZyByZXByZXNlbnRhdGlvbgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MgYW5kIGxpbmUgc2VwYXJhdG9yCgkgICAgICogQGRlcHJlY2F0ZWQgY2FsbCB7QGxpbmsgI3RvU3RyaW5nKFN0cmluZyxTdHJpbmcpfSBvbmx5LCB3aGljaCB1c2VzIFxuIGxpbmUgc2VwYXJhdG9yIGFsd2F5cwoJICAgICAqLwoJICAgIC8vIEBEZXByZWNhdGVkCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChzZXRTdHJpbmcsIHVuc2V0U3RyaW5nLCBsaW5lU2VwYXJhdG9yKSB7CgkgICAgICAgIGlmIChzZXRTdHJpbmcgPT09IHZvaWQgMCkgeyBzZXRTdHJpbmcgPSAnWCAnOyB9CgkgICAgICAgIGlmICh1bnNldFN0cmluZyA9PT0gdm9pZCAwKSB7IHVuc2V0U3RyaW5nID0gJyAgJzsgfQoJICAgICAgICBpZiAobGluZVNlcGFyYXRvciA9PT0gdm9pZCAwKSB7IGxpbmVTZXBhcmF0b3IgPSAnXG4nOyB9CgkgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkVG9TdHJpbmcoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcik7CgkgICAgfTsKCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmJ1aWxkVG9TdHJpbmcgPSBmdW5jdGlvbiAoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcikgewoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgLy8gcmVzdWx0LmFwcGVuZChsaW5lU2VwYXJhdG9yKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IHRoaXMud2lkdGg7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0aGlzLmdldCh4LCB5KSA/IHNldFN0cmluZyA6IHVuc2V0U3RyaW5nKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobGluZVNlcGFyYXRvcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdC50b1N0cmluZygpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0TWF0cml4KHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnJvd1NpemUsIHRoaXMuYml0cy5zbGljZSgpKTsKCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXg7Cgl9KCkpOwoJQml0TWF0cml4JDEuZGVmYXVsdCA9IEJpdE1hdHJpeDsKCgl2YXIgTm90Rm91bmRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb3RGb3VuZEV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBOb3RGb3VuZEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZChOb3RGb3VuZEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBOb3RGb3VuZEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5nZXROb3RGb3VuZEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5raW5kID0gJ05vdEZvdW5kRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gTm90Rm91bmRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCkpOwoJTm90Rm91bmRFeGNlcHRpb24kMS5kZWZhdWx0ID0gTm90Rm91bmRFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYyA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24geyovCgl2YXIgQmluYXJpemVyXzEgPSBCaW5hcml6ZXIkMTsKCXZhciBCaXRBcnJheV8xID0gQml0QXJyYXkkMTsKCXZhciBCaXRNYXRyaXhfMSQ1ID0gQml0TWF0cml4JDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQ2ID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qKgoJICogVGhpcyBCaW5hcml6ZXIgaW1wbGVtZW50YXRpb24gdXNlcyB0aGUgb2xkIFpYaW5nIGdsb2JhbCBoaXN0b2dyYW0gYXBwcm9hY2guIEl0IGlzIHN1aXRhYmxlCgkgKiBmb3IgbG93LWVuZCBtb2JpbGUgZGV2aWNlcyB3aGljaCBkb24ndCBoYXZlIGVub3VnaCBDUFUgb3IgbWVtb3J5IHRvIHVzZSBhIGxvY2FsIHRocmVzaG9sZGluZwoJICogYWxnb3JpdGhtLiBIb3dldmVyLCBiZWNhdXNlIGl0IHBpY2tzIGEgZ2xvYmFsIGJsYWNrIHBvaW50LCBpdCBjYW5ub3QgaGFuZGxlIGRpZmZpY3VsdCBzaGFkb3dzCgkgKiBhbmQgZ3JhZGllbnRzLgoJICoKCSAqIEZhc3RlciBtb2JpbGUgZGV2aWNlcyBhbmQgYWxsIGRlc2t0b3AgYXBwbGljYXRpb25zIHNob3VsZCBwcm9iYWJseSB1c2UgSHlicmlkQmluYXJpemVyIGluc3RlYWQuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGMoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5sdW1pbmFuY2VzID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkVNUFRZOwoJICAgICAgICBfdGhpcy5idWNrZXRzID0gbmV3IEludDMyQXJyYXkoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CVUNLRVRTKTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvLyBBcHBsaWVzIHNpbXBsZSBzaGFycGVuaW5nIHRvIHRoZSByb3cgZGF0YSB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIG9mIHRoZSAxRCBSZWFkZXJzLgoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmdldEJsYWNrUm93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gdW5kZWZpbmVkIHx8IHJvdyA9PT0gbnVsbCB8fCByb3cuZ2V0U2l6ZSgpIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xLmRlZmF1bHQod2lkdGgpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgcm93LmNsZWFyKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5pbml0QXJyYXlzKHdpZHRoKTsKCSAgICAgICAgdmFyIGxvY2FsTHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRSb3coeSwgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgdmFyIGxvY2FsQnVja2V0cyA9IHRoaXMuYnVja2V0czsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICBsb2NhbEJ1Y2tldHNbKGxvY2FsTHVtaW5hbmNlc1t4XSAmIDB4ZmYpID4+IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfU0hJRlRdKys7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJsYWNrUG9pbnQgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuZXN0aW1hdGVCbGFja1BvaW50KGxvY2FsQnVja2V0cyk7CgkgICAgICAgIGlmICh3aWR0aCA8IDMpIHsKCSAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgdmVyeSBzbWFsbCBpbWFnZXMKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgICAgIGlmICgobG9jYWxMdW1pbmFuY2VzW3hdICYgMHhmZikgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIHJvdy5zZXQoeCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGxlZnQgPSBsb2NhbEx1bWluYW5jZXNbMF0gJiAweGZmOwoJICAgICAgICAgICAgdmFyIGNlbnRlciA9IGxvY2FsTHVtaW5hbmNlc1sxXSAmIDB4ZmY7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMTsgeCA8IHdpZHRoIC0gMTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gbG9jYWxMdW1pbmFuY2VzW3ggKyAxXSAmIDB4ZmY7CgkgICAgICAgICAgICAgICAgLy8gQSBzaW1wbGUgLTEgNCAtMSBib3ggZmlsdGVyIHdpdGggYSB3ZWlnaHQgb2YgMi4KCSAgICAgICAgICAgICAgICBpZiAoKChjZW50ZXIgKiA0KSAtIGxlZnQgLSByaWdodCkgLyAyIDwgYmxhY2tQb2ludCkgewoJICAgICAgICAgICAgICAgICAgICByb3cuc2V0KHgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBsZWZ0ID0gY2VudGVyOwoJICAgICAgICAgICAgICAgIGNlbnRlciA9IHJpZ2h0OwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByb3c7CgkgICAgfTsKCSAgICAvLyBEb2VzIG5vdCBzaGFycGVuIHRoZSBkYXRhLCBhcyB0aGlzIGNhbGwgaXMgaW50ZW5kZWQgdG8gb25seSBiZSB1c2VkIGJ5IDJEIFJlYWRlcnMuCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBCaXRNYXRyaXhfMSQ1LmRlZmF1bHQod2lkdGgsIGhlaWdodCk7CgkgICAgICAgIC8vIFF1aWNrbHkgY2FsY3VsYXRlcyB0aGUgaGlzdG9ncmFtIGJ5IHNhbXBsaW5nIGZvdXIgcm93cyBmcm9tIHRoZSBpbWFnZS4gVGhpcyBwcm92ZWQgdG8gYmUKCSAgICAgICAgLy8gbW9yZSByb2J1c3Qgb24gdGhlIGJsYWNrYm94IHRlc3RzIHRoYW4gc2FtcGxpbmcgYSBkaWFnb25hbCBhcyB3ZSB1c2VkIHRvIGRvLgoJICAgICAgICB0aGlzLmluaXRBcnJheXMod2lkdGgpOwoJICAgICAgICB2YXIgbG9jYWxCdWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB5ID0gMTsgeSA8IDU7IHkrKykgewoJICAgICAgICAgICAgdmFyIHJvdyA9IE1hdGguZmxvb3IoKGhlaWdodCAqIHkpIC8gNSk7CgkgICAgICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzXzEgPSBzb3VyY2UuZ2V0Um93KHJvdywgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgICAgIHZhciByaWdodCA9IE1hdGguZmxvb3IoKHdpZHRoICogNCkgLyA1KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSBNYXRoLmZsb29yKHdpZHRoIC8gNSk7IHggPCByaWdodDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzXzFbeF0gJiAweGZmOwoJICAgICAgICAgICAgICAgIGxvY2FsQnVja2V0c1twaXhlbCA+PiBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUXSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBibGFja1BvaW50ID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludChsb2NhbEJ1Y2tldHMpOwoJICAgICAgICAvLyBXZSBkZWxheSByZWFkaW5nIHRoZSBlbnRpcmUgaW1hZ2UgbHVtaW5hbmNlIHVudGlsIHRoZSBibGFjayBwb2ludCBlc3RpbWF0aW9uIHN1Y2NlZWRzLgoJICAgICAgICAvLyBBbHRob3VnaCB3ZSBlbmQgdXAgcmVhZGluZyBmb3VyIHJvd3MgdHdpY2UsIGl0IGlzIGNvbnNpc3RlbnQgd2l0aCBvdXIgbW90dG8gb2YKCSAgICAgICAgLy8gImZhaWwgcXVpY2tseSIgd2hpY2ggaXMgbmVjZXNzYXJ5IGZvciBjb250aW51b3VzIHNjYW5uaW5nLgoJICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzID0gc291cmNlLmdldE1hdHJpeCgpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzW29mZnNldCArIHhdICYgMHhmZjsKCSAgICAgICAgICAgICAgICBpZiAocGl4ZWwgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoeCwgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBtYXRyaXg7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLnByb3RvdHlwZS5jcmVhdGVCaW5hcml6ZXIgPSBmdW5jdGlvbiAoc291cmNlKSB7CgkgICAgICAgIHJldHVybiBuZXcgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyKHNvdXJjZSk7CgkgICAgfTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmluaXRBcnJheXMgPSBmdW5jdGlvbiAobHVtaW5hbmNlU2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmICh0aGlzLmx1bWluYW5jZXMubGVuZ3RoIDwgbHVtaW5hbmNlU2l6ZSkgewoJICAgICAgICAgICAgdGhpcy5sdW1pbmFuY2VzID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGx1bWluYW5jZVNpemUpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQlVDS0VUUzsgeCsrKSB7CgkgICAgICAgICAgICBidWNrZXRzW3hdID0gMDsKCSAgICAgICAgfQoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludCA9IGZ1bmN0aW9uIChidWNrZXRzKSB7CgkgICAgICAgIC8vIEZpbmQgdGhlIHRhbGxlc3QgcGVhayBpbiB0aGUgaGlzdG9ncmFtLgoJICAgICAgICB2YXIgbnVtQnVja2V0cyA9IGJ1Y2tldHMubGVuZ3RoOwoJICAgICAgICB2YXIgbWF4QnVja2V0Q291bnQgPSAwOwoJICAgICAgICB2YXIgZmlyc3RQZWFrID0gMDsKCSAgICAgICAgdmFyIGZpcnN0UGVha1NpemUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgaWYgKGJ1Y2tldHNbeF0gPiBmaXJzdFBlYWtTaXplKSB7CgkgICAgICAgICAgICAgICAgZmlyc3RQZWFrID0geDsKCSAgICAgICAgICAgICAgICBmaXJzdFBlYWtTaXplID0gYnVja2V0c1t4XTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChidWNrZXRzW3hdID4gbWF4QnVja2V0Q291bnQpIHsKCSAgICAgICAgICAgICAgICBtYXhCdWNrZXRDb3VudCA9IGJ1Y2tldHNbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCB0aGUgc2Vjb25kLXRhbGxlc3QgcGVhayB3aGljaCBpcyBzb21ld2hhdCBmYXIgZnJvbSB0aGUgdGFsbGVzdCBwZWFrLgoJICAgICAgICB2YXIgc2Vjb25kUGVhayA9IDA7CgkgICAgICAgIHZhciBzZWNvbmRQZWFrU2NvcmUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgdmFyIGRpc3RhbmNlVG9CaWdnZXN0ID0geCAtIGZpcnN0UGVhazsKCSAgICAgICAgICAgIC8vIEVuY291cmFnZSBtb3JlIGRpc3RhbnQgc2Vjb25kIHBlYWtzIGJ5IG11bHRpcGx5aW5nIGJ5IHNxdWFyZSBvZiBkaXN0YW5jZS4KCSAgICAgICAgICAgIHZhciBzY29yZSA9IGJ1Y2tldHNbeF0gKiBkaXN0YW5jZVRvQmlnZ2VzdCAqIGRpc3RhbmNlVG9CaWdnZXN0OwoJICAgICAgICAgICAgaWYgKHNjb3JlID4gc2Vjb25kUGVha1Njb3JlKSB7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVhayA9IHg7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVha1Njb3JlID0gc2NvcmU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTWFrZSBzdXJlIGZpcnN0UGVhayBjb3JyZXNwb25kcyB0byB0aGUgYmxhY2sgcGVhay4KCSAgICAgICAgaWYgKGZpcnN0UGVhayA+IHNlY29uZFBlYWspIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZmlyc3RQZWFrOwoJICAgICAgICAgICAgZmlyc3RQZWFrID0gc2Vjb25kUGVhazsKCSAgICAgICAgICAgIHNlY29uZFBlYWsgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHRoZXJlIGlzIHRvbyBsaXR0bGUgY29udHJhc3QgaW4gdGhlIGltYWdlIHRvIHBpY2sgYSBtZWFuaW5nZnVsIGJsYWNrIHBvaW50LCB0aHJvdyByYXRoZXIKCSAgICAgICAgLy8gdGhhbiB3YXN0ZSB0aW1lIHRyeWluZyB0byBkZWNvZGUgdGhlIGltYWdlLCBhbmQgcmlzayBmYWxzZSBwb3NpdGl2ZXMuCgkgICAgICAgIGlmIChzZWNvbmRQZWFrIC0gZmlyc3RQZWFrIDw9IG51bUJ1Y2tldHMgLyAxNikgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCBhIHZhbGxleSBiZXR3ZWVuIHRoZW0gdGhhdCBpcyBsb3cgYW5kIGNsb3NlciB0byB0aGUgd2hpdGUgcGVhay4KCSAgICAgICAgdmFyIGJlc3RWYWxsZXkgPSBzZWNvbmRQZWFrIC0gMTsKCSAgICAgICAgdmFyIGJlc3RWYWxsZXlTY29yZSA9IC0xOwoJICAgICAgICBmb3IgKHZhciB4ID0gc2Vjb25kUGVhayAtIDE7IHggPiBmaXJzdFBlYWs7IHgtLSkgewoJICAgICAgICAgICAgdmFyIGZyb21GaXJzdCA9IHggLSBmaXJzdFBlYWs7CgkgICAgICAgICAgICB2YXIgc2NvcmUgPSBmcm9tRmlyc3QgKiBmcm9tRmlyc3QgKiAoc2Vjb25kUGVhayAtIHgpICogKG1heEJ1Y2tldENvdW50IC0gYnVja2V0c1t4XSk7CgkgICAgICAgICAgICBpZiAoc2NvcmUgPiBiZXN0VmFsbGV5U2NvcmUpIHsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5ID0geDsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5U2NvcmUgPSBzY29yZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gYmVzdFZhbGxleSA8PCBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUOwoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CSVRTID0gNTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUID0gOCAtIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX0JVQ0tFVFMgPSAxIDw8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuRU1QVFkgPSBVaW50OENsYW1wZWRBcnJheS5mcm9tKFswXSk7CgkgICAgcmV0dXJuIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCX0oQmluYXJpemVyXzEuZGVmYXVsdCkpOwoJR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyJDEuZGVmYXVsdCA9IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyRiID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEh5YnJpZEJpbmFyaXplciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyXzEgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMTsKCXZhciBCaXRNYXRyaXhfMSQ0ID0gQml0TWF0cml4JDE7CgkvKioKCSAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBhIGxvY2FsIHRocmVzaG9sZGluZyBhbGdvcml0aG0sIHdoaWNoIHdoaWxlIHNsb3dlciB0aGFuIHRoZQoJICogR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBpcyBmYWlybHkgZWZmaWNpZW50IGZvciB3aGF0IGl0IGRvZXMuIEl0IGlzIGRlc2lnbmVkIGZvcgoJICogaGlnaCBmcmVxdWVuY3kgaW1hZ2VzIG9mIGJhcmNvZGVzIHdpdGggYmxhY2sgZGF0YSBvbiB3aGl0ZSBiYWNrZ3JvdW5kcy4gRm9yIHRoaXMgYXBwbGljYXRpb24sCgkgKiBpdCBkb2VzIGEgbXVjaCBiZXR0ZXIgam9iIHRoYW4gYSBnbG9iYWwgYmxhY2twb2ludCB3aXRoIHNldmVyZSBzaGFkb3dzIGFuZCBncmFkaWVudHMuCgkgKiBIb3dldmVyIGl0IHRlbmRzIHRvIHByb2R1Y2UgYXJ0aWZhY3RzIG9uIGxvd2VyIGZyZXF1ZW5jeSBpbWFnZXMgYW5kIGlzIHRoZXJlZm9yZSBub3QKCSAqIGEgZ29vZCBnZW5lcmFsIHB1cnBvc2UgYmluYXJpemVyIGZvciB1c2VzIG91dHNpZGUgWlhpbmcuCgkgKgoJICogVGhpcyBjbGFzcyBleHRlbmRzIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplciwgdXNpbmcgdGhlIG9sZGVyIGhpc3RvZ3JhbSBhcHByb2FjaCBmb3IgMUQgcmVhZGVycywKCSAqIGFuZCB0aGUgbmV3ZXIgbG9jYWwgYXBwcm9hY2ggZm9yIDJEIHJlYWRlcnMuIDFEIGRlY29kaW5nIHVzaW5nIGEgcGVyLXJvdyBoaXN0b2dyYW0gaXMgYWxyZWFkeQoJICogaW5oZXJlbnRseSBsb2NhbCwgYW5kIG9ubHkgZmFpbHMgZm9yIGhvcml6b250YWwgZ3JhZGllbnRzLiBXZSBjYW4gcmV2aXNpdCB0aGF0IHByb2JsZW0gbGF0ZXIsCgkgKiBidXQgZm9yIG5vdyBpdCB3YXMgbm90IGEgd2luIHRvIHVzZSBsb2NhbCBibG9ja3MgZm9yIDFELgoJICoKCSAqIFRoaXMgQmluYXJpemVyIGlzIHRoZSBkZWZhdWx0IGZvciB0aGUgdW5pdCB0ZXN0cyBhbmQgdGhlIHJlY29tbWVuZGVkIGNsYXNzIGZvciBsaWJyYXJ5IHVzZXJzLgoJICoKCSAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pCgkgKi8KCXZhciBIeWJyaWRCaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGIoSHlicmlkQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEh5YnJpZEJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tYXRyaXggPSBudWxsOwoJICAgICAgICByZXR1cm4gX3RoaXM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIENhbGN1bGF0ZXMgdGhlIGZpbmFsIEJpdE1hdHJpeCBvbmNlIGZvciBhbGwgcmVxdWVzdHMuIFRoaXMgY291bGQgYmUgY2FsbGVkIG9uY2UgZnJvbSB0aGUKCSAgICAgKiBjb25zdHJ1Y3RvciBpbnN0ZWFkLCBidXQgdGhlcmUgYXJlIHNvbWUgYWR2YW50YWdlcyB0byBkb2luZyBpdCBsYXppbHksIHN1Y2ggYXMgbWFraW5nCgkgICAgICogcHJvZmlsaW5nIGVhc2llciwgYW5kIG5vdCBkb2luZyBoZWF2eSBsaWZ0aW5nIHdoZW4gY2FsbGVycyBkb24ndCBleHBlY3QgaXQuCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLm1hdHJpeCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKHdpZHRoID49IEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiAmJiBoZWlnaHQgPj0gSHlicmlkQmluYXJpemVyLk1JTklNVU1fRElNRU5TSU9OKSB7CgkgICAgICAgICAgICB2YXIgbHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRNYXRyaXgoKTsKCSAgICAgICAgICAgIHZhciBzdWJXaWR0aCA9IHdpZHRoID4+IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKCh3aWR0aCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViV2lkdGgrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciBzdWJIZWlnaHQgPSBoZWlnaHQgPj4gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICBpZiAoKGhlaWdodCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViSGVpZ2h0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgYmxhY2tQb2ludHMgPSBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMobHVtaW5hbmNlcywgc3ViV2lkdGgsIHN1YkhlaWdodCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgICAgICB2YXIgbmV3TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDQuZGVmYXVsdCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgICAgIEh5YnJpZEJpbmFyaXplci5jYWxjdWxhdGVUaHJlc2hvbGRGb3JCbG9jayhsdW1pbmFuY2VzLCBzdWJXaWR0aCwgc3ViSGVpZ2h0LCB3aWR0aCwgaGVpZ2h0LCBibGFja1BvaW50cywgbmV3TWF0cml4KTsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbmV3TWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgLy8gSWYgdGhlIGltYWdlIGlzIHRvbyBzbWFsbCwgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgaGlzdG9ncmFtIGFwcHJvYWNoLgoJICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBfc3VwZXIucHJvdG90eXBlLmdldEJsYWNrTWF0cml4LmNhbGwodGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuY3JlYXRlQmluYXJpemVyID0gZnVuY3Rpb24gKHNvdXJjZSkgewoJICAgICAgICByZXR1cm4gbmV3IEh5YnJpZEJpbmFyaXplcihzb3VyY2UpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRm9yIGVhY2ggYmxvY2sgaW4gdGhlIGltYWdlLCBjYWxjdWxhdGUgdGhlIGF2ZXJhZ2UgYmxhY2sgcG9pbnQgdXNpbmcgYSA1eDUgZ3JpZAoJICAgICAqIG9mIHRoZSBibG9ja3MgYXJvdW5kIGl0LiBBbHNvIGhhbmRsZXMgdGhlIGNvcm5lciBjYXNlcyAoZnJhY3Rpb25hbCBibG9ja3MgYXJlIGNvbXB1dGVkIGJhc2VkCgkgICAgICogb24gdGhlIGxhc3QgcGl4ZWxzIGluIHRoZSByb3cvY29sdW1uIHdoaWNoIGFyZSBhbHNvIHVzZWQgaW4gdGhlIHByZXZpb3VzIGJsb2NrKS4KCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlVGhyZXNob2xkRm9yQmxvY2sgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBibGFja1BvaW50cywgbWF0cml4KSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBzdWJIZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgdG9wXzEgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHksIDIsIHN1YkhlaWdodCAtIDMpOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBzdWJXaWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHhvZmZzZXQgPSB4IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgICAgIGlmICh4b2Zmc2V0ID4gbWF4WE9mZnNldCkgewoJICAgICAgICAgICAgICAgICAgICB4b2Zmc2V0ID0gbWF4WE9mZnNldDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHgsIDIsIHN1YldpZHRoIC0gMyk7CgkgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeiA9IC0yOyB6IDw9IDI7IHorKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgYmxhY2tSb3cgPSBibGFja1BvaW50c1t0b3BfMSArIHpdOwoJICAgICAgICAgICAgICAgICAgICBzdW0gKz0gYmxhY2tSb3dbbGVmdCAtIDJdICsgYmxhY2tSb3dbbGVmdCAtIDFdICsgYmxhY2tSb3dbbGVmdF0gKyBibGFja1Jvd1tsZWZ0ICsgMV0gKyBibGFja1Jvd1tsZWZ0ICsgMl07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gc3VtIC8gMjU7CgkgICAgICAgICAgICAgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrKGx1bWluYW5jZXMsIHhvZmZzZXQsIHlvZmZzZXQsIGF2ZXJhZ2UsIHdpZHRoLCBtYXRyaXgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FwID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG1pbiAvKmludCovLCBtYXggLyppbnQqLykgewoJICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbGllcyBhIHNpbmdsZSB0aHJlc2hvbGQgdG8gYSBibG9jayBvZiBwaXhlbHMuCgkgICAgICovCgkgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrID0gZnVuY3Rpb24gKGx1bWluYW5jZXMsIHhvZmZzZXQgLyppbnQqLywgeW9mZnNldCAvKmludCovLCB0aHJlc2hvbGQgLyppbnQqLywgc3RyaWRlIC8qaW50Ki8sIG1hdHJpeCkgewoJICAgICAgICBmb3IgKHZhciB5ID0gMCwgb2Zmc2V0ID0geW9mZnNldCAqIHN0cmlkZSArIHhvZmZzZXQ7IHkgPCBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsgeSsrLCBvZmZzZXQgKz0gc3RyaWRlKSB7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB4KyspIHsKCSAgICAgICAgICAgICAgICAvLyBDb21wYXJpc29uIG5lZWRzIHRvIGJlIDw9IHNvIHRoYXQgYmxhY2sgPT0gMCBwaXhlbHMgYXJlIGJsYWNrIGV2ZW4gaWYgdGhlIHRocmVzaG9sZCBpcyAwLgoJICAgICAgICAgICAgICAgIGlmICgobHVtaW5hbmNlc1tvZmZzZXQgKyB4XSAmIDB4RkYpIDw9IHRocmVzaG9sZCkgewoJICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KHhvZmZzZXQgKyB4LCB5b2Zmc2V0ICsgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDYWxjdWxhdGVzIGEgc2luZ2xlIGJsYWNrIHBvaW50IGZvciBlYWNoIGJsb2NrIG9mIHBpeGVscyBhbmQgc2F2ZXMgaXQgYXdheS4KCSAgICAgKiBTZWUgdGhlIGZvbGxvd2luZyB0aHJlYWQgZm9yIGEgZGlzY3Vzc2lvbiBvZiB0aGlzIGFsZ29yaXRobToKCSAgICAgKiAgaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL3p4aW5nL2Jyb3dzZV90aHJlYWQvdGhyZWFkL2QwNmVmYTJjMzVhN2RkYzAKCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOndoaXRlc3BhY2UKCSAgICAgICAgdmFyIGJsYWNrUG9pbnRzID0gbmV3IEFycmF5KHN1YkhlaWdodCk7IC8vIHN1YldpZHRoCgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgc3ViSGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGJsYWNrUG9pbnRzW3ldID0gbmV3IEludDMyQXJyYXkoc3ViV2lkdGgpOwoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHN1YldpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgeG9mZnNldCA9IHggPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICAgICAgaWYgKHhvZmZzZXQgPiBtYXhYT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgICAgIHhvZmZzZXQgPSBtYXhYT2Zmc2V0OwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB2YXIgc3VtID0gMDsKCSAgICAgICAgICAgICAgICB2YXIgbWluID0gMHhGRjsKCSAgICAgICAgICAgICAgICB2YXIgbWF4ID0gMDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciB5eSA9IDAsIG9mZnNldCA9IHlvZmZzZXQgKiB3aWR0aCArIHhvZmZzZXQ7IHl5IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHl5KyssIG9mZnNldCArPSB3aWR0aCkgewoJICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaXhlbCA9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSBwaXhlbDsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIGxvb2tpbmcgZm9yIGdvb2QgY29udHJhc3QKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwaXhlbCA8IG1pbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBpeGVsOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpeGVsID4gbWF4KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGl4ZWw7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgLy8gc2hvcnQtY2lyY3VpdCBtaW4vbWF4IHRlc3RzIG9uY2UgZHluYW1pYyByYW5nZSBpcyBtZXQKCSAgICAgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA+IEh5YnJpZEJpbmFyaXplci5NSU5fRFlOQU1JQ19SQU5HRSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluaXNoIHRoZSByZXN0IG9mIHRoZSByb3dzIHF1aWNrbHkKCSAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoeXkrKywgb2Zmc2V0ICs9IHdpZHRoOyB5eSA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB5eSsrLCBvZmZzZXQgKz0gd2lkdGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgZXN0aW1hdGUgaXMgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHZhbHVlcyBpbiB0aGUgYmxvY2suCgkgICAgICAgICAgICAgICAgdmFyIGF2ZXJhZ2UgPSBzdW0gPj4gKEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSICogMik7CgkgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA8PSBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gSWYgdmFyaWF0aW9uIHdpdGhpbiB0aGUgYmxvY2sgaXMgbG93LCBhc3N1bWUgdGhpcyBpcyBhIGJsb2NrIHdpdGggb25seSBsaWdodCBvciBvbmx5CgkgICAgICAgICAgICAgICAgICAgIC8vIGRhcmsgcGl4ZWxzLiBJbiB0aGF0IGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gdXNlIHRoZSBhdmVyYWdlLCBhcyBpdCB3b3VsZCBkaXZpZGUgdGhpcwoJICAgICAgICAgICAgICAgICAgICAvLyBsb3cgY29udHJhc3QgYXJlYSBpbnRvIGJsYWNrIGFuZCB3aGl0ZSBwaXhlbHMsIGVzc2VudGlhbGx5IGNyZWF0aW5nIGRhdGEgb3V0IG9mIG5vaXNlLgoJICAgICAgICAgICAgICAgICAgICAvLwoJICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIGJsb2NrIGlzIGxpZ2h0L2JhY2tncm91bmQuIFNpbmNlIG5vIGVzdGltYXRlIGZvcgoJICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbGV2ZWwgb2YgZGFyayBwaXhlbHMgZXhpc3RzIGxvY2FsbHksIHVzZSBoYWxmIHRoZSBtaW4gZm9yIHRoZSBibG9jay4KCSAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IG1pbiAvIDI7CgkgICAgICAgICAgICAgICAgICAgIGlmICh5ID4gMCAmJiB4ID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdCB0aGUgIndoaXRlIGJhY2tncm91bmQiIGFzc3VtcHRpb24gZm9yIGJsb2NrcyB0aGF0IGhhdmUgbmVpZ2hib3JzIGJ5IGNvbXBhcmluZwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHBpeGVscyBpbiB0aGlzIGJsb2NrIHRvIHRoZSBwcmV2aW91c2x5IGNhbGN1bGF0ZWQgYmxhY2sgcG9pbnRzLiBUaGlzIGlzIGJhc2VkIG9uCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZmFjdCB0aGF0IGRhcmsgYmFyY29kZSBzeW1ib2xvZ3kgaXMgYWx3YXlzIHN1cnJvdW5kZWQgYnkgc29tZSBhbW91bnQgb2YgbGlnaHQKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgZm9yIHdoaWNoIHJlYXNvbmFibGUgYmxhY2sgcG9pbnQgZXN0aW1hdGVzIHdlcmUgbWFkZS4gVGhlIGJwIGVzdGltYXRlZCBhdAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGJvdW5kYXJpZXMgaXMgdXNlZCBmb3IgdGhlIGludGVyaW9yLgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIChtaW4gPCBicCkgaXMgYXJiaXRyYXJ5IGJ1dCB3b3JrcyBiZXR0ZXIgdGhhbiBvdGhlciBoZXVyaXN0aWNzIHRoYXQgd2VyZSB0cmllZC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50ID0gKGJsYWNrUG9pbnRzW3kgLSAxXVt4XSArICgyICogYmxhY2tQb2ludHNbeV1beCAtIDFdKSArIGJsYWNrUG9pbnRzW3kgLSAxXVt4IC0gMV0pIC8gNDsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW4gPCBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IGF2ZXJhZ2VOZWlnaGJvckJsYWNrUG9pbnQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYmxhY2tQb2ludHNbeV1beF0gPSBhdmVyYWdlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBibGFja1BvaW50czsKCSAgICB9OwoJICAgIC8vIFRoaXMgY2xhc3MgdXNlcyA1eDUgYmxvY2tzIHRvIGNvbXB1dGUgbG9jYWwgbHVtaW5hbmNlLCB3aGVyZSBlYWNoIGJsb2NrIGlzIDh4OCBwaXhlbHMuCgkgICAgLy8gU28gdGhpcyBpcyB0aGUgc21hbGxlc3QgZGltZW5zaW9uIGluIGVhY2ggYXhpcyB3ZSBjYW4gYWNjZXB0LgoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSID0gMzsKCSAgICBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSA9IDEgPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7IC8vIC4uLjAxMDAuLi4wMAoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0sgPSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSAtIDE7IC8vIC4uLjAwMTEuLi4xMQoJICAgIEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiA9IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFICogNTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UgPSAyNDsKCSAgICByZXR1cm4gSHlicmlkQmluYXJpemVyOwoJfShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXJfMS5kZWZhdWx0KSk7Cgl2YXIgX2RlZmF1bHQkMiA9IEh5YnJpZEJpbmFyaXplciQxLmRlZmF1bHQgPSBIeWJyaWRCaW5hcml6ZXI7CgoJdmFyIFJHQkx1bWluYW5jZVNvdXJjZSQxID0ge307CgoJdmFyIEludmVydGVkTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgl2YXIgTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMSA9IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJDE7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nIHsqLwoJLyoqCgkgKiBUaGUgcHVycG9zZSBvZiB0aGlzIGNsYXNzIGhpZXJhcmNoeSBpcyB0byBhYnN0cmFjdCBkaWZmZXJlbnQgYml0bWFwIGltcGxlbWVudGF0aW9ucyBhY3Jvc3MKCSAqIHBsYXRmb3JtcyBpbnRvIGEgc3RhbmRhcmQgaW50ZXJmYWNlIGZvciByZXF1ZXN0aW5nIGdyZXlzY2FsZSBsdW1pbmFuY2UgdmFsdWVzLiBUaGUgaW50ZXJmYWNlCgkgKiBvbmx5IHByb3ZpZGVzIGltbXV0YWJsZSBtZXRob2RzOyB0aGVyZWZvcmUgY3JvcCBhbmQgcm90YXRpb24gY3JlYXRlIGNvcGllcy4gVGhpcyBpcyB0byBlbnN1cmUKCSAqIHRoYXQgb25lIFJlYWRlciBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsIGx1bWluYW5jZSBzb3VyY2UgYW5kIGxlYXZlIGl0IGluIGFuIHVua25vd24gc3RhdGUKCSAqIGZvciBvdGhlciBSZWFkZXJzIGluIHRoZSBjaGFpbi4KCSAqCgkgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKQoJICovCgl2YXIgTHVtaW5hbmNlU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEx1bWluYW5jZVNvdXJjZSh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgYml0bWFwLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLndpZHRoOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBUaGUgaGVpZ2h0IG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmhlaWdodDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNyb3BwaW5nLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIGNyb3BwZWQgaW1hZ2UgZGF0YS4gSW1wbGVtZW50YXRpb25zIG1heSBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZQoJICAgICAqIG9yaWdpbmFsIGRhdGEgcmF0aGVyIHRoYW4gYSBjb3B5LiBPbmx5IGNhbGxhYmxlIGlmIGlzQ3JvcFN1cHBvcnRlZCgpIGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gbGVmdCBUaGUgbGVmdCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldFdpZHRoKCkpCgkgICAgICogQHBhcmFtIHRvcCBUaGUgdG9wIGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0SGVpZ2h0KCkpCgkgICAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIHRvIGNyb3AuCgkgICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcmV0dXJuIEEgY3JvcHBlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCBjcm9wcGluZy4nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNvdW50ZXItY2xvY2t3aXNlIHJvdGF0aW9uLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCByb3RhdGlvbiBieSA5MCBkZWdyZWVzLicpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCByb3RhdGVkIGltYWdlIGRhdGEgYnkgNDUgZGVncmVlcyBjb3VudGVyY2xvY2t3aXNlLgoJICAgICAqIE9ubHkgY2FsbGFibGUgaWYge0BsaW5rICNpc1JvdGF0ZVN1cHBvcnRlZCgpfSBpcyB0cnVlLgoJICAgICAqCgkgICAgICogQHJldHVybiBBIHJvdGF0ZWQgdmVyc2lvbiBvZiB0aGlzIG9iamVjdC4KCSAgICAgKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnJvdGF0ZUNvdW50ZXJDbG9ja3dpc2U0NSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnVGhpcyBsdW1pbmFuY2Ugc291cmNlIGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24gYnkgNDUgZGVncmVlcy4nKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcm93ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMud2lkdGgpOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQxLmRlZmF1bHQoKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgc291cmNlUm93ID0gdGhpcy5nZXRSb3coeSwgcm93KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGx1bWluYW5jZSA9IHNvdXJjZVJvd1t4XSAmIDB4RkY7CgkgICAgICAgICAgICAgICAgdmFyIGMgPSB2b2lkIDA7CgkgICAgICAgICAgICAgICAgaWYgKGx1bWluYW5jZSA8IDB4NDApIHsKCSAgICAgICAgICAgICAgICAgICAgYyA9ICcjJzsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAobHVtaW5hbmNlIDwgMHg4MCkgewoJICAgICAgICAgICAgICAgICAgICBjID0gJysnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmIChsdW1pbmFuY2UgPCAweEMwKSB7CgkgICAgICAgICAgICAgICAgICAgIGMgPSAnLic7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICBjID0gJyAnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGMpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXG4nKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7CgkgICAgfTsKCSAgICByZXR1cm4gTHVtaW5hbmNlU291cmNlOwoJfSgpKTsKCUx1bWluYW5jZVNvdXJjZSQxLmRlZmF1bHQgPSBMdW1pbmFuY2VTb3VyY2U7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnZlcnRlZEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEkMSA9IEx1bWluYW5jZVNvdXJjZSQxOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHdoaWNoIGludmVydHMgdGhlIGx1bWluYW5jZXMgaXQgcmV0dXJucyAtLSBibGFjayBiZWNvbWVzCgkgKiB3aGl0ZSBhbmQgdmljZSB2ZXJzYSwgYW5kIGVhY2ggdmFsdWUgYmVjb21lcyAoMjU1LXZhbHVlKS4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGEoSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UsIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UoZGVsZWdhdGUpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVsZWdhdGUuZ2V0V2lkdGgoKSwgZGVsZWdhdGUuZ2V0SGVpZ2h0KCkpIHx8IHRoaXM7CgkgICAgICAgIF90aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgdmFyIHNvdXJjZVJvdyA9IHRoaXMuZGVsZWdhdGUuZ2V0Um93KHksIHJvdyk7CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7CgkgICAgICAgICAgICBzb3VyY2VSb3dbaV0gPSAvKihieXRlKSovICgyNTUgLSAoc291cmNlUm93W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBzb3VyY2VSb3c7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmdldE1hdHJpeCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMuZGVsZWdhdGUuZ2V0TWF0cml4KCk7CgkgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldFdpZHRoKCkgKiB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgaW52ZXJ0ZWRNYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkobGVuZ3RoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgICAgICAgaW52ZXJ0ZWRNYXRyaXhbaV0gPSAvKihieXRlKSovICgyNTUgLSAobWF0cml4W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBpbnZlcnRlZE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUuY3JvcChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmlzUm90YXRlU3VwcG9ydGVkKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG9yaWdpbmFsIGRlbGVnYXRlIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHNpbmNlIGludmVydCB1bmRvZXMgaXRzZWxmCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCkpOwoJICAgIH07CgkgICAgcmV0dXJuIEludmVydGVkTHVtaW5hbmNlU291cmNlOwoJfShMdW1pbmFuY2VTb3VyY2VfMSQxLmRlZmF1bHQpKTsKCUludmVydGVkTHVtaW5hbmNlU291cmNlJDEuZGVmYXVsdCA9IEludmVydGVkTHVtaW5hbmNlU291cmNlOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUkdCTHVtaW5hbmNlU291cmNlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkgLy8gcmVxdWlyZWQgYmVjYXVzZSBvZiBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYmV0d2VlbiBMdW1pbmFuY2VTb3VyY2UgYW5kIEludmVydGVkTHVtaW5hbmNlU291cmNlCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMSA9IEludmVydGVkTHVtaW5hbmNlU291cmNlJDE7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEgPSBMdW1pbmFuY2VTb3VyY2UkMTsKCXZhciBTeXN0ZW1fMSQyID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNiA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gaGVscCBkZWNvZGUgaW1hZ2VzIGZyb20gZmlsZXMgd2hpY2ggYXJyaXZlIGFzIFJHQiBkYXRhIGZyb20KCSAqIGFuIEFSR0IgcGl4ZWwgYXJyYXkuIEl0IGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24uCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgQmV0YW1pbm9zCgkgKi8KCXZhciBSR0JMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDkoUkdCTHVtaW5hbmNlU291cmNlLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIFJHQkx1bWluYW5jZVNvdXJjZShsdW1pbmFuY2VzLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgZGF0YVdpZHRoIC8qaW50Ki8sIGRhdGFIZWlnaHQgLyppbnQqLywgbGVmdCAvKmludCovLCB0b3AgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5kYXRhV2lkdGggPSBkYXRhV2lkdGg7CgkgICAgICAgIF90aGlzLmRhdGFIZWlnaHQgPSBkYXRhSGVpZ2h0OwoJICAgICAgICBfdGhpcy5sZWZ0ID0gbGVmdDsKCSAgICAgICAgX3RoaXMudG9wID0gdG9wOwoJICAgICAgICBpZiAobHVtaW5hbmNlcy5CWVRFU19QRVJfRUxFTUVOVCA9PT0gNCkgeyAvLyBJbnQzMkFycmF5CgkgICAgICAgICAgICB2YXIgc2l6ZSA9IHdpZHRoICogaGVpZ2h0OwoJICAgICAgICAgICAgdmFyIGx1bWluYW5jZXNVaW50OEFycmF5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHNpemUpOwoJICAgICAgICAgICAgZm9yICh2YXIgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgc2l6ZTsgb2Zmc2V0KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgcGl4ZWwgPSBsdW1pbmFuY2VzW29mZnNldF07CgkgICAgICAgICAgICAgICAgdmFyIHIgPSAocGl4ZWwgPj4gMTYpICYgMHhmZjsgLy8gcmVkCgkgICAgICAgICAgICAgICAgdmFyIGcyID0gKHBpeGVsID4+IDcpICYgMHgxZmU7IC8vIDIgKiBncmVlbgoJICAgICAgICAgICAgICAgIHZhciBiID0gcGl4ZWwgJiAweGZmOyAvLyBibHVlCgkgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGdyZWVuLWZhdm91cmluZyBhdmVyYWdlIGNoZWFwbHkKCSAgICAgICAgICAgICAgICBsdW1pbmFuY2VzVWludDhBcnJheVtvZmZzZXRdID0gLyooYnl0ZSkgKi8gKChyICsgZzIgKyBiKSAvIDQpICYgMHhGRjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzVWludDhBcnJheTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGRhdGFXaWR0aCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YVdpZHRoID0gd2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZGF0YUhlaWdodCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YUhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBsZWZ0KSB7CgkgICAgICAgICAgICBfdGhpcy5sZWZ0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0b3ApIHsKCSAgICAgICAgICAgIF90aGlzLnRvcCA9IDA7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKF90aGlzLmxlZnQgKyB3aWR0aCA+IF90aGlzLmRhdGFXaWR0aCB8fCBfdGhpcy50b3AgKyBoZWlnaHQgPiBfdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNi5kZWZhdWx0KCdDcm9wIHJlY3RhbmdsZSBkb2VzIG5vdCBmaXQgd2l0aGluIGltYWdlIGRhdGEuJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgaWYgKHkgPCAwIHx8IHkgPj0gdGhpcy5nZXRIZWlnaHQoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCgnUmVxdWVzdGVkIHJvdyBpcyBvdXRzaWRlIHRoZSBpbWFnZTogJyArIHkpOwoJICAgICAgICB9CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCByb3cgPT09IHVuZGVmaW5lZCB8fCByb3cubGVuZ3RoIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh3aWR0aCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG9mZnNldCA9ICh5ICsgdGhpcy50b3ApICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIFN5c3RlbV8xJDIuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5sdW1pbmFuY2VzLCBvZmZzZXQsIHJvdywgMCwgd2lkdGgpOwoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJHQkx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0TWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBJZiB0aGUgY2FsbGVyIGFza3MgZm9yIHRoZSBlbnRpcmUgdW5kZXJseWluZyBpbWFnZSwgc2F2ZSB0aGUgY29weSBhbmQgZ2l2ZSB0aGVtIHRoZQoJICAgICAgICAvLyBvcmlnaW5hbCBkYXRhLiBUaGUgZG9jcyBzcGVjaWZpY2FsbHkgd2FybiB0aGF0IHJlc3VsdC5sZW5ndGggbXVzdCBiZSBpZ25vcmVkLgoJICAgICAgICBpZiAod2lkdGggPT09IHRoaXMuZGF0YVdpZHRoICYmIGhlaWdodCA9PT0gdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5sdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhcmVhID0gd2lkdGggKiBoZWlnaHQ7CgkgICAgICAgIHZhciBtYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoYXJlYSk7CgkgICAgICAgIHZhciBpbnB1dE9mZnNldCA9IHRoaXMudG9wICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIC8vIElmIHRoZSB3aWR0aCBtYXRjaGVzIHRoZSBmdWxsIHdpZHRoIG9mIHRoZSB1bmRlcmx5aW5nIGRhdGEsIHBlcmZvcm0gYSBzaW5nbGUgY29weS4KCSAgICAgICAgaWYgKHdpZHRoID09PSB0aGlzLmRhdGFXaWR0aCkgewoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIDAsIGFyZWEpOwoJICAgICAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICAgICAgfQoJICAgICAgICAvLyBPdGhlcndpc2UgY29weSBvbmUgY3JvcHBlZCByb3cgYXQgYSB0aW1lLgoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb3V0cHV0T2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIG91dHB1dE9mZnNldCwgd2lkdGgpOwoJICAgICAgICAgICAgaW5wdXRPZmZzZXQgKz0gdGhpcy5kYXRhV2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSR0JMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmlzQ3JvcFN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgUkdCTHVtaW5hbmNlU291cmNlKHRoaXMubHVtaW5hbmNlcywgd2lkdGgsIGhlaWdodCwgdGhpcy5kYXRhV2lkdGgsIHRoaXMuZGF0YUhlaWdodCwgdGhpcy5sZWZ0ICsgbGVmdCwgdGhpcy50b3AgKyB0b3ApOwoJICAgIH07CgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMS5kZWZhdWx0KHRoaXMpOwoJICAgIH07CgkgICAgcmV0dXJuIFJHQkx1bWluYW5jZVNvdXJjZTsKCX0oTHVtaW5hbmNlU291cmNlXzEuZGVmYXVsdCkpOwoJdmFyIF9kZWZhdWx0JDEgPSBSR0JMdW1pbmFuY2VTb3VyY2UkMS5kZWZhdWx0ID0gUkdCTHVtaW5hbmNlU291cmNlOwoKCXZhciBRUkNvZGVSZWFkZXIkMSA9IHt9OwoKCXZhciBCYXJjb2RlRm9ybWF0JDEgPSB7fTsKCgkvKgoJICogRGlyZWN0IHBvcnQgdG8gVHlwZVNjcmlwdCBvZiBaWGluZyBieSBBZHJpYW4gVG/ImWPEgwoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFyY29kZUZvcm1hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogRW51bWVyYXRlcyBiYXJjb2RlIGZvcm1hdHMga25vd24gdG8gdGhpcyBwYWNrYWdlLiBQbGVhc2Uga2VlcCBhbHBoYWJldGl6ZWQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJhcmNvZGVGb3JtYXQ7CgkoZnVuY3Rpb24gKEJhcmNvZGVGb3JtYXQpIHsKCSAgICAvKiogQXp0ZWMgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJBWlRFQyJdID0gMF0gPSAiQVpURUMiOwoJICAgIC8qKiBDT0RBQkFSIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREFCQVIiXSA9IDFdID0gIkNPREFCQVIiOwoJICAgIC8qKiBDb2RlIDM5IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfMzkiXSA9IDJdID0gIkNPREVfMzkiOwoJICAgIC8qKiBDb2RlIDkzIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfOTMiXSA9IDNdID0gIkNPREVfOTMiOwoJICAgIC8qKiBDb2RlIDEyOCAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJDT0RFXzEyOCJdID0gNF0gPSAiQ09ERV8xMjgiOwoJICAgIC8qKiBEYXRhIE1hdHJpeCAyRCBiYXJjb2RlIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkRBVEFfTUFUUklYIl0gPSA1XSA9ICJEQVRBX01BVFJJWCI7CgkgICAgLyoqIEVBTi04IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkVBTl84Il0gPSA2XSA9ICJFQU5fOCI7CgkgICAgLyoqIEVBTi0xMyAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJFQU5fMTMiXSA9IDddID0gIkVBTl8xMyI7CgkgICAgLyoqIElURiAoSW50ZXJsZWF2ZWQgVHdvIG9mIEZpdmUpIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIklURiJdID0gOF0gPSAiSVRGIjsKCSAgICAvKiogTWF4aUNvZGUgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJNQVhJQ09ERSJdID0gOV0gPSAiTUFYSUNPREUiOwoJICAgIC8qKiBQREY0MTcgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUERGXzQxNyJdID0gMTBdID0gIlBERl80MTciOwoJICAgIC8qKiBRUiBDb2RlIDJEIGJhcmNvZGUgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUVJfQ09ERSJdID0gMTFdID0gIlFSX0NPREUiOwoJICAgIC8qKiBSU1MgMTQgKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlJTU18xNCJdID0gMTJdID0gIlJTU18xNCI7CgkgICAgLyoqIFJTUyBFWFBBTkRFRCAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUlNTX0VYUEFOREVEIl0gPSAxM10gPSAiUlNTX0VYUEFOREVEIjsKCSAgICAvKiogVVBDLUEgMUQgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiVVBDX0EiXSA9IDE0XSA9ICJVUENfQSI7CgkgICAgLyoqIFVQQy1FIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FIl0gPSAxNV0gPSAiVVBDX0UiOwoJICAgIC8qKiBVUEMvRUFOIGV4dGVuc2lvbiBmb3JtYXQuIE5vdCBhIHN0YW5kLWFsb25lIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSAxNl0gPSAiVVBDX0VBTl9FWFRFTlNJT04iOwoJfSkoQmFyY29kZUZvcm1hdCB8fCAoQmFyY29kZUZvcm1hdCA9IHt9KSk7CglCYXJjb2RlRm9ybWF0JDEuZGVmYXVsdCA9IEJhcmNvZGVGb3JtYXQ7CgoJdmFyIFJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIFN5c3RlbV8xJDEgPSBTeXN0ZW0kMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBiYXJjb2RlIHdpdGhpbiBhbiBpbWFnZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSB0ZXh0OiBzdHJpbmcsCgkgICAgLy8gICAgICAgICAgICAgICBVaW50OEFycmF5IHJhd0J5dGVzLAoJICAgIC8vICAgICAgICAgICAgICAgUmVzdWx0UG9jb25zdCByZXN1bHRQb2ludHM6IEludDMyQXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICBCYXJjb2RlRm9ybWF0IGZvcm1hdCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmVzdWx0UG9pbnRzLCBmb3JtYXQsIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IodGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgVWludDhBcnJheSByYXdCeXRlcywKCSAgICAvLyAgICAgICAgICAgICAgIFJlc3VsdFBvY29uc3QgcmVzdWx0UG9pbnRzOiBJbnQzMkFycmF5LAoJICAgIC8vICAgICAgICAgICAgICAgQmFyY29kZUZvcm1hdCBmb3JtYXQsCgkgICAgLy8gICAgICAgICAgICAgICBsb25nIHRpbWVzdGFtcCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoLAoJICAgIC8vICAgICAgICByZXN1bHRQb2ludHMsIGZvcm1hdCwgdGltZXN0YW1wKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBSZXN1bHQodGV4dCwgcmF3Qnl0ZXMsIG51bUJpdHMsIHJlc3VsdFBvaW50cywgZm9ybWF0LCB0aW1lc3RhbXApIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPT09IHZvaWQgMCkgeyBudW1CaXRzID0gcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoOyB9CgkgICAgICAgIGlmICh0aW1lc3RhbXAgPT09IHZvaWQgMCkgeyB0aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsgfQoJICAgICAgICB0aGlzLnRleHQgPSB0ZXh0OwoJICAgICAgICB0aGlzLnJhd0J5dGVzID0gcmF3Qnl0ZXM7CgkgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gcmVzdWx0UG9pbnRzOwoJICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdDsKCSAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7CgkgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbnVtQml0cyB8fCBudWxsID09PSBudW1CaXRzKSB7CgkgICAgICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IG51bGwgfHwgcmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMgPSByZXN1bHRQb2ludHM7CgkgICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0OwoJICAgICAgICB0aGlzLnJlc3VsdE1ldGFkYXRhID0gbnVsbDsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGltZXN0YW1wIHx8IG51bGwgPT09IHRpbWVzdGFtcCkgewoJICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IHRleHQgZW5jb2RlZCBieSB0aGUgYmFyY29kZQoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0VGV4dCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGV4dDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IGJ5dGVzIGVuY29kZWQgYnkgdGhlIGJhcmNvZGUsIGlmIGFwcGxpY2FibGUsIG90aGVyd2lzZSB7QGNvZGUgbnVsbH0KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0TnVtQml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMubnVtQml0czsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcG9pbnRzIHJlbGF0ZWQgdG8gdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGVzZSBhcmUgdHlwaWNhbGx5IHBvaW50cwoJICAgICAqICAgICAgICAgaWRlbnRpZnlpbmcgZmluZGVyIHBhdHRlcm5zIG9yIHRoZSBjb3JuZXJzIG9mIHRoZSBiYXJjb2RlLiBUaGUgZXhhY3QgbWVhbmluZyBpcwoJICAgICAqICAgICAgICAgc3BlY2lmaWMgdG8gdGhlIHR5cGUgb2YgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkLgoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0UmVzdWx0UG9pbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCYXJjb2RlRm9ybWF0fSByZXByZXNlbnRpbmcgdGhlIGZvcm1hdCBvZiB0aGUgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkCgkgICAgICovCgkgICAgUmVzdWx0LnByb3RvdHlwZS5nZXRCYXJjb2RlRm9ybWF0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBNYXB9IG1hcHBpbmcge0BsaW5rIFJlc3VsdE1ldGFkYXRhVHlwZX0ga2V5cyB0byB2YWx1ZXMuIE1heSBiZQoJICAgICAqICAge0Bjb2RlIG51bGx9LiBUaGlzIGNvbnRhaW5zIG9wdGlvbmFsIG1ldGFkYXRhIGFib3V0IHdoYXQgd2FzIGRldGVjdGVkIGFib3V0IHRoZSBiYXJjb2RlLAoJICAgICAqICAgbGlrZSBvcmllbnRhdGlvbi4KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJlc3VsdE1ldGFkYXRhID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRNZXRhZGF0YTsKCSAgICB9OwoJICAgIFJlc3VsdC5wcm90b3R5cGUucHV0TWV0YWRhdGEgPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHsKCSAgICAgICAgaWYgKHRoaXMucmVzdWx0TWV0YWRhdGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBuZXcgTWFwKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YS5zZXQodHlwZSwgdmFsdWUpOwoJICAgIH07CgkgICAgUmVzdWx0LnByb3RvdHlwZS5wdXRBbGxNZXRhZGF0YSA9IGZ1bmN0aW9uIChtZXRhZGF0YSkgewoJICAgICAgICBpZiAobWV0YWRhdGEgIT09IG51bGwpIHsKCSAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdE1ldGFkYXRhID09PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG1ldGFkYXRhOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG5ldyBNYXAobWV0YWRhdGEpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmFkZFJlc3VsdFBvaW50cyA9IGZ1bmN0aW9uIChuZXdQb2ludHMpIHsKCSAgICAgICAgdmFyIG9sZFBvaW50cyA9IHRoaXMucmVzdWx0UG9pbnRzOwoJICAgICAgICBpZiAob2xkUG9pbnRzID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50cyA9IG5ld1BvaW50czsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChuZXdQb2ludHMgIT09IG51bGwgJiYgbmV3UG9pbnRzLmxlbmd0aCA+IDApIHsKCSAgICAgICAgICAgIHZhciBhbGxQb2ludHMgPSBuZXcgQXJyYXkob2xkUG9pbnRzLmxlbmd0aCArIG5ld1BvaW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgU3lzdGVtXzEkMS5kZWZhdWx0LmFycmF5Y29weShvbGRQb2ludHMsIDAsIGFsbFBvaW50cywgMCwgb2xkUG9pbnRzLmxlbmd0aCk7CgkgICAgICAgICAgICBTeXN0ZW1fMSQxLmRlZmF1bHQuYXJyYXljb3B5KG5ld1BvaW50cywgMCwgYWxsUG9pbnRzLCBvbGRQb2ludHMubGVuZ3RoLCBuZXdQb2ludHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gYWxsUG9pbnRzOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFRpbWVzdGFtcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRleHQ7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0OwoJfSgpKTsKCVJlc3VsdCQxLmRlZmF1bHQgPSBSZXN1bHQ7CgoJdmFyIFJlc3VsdE1ldGFkYXRhVHlwZSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA4IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHRNZXRhZGF0YVR5cGUkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogUmVwcmVzZW50cyBzb21lIHR5cGUgb2YgbWV0YWRhdGEgYWJvdXQgdGhlIHJlc3VsdCBvZiB0aGUgZGVjb2RpbmcgdGhhdCB0aGUgZGVjb2RlcgoJICogd2lzaGVzIHRvIGNvbW11bmljYXRlIGJhY2sgdG8gdGhlIGNhbGxlci4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlOwoJKGZ1bmN0aW9uIChSZXN1bHRNZXRhZGF0YVR5cGUpIHsKCSAgICAvKioKCSAgICAgKiBVbnNwZWNpZmllZCwgYXBwbGljYXRpb24tc3BlY2lmaWMgbWV0YWRhdGEuIE1hcHMgdG8gYW4gdW5zcGVjaWZpZWQge0BsaW5rIE9iamVjdH0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiT1RIRVIiXSA9IDBdID0gIk9USEVSIjsKCSAgICAvKioKCSAgICAgKiBEZW5vdGVzIHRoZSBsaWtlbHkgYXBwcm94aW1hdGUgb3JpZW50YXRpb24gb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGlzIHZhbHVlCgkgICAgICogaXMgZ2l2ZW4gYXMgZGVncmVlcyByb3RhdGVkIGNsb2Nrd2lzZSBmcm9tIHRoZSBub3JtYWwsIHVwcmlnaHQgb3JpZW50YXRpb24uCgkgICAgICogRm9yIGV4YW1wbGUgYSAxRCBiYXJjb2RlIHdoaWNoIHdhcyBmb3VuZCBieSByZWFkaW5nIHRvcC10by1ib3R0b20gd291bGQgYmUKCSAgICAgKiBzYWlkIHRvIGhhdmUgb3JpZW50YXRpb24gIjkwIi4gVGhpcyBrZXkgbWFwcyB0byBhbiB7QGxpbmsgSW50ZWdlcn0gd2hvc2UKCSAgICAgKiB2YWx1ZSBpcyBpbiB0aGUgcmFuZ2UgWzAsMzYwKS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJPUklFTlRBVElPTiJdID0gMV0gPSAiT1JJRU5UQVRJT04iOwoJICAgIC8qKgoJICAgICAqIDxwPjJEIGJhcmNvZGUgZm9ybWF0cyB0eXBpY2FsbHkgZW5jb2RlIHRleHQsIGJ1dCBhbGxvdyBmb3IgYSBzb3J0IG9mICdieXRlIG1vZGUnCgkgICAgICogd2hpY2ggaXMgc29tZXRpbWVzIHVzZWQgdG8gZW5jb2RlIGJpbmFyeSBkYXRhLiBXaGlsZSB7QGxpbmsgUmVzdWx0fSBtYWtlcyBhdmFpbGFibGUKCSAgICAgKiB0aGUgY29tcGxldGUgcmF3IGJ5dGVzIGluIHRoZSBiYXJjb2RlIGZvciB0aGVzZSBmb3JtYXRzLCBpdCBkb2VzIG5vdCBvZmZlciB0aGUgYnl0ZXMKCSAgICAgKiBmcm9tIHRoZSBieXRlIHNlZ21lbnRzIGFsb25lLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWFwcyB0byBhIHtAbGluayBqYXZhLnV0aWwuTGlzdH0gb2YgYnl0ZSBhcnJheXMgY29ycmVzcG9uZGluZyB0byB0aGUKCSAgICAgKiByYXcgYnl0ZXMgaW4gdGhlIGJ5dGUgc2VnbWVudHMgaW4gdGhlIGJhcmNvZGUsIGluIG9yZGVyLjwvcD4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJCWVRFX1NFR01FTlRTIl0gPSAyXSA9ICJCWVRFX1NFR01FTlRTIjsKCSAgICAvKioKCSAgICAgKiBFcnJvciBjb3JyZWN0aW9uIGxldmVsIHVzZWQsIGlmIGFwcGxpY2FibGUuIFRoZSB2YWx1ZSB0eXBlIGRlcGVuZHMgb24gdGhlCgkgICAgICogZm9ybWF0LCBidXQgaXMgdHlwaWNhbGx5IGEgU3RyaW5nLgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiXSA9IDNdID0gIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHBlcmlvZGljYWxzLCBpbmRpY2F0ZXMgdGhlIGlzc3VlIG51bWJlciBhcyBhbiB7QGxpbmsgSW50ZWdlcn0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiSVNTVUVfTlVNQkVSIl0gPSA0XSA9ICJJU1NVRV9OVU1CRVIiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHByb2R1Y3RzLCBpbmRpY2F0ZXMgdGhlIHN1Z2dlc3RlZCByZXRhaWwgcHJpY2UgaW4gdGhlIGJhcmNvZGUgYXMgYQoJICAgICAqIGZvcm1hdHRlZCB7QGxpbmsgU3RyaW5nfS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJTVUdHRVNURURfUFJJQ0UiXSA9IDVdID0gIlNVR0dFU1RFRF9QUklDRSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBwb3NzaWJsZSBjb3VudHJ5IG9mIG1hbnVmYWN0dXJlIGFzIGEge0BsaW5rIFN0cmluZ30gZGVub3RpbmcgdGhlCgkgICAgICogSVNPIGNvdW50cnkgY29kZS4gU29tZSBtYXAgdG8gbXVsdGlwbGUgcG9zc2libGUgY291bnRyaWVzLCBsaWtlICJVUy9DQSIuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUE9TU0lCTEVfQ09VTlRSWSJdID0gNl0gPSAiUE9TU0lCTEVfQ09VTlRSWSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBleHRlbnNpb24gdGV4dAoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSA3XSA9ICJVUENfRUFOX0VYVEVOU0lPTiI7CgkgICAgLyoqCgkgICAgICogUERGNDE3LXNwZWNpZmljIG1ldGFkYXRhCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUERGNDE3X0VYVFJBX01FVEFEQVRBIl0gPSA4XSA9ICJQREY0MTdfRVhUUkFfTUVUQURBVEEiOwoJICAgIC8qKgoJICAgICAqIElmIHRoZSBjb2RlIGZvcm1hdCBzdXBwb3J0cyBzdHJ1Y3R1cmVkIGFwcGVuZCBhbmQgdGhlIGN1cnJlbnQgc2Nhbm5lZCBjb2RlIGlzIHBhcnQgb2Ygb25lIHRoZW4gdGhlCgkgICAgICogc2VxdWVuY2UgbnVtYmVyIGlzIGdpdmVuIHdpdGggaXQuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UiXSA9IDldID0gIlNUUlVDVFVSRURfQVBQRU5EX1NFUVVFTkNFIjsKCSAgICAvKioKCSAgICAgKiBJZiB0aGUgY29kZSBmb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCBhcHBlbmQgYW5kIHRoZSBjdXJyZW50IHNjYW5uZWQgY29kZSBpcyBwYXJ0IG9mIG9uZSB0aGVuIHRoZQoJICAgICAqIHBhcml0eSBpcyBnaXZlbiB3aXRoIGl0LgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSJdID0gMTBdID0gIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSI7Cgl9KShSZXN1bHRNZXRhZGF0YVR5cGUgfHwgKFJlc3VsdE1ldGFkYXRhVHlwZSA9IHt9KSk7CglSZXN1bHRNZXRhZGF0YVR5cGUkMS5kZWZhdWx0ID0gUmVzdWx0TWV0YWRhdGFUeXBlOwoKCXZhciBEZWNvZGVyJDEgPSB7fTsKCgl2YXIgQ2hlY2tzdW1FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkOCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGVja3N1bUV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNCA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBDaGVja3N1bUV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkOChDaGVja3N1bUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBDaGVja3N1bUV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5nZXRDaGVja3N1bUluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IENoZWNrc3VtRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5raW5kID0gJ0NoZWNrc3VtRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQ2hlY2tzdW1FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCkpOwoJQ2hlY2tzdW1FeGNlcHRpb24kMS5kZWZhdWx0ID0gQ2hlY2tzdW1FeGNlcHRpb247CgoJdmFyIEdlbmVyaWNHRiQxID0ge307CgoJdmFyIEdlbmVyaWNHRlBvbHkkMSA9IHt9OwoKCXZhciBBYnN0cmFjdEdlbmVyaWNHRiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYnN0cmFjdEdlbmVyaWNHRiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGNvbnRhaW5zIHV0aWxpdHkgbWV0aG9kcyBmb3IgcGVyZm9ybWluZyBtYXRoZW1hdGljYWwgb3BlcmF0aW9ucyBvdmVyCgkgKiB0aGUgR2Fsb2lzIEZpZWxkcy4gT3BlcmF0aW9ucyB1c2UgYSBnaXZlbiBwcmltaXRpdmUgcG9seW5vbWlhbCBpbiBjYWxjdWxhdGlvbnMuPC9wPgoJICoKCSAqIDxwPlRocm91Z2hvdXQgdGhpcyBwYWNrYWdlLCBlbGVtZW50cyBvZiB0aGUgR0YgYXJlIHJlcHJlc2VudGVkIGFzIGFuIHtAY29kZSBpbnR9CgkgKiBmb3IgY29udmVuaWVuY2UgYW5kIHNwZWVkIChidXQgYXQgdGhlIGNvc3Qgb2YgbWVtb3J5KS4KCSAqIDwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBEYXZpZCBPbGl2aWVyCgkgKi8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBYnN0cmFjdEdlbmVyaWNHRigpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiAyIHRvIHRoZSBwb3dlciBvZiBhIGluIEdGKHNpemUpCgkgICAgICovCgkgICAgQWJzdHJhY3RHZW5lcmljR0YucHJvdG90eXBlLmV4cCA9IGZ1bmN0aW9uIChhKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmV4cFRhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBiYXNlIDIgbG9nIG9mIGEgaW4gR0Yoc2l6ZSkKCSAgICAgKi8KCSAgICBBYnN0cmFjdEdlbmVyaWNHRi5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGEgLyppbnQqLykgewoJICAgICAgICBpZiAoYSA9PT0gMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0aGlzLmxvZ1RhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSW1wbGVtZW50cyBib3RoIGFkZGl0aW9uIGFuZCBzdWJ0cmFjdGlvbiAtLSB0aGV5IGFyZSB0aGUgc2FtZSBpbiBHRihzaXplKS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gc3VtL2RpZmZlcmVuY2Ugb2YgYSBhbmQgYgoJICAgICAqLwoJICAgIEFic3RyYWN0R2VuZXJpY0dGLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIGEgXiBiOwoJICAgIH07CgkgICAgcmV0dXJuIEFic3RyYWN0R2VuZXJpY0dGOwoJfSgpKTsKCUFic3RyYWN0R2VuZXJpY0dGJDEuZGVmYXVsdCA9IEFic3RyYWN0R2VuZXJpY0dGOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGUG9seSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5yZWVkc29sb21vbiB7Ki8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRl8xJDEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIFN5c3RlbV8xID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNCA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgcG9seW5vbWlhbCB3aG9zZSBjb2VmZmljaWVudHMgYXJlIGVsZW1lbnRzIG9mIGEgR0YuCgkgKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgaW1tdXRhYmxlLjwvcD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdlbmVyaWNHRlBvbHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGZpZWxkIHRoZSB7QGxpbmsgR2VuZXJpY0dGfSBpbnN0YW5jZSByZXByZXNlbnRpbmcgdGhlIGZpZWxkIHRvIHVzZQoJICAgICAqIHRvIHBlcmZvcm0gY29tcHV0YXRpb25zCgkgICAgICogQHBhcmFtIGNvZWZmaWNpZW50cyBjb2VmZmljaWVudHMgYXMgaW50cyByZXByZXNlbnRpbmcgZWxlbWVudHMgb2YgR0Yoc2l6ZSksIGFycmFuZ2VkCgkgICAgICogZnJvbSBtb3N0IHNpZ25pZmljYW50IChoaWdoZXN0LXBvd2VyIHRlcm0pIGNvZWZmaWNpZW50IHRvIGxlYXN0IHNpZ25pZmljYW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYXJndW1lbnQgaXMgbnVsbCBvciBlbXB0eSwKCSAgICAgKiBvciBpZiBsZWFkaW5nIGNvZWZmaWNpZW50IGlzIDAgYW5kIHRoaXMgaXMgbm90IGEKCSAgICAgKiBjb25zdGFudCBwb2x5bm9taWFsICh0aGF0IGlzLCBpdCBpcyBub3QgdGhlIG1vbm9taWFsICIwIikKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBHZW5lcmljR0ZQb2x5KGZpZWxkLCBjb2VmZmljaWVudHMpIHsKCSAgICAgICAgaWYgKGNvZWZmaWNpZW50cy5sZW5ndGggPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHNMZW5ndGggPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICBpZiAoY29lZmZpY2llbnRzTGVuZ3RoID4gMSAmJiBjb2VmZmljaWVudHNbMF0gPT09IDApIHsKCSAgICAgICAgICAgIC8vIExlYWRpbmcgdGVybSBtdXN0IGJlIG5vbi16ZXJvIGZvciBhbnl0aGluZyBleGNlcHQgdGhlIGNvbnN0YW50IHBvbHlub21pYWwgIjAiCgkgICAgICAgICAgICB2YXIgZmlyc3ROb25aZXJvID0gMTsKCSAgICAgICAgICAgIHdoaWxlIChmaXJzdE5vblplcm8gPCBjb2VmZmljaWVudHNMZW5ndGggJiYgY29lZmZpY2llbnRzW2ZpcnN0Tm9uWmVyb10gPT09IDApIHsKCSAgICAgICAgICAgICAgICBmaXJzdE5vblplcm8rKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChmaXJzdE5vblplcm8gPT09IGNvZWZmaWNpZW50c0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gSW50MzJBcnJheS5mcm9tKFswXSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICB0aGlzLmNvZWZmaWNpZW50cyA9IG5ldyBJbnQzMkFycmF5KGNvZWZmaWNpZW50c0xlbmd0aCAtIGZpcnN0Tm9uWmVybyk7CgkgICAgICAgICAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkoY29lZmZpY2llbnRzLCBmaXJzdE5vblplcm8sIHRoaXMuY29lZmZpY2llbnRzLCAwLCB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdGhpcy5jb2VmZmljaWVudHMgPSBjb2VmZmljaWVudHM7CgkgICAgICAgIH0KCSAgICB9CgkgICAgR2VuZXJpY0dGUG9seS5wcm90b3R5cGUuZ2V0Q29lZmZpY2llbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGRlZ3JlZSBvZiB0aGlzIHBvbHlub21pYWwKCSAgICAgKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5nZXREZWdyZWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGlzIHBvbHlub21pYWwgaXMgdGhlIG1vbm9taWFsICIwIgoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29lZmZpY2llbnRzWzBdID09PSAwOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBjb2VmZmljaWVudCBvZiB4XmRlZ3JlZSB0ZXJtIGluIHRoaXMgcG9seW5vbWlhbAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmdldENvZWZmaWNpZW50ID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50c1t0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxIC0gZGVncmVlXTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gZXZhbHVhdGlvbiBvZiB0aGlzIHBvbHlub21pYWwgYXQgYSBnaXZlbiBwb2ludAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmV2YWx1YXRlQXQgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHJldHVybiB0aGUgeF4wIGNvZWZmaWNpZW50CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgY29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciByZXN1bHQ7CgkgICAgICAgIGlmIChhID09PSAxKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHRoZSBzdW0gb2YgdGhlIGNvZWZmaWNpZW50cwoJICAgICAgICAgICAgcmVzdWx0ID0gMDsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7IGkgIT09IGxlbmd0aF8xOyBpKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgY29lZmZpY2llbnQgPSBjb2VmZmljaWVudHNbaV07CgkgICAgICAgICAgICAgICAgcmVzdWx0ID0gQWJzdHJhY3RHZW5lcmljR0ZfMSQxLmRlZmF1bHQuYWRkT3JTdWJ0cmFjdChyZXN1bHQsIGNvZWZmaWNpZW50KTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgICAgIH0KCSAgICAgICAgcmVzdWx0ID0gY29lZmZpY2llbnRzWzBdOwoJICAgICAgICB2YXIgc2l6ZSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICByZXN1bHQgPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KGZpZWxkLm11bHRpcGx5KGEsIHJlc3VsdCksIGNvZWZmaWNpZW50c1tpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiBvdGhlcjsKCSAgICAgICAgfQoJICAgICAgICBpZiAob3RoZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzbWFsbGVyQ29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBsYXJnZXJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIGlmIChzbWFsbGVyQ29lZmZpY2llbnRzLmxlbmd0aCA+IGxhcmdlckNvZWZmaWNpZW50cy5sZW5ndGgpIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gc21hbGxlckNvZWZmaWNpZW50czsKCSAgICAgICAgICAgIHNtYWxsZXJDb2VmZmljaWVudHMgPSBsYXJnZXJDb2VmZmljaWVudHM7CgkgICAgICAgICAgICBsYXJnZXJDb2VmZmljaWVudHMgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzdW1EaWZmID0gbmV3IEludDMyQXJyYXkobGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCk7CgkgICAgICAgIHZhciBsZW5ndGhEaWZmID0gbGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCAtIHNtYWxsZXJDb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICAvLyBDb3B5IGhpZ2gtb3JkZXIgdGVybXMgb25seSBmb3VuZCBpbiBoaWdoZXItZGVncmVlIHBvbHlub21pYWwncyBjb2VmZmljaWVudHMKCSAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkobGFyZ2VyQ29lZmZpY2llbnRzLCAwLCBzdW1EaWZmLCAwLCBsZW5ndGhEaWZmKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGxlbmd0aERpZmY7IGkgPCBsYXJnZXJDb2VmZmljaWVudHMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHN1bURpZmZbaV0gPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KHNtYWxsZXJDb2VmZmljaWVudHNbaSAtIGxlbmd0aERpZmZdLCBsYXJnZXJDb2VmZmljaWVudHNbaV0pOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seSh0aGlzLmZpZWxkLCBzdW1EaWZmKTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24gKG90aGVyKSB7CgkgICAgICAgIGlmICghdGhpcy5maWVsZC5lcXVhbHMob3RoZXIuZmllbGQpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdHZW5lcmljR0ZQb2x5cyBkbyBub3QgaGF2ZSBzYW1lIEdlbmVyaWNHRiBmaWVsZCcpOwoJICAgICAgICB9CgkgICAgICAgIGlmICh0aGlzLmlzWmVybygpIHx8IG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGFDb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIGFMZW5ndGggPSBhQ29lZmZpY2llbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBiTGVuZ3RoID0gYkNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoYUxlbmd0aCArIGJMZW5ndGggLSAxKTsKCSAgICAgICAgdmFyIGZpZWxkID0gdGhpcy5maWVsZDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhTGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBhQ29lZmYgPSBhQ29lZmZpY2llbnRzW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBiTGVuZ3RoOyBqKyspIHsKCSAgICAgICAgICAgICAgICBwcm9kdWN0W2kgKyBqXSA9IEFic3RyYWN0R2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocHJvZHVjdFtpICsgal0sIGZpZWxkLm11bHRpcGx5KGFDb2VmZiwgYkNvZWZmaWNpZW50c1tqXSkpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5tdWx0aXBseVNjYWxhciA9IGZ1bmN0aW9uIChzY2FsYXIgLyppbnQqLykgewoJICAgICAgICBpZiAoc2NhbGFyID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHNjYWxhciA9PT0gMSkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIHByb2R1Y3RbaV0gPSBmaWVsZC5tdWx0aXBseShjb2VmZmljaWVudHNbaV0sIHNjYWxhcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljR0ZQb2x5KGZpZWxkLCBwcm9kdWN0KTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5QnlNb25vbWlhbCA9IGZ1bmN0aW9uIChkZWdyZWUgLyppbnQqLywgY29lZmZpY2llbnQgLyppbnQqLykgewoJICAgICAgICBpZiAoZGVncmVlIDwgMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChjb2VmZmljaWVudCA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQuZ2V0WmVybygpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIHNpemUgPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICB2YXIgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KHNpemUgKyBkZWdyZWUpOwoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykgewoJICAgICAgICAgICAgcHJvZHVjdFtpXSA9IGZpZWxkLm11bHRpcGx5KGNvZWZmaWNpZW50c1tpXSwgY29lZmZpY2llbnQpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5kaXZpZGUgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdEaXZpZGUgYnkgMCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBxdW90aWVudCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHJlbWFpbmRlciA9IHRoaXM7CgkgICAgICAgIHZhciBkZW5vbWluYXRvckxlYWRpbmdUZXJtID0gb3RoZXIuZ2V0Q29lZmZpY2llbnQob3RoZXIuZ2V0RGVncmVlKCkpOwoJICAgICAgICB2YXIgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0gPSBmaWVsZC5pbnZlcnNlKGRlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICB3aGlsZSAocmVtYWluZGVyLmdldERlZ3JlZSgpID49IG90aGVyLmdldERlZ3JlZSgpICYmICFyZW1haW5kZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHZhciBkZWdyZWVEaWZmZXJlbmNlID0gcmVtYWluZGVyLmdldERlZ3JlZSgpIC0gb3RoZXIuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICB2YXIgc2NhbGUgPSBmaWVsZC5tdWx0aXBseShyZW1haW5kZXIuZ2V0Q29lZmZpY2llbnQocmVtYWluZGVyLmdldERlZ3JlZSgpKSwgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICAgICAgdmFyIHRlcm0gPSBvdGhlci5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZmVyZW5jZSwgc2NhbGUpOwoJICAgICAgICAgICAgdmFyIGl0ZXJhdGlvblF1b3RpZW50ID0gZmllbGQuYnVpbGRNb25vbWlhbChkZWdyZWVEaWZmZXJlbmNlLCBzY2FsZSk7CgkgICAgICAgICAgICBxdW90aWVudCA9IHF1b3RpZW50LmFkZE9yU3VidHJhY3QoaXRlcmF0aW9uUXVvdGllbnQpOwoJICAgICAgICAgICAgcmVtYWluZGVyID0gcmVtYWluZGVyLmFkZE9yU3VidHJhY3QodGVybSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFtxdW90aWVudCwgcmVtYWluZGVyXTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwoJICAgICAgICBmb3IgKHZhciBkZWdyZWUgPSB0aGlzLmdldERlZ3JlZSgpOyBkZWdyZWUgPj0gMDsgZGVncmVlLS0pIHsKCSAgICAgICAgICAgIHZhciBjb2VmZmljaWVudCA9IHRoaXMuZ2V0Q29lZmZpY2llbnQoZGVncmVlKTsKCSAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCA8IDApIHsKCSAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgLSAnOwoJICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudCA9IC1jb2VmZmljaWVudDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgKyAnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgPT09IDAgfHwgY29lZmZpY2llbnQgIT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhUG93ZXIgPSB0aGlzLmZpZWxkLmxvZyhjb2VmZmljaWVudCk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYVBvd2VyID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJzEnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFscGhhUG93ZXIgPT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnYSc7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJ2FeJzsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhbHBoYVBvd2VyOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGRlZ3JlZSA9PT0gMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICd4JzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAneF4nOwoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGRlZ3JlZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIEdlbmVyaWNHRlBvbHk7Cgl9KCkpOwoJR2VuZXJpY0dGUG9seSQxLmRlZmF1bHQgPSBHZW5lcmljR0ZQb2x5OwoKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkMyA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcml0aG1ldGljRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ3KEFyaXRobWV0aWNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJpdGhtZXRpY0V4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcml0aG1ldGljRXhjZXB0aW9uLmtpbmQgPSAnQXJpdGhtZXRpY0V4Y2VwdGlvbic7CgkgICAgcmV0dXJuIEFyaXRobWV0aWNFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCkpOwoJQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLmRlZmF1bHQgPSBBcml0aG1ldGljRXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uLnJlZWRzb2xvbW9uIHsqLwoJdmFyIEdlbmVyaWNHRlBvbHlfMSQxID0gR2VuZXJpY0dGUG9seSQxOwoJdmFyIEFic3RyYWN0R2VuZXJpY0dGXzEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIEludGVnZXJfMSQxID0gSW50ZWdlciQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDMgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uXzEgPSBBcml0aG1ldGljRXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgY29udGFpbnMgdXRpbGl0eSBtZXRob2RzIGZvciBwZXJmb3JtaW5nIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zIG92ZXIKCSAqIHRoZSBHYWxvaXMgRmllbGRzLiBPcGVyYXRpb25zIHVzZSBhIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsIGluIGNhbGN1bGF0aW9ucy48L3A+CgkgKgoJICogPHA+VGhyb3VnaG91dCB0aGlzIHBhY2thZ2UsIGVsZW1lbnRzIG9mIHRoZSBHRiBhcmUgcmVwcmVzZW50ZWQgYXMgYW4ge0Bjb2RlIGludH0KCSAqIGZvciBjb252ZW5pZW5jZSBhbmQgc3BlZWQgKGJ1dCBhdCB0aGUgY29zdCBvZiBtZW1vcnkpLgoJICogPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKiBAYXV0aG9yIERhdmlkIE9saXZpZXIKCSAqLwoJdmFyIEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkNihHZW5lcmljR0YsIF9zdXBlcik7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlIGEgcmVwcmVzZW50YXRpb24gb2YgR0Yoc2l6ZSkgdXNpbmcgdGhlIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsLgoJICAgICAqCgkgICAgICogQHBhcmFtIHByaW1pdGl2ZSBpcnJlZHVjaWJsZSBwb2x5bm9taWFsIHdob3NlIGNvZWZmaWNpZW50cyBhcmUgcmVwcmVzZW50ZWQgYnkKCSAgICAgKiAgdGhlIGJpdHMgb2YgYW4gaW50LCB3aGVyZSB0aGUgbGVhc3Qtc2lnbmlmaWNhbnQgYml0IHJlcHJlc2VudHMgdGhlIGNvbnN0YW50CgkgICAgICogIGNvZWZmaWNpZW50CgkgICAgICogQHBhcmFtIHNpemUgdGhlIHNpemUgb2YgdGhlIGZpZWxkCgkgICAgICogQHBhcmFtIGIgdGhlIGZhY3RvciBiIGluIHRoZSBnZW5lcmF0b3IgcG9seW5vbWlhbCBjYW4gYmUgMC0gb3IgMS1iYXNlZAoJICAgICAqICAoZyh4KSA9ICh4K2FeYikoeCthXihiKzEpKS4uLih4K2FeKGIrMnQtMSkpKS4KCSAgICAgKiAgSW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgMSwgYnV0IGZvciBRUiBjb2RlIGl0IGlzIDAuCgkgICAgICovCgkgICAgZnVuY3Rpb24gR2VuZXJpY0dGKHByaW1pdGl2ZSAvKmludCovLCBzaXplIC8qaW50Ki8sIGdlbmVyYXRvckJhc2UgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5wcmltaXRpdmUgPSBwcmltaXRpdmU7CgkgICAgICAgIF90aGlzLnNpemUgPSBzaXplOwoJICAgICAgICBfdGhpcy5nZW5lcmF0b3JCYXNlID0gZ2VuZXJhdG9yQmFzZTsKCSAgICAgICAgdmFyIGV4cFRhYmxlID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciB4ID0gMTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIGV4cFRhYmxlW2ldID0geDsKCSAgICAgICAgICAgIHggKj0gMjsgLy8gd2UncmUgYXNzdW1pbmcgdGhlIGdlbmVyYXRvciBhbHBoYSBpcyAyCgkgICAgICAgICAgICBpZiAoeCA+PSBzaXplKSB7CgkgICAgICAgICAgICAgICAgeCBePSBwcmltaXRpdmU7CgkgICAgICAgICAgICAgICAgeCAmPSBzaXplIC0gMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBfdGhpcy5leHBUYWJsZSA9IGV4cFRhYmxlOwoJICAgICAgICB2YXIgbG9nVGFibGUgPSBuZXcgSW50MzJBcnJheShzaXplKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplIC0gMTsgaSsrKSB7CgkgICAgICAgICAgICBsb2dUYWJsZVtleHBUYWJsZVtpXV0gPSBpOwoJICAgICAgICB9CgkgICAgICAgIF90aGlzLmxvZ1RhYmxlID0gbG9nVGFibGU7CgkgICAgICAgIC8vIGxvZ1RhYmxlWzBdID09IDAgYnV0IHRoaXMgc2hvdWxkIG5ldmVyIGJlIHVzZWQKCSAgICAgICAgX3RoaXMuemVybyA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzBdKSk7CgkgICAgICAgIF90aGlzLm9uZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzFdKSk7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRaZXJvID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRPbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm9uZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdGhlIG1vbm9taWFsIHJlcHJlc2VudGluZyBjb2VmZmljaWVudCAqIHheZGVncmVlCgkgICAgICovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5idWlsZE1vbm9taWFsID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovLCBjb2VmZmljaWVudCAvKmludCovKSB7CgkgICAgICAgIGlmIChkZWdyZWUgPCAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkMy5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvZWZmaWNpZW50ID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheShkZWdyZWUgKyAxKTsKCSAgICAgICAgY29lZmZpY2llbnRzWzBdID0gY29lZmZpY2llbnQ7CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seV8xJDEuZGVmYXVsdCh0aGlzLCBjb2VmZmljaWVudHMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIG9mIGEKCSAgICAgKi8KCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmludmVyc2UgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQXJpdGhtZXRpY0V4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5leHBUYWJsZVt0aGlzLnNpemUgLSB0aGlzLmxvZ1RhYmxlW2FdIC0gMV07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHByb2R1Y3Qgb2YgYSBhbmQgYiBpbiBHRihzaXplKQoJICAgICAqLwoJICAgIEdlbmVyaWNHRi5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGEgPT09IDAgfHwgYiA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDA7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZXhwVGFibGVbKHRoaXMubG9nVGFibGVbYV0gKyB0aGlzLmxvZ1RhYmxlW2JdKSAlICh0aGlzLnNpemUgLSAxKV07CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnNpemU7CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldEdlbmVyYXRvckJhc2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvckJhc2U7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICgnR0YoMHgnICsgSW50ZWdlcl8xJDEuZGVmYXVsdC50b0hleFN0cmluZyh0aGlzLnByaW1pdGl2ZSkgKyAnLCcgKyB0aGlzLnNpemUgKyAnKScpOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICByZXR1cm4gbyA9PT0gdGhpczsKCSAgICB9OwoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEyID0gbmV3IEdlbmVyaWNHRigweDEwNjksIDQwOTYsIDEpOyAvLyB4XjEyICsgeF42ICsgeF41ICsgeF4zICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEwID0gbmV3IEdlbmVyaWNHRigweDQwOSwgMTAyNCwgMSk7IC8vIHheMTAgKyB4XjMgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfNiA9IG5ldyBHZW5lcmljR0YoMHg0MywgNjQsIDEpOyAvLyB4XjYgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19QQVJBTSA9IG5ldyBHZW5lcmljR0YoMHgxMywgMTYsIDEpOyAvLyB4XjQgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5RUl9DT0RFX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTFkLCAyNTYsIDApOyAvLyB4XjggKyB4XjQgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkRBVEFfTUFUUklYX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTJkLCAyNTYsIDEpOyAvLyB4XjggKyB4XjUgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfOCA9IEdlbmVyaWNHRi5EQVRBX01BVFJJWF9GSUVMRF8yNTY7CgkgICAgR2VuZXJpY0dGLk1BWElDT0RFX0ZJRUxEXzY0ID0gR2VuZXJpY0dGLkFaVEVDX0RBVEFfNjsKCSAgICByZXR1cm4gR2VuZXJpY0dGOwoJfShBYnN0cmFjdEdlbmVyaWNHRl8xLmRlZmF1bHQpKTsKCUdlbmVyaWNHRiQxLmRlZmF1bHQgPSBHZW5lcmljR0Y7CgoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciQxID0ge307CgoJdmFyIFJlZWRTb2xvbW9uRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDUgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVlZFNvbG9tb25FeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDIgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgUmVlZFNvbG9tb25FeGNlcHRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDUoUmVlZFNvbG9tb25FeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gUmVlZFNvbG9tb25FeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgUmVlZFNvbG9tb25FeGNlcHRpb24ua2luZCA9ICdSZWVkU29sb21vbkV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQyLmRlZmF1bHQpKTsKCVJlZWRTb2xvbW9uRXhjZXB0aW9uJDEuZGVmYXVsdCA9IFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkNCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDEgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSWxsZWdhbFN0YXRlRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ0KElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLmtpbmQgPSAnSWxsZWdhbFN0YXRlRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gSWxsZWdhbFN0YXRlRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQxLmRlZmF1bHQpKTsKCUlsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBJbGxlZ2FsU3RhdGVFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWVkU29sb21vbkRlY29kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24ucmVlZHNvbG9tb24geyovCgl2YXIgR2VuZXJpY0dGXzEkMSA9IEdlbmVyaWNHRiQxOwoJdmFyIEdlbmVyaWNHRlBvbHlfMSA9IEdlbmVyaWNHRlBvbHkkMTsKCXZhciBSZWVkU29sb21vbkV4Y2VwdGlvbl8xID0gUmVlZFNvbG9tb25FeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMSA9IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5JbXBsZW1lbnRzIFJlZWQtU29sb21vbiBkZWNvZGluZywgYXMgdGhlIG5hbWUgaW1wbGllcy48L3A+CgkgKgoJICogPHA+VGhlIGFsZ29yaXRobSB3aWxsIG5vdCBiZSBleHBsYWluZWQgaGVyZSwgYnV0IHRoZSBmb2xsb3dpbmcgcmVmZXJlbmNlcyB3ZXJlIGhlbHBmdWwKCSAqIGluIGNyZWF0aW5nIHRoaXMgaW1wbGVtZW50YXRpb246PC9wPgoJICoKCSAqIDx1bD4KCSAqIDxsaT5CcnVjZSBNYWdncy4KCSAqIDxhIGhyZWY9Imh0dHA6Ly93d3cuY3MuY211LmVkdS9hZnMvY3MuY211LmVkdS9wcm9qZWN0L3BzY2ljby1ndXliL3JlYWx3b3JsZC93d3cvcnNfZGVjb2RlLnBzIj4KCSAqICJEZWNvZGluZyBSZWVkLVNvbG9tb24gQ29kZXMiPC9hPiAoc2VlIGRpc2N1c3Npb24gb2YgRm9ybmV5J3MgRm9ybXVsYSk8L2xpPgoJICogPGxpPkouSS4gSGFsbC4gPGEgaHJlZj0id3d3Lm10aC5tc3UuZWR1L35qaGFsbC9jbGFzc2VzL2NvZGVub3Rlcy9HUlMucGRmIj4KCSAqICJDaGFwdGVyIDUuIEdlbmVyYWxpemVkIFJlZWQtU29sb21vbiBDb2RlcyI8L2E+CgkgKiAoc2VlIGRpc2N1c3Npb24gb2YgRXVjbGlkZWFuIGFsZ29yaXRobSk8L2xpPgoJICogPC91bD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgV2lsbGlhbSBSdWNrbGlkZ2UKCSAqIEBhdXRob3Igc2FuZm9yZHNxdWlyZXMKCSAqLwoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBSZWVkU29sb21vbkRlY29kZXIoZmllbGQpIHsKCSAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkOwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5EZWNvZGVzIGdpdmVuIHNldCBvZiByZWNlaXZlZCBjb2Rld29yZHMsIHdoaWNoIGluY2x1ZGUgYm90aCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uCgkgICAgICogY29kZXdvcmRzLiBSZWFsbHksIHRoaXMgbWVhbnMgaXQgdXNlcyBSZWVkLVNvbG9tb24gdG8gZGV0ZWN0IGFuZCBjb3JyZWN0IGVycm9ycywgaW4tcGxhY2UsCgkgICAgICogaW4gdGhlIGlucHV0LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByZWNlaXZlZCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcwoJICAgICAqIEBwYXJhbSB0d29TIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBhdmFpbGFibGUKCSAgICAgKiBAdGhyb3dzIFJlZWRTb2xvbW9uRXhjZXB0aW9uIGlmIGRlY29kaW5nIGZhaWxzIGZvciBhbnkgcmVhc29uCgkgICAgICovCgkgICAgUmVlZFNvbG9tb25EZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAocmVjZWl2ZWQsIHR3b1MgLyppbnQqLykgewoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgcG9seSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgcmVjZWl2ZWQpOwoJICAgICAgICB2YXIgc3luZHJvbWVDb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheSh0d29TKTsKCSAgICAgICAgdmFyIG5vRXJyb3IgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR3b1M7IGkrKykgewoJICAgICAgICAgICAgdmFyIGV2YWxSZXN1bHQgPSBwb2x5LmV2YWx1YXRlQXQoZmllbGQuZXhwKGkgKyBmaWVsZC5nZXRHZW5lcmF0b3JCYXNlKCkpKTsKCSAgICAgICAgICAgIHN5bmRyb21lQ29lZmZpY2llbnRzW3N5bmRyb21lQ29lZmZpY2llbnRzLmxlbmd0aCAtIDEgLSBpXSA9IGV2YWxSZXN1bHQ7CgkgICAgICAgICAgICBpZiAoZXZhbFJlc3VsdCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIG5vRXJyb3IgPSBmYWxzZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAobm9FcnJvcikgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzeW5kcm9tZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgc3luZHJvbWVDb2VmZmljaWVudHMpOwoJICAgICAgICB2YXIgc2lnbWFPbWVnYSA9IHRoaXMucnVuRXVjbGlkZWFuQWxnb3JpdGhtKGZpZWxkLmJ1aWxkTW9ub21pYWwodHdvUywgMSksIHN5bmRyb21lLCB0d29TKTsKCSAgICAgICAgdmFyIHNpZ21hID0gc2lnbWFPbWVnYVswXTsKCSAgICAgICAgdmFyIG9tZWdhID0gc2lnbWFPbWVnYVsxXTsKCSAgICAgICAgdmFyIGVycm9yTG9jYXRpb25zID0gdGhpcy5maW5kRXJyb3JMb2NhdGlvbnMoc2lnbWEpOwoJICAgICAgICB2YXIgZXJyb3JNYWduaXR1ZGVzID0gdGhpcy5maW5kRXJyb3JNYWduaXR1ZGVzKG9tZWdhLCBlcnJvckxvY2F0aW9ucyk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXJyb3JMb2NhdGlvbnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHJlY2VpdmVkLmxlbmd0aCAtIDEgLSBmaWVsZC5sb2coZXJyb3JMb2NhdGlvbnNbaV0pOwoJICAgICAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ0JhZCBlcnJvciBsb2NhdGlvbicpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVjZWl2ZWRbcG9zaXRpb25dID0gR2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocmVjZWl2ZWRbcG9zaXRpb25dLCBlcnJvck1hZ25pdHVkZXNbaV0pOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZWVkU29sb21vbkRlY29kZXIucHJvdG90eXBlLnJ1bkV1Y2xpZGVhbkFsZ29yaXRobSA9IGZ1bmN0aW9uIChhLCBiLCBSIC8qaW50Ki8pIHsKCSAgICAgICAgLy8gQXNzdW1lIGEncyBkZWdyZWUgaXMgPj0gYidzCgkgICAgICAgIGlmIChhLmdldERlZ3JlZSgpIDwgYi5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgdmFyIHRlbXAgPSBhOwoJICAgICAgICAgICAgYSA9IGI7CgkgICAgICAgICAgICBiID0gdGVtcDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgckxhc3QgPSBhOwoJICAgICAgICB2YXIgciA9IGI7CgkgICAgICAgIHZhciB0TGFzdCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHQgPSBmaWVsZC5nZXRPbmUoKTsKCSAgICAgICAgLy8gUnVuIEV1Y2xpZGVhbiBhbGdvcml0aG0gdW50aWwgcidzIGRlZ3JlZSBpcyBsZXNzIHRoYW4gUi8yCgkgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IChSIC8gMiB8IDApKSB7CgkgICAgICAgICAgICB2YXIgckxhc3RMYXN0ID0gckxhc3Q7CgkgICAgICAgICAgICB2YXIgdExhc3RMYXN0ID0gdExhc3Q7CgkgICAgICAgICAgICByTGFzdCA9IHI7CgkgICAgICAgICAgICB0TGFzdCA9IHQ7CgkgICAgICAgICAgICAvLyBEaXZpZGUgckxhc3RMYXN0IGJ5IHJMYXN0LCB3aXRoIHF1b3RpZW50IGluIHEgYW5kIHJlbWFpbmRlciBpbiByCgkgICAgICAgICAgICBpZiAockxhc3QuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgICAgICAvLyBPb3BzLCBFdWNsaWRlYW4gYWxnb3JpdGhtIGFscmVhZHkgdGVybWluYXRlZD8KCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVlZFNvbG9tb25FeGNlcHRpb25fMS5kZWZhdWx0KCdyX3tpLTF9IHdhcyB6ZXJvJyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByID0gckxhc3RMYXN0OwoJICAgICAgICAgICAgdmFyIHEgPSBmaWVsZC5nZXRaZXJvKCk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3JMZWFkaW5nVGVybSA9IHJMYXN0LmdldENvZWZmaWNpZW50KHJMYXN0LmdldERlZ3JlZSgpKTsKCSAgICAgICAgICAgIHZhciBkbHRJbnZlcnNlID0gZmllbGQuaW52ZXJzZShkZW5vbWluYXRvckxlYWRpbmdUZXJtKTsKCSAgICAgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IHJMYXN0LmdldERlZ3JlZSgpICYmICFyLmlzWmVybygpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlZ3JlZURpZmYgPSByLmdldERlZ3JlZSgpIC0gckxhc3QuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gZmllbGQubXVsdGlwbHkoci5nZXRDb2VmZmljaWVudChyLmdldERlZ3JlZSgpKSwgZGx0SW52ZXJzZSk7CgkgICAgICAgICAgICAgICAgcSA9IHEuYWRkT3JTdWJ0cmFjdChmaWVsZC5idWlsZE1vbm9taWFsKGRlZ3JlZURpZmYsIHNjYWxlKSk7CgkgICAgICAgICAgICAgICAgciA9IHIuYWRkT3JTdWJ0cmFjdChyTGFzdC5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZiwgc2NhbGUpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHQgPSBxLm11bHRpcGx5KHRMYXN0KS5hZGRPclN1YnRyYWN0KHRMYXN0TGFzdCk7CgkgICAgICAgICAgICBpZiAoci5nZXREZWdyZWUoKSA+PSByTGFzdC5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMS5kZWZhdWx0KCdEaXZpc2lvbiBhbGdvcml0aG0gZmFpbGVkIHRvIHJlZHVjZSBwb2x5bm9taWFsPycpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBzaWdtYVRpbGRlQXRaZXJvID0gdC5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgaWYgKHNpZ21hVGlsZGVBdFplcm8gPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ3NpZ21hVGlsZGUoMCkgd2FzIHplcm8nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaW52ZXJzZSA9IGZpZWxkLmludmVyc2Uoc2lnbWFUaWxkZUF0WmVybyk7CgkgICAgICAgIHZhciBzaWdtYSA9IHQubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHZhciBvbWVnYSA9IHIubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHJldHVybiBbc2lnbWEsIG9tZWdhXTsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTG9jYXRpb25zID0gZnVuY3Rpb24gKGVycm9yTG9jYXRvcikgewoJICAgICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGFwcGxpY2F0aW9uIG9mIENoaWVuJ3Mgc2VhcmNoCgkgICAgICAgIHZhciBudW1FcnJvcnMgPSBlcnJvckxvY2F0b3IuZ2V0RGVncmVlKCk7CgkgICAgICAgIGlmIChudW1FcnJvcnMgPT09IDEpIHsgLy8gc2hvcnRjdXQKCSAgICAgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2Vycm9yTG9jYXRvci5nZXRDb2VmZmljaWVudCgxKV0pOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgSW50MzJBcnJheShudW1FcnJvcnMpOwoJICAgICAgICB2YXIgZSA9IDA7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZmllbGQuZ2V0U2l6ZSgpICYmIGUgPCBudW1FcnJvcnM7IGkrKykgewoJICAgICAgICAgICAgaWYgKGVycm9yTG9jYXRvci5ldmFsdWF0ZUF0KGkpID09PSAwKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0W2VdID0gZmllbGQuaW52ZXJzZShpKTsKCSAgICAgICAgICAgICAgICBlKys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGUgIT09IG51bUVycm9ycykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IFJlZWRTb2xvbW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnRXJyb3IgbG9jYXRvciBkZWdyZWUgZG9lcyBub3QgbWF0Y2ggbnVtYmVyIG9mIHJvb3RzJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTWFnbml0dWRlcyA9IGZ1bmN0aW9uIChlcnJvckV2YWx1YXRvciwgZXJyb3JMb2NhdGlvbnMpIHsKCSAgICAgICAgLy8gVGhpcyBpcyBkaXJlY3RseSBhcHBseWluZyBGb3JuZXkncyBGb3JtdWxhCgkgICAgICAgIHZhciBzID0gZXJyb3JMb2NhdGlvbnMubGVuZ3RoOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkocyk7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeGlJbnZlcnNlID0gZmllbGQuaW52ZXJzZShlcnJvckxvY2F0aW9uc1tpXSk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSAxOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaikgewoJICAgICAgICAgICAgICAgICAgICAvLyBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLAoJICAgICAgICAgICAgICAgICAgICAvLyAgICBHZW5lcmljR0YuYWRkT3JTdWJ0cmFjdCgxLCBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKSkpCgkgICAgICAgICAgICAgICAgICAgIC8vIEFib3ZlIHNob3VsZCB3b3JrIGJ1dCBmYWlscyBvbiBzb21lIEFwcGxlIGFuZCBMaW51eCBKREtzIGR1ZSB0byBhIEhvdHNwb3QgYnVnLgoJICAgICAgICAgICAgICAgICAgICAvLyBCZWxvdyBpcyBhIGZ1bm55LWxvb2tpbmcgd29ya2Fyb3VuZCBmcm9tIFN0ZXZlbiBQYXJrZXMKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm1QbHVzMSA9ICh0ZXJtICYgMHgxKSA9PT0gMCA/IHRlcm0gfCAxIDogdGVybSAmIH4xOwoJICAgICAgICAgICAgICAgICAgICBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLCB0ZXJtUGx1czEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KGVycm9yRXZhbHVhdG9yLmV2YWx1YXRlQXQoeGlJbnZlcnNlKSwgZmllbGQuaW52ZXJzZShkZW5vbWluYXRvcikpOwoJICAgICAgICAgICAgaWYgKGZpZWxkLmdldEdlbmVyYXRvckJhc2UoKSAhPT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KHJlc3VsdFtpXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRGVjb2RlcjsKCX0oKSk7CglSZWVkU29sb21vbkRlY29kZXIkMS5kZWZhdWx0ID0gUmVlZFNvbG9tb25EZWNvZGVyOwoKCXZhciBCaXRNYXRyaXhQYXJzZXIkMSA9IHt9OwoKCXZhciBWZXJzaW9uJDEgPSB7fTsKCgl2YXIgRm9ybWF0SW5mb3JtYXRpb24kMSA9IHt9OwoKCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IHt9OwoKCXZhciBBcmd1bWVudEV4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyQzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkMyhBcmd1bWVudEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBcmd1bWVudEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0FyZ3VtZW50RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQXJndW1lbnRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xLmRlZmF1bHQpKTsKCUFyZ3VtZW50RXhjZXB0aW9uJDEuZGVmYXVsdCA9IEFyZ3VtZW50RXhjZXB0aW9uOwoKCShmdW5jdGlvbiAoZXhwb3J0cykgewoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CglleHBvcnRzLkVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gdm9pZCAwOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbl8xID0gQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJdmFyIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzOwoJKGZ1bmN0aW9uIChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcykgewoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJMIl0gPSAwXSA9ICJMIjsKCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1tFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1siTSJdID0gMV0gPSAiTSI7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbIlEiXSA9IDJdID0gIlEiOwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJIIl0gPSAzXSA9ICJIIjsKCX0pKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyB8fCAoZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyA9IHt9KSk7CgkvKioKCSAqIDxwPlNlZSBJU08gMTgwMDQ6MjAwNiwgNi41LjEuIFRoaXMgZW51bSBlbmNhcHN1bGF0ZXMgdGhlIGZvdXIgZXJyb3IgY29ycmVjdGlvbiBsZXZlbHMKCSAqIGRlZmluZWQgYnkgdGhlIFFSIGNvZGUgc3RhbmRhcmQuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFcnJvckNvcnJlY3Rpb25MZXZlbCh2YWx1ZSwgc3RyaW5nVmFsdWUsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2V0KGJpdHMsIHRoaXMpOwoJICAgICAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5nZXRCaXRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIHN3aXRjaCAocykgewoJICAgICAgICAgICAgY2FzZSAnTCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5MOwoJICAgICAgICAgICAgY2FzZSAnTSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5NOwoJICAgICAgICAgICAgY2FzZSAnUSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5ROwoJICAgICAgICAgICAgY2FzZSAnSCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5IOwoJICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uXzEuZGVmYXVsdChzICsgJ25vdCBhdmFpbGFibGUnKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG90aGVyID0gbzsKCSAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IG90aGVyLnZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgaW50IGNvbnRhaW5pbmcgdGhlIHR3byBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSdzIGVycm9yIGNvcnJlY3Rpb24gbGV2ZWwKCSAgICAgKiBAcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsIHJlcHJlc2VudGluZyB0aGUgZW5jb2RlZCBlcnJvciBjb3JyZWN0aW9uIGxldmVsCgkgICAgICovCgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZm9yQml0cyA9IGZ1bmN0aW9uIChiaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGJpdHMgPCAwIHx8IGJpdHMgPj0gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuZ2V0KGJpdHMpOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX1ZBTFVFID0gbmV3IE1hcCgpOwoJICAgIC8qKiBMID0gfjclIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5MID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkwsICdMJywgMHgwMSk7CgkgICAgLyoqIE0gPSB+MTUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5NID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLk0sICdNJywgMHgwMCk7CgkgICAgLyoqIFEgPSB+MjUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5RID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLlEsICdRJywgMHgwMyk7CgkgICAgLyoqIEggPSB+MzAlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5IID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkgsICdIJywgMHgwMik7CgkgICAgcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IEVycm9yQ29ycmVjdGlvbkxldmVsOwoKCX0oRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRm9ybWF0SW5mb3JtYXRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbF8xID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWw7Cgl2YXIgSW50ZWdlcl8xID0gSW50ZWdlciQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBRUiBDb2RlJ3MgZm9ybWF0IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgdGhlIGRhdGEgbWFzayB1c2VkIGFuZAoJICogZXJyb3IgY29ycmVjdGlvbiBsZXZlbC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBzZWUgRGF0YU1hc2sKCSAqIEBzZWUgRXJyb3JDb3JyZWN0aW9uTGV2ZWwKCSAqLwoJdmFyIEZvcm1hdEluZm9ybWF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZvcm1hdEluZm9ybWF0aW9uKGZvcm1hdEluZm8gLyppbnQqLykgewoJICAgICAgICAvLyBCaXRzIDMsNAoJICAgICAgICB0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWxfMS5kZWZhdWx0LmZvckJpdHMoKGZvcm1hdEluZm8gPj4gMykgJiAweDAzKTsKCSAgICAgICAgLy8gQm90dG9tIDMgYml0cwoJICAgICAgICB0aGlzLmRhdGFNYXNrID0gLyooYnl0ZSkgKi8gKGZvcm1hdEluZm8gJiAweDA3KTsKCSAgICB9CgkgICAgRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyA9IGZ1bmN0aW9uIChhIC8qaW50Ki8sIGIgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gSW50ZWdlcl8xLmRlZmF1bHQuYml0Q291bnQoYSBeIGIpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIG1hc2tlZEZvcm1hdEluZm8xIGZvcm1hdCBpbmZvIGluZGljYXRvciwgd2l0aCBtYXNrIHN0aWxsIGFwcGxpZWQKCSAgICAgKiBAcGFyYW0gbWFza2VkRm9ybWF0SW5mbzIgc2Vjb25kIGNvcHkgb2Ygc2FtZSBpbmZvOyBib3RoIGFyZSBjaGVja2VkIGF0IHRoZSBzYW1lIHRpbWUKCSAgICAgKiAgdG8gZXN0YWJsaXNoIGJlc3QgbWF0Y2gKCSAgICAgKiBAcmV0dXJuIGluZm9ybWF0aW9uIGFib3V0IHRoZSBmb3JtYXQgaXQgc3BlY2lmaWVzLCBvciB7QGNvZGUgbnVsbH0KCSAgICAgKiAgaWYgZG9lc24ndCBzZWVtIHRvIG1hdGNoIGFueSBrbm93biBwYXR0ZXJuCgkgICAgICovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24uZGVjb2RlRm9ybWF0SW5mb3JtYXRpb24gPSBmdW5jdGlvbiAobWFza2VkRm9ybWF0SW5mbzEgLyppbnQqLywgbWFza2VkRm9ybWF0SW5mbzIgLyppbnQqLykgewoJICAgICAgICB2YXIgZm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uLmRvRGVjb2RlRm9ybWF0SW5mb3JtYXRpb24obWFza2VkRm9ybWF0SW5mbzEsIG1hc2tlZEZvcm1hdEluZm8yKTsKCSAgICAgICAgaWYgKGZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiBmb3JtYXRJbmZvOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNob3VsZCByZXR1cm4gbnVsbCwgYnV0LCBzb21lIFFSIGNvZGVzIGFwcGFyZW50bHkKCSAgICAgICAgLy8gZG8gbm90IG1hc2sgdGhpcyBpbmZvLiBUcnkgYWdhaW4gYnkgYWN0dWFsbHkgbWFza2luZyB0aGUgcGF0dGVybgoJICAgICAgICAvLyBmaXJzdAoJICAgICAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb24uZG9EZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihtYXNrZWRGb3JtYXRJbmZvMSBeIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX01BU0tfUVIsIG1hc2tlZEZvcm1hdEluZm8yIF4gRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUik7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5kb0RlY29kZUZvcm1hdEluZm9ybWF0aW9uID0gZnVuY3Rpb24gKG1hc2tlZEZvcm1hdEluZm8xIC8qaW50Ki8sIG1hc2tlZEZvcm1hdEluZm8yIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGVfMSwgX2E7CgkgICAgICAgIC8vIEZpbmQgdGhlIGludCBpbiBGT1JNQVRfSU5GT19ERUNPREVfTE9PS1VQIHdpdGggZmV3ZXN0IGJpdHMgZGlmZmVyaW5nCgkgICAgICAgIHZhciBiZXN0RGlmZmVyZW5jZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgICAgICB2YXIgYmVzdEZvcm1hdEluZm8gPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyQ2KEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVApLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlY29kZUluZm8gPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5mbyA9IGRlY29kZUluZm9bMF07CgkgICAgICAgICAgICAgICAgaWYgKHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8xIHx8IHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8yKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGV4YWN0IG1hdGNoCgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm9ybWF0SW5mb3JtYXRpb24oZGVjb2RlSW5mb1sxXSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBiaXRzRGlmZmVyZW5jZSA9IEZvcm1hdEluZm9ybWF0aW9uLm51bUJpdHNEaWZmZXJpbmcobWFza2VkRm9ybWF0SW5mbzEsIHRhcmdldEluZm8pOwoJICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgIGJlc3RGb3JtYXRJbmZvID0gZGVjb2RlSW5mb1sxXTsKCSAgICAgICAgICAgICAgICAgICAgYmVzdERpZmZlcmVuY2UgPSBiaXRzRGlmZmVyZW5jZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKG1hc2tlZEZvcm1hdEluZm8xICE9PSBtYXNrZWRGb3JtYXRJbmZvMikgewoJICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHRyeSB0aGUgb3RoZXIgb3B0aW9uCgkgICAgICAgICAgICAgICAgICAgIGJpdHNEaWZmZXJlbmNlID0gRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyhtYXNrZWRGb3JtYXRJbmZvMiwgdGFyZ2V0SW5mbyk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0Rm9ybWF0SW5mbyA9IGRlY29kZUluZm9bMV07CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSGFtbWluZyBkaXN0YW5jZSBvZiB0aGUgMzIgbWFza2VkIGNvZGVzIGlzIDcsIGJ5IGNvbnN0cnVjdGlvbiwgc28gPD0gMyBiaXRzCgkgICAgICAgIC8vIGRpZmZlcmluZyBtZWFucyB3ZSBmb3VuZCBhIG1hdGNoCgkgICAgICAgIGlmIChiZXN0RGlmZmVyZW5jZSA8PSAzKSB7CgkgICAgICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEluZm9ybWF0aW9uKGJlc3RGb3JtYXRJbmZvKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICB9OwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5nZXRFcnJvckNvcnJlY3Rpb25MZXZlbCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JDb3JyZWN0aW9uTGV2ZWw7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5wcm90b3R5cGUuZ2V0RGF0YU1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYXNrOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsLmdldEJpdHMoKSA8PCAzKSB8IHRoaXMuZGF0YU1hc2s7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24ucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBGb3JtYXRJbmZvcm1hdGlvbikpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvckNvcnJlY3Rpb25MZXZlbCA9PT0gb3RoZXIuZXJyb3JDb3JyZWN0aW9uTGV2ZWwgJiYKCSAgICAgICAgICAgIHRoaXMuZGF0YU1hc2sgPT09IG90aGVyLmRhdGFNYXNrOwoJICAgIH07CgkgICAgRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUiA9IDB4NTQxMjsKCSAgICAvKioKCSAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYsIEFubmV4IEMsIFRhYmxlIEMuMQoJICAgICAqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVAgPSBbCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1NDEyLCAweDAwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1MTI1LCAweDAxXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1RTdDLCAweDAyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1QjRCLCAweDAzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0NUY5LCAweDA0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0MENFLCAweDA1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0Rjk3LCAweDA2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0QUEwLCAweDA3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3N0M0LCAweDA4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3MkYzLCAweDA5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3REFBLCAweDBBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3ODlELCAweDBCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2NjJGLCAweDBDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2MzE4LCAweDBEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2QzQxLCAweDBFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2OTc2LCAweDBGXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxNjg5LCAweDEwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxM0JFLCAweDExXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxQ0U3LCAweDEyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxOUQwLCAweDEzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwNzYyLCAweDE0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwMjU1LCAweDE1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwRDBDLCAweDE2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwODNCLCAweDE3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzNTVGLCAweDE4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzMDY4LCAweDE5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzRjMxLCAweDFBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzQTA2LCAweDFCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyNEI0LCAweDFDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyMTgzLCAweDFEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyRURBLCAweDFFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyQkVELCAweDFGXSksCgkgICAgXTsKCSAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb247Cgl9KCkpOwoJRm9ybWF0SW5mb3JtYXRpb24kMS5kZWZhdWx0ID0gRm9ybWF0SW5mb3JtYXRpb247CgoJdmFyIEVDQmxvY2tzJDEgPSB7fTsKCgl2YXIgX192YWx1ZXMkNSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0Jsb2NrcyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHNldCBvZiBlcnJvci1jb3JyZWN0aW9uIGJsb2NrcyBpbiBvbmUgc3ltYm9sIHZlcnNpb24uIE1vc3QgdmVyc2lvbnMgd2lsbAoJICogdXNlIGJsb2NrcyBvZiBkaWZmZXJpbmcgc2l6ZXMgd2l0aGluIG9uZSB2ZXJzaW9uLCBzbywgdGhpcyBlbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yCgkgKiBlYWNoIHNldCBvZiBibG9ja3MuIEl0IGFsc28gaG9sZHMgdGhlIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBwZXIgYmxvY2sgc2luY2UgaXQKCSAqIHdpbGwgYmUgdGhlIHNhbWUgYWNyb3NzIGFsbCBibG9ja3Mgd2l0aGluIG9uZSB2ZXJzaW9uLjwvcD4KCSAqLwoJdmFyIEVDQmxvY2tzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEVDQmxvY2tzKGVjQ29kZXdvcmRzUGVyQmxvY2sgLyppbnQqLykgewoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayA9IGVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgICAgIHRoaXMuZWNCbG9ja3MgPSBlY0Jsb2NrczsKCSAgICB9CgkgICAgRUNCbG9ja3MucHJvdG90eXBlLmdldEVDQ29kZXdvcmRzUGVyQmxvY2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0TnVtQmxvY2tzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIHRvdGFsID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tzID0gdGhpcy5lY0Jsb2NrczsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIGVjQmxvY2tzXzEgPSBfX3ZhbHVlcyQ1KGVjQmxvY2tzKSwgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCk7ICFlY0Jsb2Nrc18xXzEuZG9uZTsgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tzXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbCArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2Nrc18xXzEgJiYgIWVjQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGVjQmxvY2tzXzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2Nrc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdG90YWw7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0VG90YWxFQ0NvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayAqIHRoaXMuZ2V0TnVtQmxvY2tzKCk7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0RUNCbG9ja3MgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQmxvY2tzOwoJICAgIH07CgkgICAgcmV0dXJuIEVDQmxvY2tzOwoJfSgpKTsKCUVDQmxvY2tzJDEuZGVmYXVsdCA9IEVDQmxvY2tzOwoKCXZhciBFQ0IkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yIG9uZSBlcnJvci1jb3JyZWN0aW9uIGJsb2NrIGluIG9uZSBzeW1ib2wgdmVyc2lvbi4KCSAqIFRoaXMgaW5jbHVkZXMgdGhlIG51bWJlciBvZiBkYXRhIGNvZGV3b3JkcywgYW5kIHRoZSBudW1iZXIgb2YgdGltZXMgYSBibG9jayB3aXRoIHRoZXNlCgkgKiBwYXJhbWV0ZXJzIGlzIHVzZWQgY29uc2VjdXRpdmVseSBpbiB0aGUgUVIgY29kZSB2ZXJzaW9uJ3MgZm9ybWF0LjwvcD4KCSAqLwoJdmFyIEVDQiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFQ0IoY291bnQgLyppbnQqLywgZGF0YUNvZGV3b3JkcyAvKmludCovKSB7CgkgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDsKCSAgICAgICAgdGhpcy5kYXRhQ29kZXdvcmRzID0gZGF0YUNvZGV3b3JkczsKCSAgICB9CgkgICAgRUNCLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY291bnQ7CgkgICAgfTsKCSAgICBFQ0IucHJvdG90eXBlLmdldERhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICByZXR1cm4gRUNCOwoJfSgpKTsKCUVDQiQxLmRlZmF1bHQgPSBFQ0I7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX3ZhbHVlcyQ0ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlcnNpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBCaXRNYXRyaXhfMSQzID0gQml0TWF0cml4JDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSQxID0gRm9ybWF0SW5mb3JtYXRpb24kMTsKCXZhciBFQ0Jsb2Nrc18xID0gRUNCbG9ja3MkMTsKCXZhciBFQ0JfMSA9IEVDQiQxOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDIgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQyID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIFNlZSBJU08gMTgwMDQ6MjAwNiBBbm5leCBECgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFZlcnNpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyIC8qaW50Ki8sIGFsaWdubWVudFBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmVyc2lvbk51bWJlciA9IHZlcnNpb25OdW1iZXI7CgkgICAgICAgIHRoaXMuYWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczsKCSAgICAgICAgdGhpcy5lY0Jsb2NrcyA9IGVjQmxvY2tzOwoJICAgICAgICB2YXIgdG90YWwgPSAwOwoJICAgICAgICB2YXIgZWNDb2Rld29yZHMgPSBlY0Jsb2Nrc1swXS5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIHZhciBlY2JBcnJheSA9IGVjQmxvY2tzWzBdLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY2JBcnJheV8xID0gX192YWx1ZXMkNChlY2JBcnJheSksIGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpOyAhZWNiQXJyYXlfMV8xLmRvbmU7IGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVjQmxvY2sgPSBlY2JBcnJheV8xXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdG90YWwgKz0gZWNCbG9jay5nZXRDb3VudCgpICogKGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpICsgZWNDb2Rld29yZHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoZWNiQXJyYXlfMV8xICYmICFlY2JBcnJheV8xXzEuZG9uZSAmJiAoX2EgPSBlY2JBcnJheV8xLnJldHVybikpIF9hLmNhbGwoZWNiQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy50b3RhbENvZGV3b3JkcyA9IHRvdGFsOwoJICAgIH0KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5nZXRWZXJzaW9uTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0VG90YWxDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRvdGFsQ29kZXdvcmRzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDE3ICsgNCAqIHRoaXMudmVyc2lvbk51bWJlcjsKCSAgICB9OwoJICAgIFZlcnNpb24ucHJvdG90eXBlLmdldEVDQmxvY2tzRm9yTGV2ZWwgPSBmdW5jdGlvbiAoZWNMZXZlbCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0Jsb2Nrc1tlY0xldmVsLmdldFZhbHVlKCldOwoJICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogb3JpZ2luYWwgd2FzIHVzaW5nIG9yZGluYWwsIGFuZCB1c2luZyB0aGUgb3JkZXIgb2YgbGV2ZWxzIGFzIGRlZmluZWQgaW4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwgZW51bSAoTE1RSCkKCSAgICAgICAgLy8gSSB3aWxsIHVzZSB0aGUgZGlyZWN0IHZhbHVlIGZyb20gRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXMgZW51bSB3aGljaCBpbiB0eXBlc2NyaXB0IGdvZXMgdG8gYSBudW1iZXIKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkRlZHVjZXMgdmVyc2lvbiBpbmZvcm1hdGlvbiBwdXJlbHkgZnJvbSBRUiBDb2RlIGRpbWVuc2lvbnMuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gaW4gbW9kdWxlcwoJICAgICAqIEByZXR1cm4gVmVyc2lvbiBmb3IgYSBRUiBDb2RlIG9mIHRoYXQgZGltZW5zaW9uCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCAxIG1vZCA0CgkgICAgICovCgkgICAgVmVyc2lvbi5nZXRQcm92aXNpb25hbFZlcnNpb25Gb3JEaW1lbnNpb24gPSBmdW5jdGlvbiAoZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiAlIDQgIT09IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVyc2lvbkZvck51bWJlcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlciA9IGZ1bmN0aW9uICh2ZXJzaW9uTnVtYmVyIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPCAxIHx8IHZlcnNpb25OdW1iZXIgPiA0MCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDIuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBWZXJzaW9uLlZFUlNJT05TW3ZlcnNpb25OdW1iZXIgLSAxXTsKCSAgICB9OwoJICAgIFZlcnNpb24uZGVjb2RlVmVyc2lvbkluZm9ybWF0aW9uID0gZnVuY3Rpb24gKHZlcnNpb25CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGJlc3REaWZmZXJlbmNlID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHZhciBiZXN0VmVyc2lvbiA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVmVyc2lvbi5WRVJTSU9OX0RFQ09ERV9JTkZPLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgdGFyZ2V0VmVyc2lvbiA9IFZlcnNpb24uVkVSU0lPTl9ERUNPREVfSU5GT1tpXTsKCSAgICAgICAgICAgIC8vIERvIHRoZSB2ZXJzaW9uIGluZm8gYml0cyBtYXRjaCBleGFjdGx5PyBkb25lLgoJICAgICAgICAgICAgaWYgKHRhcmdldFZlcnNpb24gPT09IHZlcnNpb25CaXRzKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlcihpICsgNyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBPdGhlcndpc2Ugc2VlIGlmIHRoaXMgaXMgdGhlIGNsb3Nlc3QgdG8gYSByZWFsIHZlcnNpb24gaW5mbyBiaXQgc3RyaW5nCgkgICAgICAgICAgICAvLyB3ZSBoYXZlIHNlZW4gc28gZmFyCgkgICAgICAgICAgICB2YXIgYml0c0RpZmZlcmVuY2UgPSBGb3JtYXRJbmZvcm1hdGlvbl8xJDEuZGVmYXVsdC5udW1CaXRzRGlmZmVyaW5nKHZlcnNpb25CaXRzLCB0YXJnZXRWZXJzaW9uKTsKCSAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgYmVzdFZlcnNpb24gPSBpICsgNzsKCSAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFdlIGNhbiB0b2xlcmF0ZSB1cCB0byAzIGJpdHMgb2YgZXJyb3Igc2luY2Ugbm8gdHdvIHZlcnNpb24gaW5mbyBjb2Rld29yZHMgd2lsbAoJICAgICAgICAvLyBkaWZmZXIgaW4gbGVzcyB0aGFuIDggYml0cy4KCSAgICAgICAgaWYgKGJlc3REaWZmZXJlbmNlIDw9IDMpIHsKCSAgICAgICAgICAgIHJldHVybiBWZXJzaW9uLmdldFZlcnNpb25Gb3JOdW1iZXIoYmVzdFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGRpZG4ndCBmaW5kIGEgY2xvc2UgZW5vdWdoIG1hdGNoLCBmYWlsCgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIElTTyAxODAwNDoyMDA2IEFubmV4IEUKCSAgICAgKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5idWlsZEZ1bmN0aW9uUGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpOwoJICAgICAgICB2YXIgYml0TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDMuZGVmYXVsdChkaW1lbnNpb24pOwoJICAgICAgICAvLyBUb3AgbGVmdCBmaW5kZXIgcGF0dGVybiArIHNlcGFyYXRvciArIGZvcm1hdAoJICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKDAsIDAsIDksIDkpOwoJICAgICAgICAvLyBUb3AgcmlnaHQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbihkaW1lbnNpb24gLSA4LCAwLCA4LCA5KTsKCSAgICAgICAgLy8gQm90dG9tIGxlZnQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSA4LCA5LCA4KTsKCSAgICAgICAgLy8gQWxpZ25tZW50IHBhdHRlcm5zCgkgICAgICAgIHZhciBtYXggPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHgrKykgewoJICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzW3hdIC0gMjsKCSAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgbWF4OyB5KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoKHggPT09IDAgJiYgKHkgPT09IDAgfHwgeSA9PT0gbWF4IC0gMSkpIHx8ICh4ID09PSBtYXggLSAxICYmIHkgPT09IDApKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE5vIGFsaWdubWVudCBwYXR0ZXJucyBuZWFyIHRoZSB0aHJlZSBmaW5kZXIgcGF0dGVybnMKCSAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24odGhpcy5hbGlnbm1lbnRQYXR0ZXJuQ2VudGVyc1t5XSAtIDIsIGksIDUsIDUpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFZlcnRpY2FsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oNiwgOSwgMSwgZGltZW5zaW9uIC0gMTcpOwoJICAgICAgICAvLyBIb3Jpem9udGFsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oOSwgNiwgZGltZW5zaW9uIC0gMTcsIDEpOwoJICAgICAgICBpZiAodGhpcy52ZXJzaW9uTnVtYmVyID4gNikgewoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCB0b3AgcmlnaHQKCSAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oZGltZW5zaW9uIC0gMTEsIDAsIDMsIDYpOwoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCBib3R0b20gbGVmdAoJICAgICAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSAxMSwgNiwgMyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICcnICsgdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgQW5uZXggRC4KCSAgICAgICAqIEVsZW1lbnQgaSByZXByZXNlbnRzIHRoZSByYXcgdmVyc2lvbiBiaXRzIHRoYXQgc3BlY2lmeSB2ZXJzaW9uIGkgKyA3CgkgICAgICAgKi8KCSAgICBWZXJzaW9uLlZFUlNJT05fREVDT0RFX0lORk8gPSBJbnQzMkFycmF5LmZyb20oWwoJICAgICAgICAweDA3Qzk0LCAweDA4NUJDLCAweDA5QTk5LCAweDBBNEQzLCAweDBCQkY2LAoJICAgICAgICAweDBDNzYyLCAweDBEODQ3LCAweDBFNjBELCAweDBGOTI4LCAweDEwQjc4LAoJICAgICAgICAweDExNDVELCAweDEyQTE3LCAweDEzNTMyLCAweDE0OUE2LCAweDE1NjgzLAoJICAgICAgICAweDE2OEM5LCAweDE3N0VDLCAweDE4RUM0LCAweDE5MUUxLCAweDFBRkFCLAoJICAgICAgICAweDFCMDhFLCAweDFDQzFBLCAweDFEMzNGLCAweDFFRDc1LCAweDFGMjUwLAoJICAgICAgICAweDIwOUQ1LCAweDIxNkYwLCAweDIyOEJBLCAweDIzNzlGLCAweDI0QjBCLAoJICAgICAgICAweDI1NDJFLCAweDI2QTY0LCAweDI3NTQxLCAweDI4QzY5CgkgICAgXSk7CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgNi41LjEgVGFibGUgOQoJICAgICAgICovCgkgICAgVmVyc2lvbi5WRVJTSU9OUyA9IFsKCSAgICAgICAgbmV3IFZlcnNpb24oMSwgbmV3IEludDMyQXJyYXkoMCksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOSkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMiwgSW50MzJBcnJheS5mcm9tKFs2LCAxOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDEwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMywgSW50MzJBcnJheS5mcm9tKFs2LCAyMl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE1LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1NSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA4MCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA5KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCA0MykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTIpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDYsIEludDMyQXJyYXkuZnJvbShbNiwgMzRdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDcsIEludDMyQXJyYXkuZnJvbShbNiwgMjIsIDM4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDc4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDMxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNCkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNCwgNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMzgpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzOSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxOCksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE5KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDksIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDQ2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAzNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDM3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTAsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDUwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDY4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxOSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDIwKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDExLCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA4MSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDUxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTIsIEludDMyQXJyYXkuZnJvbShbNiwgMzIsIDU4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDkyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMzYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDEzLCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2Ml0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMzcpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDEyLCAxMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDYsIDY2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA0MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDQxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDE3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNSwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDgsIDcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDg3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgODgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgNDEpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNiwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDk4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0NikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTkpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyMCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTcsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxMDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE4LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NiwgODJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIwKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDQzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxOSwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE5LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1OCwgODZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTE0KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDQ0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDQ1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDE3LCAyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDE0KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMCwgSW50MzJBcnJheS5mcm9tKFs2LCAzNCwgNjIsIDkwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDEwNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0MSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIxLCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1MCwgNzIsIDk0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDIpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIyLCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1MCwgNzQsIDk4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDExMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMywgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIxKSwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI0LCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1NCwgODAsIDEwNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTcpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMwLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE3KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyNSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMTA2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTA3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMjYsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzMsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI3LCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2MiwgOTAsIDExOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0LCA5OCwgMTIyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDIsIDEyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTYpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjEsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgzNywgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTIsIDc4LCAxMDQsIDEzMF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCA0NyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjMsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjUsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTYsIDgyLCAxMDgsIDEzNF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxMywgMTE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQyLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDI4LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzIsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzhdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzUsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDM1LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzMsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzQsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNDQsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NCwgNzgsIDEwMiwgMTI2LCAxNTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDEyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMiwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgNDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzYsIEludDMyQXJyYXkuZnJvbShbNiwgMjQsIDUwLCA3NiwgMTAyLCAxMjgsIDE1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMjEpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDY0LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzcsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDU0LCA4MCwgMTA2LCAxMzIsIDE1OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIzKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDI5LCA0NiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCA0NykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0OSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjQsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNDYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzOCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTAsIDEzNiwgMTYyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE4LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzIsIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ4LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM5LCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1NCwgODIsIDExMCwgMTM4LCAxNjZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjAsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCg0MCwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNjcsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig0MCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2LCAxMTQsIDE0MiwgMTcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxMTgpLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyMCwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCg2MSwgMTYpKSkKCSAgICBdOwoJICAgIHJldHVybiBWZXJzaW9uOwoJfSgpKTsKCVZlcnNpb24kMS5kZWZhdWx0ID0gVmVyc2lvbjsKCgl2YXIgRGF0YU1hc2sgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5EYXRhTWFza1ZhbHVlcyA9IHZvaWQgMDsKCXZhciBEYXRhTWFza1ZhbHVlczsKCShmdW5jdGlvbiAoRGF0YU1hc2tWYWx1ZXMpIHsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAwMCJdID0gMF0gPSAiREFUQV9NQVNLXzAwMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18wMDEiXSA9IDFdID0gIkRBVEFfTUFTS18wMDEiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMDEwIl0gPSAyXSA9ICJEQVRBX01BU0tfMDEwIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAxMSJdID0gM10gPSAiREFUQV9NQVNLXzAxMSI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMDAiXSA9IDRdID0gIkRBVEFfTUFTS18xMDAiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMTAxIl0gPSA1XSA9ICJEQVRBX01BU0tfMTAxIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzExMCJdID0gNl0gPSAiREFUQV9NQVNLXzExMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMTEiXSA9IDddID0gIkRBVEFfTUFTS18xMTEiOwoJfSkoRGF0YU1hc2tWYWx1ZXMgPSBleHBvcnRzLkRhdGFNYXNrVmFsdWVzIHx8IChleHBvcnRzLkRhdGFNYXNrVmFsdWVzID0ge30pKTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGRhdGEgbWFza3MgZm9yIHRoZSBkYXRhIGJpdHMgaW4gYSBRUiBjb2RlLCBwZXIgSVNPIDE4MDA0OjIwMDYgNi44LiBJbXBsZW1lbnRhdGlvbnMKCSAqIG9mIHRoaXMgY2xhc3MgY2FuIHVuLW1hc2sgYSByYXcgQml0TWF0cml4LiBGb3Igc2ltcGxpY2l0eSwgdGhleSB3aWxsIHVubWFzayB0aGUgZW50aXJlIEJpdE1hdHJpeCwKCSAqIGluY2x1ZGluZyBhcmVhcyB1c2VkIGZvciBmaW5kZXIgcGF0dGVybnMsIHRpbWluZyBwYXR0ZXJucywgZXRjLiBUaGVzZSBhcmVhcyBzaG91bGQgYmUgdW51c2VkCgkgKiBhZnRlciB0aGUgcG9pbnQgdGhleSBhcmUgdW5tYXNrZWQgYW55d2F5LjwvcD4KCSAqCgkgKiA8cD5Ob3RlIHRoYXQgdGhlIGRpYWdyYW0gaW4gc2VjdGlvbiA2LjguMSBpcyBtaXNsZWFkaW5nIHNpbmNlIGl0IGluZGljYXRlcyB0aGF0IGkgaXMgY29sdW1uIHBvc2l0aW9uCgkgKiBhbmQgaiBpcyByb3cgcG9zaXRpb24uIEluIGZhY3QsIGFzIHRoZSB0ZXh0IHNheXMsIGkgaXMgcm93IHBvc2l0aW9uIGFuZCBqIGlzIGNvbHVtbiBwb3NpdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFNYXNrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIFNlZSBJU08gMTgwMDQ6MjAwNiA2LjguMQoJICAgIGZ1bmN0aW9uIERhdGFNYXNrKHZhbHVlLCBpc01hc2tlZCkgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuaXNNYXNrZWQgPSBpc01hc2tlZDsKCSAgICB9CgkgICAgLy8gRW5kIG9mIGVudW0gY29uc3RhbnRzLgoJICAgIC8qKgoJICAgICAqIDxwPkltcGxlbWVudGF0aW9ucyBvZiB0aGlzIG1ldGhvZCByZXZlcnNlIHRoZSBkYXRhIG1hc2tpbmcgcHJvY2VzcyBhcHBsaWVkIHRvIGEgUVIgQ29kZSBhbmQKCSAgICAgKiBtYWtlIGl0cyBiaXRzIHJlYWR5IHRvIHJlYWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGJpdHMgcmVwcmVzZW50YXRpb24gb2YgUVIgQ29kZSBiaXRzCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gb2YgUVIgQ29kZSwgcmVwcmVzZW50ZWQgYnkgYml0cywgYmVpbmcgdW5tYXNrZWQKCSAgICAgKi8KCSAgICBEYXRhTWFzay5wcm90b3R5cGUudW5tYXNrQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGRpbWVuc2lvbiAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGltZW5zaW9uOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc2tlZChpLCBqKSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLmZsaXAoaiwgaSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBEYXRhTWFzay52YWx1ZXMgPSBuZXcgTWFwKFsKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDAwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeCArIHkpIG1vZCAyID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDAwLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMCwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoKGkgKyBqKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeCBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMDEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgJiAweDAxKSA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMDEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoIHkgbW9kIDMgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuIGogJSAzID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKHggKyB5KSBtb2QgMyA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAxMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgKyBqKSAlIDMgPT09IDA7IH0pXSwKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDEwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeC8yICsgeS8zKSBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMCwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMDAsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKChNYXRoLmZsb29yKGkgLyAyKSArIE1hdGguZmxvb3IoaiAvIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeHkgbW9kIDIgKyB4eSBtb2QgMyA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2ID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTAxLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMSwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoaSAqIGopICUgNiA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMTEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoICh4eSBtb2QgMiArIHh5IG1vZCAzKSBtb2QgMiA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2IDwgMwoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSAqIGopICUgNikgPCAzOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKCh4K3kpbW9kIDIgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKiBlcXVpdmFsZW50bHksIHN1Y2ggdGhhdCAoeCArIHkgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTEsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTExLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSArIGogKyAoKGkgKiBqKSAlIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgXSk7CgkgICAgcmV0dXJuIERhdGFNYXNrOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IERhdGFNYXNrOwoKCX0oRGF0YU1hc2spKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdE1hdHJpeFBhcnNlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgVmVyc2lvbl8xJDEgPSBWZXJzaW9uJDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSA9IEZvcm1hdEluZm9ybWF0aW9uJDE7Cgl2YXIgRGF0YU1hc2tfMSA9IERhdGFNYXNrOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCS8qKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJpdE1hdHJpeFBhcnNlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYml0TWF0cml4IHtAbGluayBCaXRNYXRyaXh9IHRvIHBhcnNlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCA+PSAyMSBhbmQgMSBtb2QgNAoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeFBhcnNlcihiaXRNYXRyaXgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IGJpdE1hdHJpeC5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiA8IDIxIHx8IChkaW1lbnNpb24gJiAweDAzKSAhPT0gMSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0TWF0cml4ID0gYml0TWF0cml4OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5SZWFkcyBmb3JtYXQgaW5mb3JtYXRpb24gZnJvbSBvbmUgb2YgaXRzIHR3byBsb2NhdGlvbnMgd2l0aGluIHRoZSBRUiBDb2RlLjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEZvcm1hdEluZm9ybWF0aW9ufSBlbmNhcHN1bGF0aW5nIHRoZSBRUiBDb2RlJ3MgZm9ybWF0IGluZm8KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIGZvcm1hdCBpbmZvcm1hdGlvbiBsb2NhdGlvbnMgY2Fubm90IGJlIHBhcnNlZCBhcwoJICAgICAqIHRoZSB2YWxpZCBlbmNvZGluZyBvZiBmb3JtYXQgaW5mb3JtYXRpb24KCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRGb3JtYXRJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgaWYgKHRoaXMucGFyc2VkRm9ybWF0SW5mbyAhPT0gbnVsbCAmJiB0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VkRm9ybWF0SW5mbzsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRvcC1sZWZ0IGZvcm1hdCBpbmZvIGJpdHMKCSAgICAgICAgdmFyIGZvcm1hdEluZm9CaXRzMSA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoaSwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyAuLiBhbmQgc2tpcCBhIGJpdCBpbiB0aGUgdGltaW5nIHBhdHRlcm4gLi4uCgkgICAgICAgIGZvcm1hdEluZm9CaXRzMSA9IHRoaXMuY29weUJpdCg3LCA4LCBmb3JtYXRJbmZvQml0czEpOwoJICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgZm9ybWF0SW5mb0JpdHMxID0gdGhpcy5jb3B5Qml0KDgsIDcsIGZvcm1hdEluZm9CaXRzMSk7CgkgICAgICAgIC8vIC4uIGFuZCBza2lwIGEgYml0IGluIHRoZSB0aW1pbmcgcGF0dGVybiAuLi4KCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgaiwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRoZSB0b3AtcmlnaHQvYm90dG9tLWxlZnQgcGF0dGVybiB0b28KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgZm9ybWF0SW5mb0JpdHMyID0gMDsKCSAgICAgICAgdmFyIGpNaW4gPSBkaW1lbnNpb24gLSA3OwoJICAgICAgICBmb3IgKHZhciBqID0gZGltZW5zaW9uIC0gMTsgaiA+PSBqTWluOyBqLS0pIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdCg4LCBqLCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIGZvciAodmFyIGkgPSBkaW1lbnNpb24gLSA4OyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdChpLCA4LCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uXzEuZGVmYXVsdC5kZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihmb3JtYXRJbmZvQml0czEsIGZvcm1hdEluZm9CaXRzMik7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZEZvcm1hdEluZm87CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+UmVhZHMgdmVyc2lvbiBpbmZvcm1hdGlvbiBmcm9tIG9uZSBvZiBpdHMgdHdvIGxvY2F0aW9ucyB3aXRoaW4gdGhlIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgVmVyc2lvbn0gZW5jYXBzdWxhdGluZyB0aGUgUVIgQ29kZSdzIHZlcnNpb24KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIHZlcnNpb24gaW5mb3JtYXRpb24gbG9jYXRpb25zIGNhbm5vdCBiZSBwYXJzZWQgYXMKCSAgICAgKiB0aGUgdmFsaWQgZW5jb2Rpbmcgb2YgdmVyc2lvbiBpbmZvcm1hdGlvbgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUucmVhZFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZFZlcnNpb24gIT09IG51bGwgJiYgdGhpcy5wYXJzZWRWZXJzaW9uICE9PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgcHJvdmlzaW9uYWxWZXJzaW9uID0gTWF0aC5mbG9vcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24gPD0gNikgewoJICAgICAgICAgICAgcmV0dXJuIFZlcnNpb25fMSQxLmRlZmF1bHQuZ2V0VmVyc2lvbkZvck51bWJlcihwcm92aXNpb25hbFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJlYWQgdG9wLXJpZ2h0IHZlcnNpb24gaW5mbzogMyB3aWRlIGJ5IDYgdGFsbAoJICAgICAgICB2YXIgdmVyc2lvbkJpdHMgPSAwOwoJICAgICAgICB2YXIgaWpNaW4gPSBkaW1lbnNpb24gLSAxMTsKCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gZGltZW5zaW9uIC0gOTsgaSA+PSBpak1pbjsgaS0tKSB7CgkgICAgICAgICAgICAgICAgdmVyc2lvbkJpdHMgPSB0aGlzLmNvcHlCaXQoaSwgaiwgdmVyc2lvbkJpdHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBmYWlsZWQuIFRyeSBib3R0b20gbGVmdDogNiB3aWRlIGJ5IDMgdGFsbAoJICAgICAgICB2ZXJzaW9uQml0cyA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSA1OyBpID49IDA7IGktLSkgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDk7IGogPj0gaWpNaW47IGotLSkgewoJICAgICAgICAgICAgICAgIHZlcnNpb25CaXRzID0gdGhpcy5jb3B5Qml0KGksIGosIHZlcnNpb25CaXRzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5jb3B5Qml0ID0gZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovLCB2ZXJzaW9uQml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBiaXQgPSB0aGlzLmlzTWlycm9yID8gdGhpcy5iaXRNYXRyaXguZ2V0KGosIGkpIDogdGhpcy5iaXRNYXRyaXguZ2V0KGksIGopOwoJICAgICAgICByZXR1cm4gYml0ID8gKHZlcnNpb25CaXRzIDw8IDEpIHwgMHgxIDogdmVyc2lvbkJpdHMgPDwgMTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlJlYWRzIHRoZSBiaXRzIGluIHRoZSB7QGxpbmsgQml0TWF0cml4fSByZXByZXNlbnRpbmcgdGhlIGZpbmRlciBwYXR0ZXJuIGluIHRoZQoJICAgICAqIGNvcnJlY3Qgb3JkZXIgaW4gb3JkZXIgdG8gcmVjb25zdHJ1Y3QgdGhlIGNvZGV3b3JkcyBieXRlcyBjb250YWluZWQgd2l0aGluIHRoZQoJICAgICAqIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBleGFjdCBudW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgaXMgbm90IHJlYWQKCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBmb3JtYXRJbmZvID0gdGhpcy5yZWFkRm9ybWF0SW5mb3JtYXRpb24oKTsKCSAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9uKCk7CgkgICAgICAgIC8vIEdldCB0aGUgZGF0YSBtYXNrIGZvciB0aGUgZm9ybWF0IHVzZWQgaW4gdGhpcyBRUiBDb2RlLiBUaGlzIHdpbGwgZXhjbHVkZQoJICAgICAgICAvLyBzb21lIGJpdHMgZnJvbSByZWFkaW5nIGFzIHdlIHdpbmQgdGhyb3VnaCB0aGUgYml0IG1hdHJpeC4KCSAgICAgICAgdmFyIGRhdGFNYXNrID0gRGF0YU1hc2tfMS5kZWZhdWx0LnZhbHVlcy5nZXQoZm9ybWF0SW5mby5nZXREYXRhTWFzaygpKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICBkYXRhTWFzay51bm1hc2tCaXRNYXRyaXgodGhpcy5iaXRNYXRyaXgsIGRpbWVuc2lvbik7CgkgICAgICAgIHZhciBmdW5jdGlvblBhdHRlcm4gPSB2ZXJzaW9uLmJ1aWxkRnVuY3Rpb25QYXR0ZXJuKCk7CgkgICAgICAgIHZhciByZWFkaW5nVXAgPSB0cnVlOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKTsKCSAgICAgICAgdmFyIHJlc3VsdE9mZnNldCA9IDA7CgkgICAgICAgIHZhciBjdXJyZW50Qnl0ZSA9IDA7CgkgICAgICAgIHZhciBiaXRzUmVhZCA9IDA7CgkgICAgICAgIC8vIFJlYWQgY29sdW1ucyBpbiBwYWlycywgZnJvbSByaWdodCB0byBsZWZ0CgkgICAgICAgIGZvciAodmFyIGogPSBkaW1lbnNpb24gLSAxOyBqID4gMDsgaiAtPSAyKSB7CgkgICAgICAgICAgICBpZiAoaiA9PT0gNikgewoJICAgICAgICAgICAgICAgIC8vIFNraXAgd2hvbGUgY29sdW1uIHdpdGggdmVydGljYWwgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgICAgICAgICAgICAvLyBzYXZlcyB0aW1lIGFuZCBtYWtlcyB0aGUgb3RoZXIgY29kZSBwcm9jZWVkIG1vcmUgY2xlYW5seQoJICAgICAgICAgICAgICAgIGotLTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIFJlYWQgYWx0ZXJuYXRpbmdseSBmcm9tIGJvdHRvbSB0byB0b3AgdGhlbiB0b3AgdG8gYm90dG9tCgkgICAgICAgICAgICBmb3IgKHZhciBjb3VudCA9IDA7IGNvdW50IDwgZGltZW5zaW9uOyBjb3VudCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGkgPSByZWFkaW5nVXAgPyBkaW1lbnNpb24gLSAxIC0gY291bnQgOiBjb3VudDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCAyOyBjb2wrKykgewoJICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgYml0cyBjb3ZlcmVkIGJ5IHRoZSBmdW5jdGlvbiBwYXR0ZXJuCgkgICAgICAgICAgICAgICAgICAgIGlmICghZnVuY3Rpb25QYXR0ZXJuLmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCBhIGJpdAoJICAgICAgICAgICAgICAgICAgICAgICAgYml0c1JlYWQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYml0TWF0cml4LmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSBtYWRlIGEgd2hvbGUgYnl0ZSwgc2F2ZSBpdCBvZmYKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzUmVhZCA9PT0gOCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRPZmZzZXQrK10gPSAvKihieXRlKSAqLyBjdXJyZW50Qnl0ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRzUmVhZCA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVhZGluZ1VwID0gIXJlYWRpbmdVcDsgLy8gcmVhZGluZ1VwIF49IHRydWU7IC8vIHJlYWRpbmdVcCA9ICFyZWFkaW5nVXA7IC8vIHN3aXRjaCBkaXJlY3Rpb25zCgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJlc3VsdE9mZnNldCAhPT0gdmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldmVydCB0aGUgbWFzayByZW1vdmFsIGRvbmUgd2hpbGUgcmVhZGluZyB0aGUgY29kZSB3b3Jkcy4gVGhlIGJpdCBtYXRyaXggc2hvdWxkIHJldmVydCB0byBpdHMgb3JpZ2luYWwgc3RhdGUuCgkgICAgICovCgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5yZW1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybjsgLy8gV2UgaGF2ZSBubyBmb3JtYXQgaW5mb3JtYXRpb24sIGFuZCBoYXZlIG5vIGRhdGEgbWFzawoJICAgICAgICB9CgkgICAgICAgIHZhciBkYXRhTWFzayA9IERhdGFNYXNrXzEuZGVmYXVsdC52YWx1ZXNbdGhpcy5wYXJzZWRGb3JtYXRJbmZvLmdldERhdGFNYXNrKCldOwoJICAgICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5iaXRNYXRyaXguZ2V0SGVpZ2h0KCk7CgkgICAgICAgIGRhdGFNYXNrLnVubWFza0JpdE1hdHJpeCh0aGlzLmJpdE1hdHJpeCwgZGltZW5zaW9uKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFByZXBhcmUgdGhlIHBhcnNlciBmb3IgYSBtaXJyb3JlZCBvcGVyYXRpb24uCgkgICAgICogVGhpcyBmbGFnIGhhcyBlZmZlY3Qgb25seSBvbiB0aGUge0BsaW5rICNyZWFkRm9ybWF0SW5mb3JtYXRpb24oKX0gYW5kIHRoZQoJICAgICAqIHtAbGluayAjcmVhZFZlcnNpb24oKX0uIEJlZm9yZSBwcm9jZWVkaW5nIHdpdGgge0BsaW5rICNyZWFkQ29kZXdvcmRzKCl9IHRoZQoJICAgICAqIHtAbGluayAjbWlycm9yKCl9IG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLgoJICAgICAqCgkgICAgICogQHBhcmFtIG1pcnJvciBXaGV0aGVyIHRvIHJlYWQgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm9ybWF0aW9uIG1pcnJvcmVkLgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUuc2V0TWlycm9yID0gZnVuY3Rpb24gKGlzTWlycm9yKSB7CgkgICAgICAgIHRoaXMucGFyc2VkVmVyc2lvbiA9IG51bGw7CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IG51bGw7CgkgICAgICAgIHRoaXMuaXNNaXJyb3IgPSBpc01pcnJvcjsKCSAgICB9OwoJICAgIC8qKiBNaXJyb3IgdGhlIGJpdCBtYXRyaXggaW4gb3JkZXIgdG8gYXR0ZW1wdCBhIHNlY29uZCByZWFkaW5nLiAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUubWlycm9yID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgYml0TWF0cml4ID0gdGhpcy5iaXRNYXRyaXg7CgkgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IGJpdE1hdHJpeC5nZXRXaWR0aCgpOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgeSA9IHggKyAxLCBoZWlnaHQgPSBiaXRNYXRyaXguZ2V0SGVpZ2h0KCk7IHkgPCBoZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgICAgIGlmIChiaXRNYXRyaXguZ2V0KHgsIHkpICE9PSBiaXRNYXRyaXguZ2V0KHksIHgpKSB7CgkgICAgICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5mbGlwKHksIHgpOwoJICAgICAgICAgICAgICAgICAgICBiaXRNYXRyaXguZmxpcCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXhQYXJzZXI7Cgl9KCkpOwoJQml0TWF0cml4UGFyc2VyJDEuZGVmYXVsdCA9IEJpdE1hdHJpeFBhcnNlcjsKCgl2YXIgRGF0YUJsb2NrJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0YUJsb2NrJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQxID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIGJsb2NrIG9mIGRhdGEgd2l0aGluIGEgUVIgQ29kZS4gUVIgQ29kZXMgbWF5IHNwbGl0IHRoZWlyIGRhdGEgaW50bwoJICogbXVsdGlwbGUgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGlzIGEgdW5pdCBvZiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3Jkcy4gRWFjaAoJICogaXMgcmVwcmVzZW50ZWQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFCbG9jayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEYXRhQmxvY2sobnVtRGF0YUNvZGV3b3JkcyAvKmludCovLCBjb2Rld29yZHMpIHsKCSAgICAgICAgdGhpcy5udW1EYXRhQ29kZXdvcmRzID0gbnVtRGF0YUNvZGV3b3JkczsKCSAgICAgICAgdGhpcy5jb2Rld29yZHMgPSBjb2Rld29yZHM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIDxwPldoZW4gUVIgQ29kZXMgdXNlIG11bHRpcGxlIGRhdGEgYmxvY2tzLCB0aGV5IGFyZSBhY3R1YWxseSBpbnRlcmxlYXZlZC4KCSAgICAgKiBUaGF0IGlzLCB0aGUgZmlyc3QgYnl0ZSBvZiBkYXRhIGJsb2NrIDEgdG8gbiBpcyB3cml0dGVuLCB0aGVuIHRoZSBzZWNvbmQgYnl0ZXMsIGFuZCBzbyBvbi4gVGhpcwoJICAgICAqIG1ldGhvZCB3aWxsIHNlcGFyYXRlIHRoZSBkYXRhIGludG8gb3JpZ2luYWwgYmxvY2tzLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByYXdDb2Rld29yZHMgYnl0ZXMgYXMgcmVhZCBkaXJlY3RseSBmcm9tIHRoZSBRUiBDb2RlCgkgICAgICogQHBhcmFtIHZlcnNpb24gdmVyc2lvbiBvZiB0aGUgUVIgQ29kZQoJICAgICAqIEBwYXJhbSBlY0xldmVsIGVycm9yLWNvcnJlY3Rpb24gbGV2ZWwgb2YgdGhlIFFSIENvZGUKCSAgICAgKiBAcmV0dXJuIERhdGFCbG9ja3MgY29udGFpbmluZyBvcmlnaW5hbCBieXRlcywgImRlLWludGVybGVhdmVkIiBmcm9tIHJlcHJlc2VudGF0aW9uIGluIHRoZQoJICAgICAqICAgICAgICAgUVIgQ29kZQoJICAgICAqLwoJICAgIERhdGFCbG9jay5nZXREYXRhQmxvY2tzID0gZnVuY3Rpb24gKHJhd0NvZGV3b3JkcywgdmVyc2lvbiwgZWNMZXZlbCkgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgaWYgKHJhd0NvZGV3b3Jkcy5sZW5ndGggIT09IHZlcnNpb24uZ2V0VG90YWxDb2Rld29yZHMoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIG51bWJlciBhbmQgc2l6ZSBvZiBkYXRhIGJsb2NrcyB1c2VkIGJ5IHRoaXMgdmVyc2lvbiBhbmQKCSAgICAgICAgLy8gZXJyb3IgY29ycmVjdGlvbiBsZXZlbAoJICAgICAgICB2YXIgZWNCbG9ja3MgPSB2ZXJzaW9uLmdldEVDQmxvY2tzRm9yTGV2ZWwoZWNMZXZlbCk7CgkgICAgICAgIC8vIEZpcnN0IGNvdW50IHRoZSB0b3RhbCBudW1iZXIgb2YgZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIHRvdGFsQmxvY2tzID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tBcnJheSA9IGVjQmxvY2tzLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY0Jsb2NrQXJyYXlfMSA9IF9fdmFsdWVzJDMoZWNCbG9ja0FycmF5KSwgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKTsgIWVjQmxvY2tBcnJheV8xXzEuZG9uZTsgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBlY0Jsb2NrID0gZWNCbG9ja0FycmF5XzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbEJsb2NrcyArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2NrQXJyYXlfMV8xICYmICFlY0Jsb2NrQXJyYXlfMV8xLmRvbmUgJiYgKF9hID0gZWNCbG9ja0FycmF5XzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2NrQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGVzdGFibGlzaCBEYXRhQmxvY2tzIG9mIHRoZSBhcHByb3ByaWF0ZSBzaXplIGFuZCBudW1iZXIgb2YgZGF0YSBjb2Rld29yZHMKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheSh0b3RhbEJsb2Nrcyk7CgkgICAgICAgIHZhciBudW1SZXN1bHRCbG9ja3MgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZWNCbG9ja0FycmF5XzIgPSBfX3ZhbHVlcyQzKGVjQmxvY2tBcnJheSksIGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCk7ICFlY0Jsb2NrQXJyYXlfMl8xLmRvbmU7IGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tBcnJheV8yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlY0Jsb2NrLmdldENvdW50KCk7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRGF0YUNvZGV3b3JkcyA9IGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtQmxvY2tDb2Rld29yZHMgPSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCkgKyBudW1EYXRhQ29kZXdvcmRzOwoJICAgICAgICAgICAgICAgICAgICByZXN1bHRbbnVtUmVzdWx0QmxvY2tzKytdID0gbmV3IERhdGFCbG9jayhudW1EYXRhQ29kZXdvcmRzLCBuZXcgVWludDhBcnJheShudW1CbG9ja0NvZGV3b3JkcykpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGVjQmxvY2tBcnJheV8yXzEgJiYgIWVjQmxvY2tBcnJheV8yXzEuZG9uZSAmJiAoX2IgPSBlY0Jsb2NrQXJyYXlfMi5yZXR1cm4pKSBfYi5jYWxsKGVjQmxvY2tBcnJheV8yKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICAvLyBBbGwgYmxvY2tzIGhhdmUgdGhlIHNhbWUgYW1vdW50IG9mIGRhdGEsIGV4Y2VwdCB0aGF0IHRoZSBsYXN0IG4KCSAgICAgICAgLy8gKHdoZXJlIG4gbWF5IGJlIDApIGhhdmUgMSBtb3JlIGJ5dGUuIEZpZ3VyZSBvdXQgd2hlcmUgdGhlc2Ugc3RhcnQuCgkgICAgICAgIHZhciBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGxvbmdlckJsb2Nrc1N0YXJ0QXQgPSByZXN1bHQubGVuZ3RoIC0gMTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IGNoZWNrIGxlbmd0aCBpcyBjb3JyZWN0IGhlcmUKCSAgICAgICAgd2hpbGUgKGxvbmdlckJsb2Nrc1N0YXJ0QXQgPj0gMCkgewoJICAgICAgICAgICAgdmFyIG51bUNvZGV3b3JkcyA9IHJlc3VsdFtsb25nZXJCbG9ja3NTdGFydEF0XS5jb2Rld29yZHMubGVuZ3RoOwoJICAgICAgICAgICAgaWYgKG51bUNvZGV3b3JkcyA9PT0gc2hvcnRlckJsb2Nrc1RvdGFsQ29kZXdvcmRzKSB7CgkgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsb25nZXJCbG9ja3NTdGFydEF0LS07CgkgICAgICAgIH0KCSAgICAgICAgbG9uZ2VyQmxvY2tzU3RhcnRBdCsrOwoJICAgICAgICB2YXIgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHMgPSBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgLSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIC8vIFRoZSBsYXN0IGVsZW1lbnRzIG9mIHJlc3VsdCBtYXkgYmUgMSBlbGVtZW50IGxvbmdlcgoJICAgICAgICAvLyBmaXJzdCBmaWxsIG91dCBhcyBtYW55IGVsZW1lbnRzIGFzIGFsbCBvZiB0aGVtIGhhdmUKCSAgICAgICAgdmFyIHJhd0NvZGV3b3Jkc09mZnNldCA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudW1SZXN1bHRCbG9ja3M7IGorKykgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaV0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIEZpbGwgb3V0IHRoZSBsYXN0IGRhdGEgYmxvY2sgaW4gdGhlIGxvbmdlciBvbmVzCgkgICAgICAgIGZvciAodmFyIGogPSBsb25nZXJCbG9ja3NTdGFydEF0OyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHNdID0gcmF3Q29kZXdvcmRzW3Jhd0NvZGV3b3Jkc09mZnNldCsrXTsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cgYWRkIGluIGVycm9yIGNvcnJlY3Rpb24gYmxvY2tzCgkgICAgICAgIHZhciBtYXggPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IHNob3J0ZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IGogPCBsb25nZXJCbG9ja3NTdGFydEF0ID8gaSA6IGkgKyAxOwoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaU9mZnNldF0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldE51bURhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bURhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldENvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29kZXdvcmRzOwoJICAgIH07CgkgICAgcmV0dXJuIERhdGFCbG9jazsKCX0oKSk7CglEYXRhQmxvY2skMS5kZWZhdWx0ID0gRGF0YUJsb2NrOwoKCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEgPSB7fTsKCgl2YXIgQml0U291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdFNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbiB7Ki8KCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIHByb3ZpZGVzIGFuIGVhc3kgYWJzdHJhY3Rpb24gdG8gcmVhZCBiaXRzIGF0IGEgdGltZSBmcm9tIGEgc2VxdWVuY2Ugb2YgYnl0ZXMsIHdoZXJlIHRoZQoJICogbnVtYmVyIG9mIGJpdHMgcmVhZCBpcyBub3Qgb2Z0ZW4gYSBtdWx0aXBsZSBvZiA4LjwvcD4KCSAqCgkgKiA8cD5UaGlzIGNsYXNzIGlzIHRocmVhZC1zYWZlIGJ1dCBub3QgcmVlbnRyYW50IC0tIHVubGVzcyB0aGUgY2FsbGVyIG1vZGlmaWVzIHRoZSBieXRlcyBhcnJheQoJICogaXQgcGFzc2VkIGluLCBpbiB3aGljaCBjYXNlIGFsbCBiZXRzIGFyZSBvZmYuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBCaXRTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJ5dGVzIGJ5dGVzIGZyb20gd2hpY2ggdGhpcyB3aWxsIHJlYWQgYml0cy4gQml0cyB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgZmlyc3QgYnl0ZSBmaXJzdC4KCSAgICAgKiBCaXRzIGFyZSByZWFkIHdpdGhpbiBhIGJ5dGUgZnJvbSBtb3N0LXNpZ25pZmljYW50IHRvIGxlYXN0LXNpZ25pZmljYW50IGJpdC4KCSAgICAgKi8KCSAgICBmdW5jdGlvbiBCaXRTb3VyY2UoYnl0ZXMpIHsKCSAgICAgICAgdGhpcy5ieXRlcyA9IGJ5dGVzOwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSAwOwoJICAgICAgICB0aGlzLmJpdE9mZnNldCA9IDA7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaW5kZXggb2YgbmV4dCBiaXQgaW4gY3VycmVudCBieXRlIHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qml0T2Zmc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRPZmZzZXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgYnl0ZSBpbiBpbnB1dCBieXRlIGFycmF5IHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qnl0ZU9mZnNldCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBudW1CaXRzIG51bWJlciBvZiBiaXRzIHRvIHJlYWQKCSAgICAgKiBAcmV0dXJuIGludCByZXByZXNlbnRpbmcgdGhlIGJpdHMgcmVhZC4gVGhlIGJpdHMgd2lsbCBhcHBlYXIgYXMgdGhlIGxlYXN0LXNpZ25pZmljYW50CgkgICAgICogICAgICAgICBiaXRzIG9mIHRoZSBpbnQKCSAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpZiBudW1CaXRzIGlzbid0IGluIFsxLDMyXSBvciBtb3JlIHRoYW4gaXMgYXZhaWxhYmxlCgkgICAgICovCgkgICAgQml0U291cmNlLnByb3RvdHlwZS5yZWFkQml0cyA9IGZ1bmN0aW9uIChudW1CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPCAxIHx8IG51bUJpdHMgPiAzMiB8fCBudW1CaXRzID4gdGhpcy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoJycgKyBudW1CaXRzKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVzdWx0ID0gMDsKCSAgICAgICAgdmFyIGJpdE9mZnNldCA9IHRoaXMuYml0T2Zmc2V0OwoJICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IHRoaXMuYnl0ZU9mZnNldDsKCSAgICAgICAgdmFyIGJ5dGVzID0gdGhpcy5ieXRlczsKCSAgICAgICAgLy8gRmlyc3QsIHJlYWQgcmVtYWluZGVyIGZyb20gY3VycmVudCBieXRlCgkgICAgICAgIGlmIChiaXRPZmZzZXQgPiAwKSB7CgkgICAgICAgICAgICB2YXIgYml0c0xlZnQgPSA4IC0gYml0T2Zmc2V0OwoJICAgICAgICAgICAgdmFyIHRvUmVhZCA9IG51bUJpdHMgPCBiaXRzTGVmdCA/IG51bUJpdHMgOiBiaXRzTGVmdDsKCSAgICAgICAgICAgIHZhciBiaXRzVG9Ob3RSZWFkID0gYml0c0xlZnQgLSB0b1JlYWQ7CgkgICAgICAgICAgICB2YXIgbWFzayA9ICgweEZGID4+ICg4IC0gdG9SZWFkKSkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgIHJlc3VsdCA9IChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQ7CgkgICAgICAgICAgICBudW1CaXRzIC09IHRvUmVhZDsKCSAgICAgICAgICAgIGJpdE9mZnNldCArPSB0b1JlYWQ7CgkgICAgICAgICAgICBpZiAoYml0T2Zmc2V0ID09PSA4KSB7CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0ID0gMDsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTmV4dCByZWFkIHdob2xlIGJ5dGVzCgkgICAgICAgIGlmIChudW1CaXRzID4gMCkgewoJICAgICAgICAgICAgd2hpbGUgKG51bUJpdHMgPj0gOCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgOCkgfCAoYnl0ZXNbYnl0ZU9mZnNldF0gJiAweEZGKTsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICAgICAgbnVtQml0cyAtPSA4OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gRmluYWxseSByZWFkIGEgcGFydGlhbCBieXRlCgkgICAgICAgICAgICBpZiAobnVtQml0cyA+IDApIHsKCSAgICAgICAgICAgICAgICB2YXIgYml0c1RvTm90UmVhZCA9IDggLSBudW1CaXRzOwoJICAgICAgICAgICAgICAgIHZhciBtYXNrID0gKDB4RkYgPj4gYml0c1RvTm90UmVhZCkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IG51bUJpdHMpIHwgKChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQpOwoJICAgICAgICAgICAgICAgIGJpdE9mZnNldCArPSBudW1CaXRzOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0T2Zmc2V0ID0gYml0T2Zmc2V0OwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSBieXRlT2Zmc2V0OwoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB0aGF0IGNhbiBiZSByZWFkIHN1Y2Nlc3NmdWxseQoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gOCAqICh0aGlzLmJ5dGVzLmxlbmd0aCAtIHRoaXMuYnl0ZU9mZnNldCkgLSB0aGlzLmJpdE9mZnNldDsKCSAgICB9OwoJICAgIHJldHVybiBCaXRTb3VyY2U7Cgl9KCkpOwoJQml0U291cmNlJDEuZGVmYXVsdCA9IEJpdFNvdXJjZTsKCgl2YXIgRGVjb2RlclJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVyUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBtYXRyaXggb2YgYml0cy4gVGhpcyB0eXBpY2FsbHkKCSAqIGFwcGxpZXMgdG8gMkQgYmFyY29kZSBmb3JtYXRzLiBGb3Igbm93IGl0IGNvbnRhaW5zIHRoZSByYXcgYnl0ZXMgb2J0YWluZWQsCgkgKiBhcyB3ZWxsIGFzIGEgU3RyaW5nIGludGVycHJldGF0aW9uIG9mIHRob3NlIGJ5dGVzLCBpZiBhcHBsaWNhYmxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlclJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocmF3Qnl0ZXM6IFVpbnQ4QXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIExpc3Q8VWludDhBcnJheT4gYnl0ZVNlZ21lbnRzLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBlY0xldmVsKSB7CgkgICAgLy8gICB0aGlzKHJhd0J5dGVzLCB0ZXh0LCBieXRlU2VnbWVudHMsIGVjTGV2ZWwsIC0xLCAtMSkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRGVjb2RlclJlc3VsdChyYXdCeXRlcywgdGV4dCwgYnl0ZVNlZ21lbnRzLCBlY0xldmVsLCBzdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXIsIHN0cnVjdHVyZWRBcHBlbmRQYXJpdHkpIHsKCSAgICAgICAgaWYgKHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9PT0gdm9pZCAwKSB7IHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9IC0xOyB9CgkgICAgICAgIGlmIChzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID09PSB2b2lkIDApIHsgc3RydWN0dXJlZEFwcGVuZFBhcml0eSA9IC0xOyB9CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDsKCSAgICAgICAgdGhpcy5ieXRlU2VnbWVudHMgPSBieXRlU2VnbWVudHM7CgkgICAgICAgIHRoaXMuZWNMZXZlbCA9IGVjTGV2ZWw7CgkgICAgICAgIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyOwoJICAgICAgICB0aGlzLnN0cnVjdHVyZWRBcHBlbmRQYXJpdHkgPSBzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCB8fCByYXdCeXRlcyA9PT0gbnVsbCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiByYXcgYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSByZXN1bHQsIG9yIHtAY29kZSBudWxsfSBpZiBub3QgYXBwbGljYWJsZQoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldE51bUJpdHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bUJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gbnVtQml0cyBvdmVycmlkZXMgdGhlIG51bWJlciBvZiBiaXRzIHRoYXQgYXJlIHZhbGlkIGluIHtAbGluayAjZ2V0UmF3Qnl0ZXMoKX0KCSAgICAgKiBAc2luY2UgMy4zLjAKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXROdW1CaXRzID0gZnVuY3Rpb24gKG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLm51bUJpdHMgPSBudW1CaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0ZXh0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZXN1bHQKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50ZXh0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBsaXN0IG9mIGJ5dGUgc2VnbWVudHMgaW4gdGhlIHJlc3VsdCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0Qnl0ZVNlZ21lbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5ieXRlU2VnbWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG5hbWUgb2YgZXJyb3IgY29ycmVjdGlvbiBsZXZlbCB1c2VkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFQ0xldmVsID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0xldmVsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJyb3JzIGNvcnJlY3RlZCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0RXJyb3JzQ29ycmVjdGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNDb3JyZWN0ZWQ7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcnJvcnNDb3JyZWN0ZWQgPSBmdW5jdGlvbiAoZXJyb3JzQ29ycmVjdGVkIC8qSW50ZWdlciovKSB7CgkgICAgICAgIHRoaXMuZXJyb3JzQ29ycmVjdGVkID0gZXJyb3JzQ29ycmVjdGVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJhc3VyZXMgY29ycmVjdGVkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFcmFzdXJlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJhc3VyZXM7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcmFzdXJlcyA9IGZ1bmN0aW9uIChlcmFzdXJlcyAvKkludGVnZXIqLykgewoJICAgICAgICB0aGlzLmVyYXN1cmVzID0gZXJhc3VyZXM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGFyYml0cmFyeSBhZGRpdGlvbmFsIG1ldGFkYXRhCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0T3RoZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuc2V0T3RoZXIgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdGhpcy5vdGhlciA9IG90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuaGFzU3RydWN0dXJlZEFwcGVuZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc3RydWN0dXJlZEFwcGVuZFBhcml0eSA+PSAwICYmIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID49IDA7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRTdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXI7CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlclJlc3VsdDsKCX0oKSk7CglEZWNvZGVyUmVzdWx0JDEuZGVmYXVsdCA9IERlY29kZXJSZXN1bHQ7CgoJdmFyIE1vZGUgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5Nb2RlVmFsdWVzID0gdm9pZCAwOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgTW9kZVZhbHVlczsKCShmdW5jdGlvbiAoTW9kZVZhbHVlcykgewoJICAgIE1vZGVWYWx1ZXNbTW9kZVZhbHVlc1siVEVSTUlOQVRPUiJdID0gMF0gPSAiVEVSTUlOQVRPUiI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJOVU1FUklDIl0gPSAxXSA9ICJOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkFMUEhBTlVNRVJJQyJdID0gMl0gPSAiQUxQSEFOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIlNUUlVDVFVSRURfQVBQRU5EIl0gPSAzXSA9ICJTVFJVQ1RVUkVEX0FQUEVORCI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJCWVRFIl0gPSA0XSA9ICJCWVRFIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkVDSSJdID0gNV0gPSAiRUNJIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIktBTkpJIl0gPSA2XSA9ICJLQU5KSSI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJGTkMxX0ZJUlNUX1BPU0lUSU9OIl0gPSA3XSA9ICJGTkMxX0ZJUlNUX1BPU0lUSU9OIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkZOQzFfU0VDT05EX1BPU0lUSU9OIl0gPSA4XSA9ICJGTkMxX1NFQ09ORF9QT1NJVElPTiI7CgkgICAgLyoqIFNlZSBHQlQgMTgyODQtMjAwMDsgIkhhbnppIiBpcyBhIHRyYW5zbGl0ZXJhdGlvbiBvZiB0aGlzIG1vZGUgbmFtZS4gKi8KCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkhBTlpJIl0gPSA5XSA9ICJIQU5aSSI7Cgl9KShNb2RlVmFsdWVzID0gZXhwb3J0cy5Nb2RlVmFsdWVzIHx8IChleHBvcnRzLk1vZGVWYWx1ZXMgPSB7fSkpOwoJLyoqCgkgKiA8cD5TZWUgSVNPIDE4MDA0OjIwMDYsIDYuNC4xLCBUYWJsZXMgMiBhbmQgMy4gVGhpcyBlbnVtIGVuY2Fwc3VsYXRlcyB0aGUgdmFyaW91cyBtb2RlcyBpbiB3aGljaAoJICogZGF0YSBjYW4gYmUgZW5jb2RlZCB0byBiaXRzIGluIHRoZSBRUiBjb2RlIHN0YW5kYXJkLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgTW9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBNb2RlKHZhbHVlLCBzdHJpbmdWYWx1ZSwgY2hhcmFjdGVyQ291bnRCaXRzRm9yVmVyc2lvbnMsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9ucyA9IGNoYXJhY3RlckNvdW50Qml0c0ZvclZlcnNpb25zOwoJICAgICAgICB0aGlzLmJpdHMgPSBiaXRzOwoJICAgICAgICBNb2RlLkZPUl9CSVRTLnNldChiaXRzLCB0aGlzKTsKCSAgICAgICAgTW9kZS5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgZm91ciBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSBkYXRhIG1vZGUKCSAgICAgKiBAcmV0dXJuIE1vZGUgZW5jb2RlZCBieSB0aGVzZSBiaXRzCgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYml0cyBkbyBub3QgY29ycmVzcG9uZCB0byBhIGtub3duIG1vZGUKCSAgICAgKi8KCSAgICBNb2RlLmZvckJpdHMgPSBmdW5jdGlvbiAoYml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBtb2RlID0gTW9kZS5GT1JfQklUUy5nZXQoYml0cyk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IG1vZGUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1vZGU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmVyc2lvbiB2ZXJzaW9uIGluIHF1ZXN0aW9uCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB1c2VkLCBpbiB0aGlzIFFSIENvZGUgc3ltYm9sIHtAbGluayBWZXJzaW9ufSwgdG8gZW5jb2RlIHRoZQoJICAgICAqICAgICAgICAgY291bnQgb2YgY2hhcmFjdGVycyB0aGF0IHdpbGwgZm9sbG93IGVuY29kZWQgaW4gdGhpcyBNb2RlCgkgICAgICovCgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Q2hhcmFjdGVyQ291bnRCaXRzID0gZnVuY3Rpb24gKHZlcnNpb24pIHsKCSAgICAgICAgdmFyIHZlcnNpb25OdW1iZXIgPSB2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKTsKCSAgICAgICAgdmFyIG9mZnNldDsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPD0gOSkgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmICh2ZXJzaW9uTnVtYmVyIDw9IDI2KSB7CgkgICAgICAgICAgICBvZmZzZXQgPSAxOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9uc1tvZmZzZXRdOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBNb2RlKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSBvdGhlci52YWx1ZTsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIE1vZGUuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5GT1JfVkFMVUUgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5URVJNSU5BVE9SID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5URVJNSU5BVE9SLCAnVEVSTUlOQVRPUicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDAwKTsgLy8gTm90IHJlYWxseSBhIG1vZGUuLi4KCSAgICBNb2RlLk5VTUVSSUMgPSBuZXcgTW9kZShNb2RlVmFsdWVzLk5VTUVSSUMsICdOVU1FUklDJywgSW50MzJBcnJheS5mcm9tKFsxMCwgMTIsIDE0XSksIDB4MDEpOwoJICAgIE1vZGUuQUxQSEFOVU1FUklDID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5BTFBIQU5VTUVSSUMsICdBTFBIQU5VTUVSSUMnLCBJbnQzMkFycmF5LmZyb20oWzksIDExLCAxM10pLCAweDAyKTsKCSAgICBNb2RlLlNUUlVDVFVSRURfQVBQRU5EID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5TVFJVQ1RVUkVEX0FQUEVORCwgJ1NUUlVDVFVSRURfQVBQRU5EJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDMpOyAvLyBOb3Qgc3VwcG9ydGVkCgkgICAgTW9kZS5CWVRFID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5CWVRFLCAnQllURScsIEludDMyQXJyYXkuZnJvbShbOCwgMTYsIDE2XSksIDB4MDQpOwoJICAgIE1vZGUuRUNJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5FQ0ksICdFQ0knLCBJbnQzMkFycmF5LmZyb20oWzAsIDAsIDBdKSwgMHgwNyk7IC8vIGNoYXJhY3RlciBjb3VudHMgZG9uJ3QgYXBwbHkKCSAgICBNb2RlLktBTkpJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5LQU5KSSwgJ0tBTkpJJywgSW50MzJBcnJheS5mcm9tKFs4LCAxMCwgMTJdKSwgMHgwOCk7CgkgICAgTW9kZS5GTkMxX0ZJUlNUX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX0ZJUlNUX1BPU0lUSU9OLCAnRk5DMV9GSVJTVF9QT1NJVElPTicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDA1KTsKCSAgICBNb2RlLkZOQzFfU0VDT05EX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX1NFQ09ORF9QT1NJVElPTiwgJ0ZOQzFfU0VDT05EX1BPU0lUSU9OJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDkpOwoJICAgIC8qKiBTZWUgR0JUIDE4Mjg0LTIwMDA7ICJIYW56aSIgaXMgYSB0cmFuc2xpdGVyYXRpb24gb2YgdGhpcyBtb2RlIG5hbWUuICovCgkgICAgTW9kZS5IQU5aSSA9IG5ldyBNb2RlKE1vZGVWYWx1ZXMuSEFOWkksICdIQU5aSScsIEludDMyQXJyYXkuZnJvbShbOCwgMTAsIDEyXSksIDB4MEQpOwoJICAgIHJldHVybiBNb2RlOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IE1vZGU7CgoJfShNb2RlKSk7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlLmRlY29kZXIgeyovCgl2YXIgQml0U291cmNlXzEgPSBCaXRTb3VyY2UkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSA9IENoYXJhY3RlclNldEVDSTsKCXZhciBEZWNvZGVyUmVzdWx0XzEgPSBEZWNvZGVyUmVzdWx0JDE7Cgl2YXIgU3RyaW5nVXRpbHNfMSA9IFN0cmluZ1V0aWxzJDE7Cgl2YXIgRm9ybWF0RXhjZXB0aW9uXzEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBTdHJpbmdCdWlsZGVyXzEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgU3RyaW5nRW5jb2RpbmdfMSA9IFN0cmluZ0VuY29kaW5nJDE7Cgl2YXIgTW9kZV8xID0gTW9kZTsKCS8qaW1wb3J0IGphdmEuaW8uVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbjsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlFSIENvZGVzIGNhbiBlbmNvZGUgdGV4dCBhcyBiaXRzIGluIG9uZSBvZiBzZXZlcmFsIG1vZGVzLCBhbmQgY2FuIHVzZSBtdWx0aXBsZSBtb2RlcwoJICogaW4gb25lIFFSIENvZGUuIFRoaXMgY2xhc3MgZGVjb2RlcyB0aGUgYml0cyBiYWNrIGludG8gdGV4dC48L3A+CgkgKgoJICogPHA+U2VlIElTTyAxODAwNDoyMDA2LCA2LjQuMyAtIDYuNC43PC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERlY29kZWRCaXRTdHJlYW1QYXJzZXIoKSB7CgkgICAgfQoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlID0gZnVuY3Rpb24gKGJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cykgewoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRTb3VyY2VfMS5kZWZhdWx0KGJ5dGVzKTsKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyXzEuZGVmYXVsdCgpOwoJICAgICAgICB2YXIgYnl0ZVNlZ21lbnRzID0gbmV3IEFycmF5KCk7IC8vIDEKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IEkgZG8gbm90IHVzZSBjb25zdHJ1Y3RvciB3aXRoIHNpemUgMSBhcyBpbiBvcmlnaW5hbCBKYXZhIG1lYW5zIGNhcGFjaXR5IGFuZCB0aGUgYXJyYXkgbGVuZ3RoIGlzIGNoZWNrZWQgYmVsb3cKCSAgICAgICAgdmFyIHN5bWJvbFNlcXVlbmNlID0gLTE7CgkgICAgICAgIHZhciBwYXJpdHlEYXRhID0gLTE7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICB2YXIgY3VycmVudENoYXJhY3RlclNldEVDSSA9IG51bGw7CgkgICAgICAgICAgICB2YXIgZmMxSW5FZmZlY3QgPSBmYWxzZTsKCSAgICAgICAgICAgIHZhciBtb2RlID0gdm9pZCAwOwoJICAgICAgICAgICAgZG8gewoJICAgICAgICAgICAgICAgIC8vIFdoaWxlIHN0aWxsIGFub3RoZXIgc2VnbWVudCB0byByZWFkLi4uCgkgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA0KSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE9LLCBhc3N1bWUgd2UncmUgZG9uZS4gUmVhbGx5LCBhIFRFUk1JTkFUT1IgbW9kZSBzaG91bGQgaGF2ZSBiZWVuIHJlY29yZGVkIGhlcmUKCSAgICAgICAgICAgICAgICAgICAgbW9kZSA9IE1vZGVfMS5kZWZhdWx0LlRFUk1JTkFUT1I7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZUJpdHMgPSBiaXRzLnJlYWRCaXRzKDQpOwoJICAgICAgICAgICAgICAgICAgICBtb2RlID0gTW9kZV8xLmRlZmF1bHQuZm9yQml0cyhtb2RlQml0cyk7IC8vIG1vZGUgaXMgZW5jb2RlZCBieSA0IGJpdHMKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUjoKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkZOQzFfRklSU1RfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuRk5DMV9TRUNPTkRfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBkbyBsaXR0bGUgd2l0aCBGTkMxIGV4Y2VwdCBhbHRlciB0aGUgcGFyc2VkIHJlc3VsdCBhIGJpdCBhY2NvcmRpbmcgdG8gdGhlIHNwZWMKCSAgICAgICAgICAgICAgICAgICAgICAgIGZjMUluRWZmZWN0ID0gdHJ1ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LlNUUlVDVFVSRURfQVBQRU5EOgoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCAxNikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXIgYW5kIHBhcml0eSBpcyBhZGRlZCBsYXRlciB0byB0aGUgcmVzdWx0IG1ldGFkYXRhCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIG5leHQgOCBiaXRzIChzeW1ib2wgc2VxdWVuY2UgIykgYW5kIDggYml0cyAoZGF0YTogcGFyaXR5KSwgdGhlbiBjb250aW51ZQoJICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sU2VxdWVuY2UgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgcGFyaXR5RGF0YSA9IGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5FQ0k6CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudCBkb2Vzbid0IGFwcGx5IHRvIEVDSQoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5wYXJzZUVDSVZhbHVlKGJpdHMpOwoJICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXJhY3RlclNldEVDSSA9IENoYXJhY3RlclNldEVDSV8xLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlWYWx1ZSh2YWx1ZSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5IQU5aSToKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGhhbmRsZSBIYW56aSBtb2RlIHdoaWNoIGRvZXMgbm90IHN0YXJ0IHdpdGggY2hhcmFjdGVyIGNvdW50CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGluZXNlIG1vZGUgY29udGFpbnMgYSBzdWIgc2V0IGluZGljYXRvciByaWdodCBhZnRlciBtb2RlIGluZGljYXRvcgoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNldCA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRIYW56aSA9IGJpdHMucmVhZEJpdHMobW9kZS5nZXRDaGFyYWN0ZXJDb3VudEJpdHModmVyc2lvbikpOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNldCA9PT0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVIYW56aVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudEhhbnppKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gIk5vcm1hbCIgUVIgY29kZSBtb2RlczoKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IGNoYXJhY3RlcnMgd2lsbCBmb2xsb3csIGVuY29kZWQgaW4gdGhpcyBtb2RlPwoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYml0cy5yZWFkQml0cyhtb2RlLmdldENoYXJhY3RlckNvdW50Qml0cyh2ZXJzaW9uKSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0Lk5VTUVSSUM6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlTnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuQUxQSEFOVU1FUklDOgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgZmMxSW5FZmZlY3QpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkJZVEU6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgY3VycmVudENoYXJhY3RlclNldEVDSSwgYnl0ZVNlZ21lbnRzLCBoaW50cyk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuS0FOSkk6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlS2FuamlTZWdtZW50KGJpdHMsIHJlc3VsdCwgY291bnQpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSB3aGlsZSAobW9kZSAhPT0gTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUik7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlhZSAvKjogSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIGZyb20gcmVhZEJpdHMoKSBjYWxscwoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbmV3IERlY29kZXJSZXN1bHRfMS5kZWZhdWx0KGJ5dGVzLCByZXN1bHQudG9TdHJpbmcoKSwgYnl0ZVNlZ21lbnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiBieXRlU2VnbWVudHMsIGVjTGV2ZWwgPT09IG51bGwgPyBudWxsIDogZWNMZXZlbC50b1N0cmluZygpLCBzeW1ib2xTZXF1ZW5jZSwgcGFyaXR5RGF0YSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZWUgc3BlY2lmaWNhdGlvbiBHQlQgMTgyODQtMjAwMAoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlSGFuemlTZWdtZW50ID0gZnVuY3Rpb24gKGJpdHMsIHJlc3VsdCwgY291bnQgLyppbnQqLykgewoJICAgICAgICAvLyBEb24ndCBjcmFzaCB0cnlpbmcgdG8gcmVhZCBtb3JlIGJpdHMgdGhhbiB3ZSBoYXZlIGF2YWlsYWJsZS4KCSAgICAgICAgaWYgKGNvdW50ICogMTMgPiBiaXRzLmF2YWlsYWJsZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhY2ggY2hhcmFjdGVyIHdpbGwgcmVxdWlyZSAyIGJ5dGVzLiBSZWFkIHRoZSBjaGFyYWN0ZXJzIGFzIDItYnl0ZSBwYWlycwoJICAgICAgICAvLyBhbmQgZGVjb2RlIGFzIEdCMjMxMiBhZnRlcndhcmRzCgkgICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheSgyICogY291bnQpOwoJICAgICAgICB2YXIgb2Zmc2V0ID0gMDsKCSAgICAgICAgd2hpbGUgKGNvdW50ID4gMCkgewoJICAgICAgICAgICAgLy8gRWFjaCAxMyBiaXRzIGVuY29kZXMgYSAyLWJ5dGUgY2hhcmFjdGVyCgkgICAgICAgICAgICB2YXIgdHdvQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDEzKTsKCSAgICAgICAgICAgIHZhciBhc3NlbWJsZWRUd29CeXRlcyA9ICgoKHR3b0J5dGVzIC8gMHgwNjApIDw8IDgpICYgMHhGRkZGRkZGRikgfCAodHdvQnl0ZXMgJSAweDA2MCk7CgkgICAgICAgICAgICBpZiAoYXNzZW1ibGVkVHdvQnl0ZXMgPCAweDAwM0JGKSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QTFBMSB0byAweEFBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBMUExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QjBBMSB0byAweEZBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBNkExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYnVmZmVyW29mZnNldF0gPSAvKihieXRlKSAqLyAoKGFzc2VtYmxlZFR3b0J5dGVzID4+IDgpICYgMHhGRik7CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSAvKihieXRlKSAqLyAoYXNzZW1ibGVkVHdvQnl0ZXMgJiAweEZGKTsKCSAgICAgICAgICAgIG9mZnNldCArPSAyOwoJICAgICAgICAgICAgY291bnQtLTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKGJ1ZmZlciwgU3RyaW5nVXRpbHNfMS5kZWZhdWx0LkdCMjMxMikpOwoJICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IFRPRE86IGltcGxlbWVudCBHQjIzMTIgZGVjb2RlLiBTdHJpbmdWaWV3IGZyb20gTUROIGNvdWxkIGJlIGEgc3RhcnRpbmcgcG9pbnQKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVLYW5qaVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoY291bnQgKiAxMyA+IGJpdHMuYXZhaWxhYmxlKCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRWFjaCBjaGFyYWN0ZXIgd2lsbCByZXF1aXJlIDIgYnl0ZXMuIFJlYWQgdGhlIGNoYXJhY3RlcnMgYXMgMi1ieXRlIHBhaXJzCgkgICAgICAgIC8vIGFuZCBkZWNvZGUgYXMgU2hpZnRfSklTIGFmdGVyd2FyZHMKCSAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDIgKiBjb3VudCk7CgkgICAgICAgIHZhciBvZmZzZXQgPSAwOwoJICAgICAgICB3aGlsZSAoY291bnQgPiAwKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEzIGJpdHMgZW5jb2RlcyBhIDItYnl0ZSBjaGFyYWN0ZXIKCSAgICAgICAgICAgIHZhciB0d29CeXRlcyA9IGJpdHMucmVhZEJpdHMoMTMpOwoJICAgICAgICAgICAgdmFyIGFzc2VtYmxlZFR3b0J5dGVzID0gKCgodHdvQnl0ZXMgLyAweDBDMCkgPDwgOCkgJiAweEZGRkZGRkZGKSB8ICh0d29CeXRlcyAlIDB4MEMwKTsKCSAgICAgICAgICAgIGlmIChhc3NlbWJsZWRUd29CeXRlcyA8IDB4MDFGMDApIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHg4MTQwIHRvIDB4OUZGQyByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MDgxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHhFMDQwIHRvIDB4RUJCRiByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MEMxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0XSA9IC8qKGJ5dGUpICovIChhc3NlbWJsZWRUd29CeXRlcyA+PiA4KTsKCSAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAxXSA9IC8qKGJ5dGUpICovIGFzc2VtYmxlZFR3b0J5dGVzOwoJICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CgkgICAgICAgICAgICBjb3VudC0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNoaWZ0X0pJUyBtYXkgbm90IGJlIHN1cHBvcnRlZCBpbiBzb21lIGVudmlyb25tZW50czoKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nRW5jb2RpbmdfMS5kZWZhdWx0LmRlY29kZShidWZmZXIsIFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5TSElGVF9KSVMpKTsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBUT0RPOiBpbXBsZW1lbnQgU0hJRlRfSklTIGRlY29kZS4gU3RyaW5nVmlldyBmcm9tIE1ETiBjb3VsZCBiZSBhIHN0YXJ0aW5nIHBvaW50CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoaWdub3JlZCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLCBieXRlU2VnbWVudHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoOCAqIGNvdW50ID4gYml0cy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVhZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoY291bnQpOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKCSAgICAgICAgICAgIHJlYWRCeXRlc1tpXSA9IC8qKGJ5dGUpICovIGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVuY29kaW5nOwoJICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgLy8gVGhlIHNwZWMgaXNuJ3QgY2xlYXIgb24gdGhpcyBtb2RlOyBzZWUKCSAgICAgICAgICAgIC8vIHNlY3Rpb24gNi40LjU6IHQgZG9lcyBub3Qgc2F5IHdoaWNoIGVuY29kaW5nIHRvIGFzc3VtaW5nCgkgICAgICAgICAgICAvLyB1cG9uIGRlY29kaW5nLiBJIGhhdmUgc2VlbiBJU08tODg1OS0xIHVzZWQgYXMgd2VsbCBhcwoJICAgICAgICAgICAgLy8gU2hpZnRfSklTIC0tIHdpdGhvdXQgYW55dGhpbmcgbGlrZSBhbiBFQ0kgZGVzaWduYXRvciB0bwoJICAgICAgICAgICAgLy8gZ2l2ZSBhIGhpbnQuCgkgICAgICAgICAgICBlbmNvZGluZyA9IFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5ndWVzc0VuY29kaW5nKHJlYWRCeXRlcywgaGludHMpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgZW5jb2RpbmcgPSBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLmdldE5hbWUoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKHJlYWRCeXRlcywgZW5jb2RpbmcpKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgICAgICBieXRlU2VnbWVudHMucHVzaChyZWFkQnl0ZXMpOwoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPj0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5BTFBIQU5VTUVSSUNfQ0hBUlMubGVuZ3RoKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLkFMUEhBTlVNRVJJQ19DSEFSU1t2YWx1ZV07CgkgICAgfTsKCSAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBmYzFJbkVmZmVjdCkgewoJICAgICAgICAvLyBSZWFkIHR3byBjaGFyYWN0ZXJzIGF0IGEgdGltZQoJICAgICAgICB2YXIgc3RhcnQgPSByZXN1bHQubGVuZ3RoKCk7CgkgICAgICAgIHdoaWxlIChjb3VudCA+IDEpIHsKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTEpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIG5leHRUd29DaGFyc0JpdHMgPSBiaXRzLnJlYWRCaXRzKDExKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcihuZXh0VHdvQ2hhcnNCaXRzIC8gNDUpKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKG5leHRUd29DaGFyc0JpdHMgJSA0NSkpOwoJICAgICAgICAgICAgY291bnQgLT0gMjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY291bnQgPT09IDEpIHsKCSAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZTogb25lIGNoYXJhY3RlciBsZWZ0CgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDYpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcihiaXRzLnJlYWRCaXRzKDYpKSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gU2VlIHNlY3Rpb24gNi40LjguMSwgNi40LjguMgoJICAgICAgICBpZiAoZmMxSW5FZmZlY3QpIHsKCSAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gbWFzc2FnZSB0aGUgcmVzdWx0IGEgYml0IGlmIGluIGFuIEZOQzEgbW9kZToKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IHJlc3VsdC5sZW5ndGgoKTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jaGFyQXQoaSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHJlc3VsdC5sZW5ndGgoKSAtIDEgJiYgcmVzdWx0LmNoYXJBdChpICsgMSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gJSUgaXMgcmVuZGVyZWQgYXMgJQoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRlbGV0ZUNoYXJBdChpICsgMSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBhbHBoYSBtb2RlLCAlIHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gRk5DMSBzZXBhcmF0b3IgMHgxRAoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldENoYXJBdChpLCBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MUQpKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVOdW1lcmljU2VnbWVudCA9IGZ1bmN0aW9uIChiaXRzLCByZXN1bHQsIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgLy8gUmVhZCB0aHJlZSBkaWdpdHMgYXQgYSB0aW1lCgkgICAgICAgIHdoaWxlIChjb3VudCA+PSAzKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEwIGJpdHMgZW5jb2RlcyB0aHJlZSBkaWdpdHMKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTApIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIHRocmVlRGlnaXRzQml0cyA9IGJpdHMucmVhZEJpdHMoMTApOwoJICAgICAgICAgICAgaWYgKHRocmVlRGlnaXRzQml0cyA+PSAxMDAwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcih0aHJlZURpZ2l0c0JpdHMgLyAxMDApKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodGhyZWVEaWdpdHNCaXRzIC8gMTApICUgMTApKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIodGhyZWVEaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgICAgIGNvdW50IC09IDM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvdW50ID09PSAyKSB7CgkgICAgICAgICAgICAvLyBUd28gZGlnaXRzIGxlZnQgb3ZlciB0byByZWFkLCBlbmNvZGVkIGluIDcgYml0cwoJICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA3KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciB0d29EaWdpdHNCaXRzID0gYml0cy5yZWFkQml0cyg3KTsKCSAgICAgICAgICAgIGlmICh0d29EaWdpdHNCaXRzID49IDEwMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodHdvRGlnaXRzQml0cyAvIDEwKSkpOwoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcih0d29EaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChjb3VudCA9PT0gMSkgewoJICAgICAgICAgICAgLy8gT25lIGRpZ2l0IGxlZnQgb3ZlciB0byByZWFkCgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIGRpZ2l0Qml0cyA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICBpZiAoZGlnaXRCaXRzID49IDEwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoZGlnaXRCaXRzKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIucGFyc2VFQ0lWYWx1ZSA9IGZ1bmN0aW9uIChiaXRzKSB7CgkgICAgICAgIHZhciBmaXJzdEJ5dGUgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4ODApID09PSAwKSB7CgkgICAgICAgICAgICAvLyBqdXN0IG9uZSBieXRlCgkgICAgICAgICAgICByZXR1cm4gZmlyc3RCeXRlICYgMHg3RjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICAvLyB0d28gYnl0ZXMKCSAgICAgICAgICAgIHZhciBzZWNvbmRCeXRlID0gYml0cy5yZWFkQml0cyg4KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDNGKSA8PCA4KSAmIDB4RkZGRkZGRkYpIHwgc2Vjb25kQnl0ZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4RTApID09PSAweEMwKSB7CgkgICAgICAgICAgICAvLyB0aHJlZSBieXRlcwoJICAgICAgICAgICAgdmFyIHNlY29uZFRoaXJkQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDE2KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDFGKSA8PCAxNikgJiAweEZGRkZGRkZGKSB8IHNlY29uZFRoaXJkQnl0ZXM7CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFNlZSBJU08gMTgwMDQ6MjAwNiwgNi40LjQgVGFibGUgNQoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuQUxQSEFOVU1FUklDX0NIQVJTID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiAkJSorLS4vOic7CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUID0gMTsKCSAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcjsKCX0oKSk7CglEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuZGVmYXVsdCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXI7CgoJdmFyIFFSQ29kZURlY29kZXJNZXRhRGF0YSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShRUkNvZGVEZWNvZGVyTWV0YURhdGEkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiBNZXRhLWRhdGEgY29udGFpbmVyIGZvciBRUiBDb2RlIGRlY29kaW5nLiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBtYXkgYmUgdXNlZCB0byBjb252ZXkgaW5mb3JtYXRpb24gYmFjayB0byB0aGUKCSAqIGRlY29kaW5nIGNhbGxlci4gQ2FsbGVycyBhcmUgZXhwZWN0ZWQgdG8gcHJvY2VzcyB0aGlzLgoJICoKCSAqIEBzZWUgY29tLmdvb2dsZS56eGluZy5jb21tb24uRGVjb2RlclJlc3VsdCNnZXRPdGhlcigpCgkgKi8KCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUVJDb2RlRGVjb2Rlck1ldGFEYXRhKG1pcnJvcmVkKSB7CgkgICAgICAgIHRoaXMubWlycm9yZWQgPSBtaXJyb3JlZDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBRUiBDb2RlIHdhcyBtaXJyb3JlZC4KCSAgICAgKi8KCSAgICBRUkNvZGVEZWNvZGVyTWV0YURhdGEucHJvdG90eXBlLmlzTWlycm9yZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm1pcnJvcmVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbHkgdGhlIHJlc3VsdCBwb2ludHMnIG9yZGVyIGNvcnJlY3Rpb24gZHVlIHRvIG1pcnJvcmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBwb2ludHMgQXJyYXkgb2YgcG9pbnRzIHRvIGFwcGx5IG1pcnJvciBjb3JyZWN0aW9uIHRvLgoJICAgICAqLwoJICAgIFFSQ29kZURlY29kZXJNZXRhRGF0YS5wcm90b3R5cGUuYXBwbHlNaXJyb3JlZENvcnJlY3Rpb24gPSBmdW5jdGlvbiAocG9pbnRzKSB7CgkgICAgICAgIGlmICghdGhpcy5taXJyb3JlZCB8fCBwb2ludHMgPT09IG51bGwgfHwgcG9pbnRzLmxlbmd0aCA8IDMpIHsKCSAgICAgICAgICAgIHJldHVybjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IHBvaW50c1swXTsKCSAgICAgICAgcG9pbnRzWzBdID0gcG9pbnRzWzJdOwoJICAgICAgICBwb2ludHNbMl0gPSBib3R0b21MZWZ0OwoJICAgICAgICAvLyBObyBuZWVkIHRvICdmaXgnIHRvcC1sZWZ0IGFuZCBhbGlnbm1lbnQgcGF0dGVybi4KCSAgICB9OwoJICAgIHJldHVybiBRUkNvZGVEZWNvZGVyTWV0YURhdGE7Cgl9KCkpOwoJUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDEuZGVmYXVsdCA9IFFSQ29kZURlY29kZXJNZXRhRGF0YTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVjb2RlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZWNvZGVyIHsqLwoJdmFyIENoZWNrc3VtRXhjZXB0aW9uXzEgPSBDaGVja3N1bUV4Y2VwdGlvbiQxOwoJdmFyIEJpdE1hdHJpeF8xJDIgPSBCaXRNYXRyaXgkMTsKCXZhciBHZW5lcmljR0ZfMSA9IEdlbmVyaWNHRiQxOwoJdmFyIFJlZWRTb2xvbW9uRGVjb2Rlcl8xID0gUmVlZFNvbG9tb25EZWNvZGVyJDE7Cgl2YXIgQml0TWF0cml4UGFyc2VyXzEgPSBCaXRNYXRyaXhQYXJzZXIkMTsKCXZhciBEYXRhQmxvY2tfMSA9IERhdGFCbG9jayQxOwoJdmFyIERlY29kZWRCaXRTdHJlYW1QYXJzZXJfMSA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxID0gUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoZSBtYWluIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgUVIgQ29kZSBkZWNvZGluZyAtLSBhcyBvcHBvc2VkIHRvIGxvY2F0aW5nIGFuZCBleHRyYWN0aW5nCgkgKiB0aGUgUVIgQ29kZSBmcm9tIGFuIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEZWNvZGVyKCkgewoJICAgICAgICB0aGlzLnJzRGVjb2RlciA9IG5ldyBSZWVkU29sb21vbkRlY29kZXJfMS5kZWZhdWx0KEdlbmVyaWNHRl8xLmRlZmF1bHQuUVJfQ09ERV9GSUVMRF8yNTYpOwoJICAgIH0KCSAgICAvLyBwdWJsaWMgZGVjb2RlKGltYWdlOiBib29sZWFuW11bXSk6IERlY29kZXJSZXN1bHQgLyp0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkNvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGNhbiBkZWNvZGUgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEgMkQgYXJyYXkgb2YgYm9vbGVhbnMuCgkgICAgICogInRydWUiIGlzIHRha2VuIHRvIG1lYW4gYSBibGFjayBtb2R1bGUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGJvb2xlYW5zIHJlcHJlc2VudGluZyB3aGl0ZS9ibGFjayBRUiBDb2RlIG1vZHVsZXMKCSAgICAgKiBAcGFyYW0gaGludHMgZGVjb2RpbmcgaGludHMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBpbmZsdWVuY2UgZGVjb2RpbmcKCSAgICAgKiBAcmV0dXJuIHRleHQgYW5kIGJ5dGVzIGVuY29kZWQgd2l0aGluIHRoZSBRUiBDb2RlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIFFSIENvZGUgY2Fubm90IGJlIGRlY29kZWQKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCb29sZWFuQXJyYXkgPSBmdW5jdGlvbiAoaW1hZ2UsIGhpbnRzKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeChCaXRNYXRyaXhfMSQyLmRlZmF1bHQucGFyc2VGcm9tQm9vbGVhbkFycmF5KGltYWdlKSwgaGludHMpOwoJICAgIH07CgkgICAgLy8gcHVibGljIGRlY29kZUJpdE1hdHJpeChiaXRzOiBCaXRNYXRyaXgpOiBEZWNvZGVyUmVzdWx0IC8qdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uLCBGb3JtYXRFeGNlcHRpb24qLyB7CgkgICAgLy8gICByZXR1cm4gZGVjb2RlKGJpdHMsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkRlY29kZXMgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0uIEEgMSBvciAidHJ1ZSIgaXMgdGFrZW4gdG8gbWVhbiBhIGJsYWNrIG1vZHVsZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0cyBib29sZWFucyByZXByZXNlbnRpbmcgd2hpdGUvYmxhY2sgUVIgQ29kZSBtb2R1bGVzCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kaW5nIGhpbnRzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gaW5mbHVlbmNlIGRlY29kaW5nCgkgICAgICogQHJldHVybiB0ZXh0IGFuZCBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBRUiBDb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIENvbnN0cnVjdCBhIHBhcnNlciBhbmQgcmVhZCB2ZXJzaW9uLCBlcnJvci1jb3JyZWN0aW9uIGxldmVsCgkgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgQml0TWF0cml4UGFyc2VyXzEuZGVmYXVsdChiaXRzKTsKCSAgICAgICAgdmFyIGV4ID0gbnVsbDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKjogRm9ybWF0RXhjZXB0aW9uLCBDaGVja3N1bUV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICBleCA9IGU7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIC8vIFJldmVydCB0aGUgYml0IG1hdHJpeAoJICAgICAgICAgICAgcGFyc2VyLnJlbWFzaygpOwoJICAgICAgICAgICAgLy8gV2lsbCBiZSBhdHRlbXB0aW5nIGEgbWlycm9yZWQgcmVhZGluZyBvZiB0aGUgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm8uCgkgICAgICAgICAgICBwYXJzZXIuc2V0TWlycm9yKHRydWUpOwoJICAgICAgICAgICAgLy8gUHJlZW1wdGl2ZWx5IHJlYWQgdGhlIHZlcnNpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgICAgIC8vIFByZWVtcHRpdmVseSByZWFkIHRoZSBmb3JtYXQgaW5mb3JtYXRpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCk7CgkgICAgICAgICAgICAvKgoJICAgICAgICAgICAgICogU2luY2Ugd2UncmUgaGVyZSwgdGhpcyBtZWFucyB3ZSBoYXZlIHN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBzb21lIGtpbmQKCSAgICAgICAgICAgICAqIG9mIHZlcnNpb24gYW5kIGZvcm1hdCBpbmZvcm1hdGlvbiB3aGVuIG1pcnJvcmVkLiBUaGlzIGlzIGEgZ29vZCBzaWduLAoJICAgICAgICAgICAgICogdGhhdCB0aGUgUVIgY29kZSBtYXkgYmUgbWlycm9yZWQsIGFuZCB3ZSBzaG91bGQgdHJ5IG9uY2UgbW9yZSB3aXRoIGEKCSAgICAgICAgICAgICAqIG1pcnJvcmVkIGNvbnRlbnQuCgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIFByZXBhcmUgZm9yIGEgbWlycm9yZWQgcmVhZGluZy4KCSAgICAgICAgICAgIHBhcnNlci5taXJyb3IoKTsKCSAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgICAgIC8vIFN1Y2Nlc3MhIE5vdGlmeSB0aGUgY2FsbGVyIHRoYXQgdGhlIGNvZGUgd2FzIG1pcnJvcmVkLgoJICAgICAgICAgICAgcmVzdWx0LnNldE90aGVyKG5ldyBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxLmRlZmF1bHQodHJ1ZSkpOwoJICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKkZvcm1hdEV4Y2VwdGlvbiB8IENoZWNrc3VtRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIFRocm93IHRoZSBleGNlcHRpb24gZnJvbSB0aGUgb3JpZ2luYWwgcmVhZGluZwoJICAgICAgICAgICAgaWYgKGV4ICE9PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgZXg7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0aHJvdyBlOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCaXRNYXRyaXhQYXJzZXIgPSBmdW5jdGlvbiAocGFyc2VyLCBoaW50cykgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgdmFyIHZlcnNpb24gPSBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCkuZ2V0RXJyb3JDb3JyZWN0aW9uTGV2ZWwoKTsKCSAgICAgICAgLy8gUmVhZCBjb2Rld29yZHMKCSAgICAgICAgdmFyIGNvZGV3b3JkcyA9IHBhcnNlci5yZWFkQ29kZXdvcmRzKCk7CgkgICAgICAgIC8vIFNlcGFyYXRlIGludG8gZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIGRhdGFCbG9ja3MgPSBEYXRhQmxvY2tfMS5kZWZhdWx0LmdldERhdGFCbG9ja3MoY29kZXdvcmRzLCB2ZXJzaW9uLCBlY0xldmVsKTsKCSAgICAgICAgLy8gQ291bnQgdG90YWwgbnVtYmVyIG9mIGRhdGEgYnl0ZXMKCSAgICAgICAgdmFyIHRvdGFsQnl0ZXMgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZGF0YUJsb2Nrc18xID0gX192YWx1ZXMkMihkYXRhQmxvY2tzKSwgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpOyAhZGF0YUJsb2Nrc18xXzEuZG9uZTsgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRhdGFCbG9jayA9IGRhdGFCbG9ja3NfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXMgKz0gZGF0YUJsb2NrLmdldE51bURhdGFDb2Rld29yZHMoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMV8xICYmICFkYXRhQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGRhdGFCbG9ja3NfMS5yZXR1cm4pKSBfYS5jYWxsKGRhdGFCbG9ja3NfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkodG90YWxCeXRlcyk7CgkgICAgICAgIHZhciByZXN1bHRPZmZzZXQgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgLy8gRXJyb3ItY29ycmVjdCBhbmQgY29weSBkYXRhIGJsb2NrcyB0b2dldGhlciBpbnRvIGEgc3RyZWFtIG9mIGJ5dGVzCgkgICAgICAgICAgICBmb3IgKHZhciBkYXRhQmxvY2tzXzIgPSBfX3ZhbHVlcyQyKGRhdGFCbG9ja3MpLCBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCk7ICFkYXRhQmxvY2tzXzJfMS5kb25lOyBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZGF0YUJsb2NrID0gZGF0YUJsb2Nrc18yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdmFyIGNvZGV3b3JkQnl0ZXMgPSBkYXRhQmxvY2suZ2V0Q29kZXdvcmRzKCk7CgkgICAgICAgICAgICAgICAgdmFyIG51bURhdGFDb2Rld29yZHMgPSBkYXRhQmxvY2suZ2V0TnVtRGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdEVycm9ycyhjb2Rld29yZEJ5dGVzLCBudW1EYXRhQ29kZXdvcmRzKTsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICByZXN1bHRCeXRlc1tyZXN1bHRPZmZzZXQrK10gPSBjb2Rld29yZEJ5dGVzW2ldOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMl8xICYmICFkYXRhQmxvY2tzXzJfMS5kb25lICYmIChfYiA9IGRhdGFCbG9ja3NfMi5yZXR1cm4pKSBfYi5jYWxsKGRhdGFCbG9ja3NfMik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRGVjb2RlIHRoZSBjb250ZW50cyBvZiB0aGF0IHN0cmVhbSBvZiBieXRlcwoJICAgICAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcl8xLmRlZmF1bHQuZGVjb2RlKHJlc3VsdEJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5HaXZlbiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyByZWNlaXZlZCwgcG9zc2libHkgY29ycnVwdGVkIGJ5IGVycm9ycywgYXR0ZW1wdHMgdG8KCSAgICAgKiBjb3JyZWN0IHRoZSBlcnJvcnMgaW4tcGxhY2UgdXNpbmcgUmVlZC1Tb2xvbW9uIGVycm9yIGNvcnJlY3Rpb24uPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGNvZGV3b3JkQnl0ZXMgZGF0YSBhbmQgZXJyb3IgY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgKiBAcGFyYW0gbnVtRGF0YUNvZGV3b3JkcyBudW1iZXIgb2YgY29kZXdvcmRzIHRoYXQgYXJlIGRhdGEgYnl0ZXMKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5jb3JyZWN0RXJyb3JzID0gZnVuY3Rpb24gKGNvZGV3b3JkQnl0ZXMsIG51bURhdGFDb2Rld29yZHMgLyppbnQqLykgewoJICAgICAgICAvLyBjb25zdCBudW1Db2Rld29yZHMgPSBjb2Rld29yZEJ5dGVzLmxlbmd0aDsKCSAgICAgICAgLy8gRmlyc3QgcmVhZCBpbnRvIGFuIGFycmF5IG9mIGludHMKCSAgICAgICAgdmFyIGNvZGV3b3Jkc0ludHMgPSBuZXcgSW50MzJBcnJheShjb2Rld29yZEJ5dGVzKTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG5vdCByZWFseSBuZWNlc3NhcnkgdG8gdHJhbnNmb3JtIHRvIGludHM/IGNvdWxkIHJlZGVzaWduIGV2ZXJ5dGhpbmcgdG8gd29yayB3aXRoIHVuc2lnbmVkIGJ5dGVzPwoJICAgICAgICAvLyBjb25zdCBjb2Rld29yZHNJbnRzID0gbmV3IEludDMyQXJyYXkobnVtQ29kZXdvcmRzKQoJICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvZGV3b3JkczsgaSsrKSB7CgkgICAgICAgIC8vICAgY29kZXdvcmRzSW50c1tpXSA9IGNvZGV3b3JkQnl0ZXNbaV0gJiAweEZGCgkgICAgICAgIC8vIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHRoaXMucnNEZWNvZGVyLmRlY29kZShjb2Rld29yZHNJbnRzLCBjb2Rld29yZEJ5dGVzLmxlbmd0aCAtIG51bURhdGFDb2Rld29yZHMpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChpZ25vcmVkIC8qOiBSZWVkU29sb21vbkV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQ2hlY2tzdW1FeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29weSBiYWNrIGludG8gYXJyYXkgb2YgYnl0ZXMgLS0gb25seSBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoZSBieXRlcyB0aGF0IHdlcmUgZGF0YQoJICAgICAgICAvLyBXZSBkb24ndCBjYXJlIGFib3V0IGVycm9ycyBpbiB0aGUgZXJyb3ItY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1EYXRhQ29kZXdvcmRzOyBpKyspIHsKCSAgICAgICAgICAgIGNvZGV3b3JkQnl0ZXNbaV0gPSAvKihieXRlKSAqLyBjb2Rld29yZHNJbnRzW2ldOwoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlcjsKCX0oKSk7CglEZWNvZGVyJDEuZGVmYXVsdCA9IERlY29kZXI7CgoJdmFyIERldGVjdG9yJDEgPSB7fTsKCgl2YXIgTWF0aFV0aWxzJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMTIgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdGhVdGlscyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5kZXRlY3RvciB7Ki8KCS8qKgoJICogR2VuZXJhbCBtYXRoLXJlbGF0ZWQgYW5kIG51bWVyaWMgdXRpbGl0eSBmdW5jdGlvbnMuCgkgKi8KCXZhciBNYXRoVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gTWF0aFV0aWxzKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBFbmRzIHVwIGJlaW5nIGEgYml0IGZhc3RlciB0aGFuIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0uIFRoaXMgbWVyZWx5IHJvdW5kcyBpdHMKCSAgICAgKiBhcmd1bWVudCB0byB0aGUgbmVhcmVzdCBpbnQsIHdoZXJlIHguNSByb3VuZHMgdXAgdG8geCsxLiBTZW1hbnRpY3Mgb2YgdGhpcyBzaG9ydGN1dAoJICAgICAqIGRpZmZlciBzbGlnaHRseSBmcm9tIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0gaW4gdGhhdCBoYWxmIHJvdW5kcyBkb3duIGZvciBuZWdhdGl2ZQoJICAgICAqIHZhbHVlcy4gLTIuNSByb3VuZHMgdG8gLTMsIG5vdCAtMi4gRm9yIHB1cnBvc2VzIGhlcmUgaXQgbWFrZXMgbm8gZGlmZmVyZW5jZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBkIHJlYWwgdmFsdWUgdG8gcm91bmQKCSAgICAgKiBAcmV0dXJuIG5lYXJlc3Qge0Bjb2RlIGludH0KCSAgICAgKi8KCSAgICBNYXRoVXRpbHMucm91bmQgPSBmdW5jdGlvbiAoZCAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE5hTiA9PT0gZCkKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICBpZiAoZCA8PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUikKCSAgICAgICAgICAgIHJldHVybiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjsKCSAgICAgICAgaWYgKGQgPj0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpCgkgICAgICAgICAgICByZXR1cm4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHJldHVybiAvKihpbnQpICovIChkICsgKGQgPCAwLjAgPyAtMC41IDogMC41KSkgfCAwOwoJICAgIH07CgkgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG1heWJlIHJlbW92ZSByb3VuZCBtZXRob2QgYW5kIGNhbGwgZGlyZWN0bHkgTWF0aC5yb3VuZCwgaXQgbG9va3MgbGlrZSBpdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIGpzCgkgICAgLyoqCgkgICAgICogQHBhcmFtIGFYIHBvaW50IEEgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGFZIHBvaW50IEEgeSBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJYIHBvaW50IEIgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJZIHBvaW50IEIgeSBjb29yZGluYXRlCgkgICAgICogQHJldHVybiBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiBwb2ludHMgQSBhbmQgQgoJICAgICAqLwoJICAgIE1hdGhVdGlscy5kaXN0YW5jZSA9IGZ1bmN0aW9uIChhWCAvKmZsb2F0fGludCovLCBhWSAvKmZsb2F0fGludCovLCBiWCAvKmZsb2F0fGludCovLCBiWSAvKmZsb2F0fGludCovKSB7CgkgICAgICAgIHZhciB4RGlmZiA9IGFYIC0gYlg7CgkgICAgICAgIHZhciB5RGlmZiA9IGFZIC0gYlk7CgkgICAgICAgIHJldHVybiAvKihmbG9hdCkgKi8gTWF0aC5zcXJ0KHhEaWZmICogeERpZmYgKyB5RGlmZiAqIHlEaWZmKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBhWCBwb2ludCBBIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBhWSBwb2ludCBBIHkgY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWCBwb2ludCBCIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWSBwb2ludCBCIHkgY29vcmRpbmF0ZQoJICAgICAqIEByZXR1cm4gRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gcG9pbnRzIEEgYW5kIEIKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgc3RhdGljIGRpc3RhbmNlKGFYOiBudW1iZXIgLyppbnQqLywgYVk6IG51bWJlciAvKmludCovLCBiWDogbnVtYmVyIC8qaW50Ki8sIGJZOiBudW1iZXIgLyppbnQqLyk6IGZsb2F0IHsKCSAgICAvLyAgIGNvbnN0IHhEaWZmID0gYVggLSBiWAoJICAgIC8vICAgY29uc3QgeURpZmYgPSBhWSAtIGJZCgkgICAgLy8gICByZXR1cm4gKGZsb2F0KSBNYXRoLnNxcnQoeERpZmYgKiB4RGlmZiArIHlEaWZmICogeURpZmYpOwoJICAgIC8vIH0KCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYXJyYXkgdmFsdWVzIHRvIHN1bQoJICAgICAqIEByZXR1cm4gc3VtIG9mIHZhbHVlcyBpbiBhcnJheQoJICAgICAqLwoJICAgIE1hdGhVdGlscy5zdW0gPSBmdW5jdGlvbiAoYXJyYXkpIHsKCSAgICAgICAgdmFyIGNvdW50ID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gYXJyYXkubGVuZ3RoOyBpICE9PSBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgYSA9IGFycmF5W2ldOwoJICAgICAgICAgICAgY291bnQgKz0gYTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY291bnQ7CgkgICAgfTsKCSAgICByZXR1cm4gTWF0aFV0aWxzOwoJfSgpKTsKCU1hdGhVdGlscyQxLmRlZmF1bHQgPSBNYXRoVXRpbHM7CgoJdmFyIERldGVjdG9yUmVzdWx0JDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERldGVjdG9yUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGV0ZWN0aW5nIGEgYmFyY29kZSBpbiBhbiBpbWFnZS4gVGhpcyBpbmNsdWRlcyB0aGUgcmF3CgkgKiBtYXRyaXggb2YgYmxhY2svd2hpdGUgcGl4ZWxzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGJhcmNvZGUsIGFuZCBwb3NzaWJseSBwb2ludHMgb2YgaW50ZXJlc3QKCSAqIGluIHRoZSBpbWFnZSwgbGlrZSB0aGUgbG9jYXRpb24gb2YgZmluZGVyIHBhdHRlcm5zIG9yIGNvcm5lcnMgb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGV0ZWN0b3JSZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gRGV0ZWN0b3JSZXN1bHQoYml0cywgcG9pbnRzKSB7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzOwoJICAgIH0KCSAgICBEZXRlY3RvclJlc3VsdC5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIERldGVjdG9yUmVzdWx0LnByb3RvdHlwZS5nZXRQb2ludHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnBvaW50czsKCSAgICB9OwoJICAgIHJldHVybiBEZXRlY3RvclJlc3VsdDsKCX0oKSk7CglEZXRlY3RvclJlc3VsdCQxLmRlZmF1bHQgPSBEZXRlY3RvclJlc3VsdDsKCgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSQxID0ge307CgoJdmFyIERlZmF1bHRHcmlkU2FtcGxlciQxID0ge307CgoJdmFyIEdyaWRTYW1wbGVyJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDUgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBJbXBsZW1lbnRhdGlvbnMgb2YgdGhpcyBjbGFzcyBjYW4sIGdpdmVuIGxvY2F0aW9ucyBvZiBmaW5kZXIgcGF0dGVybnMgZm9yIGEgUVIgY29kZSBpbiBhbgoJICogaW1hZ2UsIHNhbXBsZSB0aGUgcmlnaHQgcG9pbnRzIGluIHRoZSBpbWFnZSB0byByZWNvbnN0cnVjdCB0aGUgUVIgY29kZSwgYWNjb3VudGluZyBmb3IKCSAqIHBlcnNwZWN0aXZlIGRpc3RvcnRpb24uIEl0IGlzIGFic3RyYWN0ZWQgc2luY2UgaXQgaXMgcmVsYXRpdmVseSBleHBlbnNpdmUgYW5kIHNob3VsZCBiZSBhbGxvd2VkCgkgKiB0byB0YWtlIGFkdmFudGFnZSBvZiBwbGF0Zm9ybS1zcGVjaWZpYyBvcHRpbWl6ZWQgaW1wbGVtZW50YXRpb25zLCBsaWtlIFN1bidzIEphdmEgQWR2YW5jZWQKCSAqIEltYWdpbmcgbGlicmFyeSwgYnV0IHdoaWNoIG1heSBub3QgYmUgYXZhaWxhYmxlIGluIG90aGVyIGVudmlyb25tZW50cyBzdWNoIGFzIEoyTUUsIGFuZCB2aWNlCgkgKiB2ZXJzYS4KCSAqCgkgKiBUaGUgaW1wbGVtZW50YXRpb24gdXNlZCBjYW4gYmUgY29udHJvbGxlZCBieSBjYWxsaW5nIHtAbGluayAjc2V0R3JpZFNhbXBsZXIoR3JpZFNhbXBsZXIpfQoJICogd2l0aCBhbiBpbnN0YW5jZSBvZiBhIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgdGhpcyBpbnRlcmZhY2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdyaWRTYW1wbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEdyaWRTYW1wbGVyKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5DaGVja3MgYSBzZXQgb2YgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIHRyYW5zZm9ybWVkIHRvIHNhbXBsZSBwb2ludHMgb24gYW4gaW1hZ2UgYWdhaW5zdAoJICAgICAqIHRoZSBpbWFnZSdzIGRpbWVuc2lvbnMgdG8gc2VlIGlmIHRoZSBwb2ludCBhcmUgZXZlbiB3aXRoaW4gdGhlIGltYWdlLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHdpbGwgYWN0dWFsbHkgIm51ZGdlIiB0aGUgZW5kcG9pbnRzIGJhY2sgb250byB0aGUgaW1hZ2UgaWYgdGhleSBhcmUgZm91bmQgdG8gYmUKCSAgICAgKiBiYXJlbHkgKGxlc3MgdGhhbiAxIHBpeGVsKSBvZmYgdGhlIGltYWdlLiBUaGlzIGFjY291bnRzIGZvciBpbXBlcmZlY3QgZGV0ZWN0aW9uIG9mIGZpbmRlcgoJICAgICAqIHBhdHRlcm5zIGluIGFuIGltYWdlIHdoZXJlIHRoZSBRUiBDb2RlIHJ1bnMgYWxsIHRoZSB3YXkgdG8gdGhlIGltYWdlIGJvcmRlci48L3A+CgkgICAgICoKCSAgICAgKiA8cD5Gb3IgZWZmaWNpZW5jeSwgdGhlIG1ldGhvZCB3aWxsIGNoZWNrIHBvaW50cyBmcm9tIGVpdGhlciBlbmQgb2YgdGhlIGxpbmUgdW50aWwgb25lIGlzIGZvdW5kCgkgICAgICogdG8gYmUgd2l0aGluIHRoZSBpbWFnZS4gQmVjYXVzZSB0aGUgc2V0IG9mIHBvaW50cyBhcmUgYXNzdW1lZCB0byBiZSBsaW5lYXIsIHRoaXMgaXMgdmFsaWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGltYWdlIGludG8gd2hpY2ggdGhlIHBvaW50cyBzaG91bGQgbWFwCgkgICAgICogQHBhcmFtIHBvaW50cyBhY3R1YWwgcG9pbnRzIGluIHgxLHkxLC4uLix4bix5biBmb3JtCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhbiBlbmRwb2ludCBpcyBsaWVzIG91dHNpZGUgdGhlIGltYWdlIGJvdW5kYXJpZXMKCSAgICAgKi8KCSAgICBHcmlkU2FtcGxlci5jaGVja0FuZE51ZGdlUG9pbnRzID0gZnVuY3Rpb24gKGltYWdlLCBwb2ludHMpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gc3RhcnQgdW50aWwgd2Ugc2VlIHNvbWUgdGhhdCBhcmUgT0s6CgkgICAgICAgIHZhciBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBwb2ludHMubGVuZ3RoICYmIG51ZGdlZDsgb2Zmc2V0ICs9IDIpIHsKCSAgICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0XSk7CgkgICAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IocG9pbnRzW29mZnNldCArIDFdKTsKCSAgICAgICAgICAgIGlmICh4IDwgLTEgfHwgeCA+IHdpZHRoIHx8IHkgPCAtMSB8fCB5ID4gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBudWRnZWQgPSBmYWxzZTsKCSAgICAgICAgICAgIGlmICh4ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gMC4wOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmICh4ID09PSB3aWR0aCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gd2lkdGggLSAxOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAoeSA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICBwb2ludHNbb2Zmc2V0ICsgMV0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IGhlaWdodCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gZW5kOgoJICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSBwb2ludHMubGVuZ3RoIC0gMjsgb2Zmc2V0ID49IDAgJiYgbnVkZ2VkOyBvZmZzZXQgLT0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKHBvaW50c1tvZmZzZXRdKTsKCSAgICAgICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0ICsgMV0pOwoJICAgICAgICAgICAgaWYgKHggPCAtMSB8fCB4ID4gd2lkdGggfHwgeSA8IC0xIHx8IHkgPiBoZWlnaHQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ1LmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIG51ZGdlZCA9IGZhbHNlOwoJICAgICAgICAgICAgaWYgKHggPT09IC0xKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHggPT09IHdpZHRoKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSB3aWR0aCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmICh5ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IDAuMDsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoeSA9PT0gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldCArIDFdID0gaGVpZ2h0IC0gMTsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXI7Cgl9KCkpOwoJR3JpZFNhbXBsZXIkMS5kZWZhdWx0ID0gR3JpZFNhbXBsZXI7CgoJdmFyIFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGltcGxlbWVudHMgYSBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm0gaW4gdHdvIGRpbWVuc2lvbnMuIEdpdmVuIGZvdXIgc291cmNlIGFuZCBmb3VyCgkgKiBkZXN0aW5hdGlvbiBwb2ludHMsIGl0IHdpbGwgY29tcHV0ZSB0aGUgdHJhbnNmb3JtYXRpb24gaW1wbGllZCBiZXR3ZWVuIHRoZW0uIFRoZSBjb2RlIGlzIGJhc2VkCgkgKiBkaXJlY3RseSB1cG9uIHNlY3Rpb24gMy40LjIgb2YgR2VvcmdlIFdvbGJlcmcncyAiRGlnaXRhbCBJbWFnZSBXYXJwaW5nIjsgc2VlIHBhZ2VzIDU0LTU2LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUGVyc3BlY3RpdmVUcmFuc2Zvcm0oYTExIC8qZmxvYXQqLywgYTIxIC8qZmxvYXQqLywgYTMxIC8qZmxvYXQqLywgYTEyIC8qZmxvYXQqLywgYTIyIC8qZmxvYXQqLywgYTMyIC8qZmxvYXQqLywgYTEzIC8qZmxvYXQqLywgYTIzIC8qZmxvYXQqLywgYTMzIC8qZmxvYXQqLykgewoJICAgICAgICB0aGlzLmExMSA9IGExMTsKCSAgICAgICAgdGhpcy5hMjEgPSBhMjE7CgkgICAgICAgIHRoaXMuYTMxID0gYTMxOwoJICAgICAgICB0aGlzLmExMiA9IGExMjsKCSAgICAgICAgdGhpcy5hMjIgPSBhMjI7CgkgICAgICAgIHRoaXMuYTMyID0gYTMyOwoJICAgICAgICB0aGlzLmExMyA9IGExMzsKCSAgICAgICAgdGhpcy5hMjMgPSBhMjM7CgkgICAgICAgIHRoaXMuYTMzID0gYTMzOwoJICAgIH0KCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsID0gZnVuY3Rpb24gKHgwIC8qZmxvYXQqLywgeTAgLypmbG9hdCovLCB4MSAvKmZsb2F0Ki8sIHkxIC8qZmxvYXQqLywgeDIgLypmbG9hdCovLCB5MiAvKmZsb2F0Ki8sIHgzIC8qZmxvYXQqLywgeTMgLypmbG9hdCovLCB4MHAgLypmbG9hdCovLCB5MHAgLypmbG9hdCovLCB4MXAgLypmbG9hdCovLCB5MXAgLypmbG9hdCovLCB4MnAgLypmbG9hdCovLCB5MnAgLypmbG9hdCovLCB4M3AgLypmbG9hdCovLCB5M3AgLypmbG9hdCovKSB7CgkgICAgICAgIHZhciBxVG9TID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0ucXVhZHJpbGF0ZXJhbFRvU3F1YXJlKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5Myk7CgkgICAgICAgIHZhciBzVG9RID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwcCwgeTBwLCB4MXAsIHkxcCwgeDJwLCB5MnAsIHgzcCwgeTNwKTsKCSAgICAgICAgcmV0dXJuIHNUb1EudGltZXMocVRvUyk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnRzID0gZnVuY3Rpb24gKHBvaW50cykgewoJICAgICAgICB2YXIgbWF4ID0gcG9pbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkgKz0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBwb2ludHNbaV07CgkgICAgICAgICAgICB2YXIgeSA9IHBvaW50c1tpICsgMV07CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSBhMTMgKiB4ICsgYTIzICogeSArIGEzMzsKCSAgICAgICAgICAgIHBvaW50c1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHBvaW50c1tpICsgMV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50cmFuc2Zvcm1Qb2ludHNXaXRoVmFsdWVzID0gZnVuY3Rpb24gKHhWYWx1ZXMsIHlWYWx1ZXMpIHsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgdmFyIG4gPSB4VmFsdWVzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB4ID0geFZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciB5ID0geVZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciBkZW5vbWluYXRvciA9IGExMyAqIHggKyBhMjMgKiB5ICsgYTMzOwoJICAgICAgICAgICAgeFZhbHVlc1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHlWYWx1ZXNbaV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnNxdWFyZVRvUXVhZHJpbGF0ZXJhbCA9IGZ1bmN0aW9uICh4MCAvKmZsb2F0Ki8sIHkwIC8qZmxvYXQqLywgeDEgLypmbG9hdCovLCB5MSAvKmZsb2F0Ki8sIHgyIC8qZmxvYXQqLywgeTIgLypmbG9hdCovLCB4MyAvKmZsb2F0Ki8sIHkzIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgZHgzID0geDAgLSB4MSArIHgyIC0geDM7CgkgICAgICAgIHZhciBkeTMgPSB5MCAtIHkxICsgeTIgLSB5MzsKCSAgICAgICAgaWYgKGR4MyA9PT0gMC4wICYmIGR5MyA9PT0gMC4wKSB7CgkgICAgICAgICAgICAvLyBBZmZpbmUKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCwgeDIgLSB4MSwgeDAsIHkxIC0geTAsIHkyIC0geTEsIHkwLCAwLjAsIDAuMCwgMS4wKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHZhciBkeDEgPSB4MSAtIHgyOwoJICAgICAgICAgICAgdmFyIGR4MiA9IHgzIC0geDI7CgkgICAgICAgICAgICB2YXIgZHkxID0geTEgLSB5MjsKCSAgICAgICAgICAgIHZhciBkeTIgPSB5MyAtIHkyOwoJICAgICAgICAgICAgdmFyIGRlbm9taW5hdG9yID0gZHgxICogZHkyIC0gZHgyICogZHkxOwoJICAgICAgICAgICAgdmFyIGExMyA9IChkeDMgKiBkeTIgLSBkeDIgKiBkeTMpIC8gZGVub21pbmF0b3I7CgkgICAgICAgICAgICB2YXIgYTIzID0gKGR4MSAqIGR5MyAtIGR4MyAqIGR5MSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCArIGExMyAqIHgxLCB4MyAtIHgwICsgYTIzICogeDMsIHgwLCB5MSAtIHkwICsgYTEzICogeTEsIHkzIC0geTAgKyBhMjMgKiB5MywgeTAsIGExMywgYTIzLCAxLjApOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9TcXVhcmUgPSBmdW5jdGlvbiAoeDAgLypmbG9hdCovLCB5MCAvKmZsb2F0Ki8sIHgxIC8qZmxvYXQqLywgeTEgLypmbG9hdCovLCB4MiAvKmZsb2F0Ki8sIHkyIC8qZmxvYXQqLywgeDMgLypmbG9hdCovLCB5MyAvKmZsb2F0Ki8pIHsKCSAgICAgICAgLy8gSGVyZSwgdGhlIGFkam9pbnQgc2VydmVzIGFzIHRoZSBpbnZlcnNlOgoJICAgICAgICByZXR1cm4gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MykuYnVpbGRBZGpvaW50KCk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUuYnVpbGRBZGpvaW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBBZGpvaW50IGlzIHRoZSB0cmFuc3Bvc2Ugb2YgdGhlIGNvZmFjdG9yIG1hdHJpeDoKCSAgICAgICAgcmV0dXJuIG5ldyBQZXJzcGVjdGl2ZVRyYW5zZm9ybSh0aGlzLmEyMiAqIHRoaXMuYTMzIC0gdGhpcy5hMjMgKiB0aGlzLmEzMiwgdGhpcy5hMjMgKiB0aGlzLmEzMSAtIHRoaXMuYTIxICogdGhpcy5hMzMsIHRoaXMuYTIxICogdGhpcy5hMzIgLSB0aGlzLmEyMiAqIHRoaXMuYTMxLCB0aGlzLmExMyAqIHRoaXMuYTMyIC0gdGhpcy5hMTIgKiB0aGlzLmEzMywgdGhpcy5hMTEgKiB0aGlzLmEzMyAtIHRoaXMuYTEzICogdGhpcy5hMzEsIHRoaXMuYTEyICogdGhpcy5hMzEgLSB0aGlzLmExMSAqIHRoaXMuYTMyLCB0aGlzLmExMiAqIHRoaXMuYTIzIC0gdGhpcy5hMTMgKiB0aGlzLmEyMiwgdGhpcy5hMTMgKiB0aGlzLmEyMSAtIHRoaXMuYTExICogdGhpcy5hMjMsIHRoaXMuYTExICogdGhpcy5hMjIgLSB0aGlzLmExMiAqIHRoaXMuYTIxKTsKCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50aW1lcyA9IGZ1bmN0aW9uIChvdGhlcikgewoJICAgICAgICByZXR1cm4gbmV3IFBlcnNwZWN0aXZlVHJhbnNmb3JtKHRoaXMuYTExICogb3RoZXIuYTExICsgdGhpcy5hMjEgKiBvdGhlci5hMTIgKyB0aGlzLmEzMSAqIG90aGVyLmExMywgdGhpcy5hMTEgKiBvdGhlci5hMjEgKyB0aGlzLmEyMSAqIG90aGVyLmEyMiArIHRoaXMuYTMxICogb3RoZXIuYTIzLCB0aGlzLmExMSAqIG90aGVyLmEzMSArIHRoaXMuYTIxICogb3RoZXIuYTMyICsgdGhpcy5hMzEgKiBvdGhlci5hMzMsIHRoaXMuYTEyICogb3RoZXIuYTExICsgdGhpcy5hMjIgKiBvdGhlci5hMTIgKyB0aGlzLmEzMiAqIG90aGVyLmExMywgdGhpcy5hMTIgKiBvdGhlci5hMjEgKyB0aGlzLmEyMiAqIG90aGVyLmEyMiArIHRoaXMuYTMyICogb3RoZXIuYTIzLCB0aGlzLmExMiAqIG90aGVyLmEzMSArIHRoaXMuYTIyICogb3RoZXIuYTMyICsgdGhpcy5hMzIgKiBvdGhlci5hMzMsIHRoaXMuYTEzICogb3RoZXIuYTExICsgdGhpcy5hMjMgKiBvdGhlci5hMTIgKyB0aGlzLmEzMyAqIG90aGVyLmExMywgdGhpcy5hMTMgKiBvdGhlci5hMjEgKyB0aGlzLmEyMyAqIG90aGVyLmEyMiArIHRoaXMuYTMzICogb3RoZXIuYTIzLCB0aGlzLmExMyAqIG90aGVyLmEzMSArIHRoaXMuYTIzICogb3RoZXIuYTMyICsgdGhpcy5hMzMgKiBvdGhlci5hMzMpOwoJICAgIH07CgkgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoJfSgpKTsKCVBlcnNwZWN0aXZlVHJhbnNmb3JtJDEuZGVmYXVsdCA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVmYXVsdEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEdyaWRTYW1wbGVyXzEgPSBHcmlkU2FtcGxlciQxOwoJdmFyIEJpdE1hdHJpeF8xJDEgPSBCaXRNYXRyaXgkMTsKCXZhciBQZXJzcGVjdGl2ZVRyYW5zZm9ybV8xJDEgPSBQZXJzcGVjdGl2ZVRyYW5zZm9ybSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEkNCA9IE5vdEZvdW5kRXhjZXB0aW9uJDE7CgkvKioKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWZhdWx0R3JpZFNhbXBsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDIoRGVmYXVsdEdyaWRTYW1wbGVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIERlZmF1bHRHcmlkU2FtcGxlcigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgRGVmYXVsdEdyaWRTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGVHcmlkID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgcDFUb1ggLypmbG9hdCovLCBwMVRvWSAvKmZsb2F0Ki8sIHAyVG9YIC8qZmxvYXQqLywgcDJUb1kgLypmbG9hdCovLCBwM1RvWCAvKmZsb2F0Ki8sIHAzVG9ZIC8qZmxvYXQqLywgcDRUb1ggLypmbG9hdCovLCBwNFRvWSAvKmZsb2F0Ki8sIHAxRnJvbVggLypmbG9hdCovLCBwMUZyb21ZIC8qZmxvYXQqLywgcDJGcm9tWCAvKmZsb2F0Ki8sIHAyRnJvbVkgLypmbG9hdCovLCBwM0Zyb21YIC8qZmxvYXQqLywgcDNGcm9tWSAvKmZsb2F0Ki8sIHA0RnJvbVggLypmbG9hdCovLCBwNEZyb21ZIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSQxLmRlZmF1bHQucXVhZHJpbGF0ZXJhbFRvUXVhZHJpbGF0ZXJhbChwMVRvWCwgcDFUb1ksIHAyVG9YLCBwMlRvWSwgcDNUb1gsIHAzVG9ZLCBwNFRvWCwgcDRUb1ksIHAxRnJvbVgsIHAxRnJvbVksIHAyRnJvbVgsIHAyRnJvbVksIHAzRnJvbVgsIHAzRnJvbVksIHA0RnJvbVgsIHA0RnJvbVkpOwoJICAgICAgICByZXR1cm4gdGhpcy5zYW1wbGVHcmlkV2l0aFRyYW5zZm9ybShpbWFnZSwgZGltZW5zaW9uWCwgZGltZW5zaW9uWSwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBEZWZhdWx0R3JpZFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgdHJhbnNmb3JtKSB7CgkgICAgICAgIGlmIChkaW1lbnNpb25YIDw9IDAgfHwgZGltZW5zaW9uWSA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMSQxLmRlZmF1bHQoZGltZW5zaW9uWCwgZGltZW5zaW9uWSk7CgkgICAgICAgIHZhciBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KDIgKiBkaW1lbnNpb25YKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBkaW1lbnNpb25ZOyB5KyspIHsKCSAgICAgICAgICAgIHZhciBtYXggPSBwb2ludHMubGVuZ3RoOwoJICAgICAgICAgICAgdmFyIGlWYWx1ZSA9IHkgKyAwLjU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1heDsgeCArPSAyKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW3hdID0gKHggLyAyKSArIDAuNTsKCSAgICAgICAgICAgICAgICBwb2ludHNbeCArIDFdID0gaVZhbHVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50cyhwb2ludHMpOwoJICAgICAgICAgICAgLy8gUXVpY2sgY2hlY2sgdG8gc2VlIGlmIHBvaW50cyB0cmFuc2Zvcm1lZCB0byBzb21ldGhpbmcgaW5zaWRlIHRoZSBpbWFnZQoJICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0byBjaGVjayB0aGUgZW5kcG9pbnRzCgkgICAgICAgICAgICBHcmlkU2FtcGxlcl8xLmRlZmF1bHQuY2hlY2tBbmROdWRnZVBvaW50cyhpbWFnZSwgcG9pbnRzKTsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHggKz0gMikgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KE1hdGguZmxvb3IocG9pbnRzW3hdKSwgTWF0aC5mbG9vcihwb2ludHNbeCArIDFdKSkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrKC1pc2gpIHBpeGVsCgkgICAgICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4IC8gMiwgeSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoYWlvb2JlIC8qOiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgICAgIC8vIFRoaXMgZmVlbHMgd3JvbmcsIGJ1dCwgc29tZXRpbWVzIGlmIHRoZSBmaW5kZXIgcGF0dGVybnMgYXJlIG1pc2lkZW50aWZpZWQsIHRoZSByZXN1bHRpbmcKCSAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gZ2V0cyAidHdpc3RlZCIgc3VjaCB0aGF0IGl0IG1hcHMgYSBzdHJhaWdodCBsaW5lIG9mIHBvaW50cyB0byBhIHNldCBvZiBwb2ludHMKCSAgICAgICAgICAgICAgICAvLyB3aG9zZSBlbmRwb2ludHMgYXJlIGluIGJvdW5kcywgYnV0IG90aGVycyBhcmUgbm90LiBUaGVyZSBpcyBwcm9iYWJseSBzb21lIG1hdGhlbWF0aWNhbAoJICAgICAgICAgICAgICAgIC8vIHdheSB0byBkZXRlY3QgdGhpcyBhYm91dCB0aGUgdHJhbnNmb3JtYXRpb24gdGhhdCBJIGRvbid0IGtub3cgeWV0LgoJICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVzdWx0cyBpbiBhbiB1Z2x5IHJ1bnRpbWUgZXhjZXB0aW9uIGRlc3BpdGUgb3VyIGNsZXZlciBjaGVja3MgYWJvdmUgLS0gY2FuJ3QgaGF2ZQoJICAgICAgICAgICAgICAgIC8vIHRoYXQuIFdlIGNvdWxkIGNoZWNrIGVhY2ggcG9pbnQncyBjb29yZGluYXRlcyBidXQgdGhhdCBmZWVscyBkdXBsaWNhdGl2ZS4gV2Ugc2V0dGxlIGZvcgoJICAgICAgICAgICAgICAgIC8vIGNhdGNoaW5nIGFuZCB3cmFwcGluZyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24uCgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNC5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICByZXR1cm4gRGVmYXVsdEdyaWRTYW1wbGVyOwoJfShHcmlkU2FtcGxlcl8xLmRlZmF1bHQpKTsKCURlZmF1bHRHcmlkU2FtcGxlciQxLmRlZmF1bHQgPSBEZWZhdWx0R3JpZFNhbXBsZXI7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVySW5zdGFuY2UkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIERlZmF1bHRHcmlkU2FtcGxlcl8xID0gRGVmYXVsdEdyaWRTYW1wbGVyJDE7Cgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBHcmlkU2FtcGxlckluc3RhbmNlKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBTZXRzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBHcmlkU2FtcGxlciB1c2VkIGJ5IHRoZSBsaWJyYXJ5LiBPbmUgZ2xvYmFsCgkgICAgICogaW5zdGFuY2UgaXMgc3RvcmVkLCB3aGljaCBtYXkgc291bmQgcHJvYmxlbWF0aWMuIEJ1dCwgdGhlIGltcGxlbWVudGF0aW9uIHByb3ZpZGVkCgkgICAgICogb3VnaHQgdG8gYmUgYXBwcm9wcmlhdGUgZm9yIHRoZSBlbnRpcmUgcGxhdGZvcm0sIGFuZCBhbGwgdXNlcyBvZiB0aGlzIGxpYnJhcnkKCSAgICAgKiBpbiB0aGUgd2hvbGUgbGlmZXRpbWUgb2YgdGhlIEpWTS4gRm9yIGluc3RhbmNlLCBhbiBBbmRyb2lkIGFjdGl2aXR5IGNhbiBzd2FwIGluCgkgICAgICogYW4gaW1wbGVtZW50YXRpb24gdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgbmF0aXZlIHBsYXRmb3JtIGxpYnJhcmllcy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBuZXdHcmlkU2FtcGxlciBUaGUgcGxhdGZvcm0tc3BlY2lmaWMgb2JqZWN0IHRvIGluc3RhbGwuCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5zZXRHcmlkU2FtcGxlciA9IGZ1bmN0aW9uIChuZXdHcmlkU2FtcGxlcikgewoJICAgICAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3R3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIEdyaWRTYW1wbGVyCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIEdyaWRTYW1wbGVySW5zdGFuY2UuZ3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3IERlZmF1bHRHcmlkU2FtcGxlcl8xLmRlZmF1bHQoKTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXJJbnN0YW5jZTsKCX0oKSk7CglHcmlkU2FtcGxlckluc3RhbmNlJDEuZGVmYXVsdCA9IEdyaWRTYW1wbGVySW5zdGFuY2U7CgoJdmFyIFJlc3VsdFBvaW50JDEgPSB7fTsKCgl2YXIgRmxvYXQkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGbG9hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIFBvbnlmaWxsIGZvciBKYXZhJ3MgRmxvYXQgY2xhc3MuCgkgKi8KCXZhciBGbG9hdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBGbG9hdCgpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogU2luY1RTIGhhcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gaW50IGFuZCBmbG9hdCwgdGhlcmUncyBhbGwgbnVtYmVycywKCSAgICAgKiB0aGlzIGlzIHVzZWQgb25seSB0byBwb2x5ZmlsbCBKYXZhIGNvZGUuCgkgICAgICovCgkgICAgRmxvYXQuZmxvYXRUb0ludEJpdHMgPSBmdW5jdGlvbiAoZikgewoJICAgICAgICByZXR1cm4gZjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFRoZSBmbG9hdCBtYXggdmFsdWUgaW4gSlMgaXMgdGhlIG51bWJlciBtYXggdmFsdWUuCgkgICAgICovCgkgICAgRmxvYXQuTUFYX1ZBTFVFID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgcmV0dXJuIEZsb2F0OwoJfSgpKTsKCUZsb2F0JDEuZGVmYXVsdCA9IEZsb2F0OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzdWx0UG9pbnQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCXZhciBNYXRoVXRpbHNfMSQxID0gTWF0aFV0aWxzJDE7Cgl2YXIgRmxvYXRfMSA9IEZsb2F0JDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHBvaW50IG9mIGludGVyZXN0IGluIGFuIGltYWdlIGNvbnRhaW5pbmcgYSBiYXJjb2RlLiBUeXBpY2FsbHksIHRoaXMKCSAqIHdvdWxkIGJlIHRoZSBsb2NhdGlvbiBvZiBhIGZpbmRlciBwYXR0ZXJuIG9yIHRoZSBjb3JuZXIgb2YgdGhlIGJhcmNvZGUsIGZvciBleGFtcGxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0UG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUmVzdWx0UG9pbnQoeCwgeSkgewoJICAgICAgICB0aGlzLnggPSB4OwoJICAgICAgICB0aGlzLnkgPSB5OwoJICAgIH0KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMueDsKCSAgICB9OwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy55OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVzdWx0UG9pbnQpIHsKCSAgICAgICAgICAgIHZhciBvdGhlclBvaW50ID0gb3RoZXI7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy54ID09PSBvdGhlclBvaW50LnggJiYgdGhpcy55ID09PSBvdGhlclBvaW50Lnk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogRmxvYXRfMS5kZWZhdWx0LmZsb2F0VG9JbnRCaXRzKHRoaXMueCkgKyBGbG9hdF8xLmRlZmF1bHQuZmxvYXRUb0ludEJpdHModGhpcy55KTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiAnKCcgKyB0aGlzLnggKyAnLCcgKyB0aGlzLnkgKyAnKSc7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBPcmRlcnMgYW4gYXJyYXkgb2YgdGhyZWUgUmVzdWx0UG9pbnRzIGluIGFuIG9yZGVyIFtBLEIsQ10gc3VjaCB0aGF0IEFCIGlzIGxlc3MgdGhhbiBBQwoJICAgICAqIGFuZCBCQyBpcyBsZXNzIHRoYW4gQUMsIGFuZCB0aGUgYW5nbGUgYmV0d2VlbiBCQyBhbmQgQkEgaXMgbGVzcyB0aGFuIDE4MCBkZWdyZWVzLgoJICAgICAqCgkgICAgICogQHBhcmFtIHBhdHRlcm5zIGFycmF5IG9mIHRocmVlIHtAY29kZSBSZXN1bHRQb2ludH0gdG8gb3JkZXIKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5vcmRlckJlc3RQYXR0ZXJucyA9IGZ1bmN0aW9uIChwYXR0ZXJucykgewoJICAgICAgICAvLyBGaW5kIGRpc3RhbmNlcyBiZXR3ZWVuIHBhdHRlcm4gY2VudGVycwoJICAgICAgICB2YXIgemVyb09uZURpc3RhbmNlID0gdGhpcy5kaXN0YW5jZShwYXR0ZXJuc1swXSwgcGF0dGVybnNbMV0pOwoJICAgICAgICB2YXIgb25lVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzFdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciB6ZXJvVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzBdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciBwb2ludEE7CgkgICAgICAgIHZhciBwb2ludEI7CgkgICAgICAgIHZhciBwb2ludEM7CgkgICAgICAgIC8vIEFzc3VtZSBvbmUgY2xvc2VzdCB0byBvdGhlciB0d28gaXMgQjsgQSBhbmQgQyB3aWxsIGp1c3QgYmUgZ3Vlc3NlcyBhdCBmaXJzdAoJICAgICAgICBpZiAob25lVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlICYmIG9uZVR3b0Rpc3RhbmNlID49IHplcm9Ud29EaXN0YW5jZSkgewoJICAgICAgICAgICAgcG9pbnRCID0gcGF0dGVybnNbMF07CgkgICAgICAgICAgICBwb2ludEEgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QyA9IHBhdHRlcm5zWzJdOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHplcm9Ud29EaXN0YW5jZSA+PSBvbmVUd29EaXN0YW5jZSAmJiB6ZXJvVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlKSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMl07CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1syXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMV07CgkgICAgICAgIH0KCSAgICAgICAgLy8gVXNlIGNyb3NzIHByb2R1Y3QgdG8gZmlndXJlIG91dCB3aGV0aGVyIEEgYW5kIEMgYXJlIGNvcnJlY3Qgb3IgZmxpcHBlZC4KCSAgICAgICAgLy8gVGhpcyBhc2tzIHdoZXRoZXIgQkMgeCBCQSBoYXMgYSBwb3NpdGl2ZSB6IGNvbXBvbmVudCwgd2hpY2ggaXMgdGhlIGFycmFuZ2VtZW50CgkgICAgICAgIC8vIHdlIHdhbnQgZm9yIEEsIEIsIEMuIElmIGl0J3MgbmVnYXRpdmUsIHRoZW4gd2UndmUgZ290IGl0IGZsaXBwZWQgYXJvdW5kIGFuZAoJICAgICAgICAvLyBzaG91bGQgc3dhcCBBIGFuZCBDLgoJICAgICAgICBpZiAodGhpcy5jcm9zc1Byb2R1Y3RaKHBvaW50QSwgcG9pbnRCLCBwb2ludEMpIDwgMC4wKSB7CgkgICAgICAgICAgICB2YXIgdGVtcCA9IHBvaW50QTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBvaW50QzsKCSAgICAgICAgICAgIHBvaW50QyA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgcGF0dGVybnNbMF0gPSBwb2ludEE7CgkgICAgICAgIHBhdHRlcm5zWzFdID0gcG9pbnRCOwoJICAgICAgICBwYXR0ZXJuc1syXSA9IHBvaW50QzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBwYXR0ZXJuMSBmaXJzdCBwYXR0ZXJuCgkgICAgICogQHBhcmFtIHBhdHRlcm4yIHNlY29uZCBwYXR0ZXJuCgkgICAgICogQHJldHVybiBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHMKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5kaXN0YW5jZSA9IGZ1bmN0aW9uIChwYXR0ZXJuMSwgcGF0dGVybjIpIHsKCSAgICAgICAgcmV0dXJuIE1hdGhVdGlsc18xJDEuZGVmYXVsdC5kaXN0YW5jZShwYXR0ZXJuMS54LCBwYXR0ZXJuMS55LCBwYXR0ZXJuMi54LCBwYXR0ZXJuMi55KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHogY29tcG9uZW50IG9mIHRoZSBjcm9zcyBwcm9kdWN0IGJldHdlZW4gdmVjdG9ycyBCQyBhbmQgQkEuCgkgICAgICovCgkgICAgUmVzdWx0UG9pbnQuY3Jvc3NQcm9kdWN0WiA9IGZ1bmN0aW9uIChwb2ludEEsIHBvaW50QiwgcG9pbnRDKSB7CgkgICAgICAgIHZhciBiWCA9IHBvaW50Qi54OwoJICAgICAgICB2YXIgYlkgPSBwb2ludEIueTsKCSAgICAgICAgcmV0dXJuICgocG9pbnRDLnggLSBiWCkgKiAocG9pbnRBLnkgLSBiWSkpIC0gKChwb2ludEMueSAtIGJZKSAqIChwb2ludEEueCAtIGJYKSk7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0UG9pbnQ7Cgl9KCkpOwoJUmVzdWx0UG9pbnQkMS5kZWZhdWx0ID0gUmVzdWx0UG9pbnQ7CgoJdmFyIEFsaWdubWVudFBhdHRlcm5GaW5kZXIkMSA9IHt9OwoKCXZhciBBbGlnbm1lbnRQYXR0ZXJuJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyQxID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFsaWdubWVudFBhdHRlcm4kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgUmVzdWx0UG9pbnRfMSQzID0gUmVzdWx0UG9pbnQkMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGFuIGFsaWdubWVudCBwYXR0ZXJuLCB3aGljaCBhcmUgdGhlIHNtYWxsZXIgc3F1YXJlIHBhdHRlcm5zIGZvdW5kIGluCgkgKiBhbGwgYnV0IHRoZSBzaW1wbGVzdCBRUiBDb2Rlcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEFsaWdubWVudFBhdHRlcm4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDEoQWxpZ25tZW50UGF0dGVybiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZXJtaW5lcyBpZiB0aGlzIGFsaWdubWVudCBwYXR0ZXJuICJhYm91dCBlcXVhbHMiIGFuIGFsaWdubWVudCBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhbiBhdmVyYWdlIG9mIHRoZSB0d28uCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybi5wcm90b3R5cGUuY29tYmluZUVzdGltYXRlID0gZnVuY3Rpb24gKGkgLypmbG9hdCovLCBqIC8qZmxvYXQqLywgbmV3TW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIGNvbWJpbmVkWCA9ICh0aGlzLmdldFgoKSArIGopIC8gMi4wOwoJICAgICAgICB2YXIgY29tYmluZWRZID0gKHRoaXMuZ2V0WSgpICsgaSkgLyAyLjA7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplICsgbmV3TW9kdWxlU2l6ZSkgLyAyLjA7CgkgICAgICAgIHJldHVybiBuZXcgQWxpZ25tZW50UGF0dGVybihjb21iaW5lZFgsIGNvbWJpbmVkWSwgY29tYmluZWRNb2R1bGVTaXplKTsKCSAgICB9OwoJICAgIHJldHVybiBBbGlnbm1lbnRQYXR0ZXJuOwoJfShSZXN1bHRQb2ludF8xJDMuZGVmYXVsdCkpOwoJQWxpZ25tZW50UGF0dGVybiQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX192YWx1ZXMkMSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuXzEgPSBBbGlnbm1lbnRQYXR0ZXJuJDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQzID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBhbGlnbm1lbnQgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBBbGlnbm1lbnQgcGF0dGVybnMgbG9vayBsaWtlIGZpbmRlcgoJICogcGF0dGVybnMgYnV0IGFyZSBzbWFsbGVyIGFuZCBhcHBlYXIgYXQgcmVndWxhciBpbnRlcnZhbHMgdGhyb3VnaG91dCB0aGUgaW1hZ2UuPC9wPgoJICoKCSAqIDxwPkF0IHRoZSBtb21lbnQgdGhpcyBvbmx5IGxvb2tzIGZvciB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAqCgkgKiA8cD5UaGlzIGlzIG1vc3RseSBhIHNpbXBsaWZpZWQgY29weSBvZiB7QGxpbmsgRmluZGVyUGF0dGVybkZpbmRlcn0uIEl0IGlzIGNvcGllZCwKCSAqIHBhc3RlZCBhbmQgc3RyaXBwZWQgZG93biBoZXJlIGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlIGJ1dCBkb2VzIHVuZm9ydHVuYXRlbHkgZHVwbGljYXRlCgkgKiBzb21lIGNvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8qKgoJICAgICAqIDxwPkNyZWF0ZXMgYSBmaW5kZXIgdGhhdCB3aWxsIGxvb2sgaW4gYSBwb3J0aW9uIG9mIHRoZSB3aG9sZSBpbWFnZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gaW1hZ2UgaW1hZ2UgdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIHN0YXJ0WCBsZWZ0IGNvbHVtbiBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSBzdGFydFkgdG9wIHJvdyBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSB3aWR0aCB3aWR0aCBvZiByZWdpb24gdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2YgcmVnaW9uIHRvIHNlYXJjaAoJICAgICAqIEBwYXJhbSBtb2R1bGVTaXplIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBzbyBmYXIKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyKGltYWdlLCBzdGFydFggLyppbnQqLywgc3RhcnRZIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBtb2R1bGVTaXplIC8qZmxvYXQqLywgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMuc3RhcnRYID0gc3RhcnRYOwoJICAgICAgICB0aGlzLnN0YXJ0WSA9IHN0YXJ0WTsKCSAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoOwoJICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgdGhpcy5tb2R1bGVTaXplID0gbW9kdWxlU2l6ZTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICAgICAgdGhpcy5wb3NzaWJsZUNlbnRlcnMgPSBbXTsgLy8gbmV3IEFycmF5PGFueT4oNSkpCgkgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBhcnJheSBpbml0aWFsaXphdGlvbiB3aXRob3V0IHNpemUgYXMgdGhlIGxlbmd0aCBpcyBjaGVja2VkIGJlbG93CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSgzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+VGhpcyBtZXRob2QgYXR0ZW1wdHMgdG8gZmluZCB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuIGluIHRoZSBpbWFnZS4gSXQgaXMgYSBiaXQgbWVzc3kgc2luY2UKCSAgICAgKiBpdCdzIHByZXR0eSBwZXJmb3JtYW5jZS1jcml0aWNhbCBhbmQgc28gaXMgd3JpdHRlbiB0byBiZSBmYXN0IGZvcmVtb3N0LjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBub3QgZm91bmQKCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5zdGFydFg7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodDsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIG1heEogPSBzdGFydFggKyB3aWR0aDsKCSAgICAgICAgdmFyIG1pZGRsZUkgPSB0aGlzLnN0YXJ0WSArIChoZWlnaHQgLyAyKTsKCSAgICAgICAgLy8gV2UgYXJlIGxvb2tpbmcgZm9yIGJsYWNrL3doaXRlL2JsYWNrIG1vZHVsZXMgaW4gMToxOjEgcmF0aW8KCSAgICAgICAgLy8gdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIHNlZW4gc28gZmFyCgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoMyk7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIGZvciAodmFyIGlHZW4gPSAwOyBpR2VuIDwgaGVpZ2h0OyBpR2VuKyspIHsKCSAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG1pZGRsZSBvdXR3YXJkcwoJICAgICAgICAgICAgdmFyIGkgPSBtaWRkbGVJICsgKChpR2VuICYgMHgwMSkgPT09IDAgPyBNYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSA6IC1NYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSk7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICB2YXIgaiA9IHN0YXJ0WDsKCSAgICAgICAgICAgIC8vIEJ1cm4gb2ZmIGxlYWRpbmcgd2hpdGUgcGl4ZWxzIGJlZm9yZSBhbnl0aGluZyBlbHNlOyBpZiB3ZSBzdGFydCBpbiB0aGUgbWlkZGxlIG9mCgkgICAgICAgICAgICAvLyBhIHdoaXRlIHJ1biwgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIGNvdW50IGl0cyBsZW5ndGgsIHNpbmNlIHdlIGRvbid0IGtub3cgaWYgdGhlCgkgICAgICAgICAgICAvLyB3aGl0ZSBydW4gY29udGludWVkIHRvIHRoZSBsZWZ0IG9mIHRoZSBzdGFydCBwb2ludAoJICAgICAgICAgICAgd2hpbGUgKGogPCBtYXhKICYmICFpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgY3VycmVudFN0YXRlID0gMDsKCSAgICAgICAgICAgIHdoaWxlIChqIDwgbWF4SikgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0rKzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy8gQ291bnRpbmcgd2hpdGUgcGl4ZWxzCgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0YXRlID09PSAyKSB7IC8vIEEgd2lubmVyPwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvdW5kUGF0dGVybkNyb3NzKHN0YXRlQ291bnQpKSB7IC8vIFllcwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBqKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gc3RhdGVDb3VudFsyXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gMTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsrK2N1cnJlbnRTdGF0ZV0rKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAodGhpcy5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSkgewoJICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIG1heEopOwoJICAgICAgICAgICAgICAgIGlmIChjb25maXJtZWQgIT09IG51bGwpIHsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBub3RoaW5nIHdlIHNhdyB3YXMgb2JzZXJ2ZWQgYW5kIGNvbmZpcm1lZCB0d2ljZS4gSWYgd2UgaGFkCgkgICAgICAgIC8vIGFueSBndWVzcyBhdCBhbGwsIHJldHVybiBpdC4KCSAgICAgICAgaWYgKHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aCAhPT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zc2libGVDZW50ZXJzWzBdOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogR2l2ZW4gYSBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCBzZWVuIGFuZCBhbiBlbmQgcG9zaXRpb24sCgkgICAgICogZmlndXJlcyB0aGUgbG9jYXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGlzIGJsYWNrL3doaXRlL2JsYWNrIHJ1bi4KCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCwgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIChlbmQgLSBzdGF0ZUNvdW50WzJdKSAtIHN0YXRlQ291bnRbMV0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8xIHJhdGlvcwoJICAgICAqICAgICAgICAgdXNlZCBieSBhbGlnbm1lbnQgcGF0dGVybnMgdG8gYmUgY29uc2lkZXJlZCBhIG1hdGNoCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMubW9kdWxlU2l6ZTsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFtpXSkgPj0gbWF4VmFyaWFuY2UpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5BZnRlciBhIGhvcml6b250YWwgc2NhbiBmaW5kcyBhIHBvdGVudGlhbCBhbGlnbm1lbnQgcGF0dGVybiwgdGhpcyBtZXRob2QKCSAgICAgKiAiY3Jvc3MtY2hlY2tzIiBieSBzY2FubmluZyBkb3duIHZlcnRpY2FsbHkgdGhyb3VnaCB0aGUgY2VudGVyIG9mIHRoZSBwb3NzaWJsZQoJICAgICAqIGFsaWdubWVudCBwYXR0ZXJuIHRvIHNlZSBpZiB0aGUgc2FtZSBwcm9wb3J0aW9uIGlzIGRldGVjdGVkLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydEkgcm93IHdoZXJlIGFuIGFsaWdubWVudCBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYW4gYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBhbGlnbm1lbnQgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAvLyBTdGFydCBjb3VudGluZyB1cCBmcm9tIGNlbnRlcgoJICAgICAgICB2YXIgaSA9IHN0YXJ0STsKCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbMF0gPD0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMF0rKzsKCSAgICAgICAgICAgIGktLTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFswXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIC8vIE5vdyBhbHNvIGNvdW50IGRvd24gZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IHN0YXJ0SSArIDE7CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbMV0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA8IG1heEkgJiYgIWltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzJdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzJdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMl0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSAyICogb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkgPyBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaSkgOiBOYU47CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5UaGlzIGlzIGNhbGxlZCB3aGVuIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4uIEl0IHdpbGwKCSAgICAgKiBjcm9zcyBjaGVjayB3aXRoIGEgdmVydGljYWwgc2NhbiwgYW5kIGlmIHN1Y2Nlc3NmdWwsIHdpbGwgc2VlIGlmIHRoaXMgcGF0dGVybiBoYWQgYmVlbgoJICAgICAqIGZvdW5kIG9uIGEgcHJldmlvdXMgaG9yaXpvbnRhbCBzY2FuLiBJZiBzbywgd2UgY29uc2lkZXIgaXQgY29uZmlybWVkIGFuZCBjb25jbHVkZSB3ZSBoYXZlCgkgICAgICogZm91bmQgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGF0ZUNvdW50IHJlYWRpbmcgc3RhdGUgbW9kdWxlIGNvdW50cyBmcm9tIGhvcml6b250YWwgc2NhbgoJICAgICAqIEBwYXJhbSBpIHJvdyB3aGVyZSBhbGlnbm1lbnQgcGF0dGVybiBtYXkgYmUgZm91bmQKCSAgICAgKiBAcGFyYW0gaiBlbmQgb2YgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4gaW4gcm93CgkgICAgICogQHJldHVybiB7QGxpbmsgQWxpZ25tZW50UGF0dGVybn0gaWYgd2UgaGF2ZSBmb3VuZCB0aGUgc2FtZSBwYXR0ZXJuIHR3aWNlLCBvciBudWxsIGlmIG5vdAoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmhhbmRsZVBvc3NpYmxlQ2VudGVyID0gZnVuY3Rpb24gKHN0YXRlQ291bnQsIGkgLyppbnQqLywgaiAvKmludCovKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICB2YXIgY2VudGVySiA9IEFsaWdubWVudFBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKTsKCSAgICAgICAgdmFyIGNlbnRlckkgPSB0aGlzLmNyb3NzQ2hlY2tWZXJ0aWNhbChpLCAvKihpbnQpICovIGNlbnRlckosIDIgKiBzdGF0ZUNvdW50WzFdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IChzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0pIC8gMy4wOwoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzJDEodGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgYWJvdXQgdGhlIHNhbWUgY2VudGVyIGFuZCBtb2R1bGUgc2l6ZToKCSAgICAgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5hYm91dEVxdWFscyhlc3RpbWF0ZWRNb2R1bGVTaXplLCBjZW50ZXJJLCBjZW50ZXJKKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbnRlci5jb21iaW5lRXN0aW1hdGUoY2VudGVySSwgY2VudGVySiwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBIYWRuJ3QgZm91bmQgdGhpcyBiZWZvcmU7IHNhdmUgaXQKCSAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBBbGlnbm1lbnRQYXR0ZXJuXzEuZGVmYXVsdChjZW50ZXJKLCBjZW50ZXJJLCBlc3RpbWF0ZWRNb2R1bGVTaXplKTsKCSAgICAgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzLnB1c2gocG9pbnQpOwoJICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjay5mb3VuZFBvc3NpYmxlUmVzdWx0UG9pbnQocG9pbnQpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgcmV0dXJuIEFsaWdubWVudFBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJQWxpZ25tZW50UGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyOwoKCXZhciBGaW5kZXJQYXR0ZXJuRmluZGVyJDEgPSB7fTsKCgl2YXIgRmluZGVyUGF0dGVybiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRmluZGVyUGF0dGVybiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZXRlY3RvciB7Ki8KCXZhciBSZXN1bHRQb2ludF8xJDIgPSBSZXN1bHRQb2ludCQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBmaW5kZXIgcGF0dGVybiwgd2hpY2ggYXJlIHRoZSB0aHJlZSBzcXVhcmUgcGF0dGVybnMgZm91bmQgaW4KCSAqIHRoZSBjb3JuZXJzIG9mIFFSIENvZGVzLiBJdCBhbHNvIGVuY2Fwc3VsYXRlcyBhIGNvdW50IG9mIHNpbWlsYXIgZmluZGVyIHBhdHRlcm5zLAoJICogYXMgYSBjb252ZW5pZW5jZSB0byB0aGUgZmluZGVyJ3MgYm9va2tlZXBpbmcuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBGaW5kZXJQYXR0ZXJuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyhGaW5kZXJQYXR0ZXJuLCBfc3VwZXIpOwoJICAgIC8vIEZpbmRlclBhdHRlcm4ocG9zWDogbnVtYmVyLypmbG9hdCovLCBwb3NZOiBudW1iZXIvKmZsb2F0Ki8sIGVzdGltYXRlZE1vZHVsZVNpemU6IG51bWJlci8qZmxvYXQqLykgewoJICAgIC8vICAgdGhpcyhwb3NYLCBwb3NZLCBlc3RpbWF0ZWRNb2R1bGVTaXplLCAxKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBGaW5kZXJQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8sIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIF90aGlzLmNvdW50ID0gY291bnQ7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNvdW50KSB7CgkgICAgICAgICAgICBfdGhpcy5jb3VudCA9IDE7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybi5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvdW50OwoJICAgIH07CgkgICAgLyoKCSAgICB2b2lkIGluY3JlbWVudENvdW50KCkgewoJICAgICAgdGhpcy5jb3VudCsrCgkgICAgfQoJICAgICAqLwoJICAgIC8qKgoJICAgICAqIDxwPkRldGVybWluZXMgaWYgdGhpcyBmaW5kZXIgcGF0dGVybiAiYWJvdXQgZXF1YWxzIiBhIGZpbmRlciBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhIHdlaWdodGVkIGF2ZXJhZ2UKCSAgICAgKiBiYXNlZCBvbiBjb3VudC4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5jb21iaW5lRXN0aW1hdGUgPSBmdW5jdGlvbiAoaSAvKmZsb2F0Ki8sIGogLypmbG9hdCovLCBuZXdNb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgY29tYmluZWRDb3VudCA9IHRoaXMuY291bnQgKyAxOwoJICAgICAgICB2YXIgY29tYmluZWRYID0gKHRoaXMuY291bnQgKiB0aGlzLmdldFgoKSArIGopIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgdmFyIGNvbWJpbmVkWSA9ICh0aGlzLmNvdW50ICogdGhpcy5nZXRZKCkgKyBpKSAvIGNvbWJpbmVkQ291bnQ7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5jb3VudCAqIHRoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSArIG5ld01vZHVsZVNpemUpIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgcmV0dXJuIG5ldyBGaW5kZXJQYXR0ZXJuKGNvbWJpbmVkWCwgY29tYmluZWRZLCBjb21iaW5lZE1vZHVsZVNpemUsIGNvbWJpbmVkQ291bnQpOwoJICAgIH07CgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm47Cgl9KFJlc3VsdFBvaW50XzEkMi5kZWZhdWx0KSk7CglGaW5kZXJQYXR0ZXJuJDEuZGVmYXVsdCA9IEZpbmRlclBhdHRlcm47CgoJdmFyIEZpbmRlclBhdHRlcm5JbmZvJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5JbmZvJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGluZm9ybWF0aW9uIGFib3V0IGZpbmRlciBwYXR0ZXJucyBpbiBhbiBpbWFnZSwgaW5jbHVkaW5nIHRoZSBsb2NhdGlvbiBvZgoJICogdGhlIHRocmVlIGZpbmRlciBwYXR0ZXJucywgYW5kIHRoZWlyIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5JbmZvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZpbmRlclBhdHRlcm5JbmZvKHBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHRoaXMuYm90dG9tTGVmdCA9IHBhdHRlcm5DZW50ZXJzWzBdOwoJICAgICAgICB0aGlzLnRvcExlZnQgPSBwYXR0ZXJuQ2VudGVyc1sxXTsKCSAgICAgICAgdGhpcy50b3BSaWdodCA9IHBhdHRlcm5DZW50ZXJzWzJdOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuSW5mby5wcm90b3R5cGUuZ2V0Qm90dG9tTGVmdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tTGVmdDsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5JbmZvLnByb3RvdHlwZS5nZXRUb3BMZWZ0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BMZWZ0OwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkluZm8ucHJvdG90eXBlLmdldFRvcFJpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BSaWdodDsKCSAgICB9OwoJICAgIHJldHVybiBGaW5kZXJQYXR0ZXJuSW5mbzsKCX0oKSk7CglGaW5kZXJQYXR0ZXJuSW5mbyQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuSW5mbzsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5GaW5kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQyID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBSZXN1bHRQb2ludF8xJDEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIEZpbmRlclBhdHRlcm5fMSA9IEZpbmRlclBhdHRlcm4kMTsKCXZhciBGaW5kZXJQYXR0ZXJuSW5mb18xID0gRmluZGVyUGF0dGVybkluZm8kMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDIgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyppbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBmaW5kZXIgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBGaW5kZXIgcGF0dGVybnMgYXJlIHRoZSBzcXVhcmUKCSAqIG1hcmtlcnMgYXQgdGhyZWUgY29ybmVycyBvZiBhIFFSIENvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5GaW5kZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogPHA+Q3JlYXRlcyBhIGZpbmRlciB0aGF0IHdpbGwgc2VhcmNoIHRoZSBpbWFnZSBmb3IgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBpbWFnZSBpbWFnZSB0byBzZWFyY2gKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoaW1hZ2U6IEJpdE1hdHJpeCkgewoJICAgIC8vICAgdGhpcyhpbWFnZSwgbnVsbCkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRmluZGVyUGF0dGVybkZpbmRlcihpbWFnZSwgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayA9IHJlc3VsdFBvaW50Q2FsbGJhY2s7CgkgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzID0gW107CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSg1KTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICB9CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmltYWdlOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0UG9zc2libGVDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKGhpbnRzKSB7CgkgICAgICAgIHZhciB0cnlIYXJkZXIgPSAoaGludHMgIT09IG51bGwgJiYgaGludHMgIT09IHVuZGVmaW5lZCkgJiYgdW5kZWZpbmVkICE9PSBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQyLmRlZmF1bHQuVFJZX0hBUkRFUik7CgkgICAgICAgIHZhciBwdXJlQmFyY29kZSA9IChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkKSAmJiB1bmRlZmluZWQgIT09IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZV8xJDIuZGVmYXVsdC5QVVJFX0JBUkNPREUpOwoJICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmltYWdlOwoJICAgICAgICB2YXIgbWF4SSA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgbWF4SiA9IGltYWdlLmdldFdpZHRoKCk7CgkgICAgICAgIC8vIFdlIGFyZSBsb29raW5nIGZvciBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIGluCgkgICAgICAgIC8vIDE6MTozOjE6MSByYXRpbzsgdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBzdWNoIG1vZHVsZXMgc2VlbiBzbyBmYXIKCSAgICAgICAgLy8gTGV0J3MgYXNzdW1lIHRoYXQgdGhlIG1heGltdW0gdmVyc2lvbiBRUiBDb2RlIHdlIHN1cHBvcnQgdGFrZXMgdXAgMS80IHRoZSBoZWlnaHQgb2YgdGhlCgkgICAgICAgIC8vIGltYWdlLCBhbmQgdGhlbiBhY2NvdW50IGZvciB0aGUgY2VudGVyIGJlaW5nIDMgbW9kdWxlcyBpbiBzaXplLiBUaGlzIGdpdmVzIHRoZSBzbWFsbGVzdAoJICAgICAgICAvLyBudW1iZXIgb2YgcGl4ZWxzIHRoZSBjZW50ZXIgY291bGQgYmUsIHNvIHNraXAgdGhpcyBvZnRlbi4gV2hlbiB0cnlpbmcgaGFyZGVyLCBsb29rIGZvciBhbGwKCSAgICAgICAgLy8gUVIgdmVyc2lvbnMgcmVnYXJkbGVzcyBvZiBob3cgZGVuc2UgdGhleSBhcmUuCgkgICAgICAgIHZhciBpU2tpcCA9IE1hdGguZmxvb3IoKDMgKiBtYXhJKSAvICg0ICogRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUykpOwoJICAgICAgICBpZiAoaVNraXAgPCBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQIHx8IHRyeUhhcmRlcikgewoJICAgICAgICAgICAgaVNraXAgPSBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkb25lID0gZmFsc2U7CgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoNSk7CgkgICAgICAgIGZvciAodmFyIGkgPSBpU2tpcCAtIDE7IGkgPCBtYXhJICYmICFkb25lOyBpICs9IGlTa2lwKSB7CgkgICAgICAgICAgICAvLyBHZXQgYSByb3cgb2YgYmxhY2svd2hpdGUgdmFsdWVzCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0gPSAwOwoJICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IDA7CgkgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heEo7IGorKykgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMSkgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMCkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RhdGUgPT09IDQpIHsgLy8gQSB3aW5uZXI/CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsgLy8gWWVzCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIGosIHB1cmVCYXJjb2RlKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgZXhhbWluaW5nIGV2ZXJ5IG90aGVyIGxpbmUuIENoZWNraW5nIGVhY2ggbGluZSB0dXJuZWQgb3V0IHRvIGJlIHRvbwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwZW5zaXZlIGFuZCBkaWRuJ3QgaW1wcm92ZSBwZXJmb3JtYW5jZS4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlTa2lwID0gMjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQgPT09IHRydWUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93U2tpcCA9IHRoaXMuZmluZFJvd1NraXAoKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93U2tpcCA+IHN0YXRlQ291bnRbMl0pIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCByb3dzIGJldHdlZW4gcm93IG9mIGxvd2VyIGNvbmZpcm1lZCBjZW50ZXIKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRvcCBvZiBwcmVzdW1lZCB0aGlyZCBjb25maXJtZWQgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBiYWNrIHVwIGEgYml0IHRvIGdldCBhIGZ1bGwgY2hhbmNlIG9mIGRldGVjdGluZwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCwgZW50aXJlIHdpZHRoIG9mIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGJ5IHJvd1NraXAsIGJ1dCBiYWNrIG9mZiBieSBzdGF0ZUNvdW50WzJdIChzaXplIG9mIGxhc3QgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHBhdHRlcm4gd2Ugc2F3KSB0byBiZSBjb25zZXJ2YXRpdmUsIGFuZCBhbHNvIGJhY2sgb2ZmIGJ5IGlTa2lwIHdoaWNoCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGFib3V0IHRvIGJlIHJlLWFkZGVkCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gcm93U2tpcCAtIHN0YXRlQ291bnRbMl0gLSBpU2tpcDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IG1heEogLSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IHN0YXRlQ291bnRbM107CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gc3RhdGVDb3VudFs0XTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAzOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgc3RhdGUgdG8gc3RhcnQgbG9va2luZyBhZ2FpbgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBObywgc2hpZnQgY291bnRzIGJhY2sgYnkgdHdvCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gc3RhdGVDb3VudFszXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IHN0YXRlQ291bnRbNF07CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gMzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WysrY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBtYXhKLCBwdXJlQmFyY29kZSk7CgkgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICBpU2tpcCA9IHN0YXRlQ291bnRbMF07CgkgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGEgdGhpcmQgb25lCgkgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBhdHRlcm5JbmZvID0gdGhpcy5zZWxlY3RCZXN0UGF0dGVybnMoKTsKCSAgICAgICAgUmVzdWx0UG9pbnRfMSQxLmRlZmF1bHQub3JkZXJCZXN0UGF0dGVybnMocGF0dGVybkluZm8pOwoJICAgICAgICByZXR1cm4gbmV3IEZpbmRlclBhdHRlcm5JbmZvXzEuZGVmYXVsdChwYXR0ZXJuSW5mbyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBHaXZlbiBhIGNvdW50IG9mIGJsYWNrL3doaXRlL2JsYWNrL3doaXRlL2JsYWNrIHBpeGVscyBqdXN0IHNlZW4gYW5kIGFuIGVuZCBwb3NpdGlvbiwKCSAgICAgKiBmaWd1cmVzIHRoZSBsb2NhdGlvbiBvZiB0aGUgY2VudGVyIG9mIHRoaXMgcnVuLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZCA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBlbmQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gKGVuZCAtIHN0YXRlQ291bnRbNF0gLSBzdGF0ZUNvdW50WzNdKSAtIHN0YXRlQ291bnRbMl0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8zLzEvMSByYXRpb3MKCSAgICAgKiAgICAgICAgIHVzZWQgYnkgZmluZGVyIHBhdHRlcm5zIHRvIGJlIGNvbnNpZGVyZWQgYSBtYXRjaAoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHsKCSAgICAgICAgICAgIHZhciBjb3VudCA9IHN0YXRlQ291bnRbaV07CgkgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gY291bnQ7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvdGFsTW9kdWxlU2l6ZSA8IDcpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIDcuMDsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgLy8gQWxsb3cgbGVzcyB0aGFuIDUwJSB2YXJpYW5jZSBmcm9tIDEtMS0zLTEtMSBwcm9wb3J0aW9ucwoJICAgICAgICByZXR1cm4gTWF0aC5hYnMobW9kdWxlU2l6ZSAtIHN0YXRlQ291bnRbMF0pIDwgbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzFdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicygzLjAgKiBtb2R1bGVTaXplIC0gc3RhdGVDb3VudFsyXSkgPCAzICogbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzNdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFs0XSkgPCBtYXhWYXJpYW5jZTsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgY3Jvc3NDaGVja1N0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFswXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzFdID0gMDsKCSAgICAgICAgY3Jvc3NDaGVja1N0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFszXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgcmV0dXJuIGNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQWZ0ZXIgYSB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jcm9zcy1jcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gZGlhZ29uYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnRJIHJvdyB3aGVyZSBhIGZpbmRlciBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYSBmaW5kZXIgcGF0dGVybgoJICAgICAqIEBwYXJhbSBtYXhDb3VudCBtYXhpbXVtIHJlYXNvbmFibGUgbnVtYmVyIG9mIG1vZHVsZXMgdGhhdCBzaG91bGQgYmUKCSAgICAgKiAgb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcGFyYW0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgVGhlIG9yaWdpbmFsIHN0YXRlIGNvdW50IHRvdGFsLgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBwcm9wb3J0aW9ucyBhcmUgd2l0aGluZyBleHBlY3RlZCBsaW1pdHMKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrRGlhZ29uYWwgPSBmdW5jdGlvbiAoc3RhcnRJIC8qaW50Ki8sIGNlbnRlckogLyppbnQqLywgbWF4Q291bnQgLyppbnQqLywgb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgLyppbnQqLykgewoJICAgICAgICB2YXIgc3RhdGVDb3VudCA9IHRoaXMuZ2V0Q3Jvc3NDaGVja1N0YXRlQ291bnQoKTsKCSAgICAgICAgLy8gU3RhcnQgY291bnRpbmcgdXAsIGxlZnQgZnJvbSBjZW50ZXIgZmluZGluZyBibGFjayBjZW50ZXIgbWFzcwoJICAgICAgICB2YXIgaSA9IDA7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHdoaWxlIChzdGFydEkgPj0gaSAmJiBjZW50ZXJKID49IGkgJiYgaW1hZ2UuZ2V0KGNlbnRlckogLSBpLCBzdGFydEkgLSBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgPCBpIHx8IGNlbnRlckogPCBpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyB3aGl0ZSBzcGFjZQoJICAgICAgICB3aGlsZSAoc3RhcnRJID49IGkgJiYgY2VudGVySiA+PSBpICYmICFpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgYWxyZWFkeSB0b28gbWFueSBtb2R1bGVzIGluIHRoaXMgc3RhdGUgb3IgcmFuIG9mZiB0aGUgZWRnZToKCSAgICAgICAgaWYgKHN0YXJ0SSA8IGkgfHwgY2VudGVySiA8IGkgfHwgc3RhdGVDb3VudFsxXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyBibGFjayBib3JkZXIKCSAgICAgICAgd2hpbGUgKHN0YXJ0SSA+PSBpICYmIGNlbnRlckogPj0gaSAmJiBpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMF0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtYXhJID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biwgcmlnaHQgZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IDE7CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgaW1hZ2UuZ2V0KGNlbnRlckogKyBpLCBzdGFydEkgKyBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJhbiBvZmYgdGhlIGVkZ2U/CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgIWltYWdlLmdldChjZW50ZXJKICsgaSwgc3RhcnRJICsgaSkgJiYKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKHN0YXJ0SSArIGkgPCBtYXhJICYmIGNlbnRlckogKyBpIDwgbWF4SiAmJiBpbWFnZS5nZXQoY2VudGVySiArIGksIHN0YXJ0SSArIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGZvdW5kIGEgZmluZGVyLXBhdHRlcm4tbGlrZSBzZWN0aW9uLCBidXQgaXRzIHNpemUgaXMgbW9yZSB0aGFuIDEwMCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgcmV0dXJuIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA8IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAmJgoJICAgICAgICAgICAgRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkFmdGVyIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gdmVydGljYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXJ0SSByb3cgd2hlcmUgYSBmaW5kZXIgcGF0dGVybiB3YXMgZGV0ZWN0ZWQKCSAgICAgKiBAcGFyYW0gY2VudGVySiBjZW50ZXIgb2YgdGhlIHNlY3Rpb24gdGhhdCBhcHBlYXJzIHRvIGNyb3NzIGEgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIC8vIFN0YXJ0IGNvdW50aW5nIHVwIGZyb20gY2VudGVyCgkgICAgICAgIHZhciBpID0gc3RhcnRJOwoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmICFpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biBmcm9tIGNlbnRlcgoJICAgICAgICBpID0gc3RhcnRJICsgMTsKCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJKSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbM10gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIGZpbmRlci1wYXR0ZXJuLWxpa2Ugc2VjdGlvbiwgYnV0IGl0cyBzaXplIGlzIG1vcmUgdGhhbiA0MCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF07CgkgICAgICAgIGlmICg1ICogTWF0aC5hYnMoc3RhdGVDb3VudFRvdGFsIC0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpID49IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBpKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkxpa2Uge0BsaW5rICNjcm9zc0NoZWNrVmVydGljYWwoaW50LCBpbnQsIGludCwgaW50KX0sIGFuZCBpbiBmYWN0IGlzIGJhc2ljYWxseSBpZGVudGljYWwsCgkgICAgICogZXhjZXB0IGl0IHJlYWRzIGhvcml6b250YWxseSBpbnN0ZWFkIG9mIHZlcnRpY2FsbHkuIFRoaXMgaXMgdXNlZCB0byBjcm9zcy1jcm9zcwoJICAgICAqIGNoZWNrIGEgdmVydGljYWwgY3Jvc3MgY2hlY2sgYW5kIGxvY2F0ZSB0aGUgcmVhbCBjZW50ZXIgb2YgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrSG9yaXpvbnRhbCA9IGZ1bmN0aW9uIChzdGFydEogLyppbnQqLywgY2VudGVySSAvKmludCovLCBtYXhDb3VudCAvKmludCovLCBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAvKmludCovKSB7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIHZhciBqID0gc3RhcnRKOwoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmIGltYWdlLmdldChqLCBjZW50ZXJJKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmICFpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGogPj0gMCAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgaiA9IHN0YXJ0SiArIDE7CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMl0rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA8IG1heEogJiYgIWltYWdlLmdldChqLCBjZW50ZXJJKSAmJiBzdGF0ZUNvdW50WzNdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFs0XSA8IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdKys7CgkgICAgICAgICAgICBqKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbNF0gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgd2UgZm91bmQgYSBmaW5kZXItcGF0dGVybi1saWtlIHNlY3Rpb24sIGJ1dCBpdHMgc2l6ZSBpcyBzaWduaWZpY2FudGx5IGRpZmZlcmVudCB0aGFuCgkgICAgICAgIC8vIHRoZSBvcmlnaW5hbCwgYXNzdW1lIGl0J3MgYSBmYWxzZSBwb3NpdGl2ZQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdICsgc3RhdGVDb3VudFszXSArCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgaXMgY2FsbGVkIHdoZW4gYSBob3Jpem9udGFsIHNjYW4gZmluZHMgYSBwb3NzaWJsZSBhbGlnbm1lbnQgcGF0dGVybi4gSXQgd2lsbAoJICAgICAqIGNyb3NzIGNoZWNrIHdpdGggYSB2ZXJ0aWNhbCBzY2FuLCBhbmQgaWYgc3VjY2Vzc2Z1bCwgd2lsbCwgYWgsIGNyb3NzLWNyb3NzLWNoZWNrCgkgICAgICogd2l0aCBhbm90aGVyIGhvcml6b250YWwgc2Nhbi4gVGhpcyBpcyBuZWVkZWQgcHJpbWFyaWx5IHRvIGxvY2F0ZSB0aGUgcmVhbCBob3Jpem9udGFsCgkgICAgICogY2VudGVyIG9mIHRoZSBwYXR0ZXJuIGluIGNhc2VzIG9mIGV4dHJlbWUgc2tldy4KCSAgICAgKiBBbmQgdGhlbiB3ZSBjcm9zcy1jcm9zcy1jcm9zcyBjaGVjayB3aXRoIGFub3RoZXIgZGlhZ29uYWwgc2Nhbi48L3A+CgkgICAgICoKCSAgICAgKiA8cD5JZiB0aGF0IHN1Y2NlZWRzIHRoZSBmaW5kZXIgcGF0dGVybiBsb2NhdGlvbiBpcyBhZGRlZCB0byBhIGxpc3QgdGhhdCB0cmFja3MKCSAgICAgKiB0aGUgbnVtYmVyIG9mIHRpbWVzIGVhY2ggbG9jYXRpb24gaGFzIGJlZW4gbmVhcmx5LW1hdGNoZWQgYXMgYSBmaW5kZXIgcGF0dGVybi4KCSAgICAgKiBFYWNoIGFkZGl0aW9uYWwgZmluZCBpcyBtb3JlIGV2aWRlbmNlIHRoYXQgdGhlIGxvY2F0aW9uIGlzIGluIGZhY3QgYSBmaW5kZXIKCSAgICAgKiBwYXR0ZXJuIGNlbnRlcgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXRlQ291bnQgcmVhZGluZyBzdGF0ZSBtb2R1bGUgY291bnRzIGZyb20gaG9yaXpvbnRhbCBzY2FuCgkgICAgICogQHBhcmFtIGkgcm93IHdoZXJlIGZpbmRlciBwYXR0ZXJuIG1heSBiZSBmb3VuZAoJICAgICAqIEBwYXJhbSBqIGVuZCBvZiBwb3NzaWJsZSBmaW5kZXIgcGF0dGVybiBpbiByb3cKCSAgICAgKiBAcGFyYW0gcHVyZUJhcmNvZGUgdHJ1ZSBpZiBpbiAicHVyZSBiYXJjb2RlIiBtb2RlCgkgICAgICogQHJldHVybiB0cnVlIGlmIGEgZmluZGVyIHBhdHRlcm4gY2FuZGlkYXRlIHdhcyBmb3VuZCB0aGlzIHRpbWUKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYW5kbGVQb3NzaWJsZUNlbnRlciA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBpIC8qaW50Ki8sIGogLyppbnQqLywgcHVyZUJhcmNvZGUpIHsKCSAgICAgICAgdmFyIHN0YXRlQ291bnRUb3RhbCA9IHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXSArIHN0YXRlQ291bnRbM10gKwoJICAgICAgICAgICAgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgdmFyIGNlbnRlckogPSBGaW5kZXJQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaik7CgkgICAgICAgIHZhciBjZW50ZXJJID0gdGhpcy5jcm9zc0NoZWNrVmVydGljYWwoaSwgLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCBzdGF0ZUNvdW50WzJdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICAvLyBSZS1jcm9zcyBjaGVjawoJICAgICAgICAgICAgY2VudGVySiA9IHRoaXMuY3Jvc3NDaGVja0hvcml6b250YWwoLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCAvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIHN0YXRlQ291bnRbMl0sIHN0YXRlQ291bnRUb3RhbCk7CgkgICAgICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckopICYmCgkgICAgICAgICAgICAgICAgKCFwdXJlQmFyY29kZSB8fCB0aGlzLmNyb3NzQ2hlY2tEaWFnb25hbCgvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIC8qKGludCkgKi8gTWF0aC5mbG9vcihjZW50ZXJKKSwgc3RhdGVDb3VudFsyXSwgc3RhdGVDb3VudFRvdGFsKSkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IHN0YXRlQ291bnRUb3RhbCAvIDcuMDsKCSAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXJzID0gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGhfMSA9IHBvc3NpYmxlQ2VudGVycy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoXzE7IGluZGV4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHBvc3NpYmxlQ2VudGVyc1tpbmRleF07CgkgICAgICAgICAgICAgICAgICAgIC8vIExvb2sgZm9yIGFib3V0IHRoZSBzYW1lIGNlbnRlciBhbmQgbW9kdWxlIHNpemU6CgkgICAgICAgICAgICAgICAgICAgIGlmIChjZW50ZXIuYWJvdXRFcXVhbHMoZXN0aW1hdGVkTW9kdWxlU2l6ZSwgY2VudGVySSwgY2VudGVySikpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVyc1tpbmRleF0gPSBjZW50ZXIuY29tYmluZUVzdGltYXRlKGNlbnRlckksIGNlbnRlckosIGVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBuZXcgRmluZGVyUGF0dGVybl8xLmRlZmF1bHQoY2VudGVySiwgY2VudGVySSwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5wdXNoKHBvaW50KTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrLmZvdW5kUG9zc2libGVSZXN1bHRQb2ludChwb2ludCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2Ygcm93cyB3ZSBjb3VsZCBzYWZlbHkgc2tpcCBkdXJpbmcgc2Nhbm5pbmcsIGJhc2VkIG9uIHRoZSBmaXJzdAoJICAgICAqICAgICAgICAgdHdvIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBsb2NhdGVkLiBJbiBzb21lIGNhc2VzIHRoZWlyIHBvc2l0aW9uIHdpbGwKCSAgICAgKiAgICAgICAgIGFsbG93IHVzIHRvIGluZmVyIHRoYXQgdGhlIHRoaXJkIHBhdHRlcm4gbXVzdCBsaWUgYmVsb3cgYSBjZXJ0YWluIHBvaW50IGZhcnRoZXIKCSAgICAgKiAgICAgICAgIGRvd24gaW4gdGhlIGltYWdlLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmZpbmRSb3dTa2lwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKG1heCA8PSAxKSB7CgkgICAgICAgICAgICByZXR1cm4gMDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBudWxsOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gX2MudmFsdWU7CgkgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RDb25maXJtZWRDZW50ZXIgPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBjZW50ZXI7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHR3byBjb25maXJtZWQgY2VudGVycwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG93IGZhciBkb3duIGNhbiB3ZSBza2lwIGJlZm9yZSByZXN1bWluZyBsb29raW5nIGZvciB0aGUgbmV4dAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF0dGVybj8gSW4gdGhlIHdvcnN0IGNhc2UsIG9ubHkgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gdGhlIHggLyB5IGNvb3JkaW5hdGVzIG9mIHRoZSB0d28gY2VudGVycy4KCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2Ugd2hlcmUgeW91IGZpbmQgdG9wIGxlZnQgbGFzdC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzU2tpcHBlZCA9IHRydWU7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyooaW50KSAqLyBNYXRoLmZsb29yKChNYXRoLmFicyhmaXJzdENvbmZpcm1lZENlbnRlci5nZXRYKCkgLSBjZW50ZXIuZ2V0WCgpKSAtCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoZmlyc3RDb25maXJtZWRDZW50ZXIuZ2V0WSgpIC0gY2VudGVyLmdldFkoKSkpIC8gMik7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZmYgd2UgaGF2ZSBmb3VuZCBhdCBsZWFzdCAzIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZAoJICAgICAqICAgICAgICAgYXQgbGVhc3Qge0BsaW5rICNDRU5URVJfUVVPUlVNfSB0aW1lcyBlYWNoLCBhbmQsIHRoZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgb2YgdGhlCgkgICAgICogICAgICAgICBjYW5kaWRhdGVzIGlzICJwcmV0dHkgc2ltaWxhciIKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8yLCBfYSwgZV8zLCBfYjsKCSAgICAgICAgdmFyIGNvbmZpcm1lZENvdW50ID0gMDsKCSAgICAgICAgdmFyIHRvdGFsTW9kdWxlU2l6ZSA9IDAuMDsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9jID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZCA9IF9jLm5leHQoKTsgIV9kLmRvbmU7IF9kID0gX2MubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZC52YWx1ZTsKCSAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBjb25maXJtZWRDb3VudCsrOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcGF0dGVybi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzJfMSkgeyBlXzIgPSB7IGVycm9yOiBlXzJfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9hID0gX2MucmV0dXJuKSkgX2EuY2FsbChfYyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvbmZpcm1lZENvdW50IDwgMykgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIE9LLCB3ZSBoYXZlIGF0IGxlYXN0IDMgY29uZmlybWVkIGNlbnRlcnMsIGJ1dCwgaXQncyBwb3NzaWJsZSB0aGF0IG9uZSBpcyBhICJmYWxzZSBwb3NpdGl2ZSIKCSAgICAgICAgLy8gYW5kIHRoYXQgd2UgbmVlZCB0byBrZWVwIGxvb2tpbmcuIFdlIGRldGVjdCB0aGlzIGJ5IGFza2luZyBpZiB0aGUgZXN0aW1hdGVkIG1vZHVsZSBzaXplcwoJICAgICAgICAvLyB2YXJ5IHRvbyBtdWNoLiBXZSBhcmJpdHJhcmlseSBzYXkgdGhhdCB3aGVuIHRoZSB0b3RhbCBkZXZpYXRpb24gZnJvbSBhdmVyYWdlIGV4Y2VlZHMKCSAgICAgICAgLy8gNSUgb2YgdGhlIHRvdGFsIG1vZHVsZSBzaXplIGVzdGltYXRlcywgaXQncyB0b28gbXVjaC4KCSAgICAgICAgdmFyIGF2ZXJhZ2UgPSB0b3RhbE1vZHVsZVNpemUgLyBtYXg7CgkgICAgICAgIHZhciB0b3RhbERldmlhdGlvbiA9IDAuMDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9lID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZiA9IF9lLm5leHQoKTsgIV9mLmRvbmU7IF9mID0gX2UubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZi52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbERldmlhdGlvbiArPSBNYXRoLmFicyhwYXR0ZXJuLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzNfMSkgeyBlXzMgPSB7IGVycm9yOiBlXzNfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2YgJiYgIV9mLmRvbmUgJiYgKF9iID0gX2UucmV0dXJuKSkgX2IuY2FsbChfZSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMykgdGhyb3cgZV8zLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRvdGFsRGV2aWF0aW9uIDw9IDAuMDUgKiB0b3RhbE1vZHVsZVNpemU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSAzIGJlc3Qge0BsaW5rIEZpbmRlclBhdHRlcm59cyBmcm9tIG91ciBsaXN0IG9mIGNhbmRpZGF0ZXMuIFRoZSAiYmVzdCIgYXJlCgkgICAgICogICAgICAgICB0aG9zZSB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZCBhdCBsZWFzdCB7QGxpbmsgI0NFTlRFUl9RVU9SVU19IHRpbWVzLCBhbmQgd2hvc2UgbW9kdWxlCgkgICAgICogICAgICAgICBzaXplIGRpZmZlcnMgZnJvbSB0aGUgYXZlcmFnZSBhbW9uZyB0aG9zZSBwYXR0ZXJucyB0aGUgbGVhc3QKCSAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIDMgc3VjaCBmaW5kZXIgcGF0dGVybnMgZG8gbm90IGV4aXN0CgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuc2VsZWN0QmVzdFBhdHRlcm5zID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV80LCBfYSwgZV81LCBfYjsKCSAgICAgICAgdmFyIHN0YXJ0U2l6ZSA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKHN0YXJ0U2l6ZSA8IDMpIHsKCSAgICAgICAgICAgIC8vIENvdWxkbid0IGZpbmQgZW5vdWdoIGZpbmRlciBwYXR0ZXJucwoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBvc3NpYmxlQ2VudGVycyA9IHRoaXMucG9zc2libGVDZW50ZXJzOwoJICAgICAgICB2YXIgYXZlcmFnZTsKCSAgICAgICAgLy8gRmlsdGVyIG91dGxpZXIgcG9zc2liaWxpdGllcyB3aG9zZSBtb2R1bGUgc2l6ZSBpcyB0b28gZGlmZmVyZW50CgkgICAgICAgIGlmIChzdGFydFNpemUgPiAzKSB7CgkgICAgICAgICAgICAvLyBCdXQgd2UgY2FuIG9ubHkgYWZmb3JkIHRvIGRvIHNvIGlmIHdlIGhhdmUgYXQgbGVhc3QgNCBwb3NzaWJpbGl0aWVzIHRvIGNob29zZSBmcm9tCgkgICAgICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMC4wOwoJICAgICAgICAgICAgdmFyIHNxdWFyZSA9IDAuMDsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IF9kLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGNlbnRlci5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgICAgIHRvdGFsTW9kdWxlU2l6ZSArPSBzaXplOwoJICAgICAgICAgICAgICAgICAgICBzcXVhcmUgKz0gc2l6ZSAqIHNpemU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgY2F0Y2ggKGVfNF8xKSB7IGVfNCA9IHsgZXJyb3I6IGVfNF8xIH07IH0KCSAgICAgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChfZCAmJiAhX2QuZG9uZSAmJiAoX2EgPSBfYy5yZXR1cm4pKSBfYS5jYWxsKF9jKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYXZlcmFnZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIHN0YXJ0U2l6ZTsKCSAgICAgICAgICAgIHZhciBzdGREZXYgPSBNYXRoLnNxcnQoc3F1YXJlIC8gc3RhcnRTaXplIC0gYXZlcmFnZSAqIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzLnNvcnQoCgkgICAgICAgICAgICAvKioKCSAgICAgICAgICAgICAqIDxwPk9yZGVycyBieSBmdXJ0aGVzdCBmcm9tIGF2ZXJhZ2U8L3A+CgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIEZ1cnRoZXN0RnJvbUF2ZXJhZ2VDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICB2YXIgZEEgPSBNYXRoLmFicyhjZW50ZXIyLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgICAgIHZhciBkQiA9IE1hdGguYWJzKGNlbnRlcjEuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSk7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAtMSA6IGRBID4gZEIgPyAxIDogMDsKCSAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgdmFyIGxpbWl0ID0gTWF0aC5tYXgoMC4yICogYXZlcmFnZSwgc3RkRGV2KTsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zc2libGVDZW50ZXJzLmxlbmd0aCAmJiBwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMzsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBwb3NzaWJsZUNlbnRlcnNbaV07CgkgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHBhdHRlcm4uZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSkgPiBsaW1pdCkgewoJICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKGksIDEpOwoJICAgICAgICAgICAgICAgICAgICBpLS07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGlmIChwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMykgewoJICAgICAgICAgICAgLy8gVGhyb3cgYXdheSBhbGwgYnV0IHRob3NlIGZpcnN0IHNpemUgY2FuZGlkYXRlIHBvaW50cyB3ZSBmb3VuZC4KCSAgICAgICAgICAgIHZhciB0b3RhbE1vZHVsZVNpemUgPSAwLjA7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGZvciAodmFyIHBvc3NpYmxlQ2VudGVyc18xID0gX192YWx1ZXMocG9zc2libGVDZW50ZXJzKSwgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKTsgIXBvc3NpYmxlQ2VudGVyc18xXzEuZG9uZTsgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXIgPSBwb3NzaWJsZUNlbnRlcnNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcG9zc2libGVDZW50ZXIuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGNhdGNoIChlXzVfMSkgeyBlXzUgPSB7IGVycm9yOiBlXzVfMSB9OyB9CgkgICAgICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVDZW50ZXJzXzFfMSAmJiAhcG9zc2libGVDZW50ZXJzXzFfMS5kb25lICYmIChfYiA9IHBvc3NpYmxlQ2VudGVyc18xLnJldHVybikpIF9iLmNhbGwocG9zc2libGVDZW50ZXJzXzEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfNSkgdGhyb3cgZV81LmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhdmVyYWdlID0gdG90YWxNb2R1bGVTaXplIC8gcG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5zb3J0KAoJICAgICAgICAgICAgLyoqCgkgICAgICAgICAgICAgKiA8cD5PcmRlcnMgYnkge0BsaW5rIEZpbmRlclBhdHRlcm4jZ2V0Q291bnQoKX0sIGRlc2NlbmRpbmcuPC9wPgoJICAgICAgICAgICAgICovCgkgICAgICAgICAgICAvLyBDZW50ZXJDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICBpZiAoY2VudGVyMi5nZXRDb3VudCgpID09PSBjZW50ZXIxLmdldENvdW50KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRBID0gTWF0aC5hYnMoY2VudGVyMi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRCID0gTWF0aC5hYnMoY2VudGVyMS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAxIDogZEEgPiBkQiA/IC0xIDogMDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZW50ZXIyLmdldENvdW50KCkgLSBjZW50ZXIxLmdldENvdW50KCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKDMpOyAvLyB0aGlzIGlzIG5vdCByZWFseSBuZWNlc3NhcnkgYXMgd2Ugb25seSByZXR1cm4gZmlyc3QgMyBhbnl3YXkKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gWwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzBdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzFdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzJdCgkgICAgICAgIF07CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLkNFTlRFUl9RVU9SVU0gPSAyOwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuTUlOX1NLSVAgPSAzOyAvLyAxIHBpeGVsL21vZHVsZSB0aW1lcyAzIG1vZHVsZXMvY2VudGVyCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUyA9IDU3OyAvLyBzdXBwb3J0IHVwIHRvIHZlcnNpb24gMTAgZm9yIG1vYmlsZSBjbGllbnRzCgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJRmluZGVyUGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuRmluZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV0ZWN0b3IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIE1hdGhVdGlsc18xID0gTWF0aFV0aWxzJDE7Cgl2YXIgRGV0ZWN0b3JSZXN1bHRfMSA9IERldGVjdG9yUmVzdWx0JDE7CgkvLyBpbXBvcnQgR3JpZFNhbXBsZXIgZnJvbSAnLi4vLi4vY29tbW9uL0dyaWRTYW1wbGVyJzsKCXZhciBHcmlkU2FtcGxlckluc3RhbmNlXzEgPSBHcmlkU2FtcGxlckluc3RhbmNlJDE7Cgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtJDE7Cgl2YXIgRGVjb2RlSGludFR5cGVfMSQxID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdFBvaW50XzEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIFZlcnNpb25fMSA9IFZlcnNpb24kMTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyXzEgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDE7Cgl2YXIgRmluZGVyUGF0dGVybkZpbmRlcl8xID0gRmluZGVyUGF0dGVybkZpbmRlciQxOwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgbG9naWMgdGhhdCBjYW4gZGV0ZWN0IGEgUVIgQ29kZSBpbiBhbiBpbWFnZSwgZXZlbiBpZiB0aGUgUVIgQ29kZQoJICogaXMgcm90YXRlZCBvciBza2V3ZWQsIG9yIHBhcnRpYWxseSBvYnNjdXJlZC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERldGVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERldGVjdG9yKGltYWdlKSB7CgkgICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTsKCSAgICB9CgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5pbWFnZTsKCSAgICB9OwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5nZXRSZXN1bHRQb2ludENhbGxiYWNrID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBkZXRlY3QoKTogRGV0ZWN0b3JSZXN1bHQgLyp0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZXRlY3QobnVsbCkKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGhpbnRzIG9wdGlvbmFsIGhpbnRzIHRvIGRldGVjdG9yCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5kZXRlY3QgPSBmdW5jdGlvbiAoaGludHMpIHsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gKGhpbnRzID09PSBudWxsIHx8IGhpbnRzID09PSB1bmRlZmluZWQpID8gbnVsbCA6CgkgICAgICAgICAgICAvKihSZXN1bHRQb2ludENhbGxiYWNrKSAqLyBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQxLmRlZmF1bHQuTkVFRF9SRVNVTFRfUE9JTlRfQ0FMTEJBQ0spOwoJICAgICAgICB2YXIgZmluZGVyID0gbmV3IEZpbmRlclBhdHRlcm5GaW5kZXJfMS5kZWZhdWx0KHRoaXMuaW1hZ2UsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHZhciBpbmZvID0gZmluZGVyLmZpbmQoaGludHMpOwoJICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzRmluZGVyUGF0dGVybkluZm8oaW5mbyk7CgkgICAgfTsKCSAgICBEZXRlY3Rvci5wcm90b3R5cGUucHJvY2Vzc0ZpbmRlclBhdHRlcm5JbmZvID0gZnVuY3Rpb24gKGluZm8pIHsKCSAgICAgICAgdmFyIHRvcExlZnQgPSBpbmZvLmdldFRvcExlZnQoKTsKCSAgICAgICAgdmFyIHRvcFJpZ2h0ID0gaW5mby5nZXRUb3BSaWdodCgpOwoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IGluZm8uZ2V0Qm90dG9tTGVmdCgpOwoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMuY2FsY3VsYXRlTW9kdWxlU2l6ZSh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCk7CgkgICAgICAgIGlmIChtb2R1bGVTaXplIDwgMS4wKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ05vIHBhdHRlcm4gZm91bmQgaW4gcHJvY2Nlc3MgZmluZGVyLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkaW1lbnNpb24gPSBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHByb3Zpc2lvbmFsVmVyc2lvbiA9IFZlcnNpb25fMS5kZWZhdWx0LmdldFByb3Zpc2lvbmFsVmVyc2lvbkZvckRpbWVuc2lvbihkaW1lbnNpb24pOwoJICAgICAgICB2YXIgbW9kdWxlc0JldHdlZW5GUENlbnRlcnMgPSBwcm92aXNpb25hbFZlcnNpb24uZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpIC0gNzsKCSAgICAgICAgdmFyIGFsaWdubWVudFBhdHRlcm4gPSBudWxsOwoJICAgICAgICAvLyBBbnl0aGluZyBhYm92ZSB2ZXJzaW9uIDEgaGFzIGFuIGFsaWdubWVudCBwYXR0ZXJuCgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24uZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMoKS5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAvLyBHdWVzcyB3aGVyZSBhICJib3R0b20gcmlnaHQiIGZpbmRlciBwYXR0ZXJuIHdvdWxkIGhhdmUgYmVlbgoJICAgICAgICAgICAgdmFyIGJvdHRvbVJpZ2h0WCA9IHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpICsgYm90dG9tTGVmdC5nZXRYKCk7CgkgICAgICAgICAgICB2YXIgYm90dG9tUmlnaHRZID0gdG9wUmlnaHQuZ2V0WSgpIC0gdG9wTGVmdC5nZXRZKCkgKyBib3R0b21MZWZ0LmdldFkoKTsKCSAgICAgICAgICAgIC8vIEVzdGltYXRlIHRoYXQgYWxpZ25tZW50IHBhdHRlcm4gaXMgY2xvc2VyIGJ5IDMgbW9kdWxlcwoJICAgICAgICAgICAgLy8gZnJvbSAiYm90dG9tIHJpZ2h0IiB0byBrbm93biB0b3AgbGVmdCBsb2NhdGlvbgoJICAgICAgICAgICAgdmFyIGNvcnJlY3Rpb25Ub1RvcExlZnQgPSAxLjAgLSAzLjAgLyBtb2R1bGVzQmV0d2VlbkZQQ2VudGVyczsKCSAgICAgICAgICAgIHZhciBlc3RBbGlnbm1lbnRYID0gLyooaW50KSAqLyBNYXRoLmZsb29yKHRvcExlZnQuZ2V0WCgpICsgY29ycmVjdGlvblRvVG9wTGVmdCAqIChib3R0b21SaWdodFggLSB0b3BMZWZ0LmdldFgoKSkpOwoJICAgICAgICAgICAgdmFyIGVzdEFsaWdubWVudFkgPSAvKihpbnQpICovIE1hdGguZmxvb3IodG9wTGVmdC5nZXRZKCkgKyBjb3JyZWN0aW9uVG9Ub3BMZWZ0ICogKGJvdHRvbVJpZ2h0WSAtIHRvcExlZnQuZ2V0WSgpKSk7CgkgICAgICAgICAgICAvLyBLaW5kIG9mIGFyYml0cmFyeSAtLSBleHBhbmQgc2VhcmNoIHJhZGl1cyBiZWZvcmUgZ2l2aW5nIHVwCgkgICAgICAgICAgICBmb3IgKHZhciBpID0gNDsgaSA8PSAxNjsgaSA8PD0gMSkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudFBhdHRlcm4gPSB0aGlzLmZpbmRBbGlnbm1lbnRJblJlZ2lvbihtb2R1bGVTaXplLCBlc3RBbGlnbm1lbnRYLCBlc3RBbGlnbm1lbnRZLCBpKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGNhdGNoIChyZSAvKk5vdEZvdW5kRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCEocmUgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHJlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIC8vIHRyeSBuZXh0IHJvdW5kCgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgYWxpZ25tZW50IHBhdHRlcm4uLi4gd2VsbCB0cnkgYW55d2F5IHdpdGhvdXQgaXQKCSAgICAgICAgfQoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gRGV0ZWN0b3IuY3JlYXRlVHJhbnNmb3JtKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBhbGlnbm1lbnRQYXR0ZXJuLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgYml0cyA9IERldGVjdG9yLnNhbXBsZUdyaWQodGhpcy5pbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgcG9pbnRzOwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgcG9pbnRzID0gW2JvdHRvbUxlZnQsIHRvcExlZnQsIHRvcFJpZ2h0XTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHBvaW50cyA9IFtib3R0b21MZWZ0LCB0b3BMZWZ0LCB0b3BSaWdodCwgYWxpZ25tZW50UGF0dGVybl07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBEZXRlY3RvclJlc3VsdF8xLmRlZmF1bHQoYml0cywgcG9pbnRzKTsKCSAgICB9OwoJICAgIERldGVjdG9yLmNyZWF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCwgYWxpZ25tZW50UGF0dGVybiwgZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGRpbU1pbnVzVGhyZWUgPSBkaW1lbnNpb24gLSAzLjU7CgkgICAgICAgIHZhciBib3R0b21SaWdodFg7IC8qZmxvYXQqLwoJICAgICAgICB2YXIgYm90dG9tUmlnaHRZOyAvKmZsb2F0Ki8KCSAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0WDsgLypmbG9hdCovCgkgICAgICAgIHZhciBzb3VyY2VCb3R0b21SaWdodFk7IC8qZmxvYXQqLwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiAhPT0gbnVsbCkgewoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gYWxpZ25tZW50UGF0dGVybi5nZXRYKCk7CgkgICAgICAgICAgICBib3R0b21SaWdodFkgPSBhbGlnbm1lbnRQYXR0ZXJuLmdldFkoKTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WCA9IGRpbU1pbnVzVGhyZWUgLSAzLjA7CgkgICAgICAgICAgICBzb3VyY2VCb3R0b21SaWdodFkgPSBzb3VyY2VCb3R0b21SaWdodFg7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBEb24ndCBoYXZlIGFuIGFsaWdubWVudCBwYXR0ZXJuLCBqdXN0IG1ha2UgdXAgdGhlIGJvdHRvbS1yaWdodCBwb2ludAoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gKHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpKSArIGJvdHRvbUxlZnQuZ2V0WCgpOwoJICAgICAgICAgICAgYm90dG9tUmlnaHRZID0gKHRvcFJpZ2h0LmdldFkoKSAtIHRvcExlZnQuZ2V0WSgpKSArIGJvdHRvbUxlZnQuZ2V0WSgpOwoJICAgICAgICAgICAgc291cmNlQm90dG9tUmlnaHRYID0gZGltTWludXNUaHJlZTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WSA9IGRpbU1pbnVzVGhyZWU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtXzEuZGVmYXVsdC5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsKDMuNSwgMy41LCBkaW1NaW51c1RocmVlLCAzLjUsIHNvdXJjZUJvdHRvbVJpZ2h0WCwgc291cmNlQm90dG9tUmlnaHRZLCAzLjUsIGRpbU1pbnVzVGhyZWUsIHRvcExlZnQuZ2V0WCgpLCB0b3BMZWZ0LmdldFkoKSwgdG9wUmlnaHQuZ2V0WCgpLCB0b3BSaWdodC5nZXRZKCksIGJvdHRvbVJpZ2h0WCwgYm90dG9tUmlnaHRZLCBib3R0b21MZWZ0LmdldFgoKSwgYm90dG9tTGVmdC5nZXRZKCkpOwoJICAgIH07CgkgICAgRGV0ZWN0b3Iuc2FtcGxlR3JpZCA9IGZ1bmN0aW9uIChpbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24gLyppbnQqLykgewoJICAgICAgICB2YXIgc2FtcGxlciA9IEdyaWRTYW1wbGVySW5zdGFuY2VfMS5kZWZhdWx0LmdldEluc3RhbmNlKCk7CgkgICAgICAgIHJldHVybiBzYW1wbGVyLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtKGltYWdlLCBkaW1lbnNpb24sIGRpbWVuc2lvbiwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkNvbXB1dGVzIHRoZSBkaW1lbnNpb24gKG51bWJlciBvZiBtb2R1bGVzIG9uIGEgc2l6ZSkgb2YgdGhlIFFSIENvZGUgYmFzZWQgb24gdGhlIHBvc2l0aW9uCgkgICAgICogb2YgdGhlIGZpbmRlciBwYXR0ZXJucyBhbmQgZXN0aW1hdGVkIG1vZHVsZSBzaXplLjwvcD4KCSAgICAgKi8KCSAgICBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uID0gZnVuY3Rpb24gKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdGx0ckNlbnRlcnNEaW1lbnNpb24gPSBNYXRoVXRpbHNfMS5kZWZhdWx0LnJvdW5kKFJlc3VsdFBvaW50XzEuZGVmYXVsdC5kaXN0YW5jZSh0b3BMZWZ0LCB0b3BSaWdodCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHRsYmxDZW50ZXJzRGltZW5zaW9uID0gTWF0aFV0aWxzXzEuZGVmYXVsdC5yb3VuZChSZXN1bHRQb2ludF8xLmRlZmF1bHQuZGlzdGFuY2UodG9wTGVmdCwgYm90dG9tTGVmdCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IE1hdGguZmxvb3IoKHRsdHJDZW50ZXJzRGltZW5zaW9uICsgdGxibENlbnRlcnNEaW1lbnNpb24pIC8gMikgKyA3OwoJICAgICAgICBzd2l0Y2ggKGRpbWVuc2lvbiAmIDB4MDMpIHsgLy8gbW9kIDQKCSAgICAgICAgICAgIGNhc2UgMDoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24rKzsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIC8vIDE/IGRvIG5vdGhpbmcKCSAgICAgICAgICAgIGNhc2UgMjoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24tLTsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIGNhc2UgMzoKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ0RpbWVuc2lvbnMgY291bGQgYmUgbm90IGZvdW5kLicpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBkaW1lbnNpb247CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5Db21wdXRlcyBhbiBhdmVyYWdlIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBiYXNlZCBvbiBlc3RpbWF0ZWQgZGVyaXZlZCBmcm9tIHRoZSBwb3NpdGlvbnMKCSAgICAgKiBvZiB0aGUgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB0b3BMZWZ0IGRldGVjdGVkIHRvcC1sZWZ0IGZpbmRlciBwYXR0ZXJuIGNlbnRlcgoJICAgICAqIEBwYXJhbSB0b3BSaWdodCBkZXRlY3RlZCB0b3AtcmlnaHQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHBhcmFtIGJvdHRvbUxlZnQgZGV0ZWN0ZWQgYm90dG9tLWxlZnQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHJldHVybiBlc3RpbWF0ZWQgbW9kdWxlIHNpemUKCSAgICAgKi8KCSAgICBEZXRlY3Rvci5wcm90b3R5cGUuY2FsY3VsYXRlTW9kdWxlU2l6ZSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCkgewoJICAgICAgICAvLyBUYWtlIHRoZSBhdmVyYWdlCgkgICAgICAgIHJldHVybiAodGhpcy5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5KHRvcExlZnQsIHRvcFJpZ2h0KSArCgkgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZU1vZHVsZVNpemVPbmVXYXkodG9wTGVmdCwgYm90dG9tTGVmdCkpIC8gMi4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RXN0aW1hdGVzIG1vZHVsZSBzaXplIGJhc2VkIG9uIHR3byBmaW5kZXIgcGF0dGVybnMgLS0gaXQgdXNlcwoJICAgICAqIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuQm90aFdheXMoaW50LCBpbnQsIGludCwgaW50KX0gdG8gZmlndXJlIHRoZQoJICAgICAqIHdpZHRoIG9mIGVhY2gsIG1lYXN1cmluZyBhbG9uZyB0aGUgYXhpcyBiZXR3ZWVuIHRoZWlyIGNlbnRlcnMuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5ID0gZnVuY3Rpb24gKHBhdHRlcm4sIG90aGVyUGF0dGVybikgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZUVzdDEgPSB0aGlzLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzKC8qKGludCkgKi8gTWF0aC5mbG9vcihwYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRZKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRZKCkpKTsKCSAgICAgICAgdmFyIG1vZHVsZVNpemVFc3QyID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW5Cb3RoV2F5cygvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFkoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKHBhdHRlcm4uZ2V0WSgpKSk7CgkgICAgICAgIGlmIChpc05hTihtb2R1bGVTaXplRXN0MSkpIHsKCSAgICAgICAgICAgIHJldHVybiBtb2R1bGVTaXplRXN0MiAvIDcuMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaXNOYU4obW9kdWxlU2l6ZUVzdDIpKSB7CgkgICAgICAgICAgICByZXR1cm4gbW9kdWxlU2l6ZUVzdDEgLyA3LjA7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQXZlcmFnZSB0aGVtLCBhbmQgZGl2aWRlIGJ5IDcgc2luY2Ugd2UndmUgY291bnRlZCB0aGUgd2lkdGggb2YgMyBibGFjayBtb2R1bGVzLAoJICAgICAgICAvLyBhbmQgMSB3aGl0ZSBhbmQgMSBibGFjayBtb2R1bGUgb24gZWl0aGVyIHNpZGUuIEVyZ28sIGRpdmlkZSBzdW0gYnkgMTQuCgkgICAgICAgIHJldHVybiAobW9kdWxlU2l6ZUVzdDEgKyBtb2R1bGVTaXplRXN0MikgLyAxNC4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKGludCwgaW50LCBpbnQsIGludCl9OyBjb21wdXRlcyB0aGUgdG90YWwgd2lkdGggb2YKCSAgICAgKiBhIGZpbmRlciBwYXR0ZXJuIGJ5IGxvb2tpbmcgZm9yIGEgYmxhY2std2hpdGUtYmxhY2sgcnVuIGZyb20gdGhlIGNlbnRlciBpbiB0aGUgZGlyZWN0aW9uCgkgICAgICogb2YgYW5vdGhlciBwb2ludCAoYW5vdGhlciBmaW5kZXIgcGF0dGVybiBjZW50ZXIpLCBhbmQgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbiB0b28uCgkgICAgICovCgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzID0gZnVuY3Rpb24gKGZyb21YIC8qaW50Ki8sIGZyb21ZIC8qaW50Ki8sIHRvWCAvKmludCovLCB0b1kgLyppbnQqLykgewoJICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSk7CgkgICAgICAgIC8vIE5vdyBjb3VudCBvdGhlciB3YXkgLS0gZG9uJ3QgcnVuIG9mZiBpbWFnZSB0aG91Z2ggb2YgY291cnNlCgkgICAgICAgIHZhciBzY2FsZSA9IDEuMDsKCSAgICAgICAgdmFyIG90aGVyVG9YID0gZnJvbVggLSAodG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAob3RoZXJUb1ggPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21YIC8gLyooZmxvYXQpICovIChmcm9tWCAtIG90aGVyVG9YKTsKCSAgICAgICAgICAgIG90aGVyVG9YID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWCA+PSB0aGlzLmltYWdlLmdldFdpZHRoKCkpIHsKCSAgICAgICAgICAgIHNjYWxlID0gKHRoaXMuaW1hZ2UuZ2V0V2lkdGgoKSAtIDEgLSBmcm9tWCkgLyAvKihmbG9hdCkgKi8gKG90aGVyVG9YIC0gZnJvbVgpOwoJICAgICAgICAgICAgb3RoZXJUb1ggPSB0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlclRvWSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihmcm9tWSAtICh0b1kgLSBmcm9tWSkgKiBzY2FsZSk7CgkgICAgICAgIHNjYWxlID0gMS4wOwoJICAgICAgICBpZiAob3RoZXJUb1kgPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21ZIC8gLyooZmxvYXQpICovIChmcm9tWSAtIG90aGVyVG9ZKTsKCSAgICAgICAgICAgIG90aGVyVG9ZID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWSA+PSB0aGlzLmltYWdlLmdldEhlaWdodCgpKSB7CgkgICAgICAgICAgICBzY2FsZSA9ICh0aGlzLmltYWdlLmdldEhlaWdodCgpIC0gMSAtIGZyb21ZKSAvIC8qKGZsb2F0KSAqLyAob3RoZXJUb1kgLSBmcm9tWSk7CgkgICAgICAgICAgICBvdGhlclRvWSA9IHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIG90aGVyVG9YID0gLyooaW50KSAqLyBNYXRoLmZsb29yKGZyb21YICsgKG90aGVyVG9YIC0gZnJvbVgpICogc2NhbGUpOwoJICAgICAgICByZXN1bHQgKz0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCBvdGhlclRvWCwgb3RoZXJUb1kpOwoJICAgICAgICAvLyBNaWRkbGUgcGl4ZWwgaXMgZG91YmxlLWNvdW50ZWQgdGhpcyB3YXk7IHN1YnRyYWN0IDEKCSAgICAgICAgcmV0dXJuIHJlc3VsdCAtIDEuMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHRyYWNlcyBhIGxpbmUgZnJvbSBhIHBvaW50IGluIHRoZSBpbWFnZSwgaW4gdGhlIGRpcmVjdGlvbiB0b3dhcmRzIGFub3RoZXIgcG9pbnQuCgkgICAgICogSXQgYmVnaW5zIGluIGEgYmxhY2sgcmVnaW9uLCBhbmQga2VlcHMgZ29pbmcgdW50aWwgaXQgZmluZHMgd2hpdGUsIHRoZW4gYmxhY2ssIHRoZW4gd2hpdGUgYWdhaW4uCgkgICAgICogSXQgcmVwb3J0cyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnQgdG8gdGhpcyBwb2ludC48L3A+CgkgICAgICoKCSAgICAgKiA8cD5UaGlzIGlzIHVzZWQgd2hlbiBmaWd1cmluZyBvdXQgaG93IHdpZGUgYSBmaW5kZXIgcGF0dGVybiBpcywgd2hlbiB0aGUgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBtYXkgYmUgc2tld2VkIG9yIHJvdGF0ZWQuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4gPSBmdW5jdGlvbiAoZnJvbVggLyppbnQqLywgZnJvbVkgLyppbnQqLywgdG9YIC8qaW50Ki8sIHRvWSAvKmludCovKSB7CgkgICAgICAgIC8vIE1pbGQgdmFyaWFudCBvZiBCcmVzZW5oYW0ncyBhbGdvcml0aG0KCSAgICAgICAgLy8gc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQnJlc2VuaGFtJ3NfbGluZV9hbGdvcml0aG0KCSAgICAgICAgdmFyIHN0ZWVwID0gTWF0aC5hYnModG9ZIC0gZnJvbVkpID4gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAoc3RlZXApIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZnJvbVg7CgkgICAgICAgICAgICBmcm9tWCA9IGZyb21ZOwoJICAgICAgICAgICAgZnJvbVkgPSB0ZW1wOwoJICAgICAgICAgICAgdGVtcCA9IHRvWDsKCSAgICAgICAgICAgIHRvWCA9IHRvWTsKCSAgICAgICAgICAgIHRvWSA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICB2YXIgZHkgPSBNYXRoLmFicyh0b1kgLSBmcm9tWSk7CgkgICAgICAgIHZhciBlcnJvciA9IC1keCAvIDI7CgkgICAgICAgIHZhciB4c3RlcCA9IGZyb21YIDwgdG9YID8gMSA6IC0xOwoJICAgICAgICB2YXIgeXN0ZXAgPSBmcm9tWSA8IHRvWSA/IDEgOiAtMTsKCSAgICAgICAgLy8gSW4gYmxhY2sgcGl4ZWxzLCBsb29raW5nIGZvciB3aGl0ZSwgZmlyc3Qgb3Igc2Vjb25kIHRpbWUuCgkgICAgICAgIHZhciBzdGF0ZSA9IDA7CgkgICAgICAgIC8vIExvb3AgdXAgdW50aWwgeCA9PSB0b1gsIGJ1dCBub3QgYmV5b25kCgkgICAgICAgIHZhciB4TGltaXQgPSB0b1ggKyB4c3RlcDsKCSAgICAgICAgZm9yICh2YXIgeCA9IGZyb21YLCB5ID0gZnJvbVk7IHggIT09IHhMaW1pdDsgeCArPSB4c3RlcCkgewoJICAgICAgICAgICAgdmFyIHJlYWxYID0gc3RlZXAgPyB5IDogeDsKCSAgICAgICAgICAgIHZhciByZWFsWSA9IHN0ZWVwID8geCA6IHk7CgkgICAgICAgICAgICAvLyBEb2VzIGN1cnJlbnQgcGl4ZWwgbWVhbiB3ZSBoYXZlIG1vdmVkIHdoaXRlIHRvIGJsYWNrIG9yIHZpY2UgdmVyc2E/CgkgICAgICAgICAgICAvLyBTY2FubmluZyBibGFjayBpbiBzdGF0ZSAwLDIgYW5kIHdoaXRlIGluIHN0YXRlIDEsIHNvIGlmIHdlIGZpbmQgdGhlIHdyb25nCgkgICAgICAgICAgICAvLyBjb2xvciwgYWR2YW5jZSB0byBuZXh0IHN0YXRlIG9yIGVuZCBpZiB3ZSBhcmUgaW4gc3RhdGUgMiBhbHJlYWR5CgkgICAgICAgICAgICBpZiAoKHN0YXRlID09PSAxKSA9PT0gdGhpcy5pbWFnZS5nZXQocmVhbFgsIHJlYWxZKSkgewoJICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMikgewoJICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aFV0aWxzXzEuZGVmYXVsdC5kaXN0YW5jZSh4LCB5LCBmcm9tWCwgZnJvbVkpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBzdGF0ZSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZXJyb3IgKz0gZHk7CgkgICAgICAgICAgICBpZiAoZXJyb3IgPiAwKSB7CgkgICAgICAgICAgICAgICAgaWYgKHkgPT09IHRvWSkgewoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgeSArPSB5c3RlcDsKCSAgICAgICAgICAgICAgICBlcnJvciAtPSBkeDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBGb3VuZCBibGFjay13aGl0ZS1ibGFjazsgZ2l2ZSB0aGUgYmVuZWZpdCBvZiB0aGUgZG91YnQgdGhhdCB0aGUgbmV4dCBwaXhlbCBvdXRzaWRlIHRoZSBpbWFnZQoJICAgICAgICAvLyBpcyAid2hpdGUiIHNvIHRoaXMgbGFzdCBwb2ludCBhdCAodG9YK3hTdGVwLHRvWSkgaXMgdGhlIHJpZ2h0IGVuZGluZy4gVGhpcyBpcyByZWFsbHkgYQoJICAgICAgICAvLyBzbWFsbCBhcHByb3hpbWF0aW9uOyAodG9YK3hTdGVwLHRvWSt5U3RlcCkgbWlnaHQgYmUgcmVhbGx5IGNvcnJlY3QuIElnbm9yZSB0aGlzLgoJICAgICAgICBpZiAoc3RhdGUgPT09IDIpIHsKCSAgICAgICAgICAgIHJldHVybiBNYXRoVXRpbHNfMS5kZWZhdWx0LmRpc3RhbmNlKHRvWCArIHhzdGVwLCB0b1ksIGZyb21YLCBmcm9tWSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gZWxzZSB3ZSBkaWRuJ3QgZmluZCBldmVuIGJsYWNrLXdoaXRlLWJsYWNrOyBubyBlc3RpbWF0ZSBpcyByZWFsbHkgcG9zc2libGUKCSAgICAgICAgcmV0dXJuIE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkF0dGVtcHRzIHRvIGxvY2F0ZSBhbiBhbGlnbm1lbnQgcGF0dGVybiBpbiBhIGxpbWl0ZWQgcmVnaW9uIG9mIHRoZSBpbWFnZSwgd2hpY2ggaXMKCSAgICAgKiBndWVzc2VkIHRvIGNvbnRhaW4gaXQuIFRoaXMgbWV0aG9kIHVzZXMge0BsaW5rIEFsaWdubWVudFBhdHRlcm59LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBvdmVyYWxsRXN0TW9kdWxlU2l6ZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgc28gZmFyCgkgICAgICogQHBhcmFtIGVzdEFsaWdubWVudFggeCBjb29yZGluYXRlIG9mIGNlbnRlciBvZiBhcmVhIHByb2JhYmx5IGNvbnRhaW5pbmcgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gZXN0QWxpZ25tZW50WSB5IGNvb3JkaW5hdGUgb2YgYWJvdmUKCSAgICAgKiBAcGFyYW0gYWxsb3dhbmNlRmFjdG9yIG51bWJlciBvZiBwaXhlbHMgaW4gYWxsIGRpcmVjdGlvbnMgdG8gc2VhcmNoIGZyb20gdGhlIGNlbnRlcgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kLCBvciBudWxsIG90aGVyd2lzZQoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgYW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnMgZHVyaW5nIGRldGVjdGlvbgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5maW5kQWxpZ25tZW50SW5SZWdpb24gPSBmdW5jdGlvbiAob3ZlcmFsbEVzdE1vZHVsZVNpemUgLypmbG9hdCovLCBlc3RBbGlnbm1lbnRYIC8qaW50Ki8sIGVzdEFsaWdubWVudFkgLyppbnQqLywgYWxsb3dhbmNlRmFjdG9yIC8qZmxvYXQqLykgewoJICAgICAgICAvLyBMb29rIGZvciBhbiBhbGlnbm1lbnQgcGF0dGVybiAoMyBtb2R1bGVzIGluIHNpemUpIGFyb3VuZCB3aGVyZSBpdAoJICAgICAgICAvLyBzaG91bGQgYmUKCSAgICAgICAgdmFyIGFsbG93YW5jZSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihhbGxvd2FuY2VGYWN0b3IgKiBvdmVyYWxsRXN0TW9kdWxlU2l6ZSk7CgkgICAgICAgIHZhciBhbGlnbm1lbnRBcmVhTGVmdFggPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRYIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFSaWdodFggPSBNYXRoLm1pbih0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxLCBlc3RBbGlnbm1lbnRYICsgYWxsb3dhbmNlKTsKCSAgICAgICAgaWYgKGFsaWdubWVudEFyZWFSaWdodFggLSBhbGlnbm1lbnRBcmVhTGVmdFggPCBvdmVyYWxsRXN0TW9kdWxlU2l6ZSAqIDMpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgnQWxpZ25tZW50IHRvcCBleGNlZWRzIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS4nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYWxpZ25tZW50QXJlYVRvcFkgPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRZIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFCb3R0b21ZID0gTWF0aC5taW4odGhpcy5pbWFnZS5nZXRIZWlnaHQoKSAtIDEsIGVzdEFsaWdubWVudFkgKyBhbGxvd2FuY2UpOwoJICAgICAgICBpZiAoYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSA8IG92ZXJhbGxFc3RNb2R1bGVTaXplICogMykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMS5kZWZhdWx0KCdBbGlnbm1lbnQgYm90dG9tIGV4Y2VlZHMgZXN0aW1hdGVkIG1vZHVsZSBzaXplLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhbGlnbm1lbnRGaW5kZXIgPSBuZXcgQWxpZ25tZW50UGF0dGVybkZpbmRlcl8xLmRlZmF1bHQodGhpcy5pbWFnZSwgYWxpZ25tZW50QXJlYUxlZnRYLCBhbGlnbm1lbnRBcmVhVG9wWSwgYWxpZ25tZW50QXJlYVJpZ2h0WCAtIGFsaWdubWVudEFyZWFMZWZ0WCwgYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSwgb3ZlcmFsbEVzdE1vZHVsZVNpemUsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHJldHVybiBhbGlnbm1lbnRGaW5kZXIuZmluZCgpOwoJICAgIH07CgkgICAgcmV0dXJuIERldGVjdG9yOwoJfSgpKTsKCURldGVjdG9yJDEuZGVmYXVsdCA9IERldGVjdG9yOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUVJDb2RlUmVhZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlIHsqLwoJdmFyIEJhcmNvZGVGb3JtYXRfMSA9IEJhcmNvZGVGb3JtYXQkMTsKCXZhciBCaXRNYXRyaXhfMSA9IEJpdE1hdHJpeCQxOwoJdmFyIERlY29kZUhpbnRUeXBlXzEgPSBEZWNvZGVIaW50VHlwZSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdF8xID0gUmVzdWx0JDE7Cgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlXzEgPSBSZXN1bHRNZXRhZGF0YVR5cGUkMTsKCS8vIGltcG9ydCBEZXRlY3RvclJlc3VsdCBmcm9tICcuLi9jb21tb24vRGV0ZWN0b3JSZXN1bHQnOwoJdmFyIERlY29kZXJfMSA9IERlY29kZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSA9IFFSQ29kZURlY29kZXJNZXRhRGF0YSQxOwoJdmFyIERldGVjdG9yXzEgPSBEZXRlY3RvciQxOwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5NYXA7Ki8KCS8qKgoJICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjYW4gZGV0ZWN0IGFuZCBkZWNvZGUgUVIgQ29kZXMgaW4gYW4gaW1hZ2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFFSQ29kZVJlYWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBRUkNvZGVSZWFkZXIoKSB7CgkgICAgICAgIHRoaXMuZGVjb2RlciA9IG5ldyBEZWNvZGVyXzEuZGVmYXVsdCgpOwoJICAgIH0KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmdldERlY29kZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBMb2NhdGVzIGFuZCBkZWNvZGVzIGEgUVIgY29kZSBpbiBhbiBpbWFnZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gYSByZXByZXNlbnRpbmc6IHN0cmluZyB0aGUgY29udGVudCBlbmNvZGVkIGJ5IHRoZSBRUiBjb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhIFFSIGNvZGUgY2Fubm90IGJlIGZvdW5kCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgYSBRUiBjb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIC8vIHB1YmxpYyBkZWNvZGUoaW1hZ2U6IEJpbmFyeUJpdG1hcCk6IFJlc3VsdCAvKnRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiwgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiAqLyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5kZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChpbWFnZSwgaGludHMpIHsKCSAgICAgICAgdmFyIGRlY29kZXJSZXN1bHQ7CgkgICAgICAgIHZhciBwb2ludHM7CgkgICAgICAgIGlmIChoaW50cyAhPT0gdW5kZWZpbmVkICYmIGhpbnRzICE9PSBudWxsICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEuZGVmYXVsdC5QVVJFX0JBUkNPREUpKSB7CgkgICAgICAgICAgICB2YXIgYml0cyA9IFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMoaW1hZ2UuZ2V0QmxhY2tNYXRyaXgoKSk7CgkgICAgICAgICAgICBkZWNvZGVyUmVzdWx0ID0gdGhpcy5kZWNvZGVyLmRlY29kZUJpdE1hdHJpeChiaXRzLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGRldGVjdG9yUmVzdWx0ID0gbmV3IERldGVjdG9yXzEuZGVmYXVsdChpbWFnZS5nZXRCbGFja01hdHJpeCgpKS5kZXRlY3QoaGludHMpOwoJICAgICAgICAgICAgZGVjb2RlclJlc3VsdCA9IHRoaXMuZGVjb2Rlci5kZWNvZGVCaXRNYXRyaXgoZGV0ZWN0b3JSZXN1bHQuZ2V0Qml0cygpLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBkZXRlY3RvclJlc3VsdC5nZXRQb2ludHMoKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB0aGUgY29kZSB3YXMgbWlycm9yZWQ6IHN3YXAgdGhlIGJvdHRvbS1sZWZ0IGFuZCB0aGUgdG9wLXJpZ2h0IHBvaW50cy4KCSAgICAgICAgaWYgKGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKSBpbnN0YW5jZW9mIFFSQ29kZURlY29kZXJNZXRhRGF0YV8xLmRlZmF1bHQpIHsKCSAgICAgICAgICAgIGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKS5hcHBseU1pcnJvcmVkQ29ycmVjdGlvbihwb2ludHMpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgUmVzdWx0XzEuZGVmYXVsdChkZWNvZGVyUmVzdWx0LmdldFRleHQoKSwgZGVjb2RlclJlc3VsdC5nZXRSYXdCeXRlcygpLCB1bmRlZmluZWQsIHBvaW50cywgQmFyY29kZUZvcm1hdF8xLmRlZmF1bHQuUVJfQ09ERSwgdW5kZWZpbmVkKTsKCSAgICAgICAgdmFyIGJ5dGVTZWdtZW50cyA9IGRlY29kZXJSZXN1bHQuZ2V0Qnl0ZVNlZ21lbnRzKCk7CgkgICAgICAgIGlmIChieXRlU2VnbWVudHMgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkJZVEVfU0VHTUVOVFMsIGJ5dGVTZWdtZW50cyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBkZWNvZGVyUmVzdWx0LmdldEVDTGV2ZWwoKTsKCSAgICAgICAgaWYgKGVjTGV2ZWwgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwsIGVjTGV2ZWwpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChkZWNvZGVyUmVzdWx0Lmhhc1N0cnVjdHVyZWRBcHBlbmQoKSkgewoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UsIGRlY29kZXJSZXN1bHQuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyKCkpOwoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfUEFSSVRZLCBkZWNvZGVyUmVzdWx0LmdldFN0cnVjdHVyZWRBcHBlbmRQYXJpdHkoKSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBkbyBub3RoaW5nCgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBUaGlzIG1ldGhvZCBkZXRlY3RzIGEgY29kZSBpbiBhICJwdXJlIiBpbWFnZSAtLSB0aGF0IGlzLCBwdXJlIG1vbm9jaHJvbWUgaW1hZ2UKCSAgICAgKiB3aGljaCBjb250YWlucyBvbmx5IGFuIHVucm90YXRlZCwgdW5za2V3ZWQsIGltYWdlIG9mIGEgY29kZSwgd2l0aCBzb21lIHdoaXRlIGJvcmRlcgoJICAgICAqIGFyb3VuZCBpdC4gVGhpcyBpcyBhIHNwZWNpYWxpemVkIG1ldGhvZCB0aGF0IHdvcmtzIGV4Y2VwdGlvbmFsbHkgZmFzdCBpbiB0aGlzIHNwZWNpYWwKCSAgICAgKiBjYXNlLgoJICAgICAqCgkgICAgICogQHNlZSBjb20uZ29vZ2xlLnp4aW5nLmRhdGFtYXRyaXguRGF0YU1hdHJpeFJlYWRlciNleHRyYWN0UHVyZUJpdHMoQml0TWF0cml4KQoJICAgICAqLwoJICAgIFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMgPSBmdW5jdGlvbiAoaW1hZ2UpIHsKCSAgICAgICAgdmFyIGxlZnRUb3BCbGFjayA9IGltYWdlLmdldFRvcExlZnRPbkJpdCgpOwoJICAgICAgICB2YXIgcmlnaHRCb3R0b21CbGFjayA9IGltYWdlLmdldEJvdHRvbVJpZ2h0T25CaXQoKTsKCSAgICAgICAgaWYgKGxlZnRUb3BCbGFjayA9PT0gbnVsbCB8fCByaWdodEJvdHRvbUJsYWNrID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1vZHVsZVNpemUgPSB0aGlzLm1vZHVsZVNpemUobGVmdFRvcEJsYWNrLCBpbWFnZSk7CgkgICAgICAgIHZhciB0b3AgPSBsZWZ0VG9wQmxhY2tbMV07CgkgICAgICAgIHZhciBib3R0b20gPSByaWdodEJvdHRvbUJsYWNrWzFdOwoJICAgICAgICB2YXIgbGVmdCA9IGxlZnRUb3BCbGFja1swXTsKCSAgICAgICAgdmFyIHJpZ2h0ID0gcmlnaHRCb3R0b21CbGFja1swXTsKCSAgICAgICAgLy8gU2FuaXR5IGNoZWNrIQoJICAgICAgICBpZiAobGVmdCA+PSByaWdodCB8fCB0b3AgPj0gYm90dG9tKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJvdHRvbSAtIHRvcCAhPT0gcmlnaHQgLSBsZWZ0KSB7CgkgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UsIHdoZXJlIGJvdHRvbS1yaWdodCBtb2R1bGUgd2Fzbid0IGJsYWNrIHNvIHdlIGZvdW5kIHNvbWV0aGluZyBlbHNlIGluIHRoZSBsYXN0IHJvdwoJICAgICAgICAgICAgLy8gQXNzdW1lIGl0J3MgYSBzcXVhcmUsIHNvIHVzZSBoZWlnaHQgYXMgdGhlIHdpZHRoCgkgICAgICAgICAgICByaWdodCA9IGxlZnQgKyAoYm90dG9tIC0gdG9wKTsKCSAgICAgICAgICAgIGlmIChyaWdodCA+PSBpbWFnZS5nZXRXaWR0aCgpKSB7CgkgICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhhdCB3b3VsZCBub3QgbWFrZSBzZW5zZSAtLSBvZmYgaW1hZ2UKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1hdHJpeFdpZHRoID0gTWF0aC5yb3VuZCgocmlnaHQgLSBsZWZ0ICsgMSkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIG1hdHJpeEhlaWdodCA9IE1hdGgucm91bmQoKGJvdHRvbSAtIHRvcCArIDEpIC8gbW9kdWxlU2l6ZSk7CgkgICAgICAgIGlmIChtYXRyaXhXaWR0aCA8PSAwIHx8IG1hdHJpeEhlaWdodCA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG1hdHJpeEhlaWdodCAhPT0gbWF0cml4V2lkdGgpIHsKCSAgICAgICAgICAgIC8vIE9ubHkgcG9zc2libHkgZGVjb2RlIHNxdWFyZSByZWdpb25zCgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gUHVzaCBpbiB0aGUgImJvcmRlciIgYnkgaGFsZiB0aGUgbW9kdWxlIHdpZHRoIHNvIHRoYXQgd2Ugc3RhcnQKCSAgICAgICAgLy8gc2FtcGxpbmcgaW4gdGhlIG1pZGRsZSBvZiB0aGUgbW9kdWxlLiBKdXN0IGluIGNhc2UgdGhlIGltYWdlIGlzIGEKCSAgICAgICAgLy8gbGl0dGxlIG9mZiwgdGhpcyB3aWxsIGhlbHAgcmVjb3Zlci4KCSAgICAgICAgdmFyIG51ZGdlID0gLyooaW50KSAqLyBNYXRoLmZsb29yKG1vZHVsZVNpemUgLyAyLjApOwoJICAgICAgICB0b3AgKz0gbnVkZ2U7CgkgICAgICAgIGxlZnQgKz0gbnVkZ2U7CgkgICAgICAgIC8vIEJ1dCBjYXJlZnVsIHRoYXQgdGhpcyBkb2VzIG5vdCBzYW1wbGUgb2ZmIHRoZSBlZGdlCgkgICAgICAgIC8vICJyaWdodCIgaXMgdGhlIGZhcnRoZXN0LXJpZ2h0IHZhbGlkIHBpeGVsIGxvY2F0aW9uIC0tIHJpZ2h0KzEgaXMgbm90IG5lY2Vzc2FyaWx5CgkgICAgICAgIC8vIFRoaXMgaXMgcG9zaXRpdmUgYnkgaG93IG11Y2ggdGhlIGlubmVyIHggbG9vcCBiZWxvdyB3b3VsZCBiZSB0b28gbGFyZ2UKCSAgICAgICAgdmFyIG51ZGdlZFRvb0ZhclJpZ2h0ID0gbGVmdCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4V2lkdGggLSAxKSAqIG1vZHVsZVNpemUpIC0gcmlnaHQ7CgkgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IDApIHsKCSAgICAgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsZWZ0IC09IG51ZGdlZFRvb0ZhclJpZ2h0OwoJICAgICAgICB9CgkgICAgICAgIC8vIFNlZSBsb2dpYyBhYm92ZQoJICAgICAgICB2YXIgbnVkZ2VkVG9vRmFyRG93biA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4SGVpZ2h0IC0gMSkgKiBtb2R1bGVTaXplKSAtIGJvdHRvbTsKCSAgICAgICAgaWYgKG51ZGdlZFRvb0ZhckRvd24gPiAwKSB7CgkgICAgICAgICAgICBpZiAobnVkZ2VkVG9vRmFyRG93biA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3AgLT0gbnVkZ2VkVG9vRmFyRG93bjsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cganVzdCByZWFkIG9mZiB0aGUgYml0cwoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMS5kZWZhdWx0KG1hdHJpeFdpZHRoLCBtYXRyaXhIZWlnaHQpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IG1hdHJpeEhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgaU9mZnNldCA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcih5ICogbW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1hdHJpeFdpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGxlZnQgKyAvKihpbnQpICovIE1hdGguZmxvb3IoeCAqIG1vZHVsZVNpemUpLCBpT2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIubW9kdWxlU2l6ZSA9IGZ1bmN0aW9uIChsZWZ0VG9wQmxhY2ssIGltYWdlKSB7CgkgICAgICAgIHZhciBoZWlnaHQgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHggPSBsZWZ0VG9wQmxhY2tbMF07CgkgICAgICAgIHZhciB5ID0gbGVmdFRvcEJsYWNrWzFdOwoJICAgICAgICB2YXIgaW5CbGFjayA9IHRydWU7CgkgICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IDA7CgkgICAgICAgIHdoaWxlICh4IDwgd2lkdGggJiYgeSA8IGhlaWdodCkgewoJICAgICAgICAgICAgaWYgKGluQmxhY2sgIT09IGltYWdlLmdldCh4LCB5KSkgewoJICAgICAgICAgICAgICAgIGlmICgrK3RyYW5zaXRpb25zID09PSA1KSB7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBpbkJsYWNrID0gIWluQmxhY2s7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB4Kys7CgkgICAgICAgICAgICB5Kys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHggPT09IHdpZHRoIHx8IHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiAoeCAtIGxlZnRUb3BCbGFja1swXSkgLyA3LjA7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTID0gbmV3IEFycmF5KCk7CgkgICAgcmV0dXJuIFFSQ29kZVJlYWRlcjsKCX0oKSk7Cgl2YXIgX2RlZmF1bHQgPSBRUkNvZGVSZWFkZXIkMS5kZWZhdWx0ID0gUVJDb2RlUmVhZGVyOwoKCXZhciB0b0dyYXlzY2FsZUJ1ZmZlciA9IGZ1bmN0aW9uIHRvR3JheXNjYWxlQnVmZmVyKGltYWdlQnVmZmVyLCB3aWR0aCwgaGVpZ2h0KSB7CgkgIHZhciBncmF5c2NhbGVCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkod2lkdGggKiBoZWlnaHQpOwoKCSAgZm9yICh2YXIgaSA9IDAsIGogPSAwLCBsZW5ndGhfMSA9IGltYWdlQnVmZmVyLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpICs9IDQsIGorKykgewoJICAgIHZhciBncmF5ID0gdm9pZCAwOwoJICAgIHZhciBhbHBoYSA9IGltYWdlQnVmZmVyW2kgKyAzXTsgLy8gVGhlIGNvbG9yIG9mIGZ1bGx5LXRyYW5zcGFyZW50IHBpeGVscyBpcyBpcnJlbGV2YW50LiBUaGV5IGFyZSBvZnRlbiwgdGVjaG5pY2FsbHksIGZ1bGx5LXRyYW5zcGFyZW50CgkgICAgLy8gYmxhY2sgKDAgYWxwaGEsIGFuZCB0aGVuIDAgUkdCKS4gVGhleSBhcmUgb2Z0ZW4gdXNlZCwgb2YgY291cnNlIGFzIHRoZSAid2hpdGUiIGFyZWEgaW4gYQoJICAgIC8vIGJhcmNvZGUgaW1hZ2UuIEZvcmNlIGFueSBzdWNoIHBpeGVsIHRvIGJlIHdoaXRlOgoKCSAgICBpZiAoYWxwaGEgPT09IDApIHsKCSAgICAgIGdyYXkgPSAweEZGOwoJICAgIH0gZWxzZSB7CgkgICAgICB2YXIgcGl4ZWxSID0gaW1hZ2VCdWZmZXJbaV07CgkgICAgICB2YXIgcGl4ZWxHID0gaW1hZ2VCdWZmZXJbaSArIDFdOwoJICAgICAgdmFyIHBpeGVsQiA9IGltYWdlQnVmZmVyW2kgKyAyXTsgLy8gLjI5OVIgKyAwLjU4N0cgKyAwLjExNEIgKFlVVi9ZSVEgZm9yIFBBTCBhbmQgTlRTQyksCgkgICAgICAvLyAoMzA2KlIpID4+IDEwIGlzIGFwcHJveGltYXRlbHkgZXF1YWwgdG8gUiowLjI5OSwgYW5kIHNvIG9uLgoJICAgICAgLy8gMHgyMDAgPj4gMTAgaXMgMC41LCBpdCBpbXBsZW1lbnRzIHJvdW5kaW5nLgoKCSAgICAgIGdyYXkgPSAzMDYgKiBwaXhlbFIgKyA2MDEgKiBwaXhlbEcgKyAxMTcgKiBwaXhlbEIgKyAweDIwMCA+PiAxMDsKCSAgICB9CgoJICAgIGdyYXlzY2FsZUJ1ZmZlcltqXSA9IGdyYXk7CgkgIH0KCgkgIHJldHVybiBncmF5c2NhbGVCdWZmZXI7Cgl9OwoKCXZhciByZWFkZXIgPSBuZXcgX2RlZmF1bHQoKTsKCXNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7CgkgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCgkgIHRyeSB7CgkgICAgdmFyIGx1bWluYW5jZXMgPSB0b0dyYXlzY2FsZUJ1ZmZlcihlLmRhdGEuZGF0YSwgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgbHVtaW5hbmNlU291cmNlID0gbmV3IF9kZWZhdWx0JDEobHVtaW5hbmNlcywgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgaHlicmlkQmluYXJpemVyID0gbmV3IF9kZWZhdWx0JDIobHVtaW5hbmNlU291cmNlKTsKCSAgICB2YXIgYmluYXJ5Qml0bWFwID0gbmV3IF9kZWZhdWx0JDMoaHlicmlkQmluYXJpemVyKTsKCSAgICB2YXIgZGVjb2RlZCA9IHJlYWRlci5kZWNvZGUoYmluYXJ5Qml0bWFwKTsKCSAgICBwb3N0TWVzc2FnZShkZWNvZGVkKTsKCSAgfSBjYXRjaCAoZXJyKSB7CgkgICAgcG9zdE1lc3NhZ2UobnVsbCk7CgkgIH0KCX0pOwoKfSkoKTsKCg==",null,!1),P=["constraints","onError","onLoad","onScan","resolution","qrArea"];function O(e,g){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);g&&(I=I.filter((function(g){return Object.getOwnPropertyDescriptor(e,g).enumerable}))),t.push.apply(t,I)}return t}function q(e){for(var g=1;g<arguments.length;g++){var t=null!=arguments[g]?arguments[g]:{};g%2?O(Object(t),!0).forEach((function(g){n(e,g,t[g])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(g){Object.defineProperty(e,g,Object.getOwnPropertyDescriptor(t,g))}))}return e}var $=function(){return new j},_=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().forEach((function(g){e.removeTrack(g),g.stop()})),e.getAudioTracks().forEach((function(g){e.removeTrack(g),g.stop()}))):e.stop())},ee=function(e){var g=e.constraints,n=e.onError,l=e.onLoad,C=e.onScan,o=e.resolution,a=e.qrArea,r=A(e,P),c=t.useRef(null),d=t.useRef(null),s=t.useRef(document.createElement("canvas")),u=t.useRef(null),m=t.useRef(),b=i(t.useState(null),2),Z=b[0],p=b[1],h=t.useRef(!1),G=t.useRef();t.useEffect((function(){G.current=$();var e=G.current;return e.onmessage=function(e){C&&C(e.data?q(q({},e.data),{},{canvas:s.current}):null),h.current=!1},function(){e.terminate()}}),[C]);var y=JSON.stringify(a),B=t.useCallback((function(){var e=JSON.parse(y),g=G.current,t=d.current&&d.current.readyState===d.current.HAVE_ENOUGH_DATA;if(!h.current&&t){h.current=!0;var I,n=d.current.videoWidth,l=d.current.videoHeight,C=n>l?n:l,a=Math.floor(o/C*100)/100;l=Math.floor(a*l),n=Math.floor(a*n),s.current.width=n,s.current.height=l,u.current=s.current.getContext("2d"),u.current.drawImage(d.current,0,0,n,l),I=e&&2===e.length&&e[0]>0&&e[1]>0?u.current.getImageData(Math.floor((n-e[0])/2),Math.floor((l-e[1])/2),e[0],e[1]):u.current.getImageData(0,0,n,l),g.postMessage(I)}m.current=requestAnimationFrame(B)}),[o,y]),S=JSON.stringify(g);return t.useEffect((function(){var e=JSON.parse(S),g=!0;return navigator.mediaDevices.getUserMedia(e).then((function(e){if(g){c.current=e;try{d.current&&(d.current.srcObject=e,d.current.setAttribute("playsinline",!0))}catch(t){p(window.URL.createObjectURL(e))}l&&l(),m.current=requestAnimationFrame(B)}else _(e)})).catch((function(e){return g?n(e):null})),function(){cancelAnimationFrame(m.current),g=!1,_(c.current),Z&&window.URL.revokeObjectURL(Z)}}),[B,S,n,l,Z]),t.createElement("video",I({autoPlay:!0,playsInline:!0,src:Z,ref:d},r))};return ee.propTypes={constraints:U.object,onError:U.func.isRequired,onLoad:U.func,onScan:U.func.isRequired,resolution:U.number,qrArea:U.array},ee.defaultProps={constraints:{audio:!1,video:!0},resolution:640,qrArea:[]},ee}(t(5043))},9369:(e,g,t)=>{"use strict";t.d(g,{C:()=>r,E:()=>m,T:()=>c,c:()=>s,h:()=>A,w:()=>i});var I=t(5043),n=t(3803),l=t(1722),C=t(6598),o=t(9436),a=I.createContext("undefined"!==typeof HTMLElement?(0,n.A)({key:"css"}):null),r=a.Provider,i=function(e){return(0,I.forwardRef)((function(g,t){var n=(0,I.useContext)(a);return e(g,n,t)}))},c=I.createContext({});var A={}.hasOwnProperty,d="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",s=function(e,g){var t={};for(var I in g)A.call(g,I)&&(t[I]=g[I]);return t[d]=e,t},u=function(e){var g=e.cache,t=e.serialized,I=e.isStringTag;return(0,l.SF)(g,t,I),(0,o.s)((function(){return(0,l.sk)(g,t,I)})),null},m=i((function(e,g,t){var n=e.css;"string"===typeof n&&void 0!==g.registered[n]&&(n=g.registered[n]);var o=e[d],a=[n],r="";"string"===typeof e.className?r=(0,l.Rk)(g.registered,a,e.className):null!=e.className&&(r=e.className+" ");var i=(0,C.J)(a,void 0,I.useContext(c));r+=g.key+"-"+i.name;var s={};for(var m in e)A.call(e,m)&&"css"!==m&&m!==d&&(s[m]=e[m]);return s.className=r,t&&(s.ref=t),I.createElement(I.Fragment,null,I.createElement(u,{cache:g,serialized:i,isStringTag:"string"===typeof o}),I.createElement(o,s))}))},9386:(e,g,t)=>{"use strict";t.d(g,{A:()=>n});const I=e=>e,n=(()=>{let e=I;return{configure(g){e=g},generate:g=>e(g),reset(){e=I}}})()},9436:(e,g,t)=>{"use strict";var I;t.d(g,{i:()=>o,s:()=>C});var n=t(5043),l=!!(I||(I=t.t(n,2))).useInsertionEffect&&(I||(I=t.t(n,2))).useInsertionEffect,C=l||function(e){return e()},o=l||n.useLayoutEffect},9482:(e,g,t)=>{"use strict";t.r(g),t.d(g,{default:()=>I.A,isPlainObject:()=>I.Q});var I=t(9172)},9662:(e,g,t)=>{"use strict";t.d(g,{A:()=>p});var I=t(8168),n=t(5043),l=t(8587),C=t(8387),o=t(8610),a=t(6803),r=t(8206),i=t(4535),c=t(2532),A=t(2372);function d(e){return(0,A.Ay)("MuiSvgIcon",e)}(0,c.A)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var s=t(579);const u=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],m=(0,i.Ay)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,"inherit"!==t.color&&g[`color${(0,a.A)(t.color)}`],g[`fontSize${(0,a.A)(t.fontSize)}`]]}})((e=>{let{theme:g,ownerState:t}=e;var I,n,l,C,o,a,r,i,c,A,d,s,u;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(I=g.transitions)||null==(n=I.create)?void 0:n.call(I,"fill",{duration:null==(l=g.transitions)||null==(l=l.duration)?void 0:l.shorter}),fontSize:{inherit:"inherit",small:(null==(C=g.typography)||null==(o=C.pxToRem)?void 0:o.call(C,20))||"1.25rem",medium:(null==(a=g.typography)||null==(r=a.pxToRem)?void 0:r.call(a,24))||"1.5rem",large:(null==(i=g.typography)||null==(c=i.pxToRem)?void 0:c.call(i,35))||"2.1875rem"}[t.fontSize],color:null!=(A=null==(d=(g.vars||g).palette)||null==(d=d[t.color])?void 0:d.main)?A:{action:null==(s=(g.vars||g).palette)||null==(s=s.action)?void 0:s.active,disabled:null==(u=(g.vars||g).palette)||null==(u=u.action)?void 0:u.disabled,inherit:void 0}[t.color]}})),b=n.forwardRef((function(e,g){const t=(0,r.b)({props:e,name:"MuiSvgIcon"}),{children:i,className:c,color:A="inherit",component:b="svg",fontSize:Z="medium",htmlColor:p,inheritViewBox:h=!1,titleAccess:G,viewBox:y="0 0 24 24"}=t,B=(0,l.A)(t,u),S=n.isValidElement(i)&&"svg"===i.type,W=(0,I.A)({},t,{color:A,component:b,fontSize:Z,instanceFontSize:e.fontSize,inheritViewBox:h,viewBox:y,hasSvgAsChild:S}),V={};h||(V.viewBox=y);const v=(e=>{const{color:g,fontSize:t,classes:I}=e,n={root:["root","inherit"!==g&&`color${(0,a.A)(g)}`,`fontSize${(0,a.A)(t)}`]};return(0,o.A)(n,d,I)})(W);return(0,s.jsxs)(m,(0,I.A)({as:b,className:(0,C.A)(v.root,c),focusable:"false",color:p,"aria-hidden":!G||void 0,role:G?"img":void 0,ref:g},V,B,S&&i.props,{ownerState:W,children:[S?i.props.children:i,G?(0,s.jsx)("title",{children:G}):null]}))}));b.muiName="SvgIcon";const Z=b;function p(e,g){function t(t,n){return(0,s.jsx)(Z,(0,I.A)({"data-testid":`${g}Icon`,ref:n},t,{children:e}))}return t.muiName=Z.muiName,n.memo(n.forwardRef(t))}},9703:(e,g,t)=>{"use strict";function I(e,g){const t=this;if(t.vars&&"function"===typeof t.getColorSchemeSelector){const I=t.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)");return{[I]:g}}return t.palette.mode===e?g:{}}t.d(g,{A:()=>I})},9751:(e,g,t)=>{"use strict";t.d(g,{EU:()=>C,NI:()=>l,kW:()=>a,vf:()=>o,zu:()=>I});const I={xs:0,sm:600,md:900,lg:1200,xl:1536},n={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${I[e]}px)`};function l(e,g,t){const l=e.theme||{};if(Array.isArray(g)){const e=l.breakpoints||n;return g.reduce(((I,n,l)=>(I[e.up(e.keys[l])]=t(g[l]),I)),{})}if("object"===typeof g){const e=l.breakpoints||n;return Object.keys(g).reduce(((n,l)=>{if(-1!==Object.keys(e.values||I).indexOf(l)){n[e.up(l)]=t(g[l],l)}else{const e=l;n[e]=g[e]}return n}),{})}return t(g)}function C(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var g;return(null==(g=e.keys)?void 0:g.reduce(((g,t)=>(g[e.up(t)]={},g)),{}))||{}}function o(e,g){return e.reduce(((e,g)=>{const t=e[g];return(!t||0===Object.keys(t).length)&&delete e[g],e}),g)}function a(e){let{values:g,breakpoints:t,base:I}=e;const n=I||function(e,g){if("object"!==typeof e)return{};const t={},I=Object.keys(g);return Array.isArray(e)?I.forEach(((g,I)=>{I<e.length&&(t[g]=!0)})):I.forEach((g=>{null!=e[g]&&(t[g]=!0)})),t}(g,t),l=Object.keys(n);if(0===l.length)return g;let C;return l.reduce(((e,t,I)=>(Array.isArray(g)?(e[t]=null!=g[I]?g[I]:g[C],C=I):"object"===typeof g?(e[t]=null!=g[t]?g[t]:g[C],C=t):e[t]=g,e)),{})}}},g={};function t(I){var n=g[I];if(void 0!==n)return n.exports;var l=g[I]={exports:{}};return e[I].call(l.exports,l,l.exports,t),l.exports}t.m=e,t.n=e=>{var g=e&&e.__esModule?()=>e.default:()=>e;return t.d(g,{a:g}),g},(()=>{var e,g=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;t.t=function(I,n){if(1&n&&(I=this(I)),8&n)return I;if("object"===typeof I&&I){if(4&n&&I.__esModule)return I;if(16&n&&"function"===typeof I.then)return I}var l=Object.create(null);t.r(l);var C={};e=e||[null,g({}),g([]),g(g)];for(var o=2&n&&I;"object"==typeof o&&!~e.indexOf(o);o=g(o))Object.getOwnPropertyNames(o).forEach((e=>C[e]=()=>I[e]));return C.default=()=>I,t.d(l,C),l}})(),t.d=(e,g)=>{for(var I in g)t.o(g,I)&&!t.o(e,I)&&Object.defineProperty(e,I,{enumerable:!0,get:g[I]})},t.f={},t.e=e=>Promise.all(Object.keys(t.f).reduce(((g,I)=>(t.f[I](e,g),g)),[])),t.u=e=>"static/js/"+e+".c400ed05.chunk.js",t.miniCssF=e=>{},t.o=(e,g)=>Object.prototype.hasOwnProperty.call(e,g),(()=>{var e={},g="gestion-absences:";t.l=(I,n,l,C)=>{if(e[I])e[I].push(n);else{var o,a;if(void 0!==l)for(var r=document.getElementsByTagName("script"),i=0;i<r.length;i++){var c=r[i];if(c.getAttribute("src")==I||c.getAttribute("data-webpack")==g+l){o=c;break}}o||(a=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,t.nc&&o.setAttribute("nonce",t.nc),o.setAttribute("data-webpack",g+l),o.src=I),e[I]=[n];var A=(g,t)=>{o.onerror=o.onload=null,clearTimeout(d);var n=e[I];if(delete e[I],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach((e=>e(t))),g)return g(t)},d=setTimeout(A.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=A.bind(null,o.onerror),o.onload=A.bind(null,o.onload),a&&document.head.appendChild(o)}}})(),t.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.p="/",(()=>{var e={792:0};t.f.j=(g,I)=>{var n=t.o(e,g)?e[g]:void 0;if(0!==n)if(n)I.push(n[2]);else{var l=new Promise(((t,I)=>n=e[g]=[t,I]));I.push(n[2]=l);var C=t.p+t.u(g),o=new Error;t.l(C,(I=>{if(t.o(e,g)&&(0!==(n=e[g])&&(e[g]=void 0),n)){var l=I&&("load"===I.type?"missing":I.type),C=I&&I.target&&I.target.src;o.message="Loading chunk "+g+" failed.\n("+l+": "+C+")",o.name="ChunkLoadError",o.type=l,o.request=C,n[1](o)}}),"chunk-"+g,g)}};var g=(g,I)=>{var n,l,C=I[0],o=I[1],a=I[2],r=0;if(C.some((g=>0!==e[g]))){for(n in o)t.o(o,n)&&(t.m[n]=o[n]);if(a)a(t)}for(g&&g(I);r<C.length;r++)l=C[r],t.o(e,l)&&e[l]&&e[l][0](),e[l]=0},I=self.webpackChunkgestion_absences=self.webpackChunkgestion_absences||[];I.forEach(g.bind(null,0)),I.push=g.bind(null,I.push.bind(I))})(),(()=>{"use strict";var e={};t.r(e),t.d(e,{hasBrowserEnv:()=>Wd,hasStandardBrowserEnv:()=>vd,hasStandardBrowserWebWorkerEnv:()=>Rd,navigator:()=>Vd,origin:()=>fd});var g,I,n=t(5043),l=t.t(n,2),C=t(4391),o=t(7950),a=t.t(o,2);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var I in t)Object.prototype.hasOwnProperty.call(t,I)&&(e[I]=t[I])}return e},r.apply(this,arguments)}(I=g||(g={})).Pop="POP",I.Push="PUSH",I.Replace="REPLACE";const i="popstate";function c(e,g){if(!1===e||null===e||"undefined"===typeof e)throw new Error(g)}function A(e,g){if(!e){"undefined"!==typeof console&&console.warn(g);try{throw new Error(g)}catch(t){}}}function d(e,g){return{usr:e.state,key:e.key,idx:g}}function s(e,g,t,I){return void 0===t&&(t=null),r({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof g?m(g):g,{state:t,key:g&&g.key||I||Math.random().toString(36).substr(2,8)})}function u(e){let{pathname:g="/",search:t="",hash:I=""}=e;return t&&"?"!==t&&(g+="?"===t.charAt(0)?t:"?"+t),I&&"#"!==I&&(g+="#"===I.charAt(0)?I:"#"+I),g}function m(e){let g={};if(e){let t=e.indexOf("#");t>=0&&(g.hash=e.substr(t),e=e.substr(0,t));let I=e.indexOf("?");I>=0&&(g.search=e.substr(I),e=e.substr(0,I)),e&&(g.pathname=e)}return g}function b(e,t,I,n){void 0===n&&(n={});let{window:l=document.defaultView,v5Compat:C=!1}=n,o=l.history,a=g.Pop,A=null,m=b();function b(){return(o.state||{idx:null}).idx}function Z(){a=g.Pop;let e=b(),t=null==e?null:e-m;m=e,A&&A({action:a,location:h.location,delta:t})}function p(e){let g="null"!==l.location.origin?l.location.origin:l.location.href,t="string"===typeof e?e:u(e);return t=t.replace(/ $/,"%20"),c(g,"No window.location.(origin|href) available to create URL for href: "+t),new URL(t,g)}null==m&&(m=0,o.replaceState(r({},o.state,{idx:m}),""));let h={get action(){return a},get location(){return e(l,o)},listen(e){if(A)throw new Error("A history only accepts one active listener");return l.addEventListener(i,Z),A=e,()=>{l.removeEventListener(i,Z),A=null}},createHref:e=>t(l,e),createURL:p,encodeLocation(e){let g=p(e);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:function(e,t){a=g.Push;let n=s(h.location,e,t);I&&I(n,e),m=b()+1;let r=d(n,m),i=h.createHref(n);try{o.pushState(r,"",i)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;l.location.assign(i)}C&&A&&A({action:a,location:h.location,delta:1})},replace:function(e,t){a=g.Replace;let n=s(h.location,e,t);I&&I(n,e),m=b();let l=d(n,m),r=h.createHref(n);o.replaceState(l,"",r),C&&A&&A({action:a,location:h.location,delta:0})},go:e=>o.go(e)};return h}var Z,p;(p=Z||(Z={})).data="data",p.deferred="deferred",p.redirect="redirect",p.error="error";new Set(["lazy","caseSensitive","path","id","index","children"]);function h(e,g,t){return void 0===t&&(t="/"),G(e,g,t,!1)}function G(e,g,t,I){let n=H(("string"===typeof g?m(g):g).pathname||"/",t);if(null==n)return null;let l=y(e);!function(e){e.sort(((e,g)=>e.score!==g.score?g.score-e.score:function(e,g){let t=e.length===g.length&&e.slice(0,-1).every(((e,t)=>e===g[t]));return t?e[e.length-1]-g[g.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),g.routesMeta.map((e=>e.childrenIndex)))))}(l);let C=null;for(let o=0;null==C&&o<l.length;++o){let e=w(n);C=J(l[o],e,I)}return C}function y(e,g,t,I){void 0===g&&(g=[]),void 0===t&&(t=[]),void 0===I&&(I="");let n=(e,n,l)=>{let C={relativePath:void 0===l?e.path||"":l,caseSensitive:!0===e.caseSensitive,childrenIndex:n,route:e};C.relativePath.startsWith("/")&&(c(C.relativePath.startsWith(I),'Absolute route path "'+C.relativePath+'" nested under path "'+I+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),C.relativePath=C.relativePath.slice(I.length));let o=M([I,C.relativePath]),a=t.concat(C);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),y(e.children,g,a,o)),(null!=e.path||e.index)&&g.push({path:o,score:k(o,e.index),routesMeta:a})};return e.forEach(((e,g)=>{var t;if(""!==e.path&&null!=(t=e.path)&&t.includes("?"))for(let I of B(e.path))n(e,g,I);else n(e,g)})),g}function B(e){let g=e.split("/");if(0===g.length)return[];let[t,...I]=g,n=t.endsWith("?"),l=t.replace(/\?$/,"");if(0===I.length)return n?[l,""]:[l];let C=B(I.join("/")),o=[];return o.push(...C.map((e=>""===e?l:[l,e].join("/")))),n&&o.push(...C),o.map((g=>e.startsWith("/")&&""===g?"/":g))}const S=/^:[\w-]+$/,W=3,V=2,v=1,R=10,f=-2,X=e=>"*"===e;function k(e,g){let t=e.split("/"),I=t.length;return t.some(X)&&(I+=f),g&&(I+=V),t.filter((e=>!X(e))).reduce(((e,g)=>e+(S.test(g)?W:""===g?v:R)),I)}function J(e,g,t){void 0===t&&(t=!1);let{routesMeta:I}=e,n={},l="/",C=[];for(let o=0;o<I.length;++o){let e=I[o],a=o===I.length-1,r="/"===l?g:g.slice(l.length)||"/",i=Y({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},r),c=e.route;if(!i&&a&&t&&!I[I.length-1].route.index&&(i=Y({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},r)),!i)return null;Object.assign(n,i.params),C.push({params:n,pathname:M([l,i.pathname]),pathnameBase:z(M([l,i.pathnameBase])),route:c}),"/"!==i.pathnameBase&&(l=M([l,i.pathnameBase]))}return C}function Y(e,g){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[t,I]=function(e,g,t){void 0===g&&(g=!1);void 0===t&&(t=!0);A("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let I=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,g,t)=>(I.push({paramName:g,isOptional:null!=t}),t?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(I.push({paramName:"*"}),n+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?n+="\\/*$":""!==e&&"/"!==e&&(n+="(?:(?=\\/|$))");let l=new RegExp(n,g?void 0:"i");return[l,I]}(e.path,e.caseSensitive,e.end),n=g.match(t);if(!n)return null;let l=n[0],C=l.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:I.reduce(((e,g,t)=>{let{paramName:I,isOptional:n}=g;if("*"===I){let e=o[t]||"";C=l.slice(0,l.length-e.length).replace(/(.)\/+$/,"$1")}const a=o[t];return e[I]=n&&!a?void 0:(a||"").replace(/%2F/g,"/"),e}),{}),pathname:l,pathnameBase:C,pattern:e}}function w(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(g){return A(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+g+")."),e}}function H(e,g){if("/"===g)return e;if(!e.toLowerCase().startsWith(g.toLowerCase()))return null;let t=g.endsWith("/")?g.length-1:g.length,I=e.charAt(t);return I&&"/"!==I?null:e.slice(t)||"/"}function N(e,g,t,I){return"Cannot include a '"+e+"' character in a manually specified `to."+g+"` field ["+JSON.stringify(I)+"].  Please separate it out to the `to."+t+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function F(e){return e.filter(((e,g)=>0===g||e.route.path&&e.route.path.length>0))}function K(e,g){let t=F(e);return g?t.map(((e,g)=>g===t.length-1?e.pathname:e.pathnameBase)):t.map((e=>e.pathnameBase))}function x(e,g,t,I){let n;void 0===I&&(I=!1),"string"===typeof e?n=m(e):(n=r({},e),c(!n.pathname||!n.pathname.includes("?"),N("?","pathname","search",n)),c(!n.pathname||!n.pathname.includes("#"),N("#","pathname","hash",n)),c(!n.search||!n.search.includes("#"),N("#","search","hash",n)));let l,C=""===e||""===n.pathname,o=C?"/":n.pathname;if(null==o)l=t;else{let e=g.length-1;if(!I&&o.startsWith("..")){let g=o.split("/");for(;".."===g[0];)g.shift(),e-=1;n.pathname=g.join("/")}l=e>=0?g[e]:"/"}let a=function(e,g){void 0===g&&(g="/");let{pathname:t,search:I="",hash:n=""}="string"===typeof e?m(e):e,l=t?t.startsWith("/")?t:function(e,g){let t=g.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?t.length>1&&t.pop():"."!==e&&t.push(e)})),t.length>1?t.join("/"):"/"}(t,g):g;return{pathname:l,search:E(I),hash:D(n)}}(n,l),i=o&&"/"!==o&&o.endsWith("/"),A=(C||"."===o)&&t.endsWith("/");return a.pathname.endsWith("/")||!i&&!A||(a.pathname+="/"),a}const M=e=>e.join("/").replace(/\/\/+/g,"/"),z=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),E=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",D=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function U(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const T=["post","put","patch","delete"],L=(new Set(T),["get",...T]);new Set(L),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var I in t)Object.prototype.hasOwnProperty.call(t,I)&&(e[I]=t[I])}return e},Q.apply(this,arguments)}const j=n.createContext(null);const P=n.createContext(null);const O=n.createContext(null);const q=n.createContext(null);const $=n.createContext({outlet:null,matches:[],isDataRoute:!1});const _=n.createContext(null);function ee(){return null!=n.useContext(q)}function ge(){return ee()||c(!1),n.useContext(q).location}function te(e){n.useContext(O).static||n.useLayoutEffect(e)}function Ie(){let{isDataRoute:e}=n.useContext($);return e?function(){let{router:e}=de(ce.UseNavigateStable),g=ue(Ae.UseNavigateStable),t=n.useRef(!1);return te((()=>{t.current=!0})),n.useCallback((function(I,n){void 0===n&&(n={}),t.current&&("number"===typeof I?e.navigate(I):e.navigate(I,Q({fromRouteId:g},n)))}),[e,g])}():function(){ee()||c(!1);let e=n.useContext(j),{basename:g,future:t,navigator:I}=n.useContext(O),{matches:l}=n.useContext($),{pathname:C}=ge(),o=JSON.stringify(K(l,t.v7_relativeSplatPath)),a=n.useRef(!1);return te((()=>{a.current=!0})),n.useCallback((function(t,n){if(void 0===n&&(n={}),!a.current)return;if("number"===typeof t)return void I.go(t);let l=x(t,JSON.parse(o),C,"path"===n.relative);null==e&&"/"!==g&&(l.pathname="/"===l.pathname?g:M([g,l.pathname])),(n.replace?I.replace:I.push)(l,n.state,n)}),[g,I,o,C,e])}()}function ne(e,g){let{relative:t}=void 0===g?{}:g,{future:I}=n.useContext(O),{matches:l}=n.useContext($),{pathname:C}=ge(),o=JSON.stringify(K(l,I.v7_relativeSplatPath));return n.useMemo((()=>x(e,JSON.parse(o),C,"path"===t)),[e,o,C,t])}function le(e,t,I,l){ee()||c(!1);let{navigator:C,static:o}=n.useContext(O),{matches:a}=n.useContext($),r=a[a.length-1],i=r?r.params:{},A=(r&&r.pathname,r?r.pathnameBase:"/");r&&r.route;let d,s=ge();if(t){var u;let e="string"===typeof t?m(t):t;"/"===A||(null==(u=e.pathname)?void 0:u.startsWith(A))||c(!1),d=e}else d=s;let b=d.pathname||"/",Z=b;if("/"!==A){let e=A.replace(/^\//,"").split("/");Z="/"+b.replace(/^\//,"").split("/").slice(e.length).join("/")}let p=!o&&I&&I.matches&&I.matches.length>0?I.matches:h(e,{pathname:Z});let G=ie(p&&p.map((e=>Object.assign({},e,{params:Object.assign({},i,e.params),pathname:M([A,C.encodeLocation?C.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?A:M([A,C.encodeLocation?C.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,I,l);return t&&G?n.createElement(q.Provider,{value:{location:Q({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:g.Pop}},G):G}function Ce(){let e=function(){var e;let g=n.useContext(_),t=se(Ae.UseRouteError),I=ue(Ae.UseRouteError);if(void 0!==g)return g;return null==(e=t.errors)?void 0:e[I]}(),g=U(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),t=e instanceof Error?e.stack:null,I="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:I};return n.createElement(n.Fragment,null,n.createElement("h2",null,"Unexpected Application Error!"),n.createElement("h3",{style:{fontStyle:"italic"}},g),t?n.createElement("pre",{style:l},t):null,null)}const oe=n.createElement(Ce,null);class ae extends n.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,g){return g.location!==e.location||"idle"!==g.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:g.error,location:g.location,revalidation:e.revalidation||g.revalidation}}componentDidCatch(e,g){console.error("React Router caught the following error during render",e,g)}render(){return void 0!==this.state.error?n.createElement($.Provider,{value:this.props.routeContext},n.createElement(_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function re(e){let{routeContext:g,match:t,children:I}=e,l=n.useContext(j);return l&&l.static&&l.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=t.route.id),n.createElement($.Provider,{value:g},I)}function ie(e,g,t,I){var l;if(void 0===g&&(g=[]),void 0===t&&(t=null),void 0===I&&(I=null),null==e){var C;if(!t)return null;if(t.errors)e=t.matches;else{if(!(null!=(C=I)&&C.v7_partialHydration&&0===g.length&&!t.initialized&&t.matches.length>0))return null;e=t.matches}}let o=e,a=null==(l=t)?void 0:l.errors;if(null!=a){let e=o.findIndex((e=>e.route.id&&void 0!==(null==a?void 0:a[e.route.id])));e>=0||c(!1),o=o.slice(0,Math.min(o.length,e+1))}let r=!1,i=-1;if(t&&I&&I.v7_partialHydration)for(let n=0;n<o.length;n++){let e=o[n];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(i=n),e.route.id){let{loaderData:g,errors:I}=t,n=e.route.loader&&void 0===g[e.route.id]&&(!I||void 0===I[e.route.id]);if(e.route.lazy||n){r=!0,o=i>=0?o.slice(0,i+1):[o[0]];break}}}return o.reduceRight(((e,I,l)=>{let C,c=!1,A=null,d=null;var s;t&&(C=a&&I.route.id?a[I.route.id]:void 0,A=I.route.errorElement||oe,r&&(i<0&&0===l?(s="route-fallback",!1||me[s]||(me[s]=!0),c=!0,d=null):i===l&&(c=!0,d=I.route.hydrateFallbackElement||null)));let u=g.concat(o.slice(0,l+1)),m=()=>{let g;return g=C?A:c?d:I.route.Component?n.createElement(I.route.Component,null):I.route.element?I.route.element:e,n.createElement(re,{match:I,routeContext:{outlet:e,matches:u,isDataRoute:null!=t},children:g})};return t&&(I.route.ErrorBoundary||I.route.errorElement||0===l)?n.createElement(ae,{location:t.location,revalidation:t.revalidation,component:A,error:C,children:m(),routeContext:{outlet:null,matches:u,isDataRoute:!0}}):m()}),null)}var ce=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ce||{}),Ae=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ae||{});function de(e){let g=n.useContext(j);return g||c(!1),g}function se(e){let g=n.useContext(P);return g||c(!1),g}function ue(e){let g=function(){let e=n.useContext($);return e||c(!1),e}(),t=g.matches[g.matches.length-1];return t.route.id||c(!1),t.route.id}const me={};function be(e,g){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!g||g.v7_relativeSplatPath),g&&(g.v7_fetcherPersist,g.v7_normalizeFormMethod,g.v7_partialHydration,g.v7_skipActionErrorRevalidation)}l.startTransition;function Ze(e){c(!1)}function pe(e){let{basename:t="/",children:I=null,location:l,navigationType:C=g.Pop,navigator:o,static:a=!1,future:r}=e;ee()&&c(!1);let i=t.replace(/^\/*/,"/"),A=n.useMemo((()=>({basename:i,navigator:o,static:a,future:Q({v7_relativeSplatPath:!1},r)})),[i,r,o,a]);"string"===typeof l&&(l=m(l));let{pathname:d="/",search:s="",hash:u="",state:b=null,key:Z="default"}=l,p=n.useMemo((()=>{let e=H(d,i);return null==e?null:{location:{pathname:e,search:s,hash:u,state:b,key:Z},navigationType:C}}),[i,d,s,u,b,Z,C]);return null==p?null:n.createElement(O.Provider,{value:A},n.createElement(q.Provider,{children:I,value:p}))}function he(e){let{children:g,location:t}=e;return le(Ge(g),t)}new Promise((()=>{}));n.Component;function Ge(e,g){void 0===g&&(g=[]);let t=[];return n.Children.forEach(e,((e,I)=>{if(!n.isValidElement(e))return;let l=[...g,I];if(e.type===n.Fragment)return void t.push.apply(t,Ge(e.props.children,l));e.type!==Ze&&c(!1),e.props.index&&e.props.children&&c(!1);let C={id:e.props.id||l.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(C.children=Ge(e.props.children,l)),t.push(C)})),t}function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var I in t)Object.prototype.hasOwnProperty.call(t,I)&&(e[I]=t[I])}return e},ye.apply(this,arguments)}function Be(e,g){if(null==e)return{};var t,I,n={},l=Object.keys(e);for(I=0;I<l.length;I++)t=l[I],g.indexOf(t)>=0||(n[t]=e[t]);return n}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Se=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(iG){}new Map;const We=l.startTransition;a.flushSync,l.useId;function Ve(e){let{basename:g,children:t,future:I,window:l}=e,C=n.useRef();var o;null==C.current&&(C.current=(void 0===(o={window:l,v5Compat:!0})&&(o={}),b((function(e,g){let{pathname:t,search:I,hash:n}=e.location;return s("",{pathname:t,search:I,hash:n},g.state&&g.state.usr||null,g.state&&g.state.key||"default")}),(function(e,g){return"string"===typeof g?g:u(g)}),null,o)));let a=C.current,[r,i]=n.useState({action:a.action,location:a.location}),{v7_startTransition:c}=I||{},A=n.useCallback((e=>{c&&We?We((()=>i(e))):i(e)}),[i,c]);return n.useLayoutEffect((()=>a.listen(A)),[a,A]),n.useEffect((()=>be(I)),[I]),n.createElement(pe,{basename:g,children:t,location:r.location,navigationType:r.action,navigator:a,future:I})}const ve="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Re=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fe=n.forwardRef((function(e,g){let t,{onClick:I,relative:l,reloadDocument:C,replace:o,state:a,target:r,to:i,preventScrollReset:A,viewTransition:d}=e,s=Be(e,Se),{basename:m}=n.useContext(O),b=!1;if("string"===typeof i&&Re.test(i)&&(t=i,ve))try{let e=new URL(window.location.href),g=i.startsWith("//")?new URL(e.protocol+i):new URL(i),t=H(g.pathname,m);g.origin===e.origin&&null!=t?i=t+g.search+g.hash:b=!0}catch(iG){}let Z=function(e,g){let{relative:t}=void 0===g?{}:g;ee()||c(!1);let{basename:I,navigator:l}=n.useContext(O),{hash:C,pathname:o,search:a}=ne(e,{relative:t}),r=o;return"/"!==I&&(r="/"===o?I:M([I,o])),l.createHref({pathname:r,search:a,hash:C})}(i,{relative:l}),p=function(e,g){let{target:t,replace:I,state:l,preventScrollReset:C,relative:o,viewTransition:a}=void 0===g?{}:g,r=Ie(),i=ge(),c=ne(e,{relative:o});return n.useCallback((g=>{if(function(e,g){return 0===e.button&&(!g||"_self"===g)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(g,t)){g.preventDefault();let t=void 0!==I?I:u(i)===u(c);r(e,{replace:t,state:l,preventScrollReset:C,relative:o,viewTransition:a})}}),[i,r,c,I,l,t,e,C,o,a])}(i,{replace:o,state:a,target:r,preventScrollReset:A,relative:l,viewTransition:d});return n.createElement("a",ye({},s,{href:t||Z,onClick:b||C?I:function(e){I&&I(e),e.defaultPrevented||p(e)},ref:g,target:r}))}));var Xe,ke,Je,Ye;(ke=Xe||(Xe={})).UseScrollRestoration="useScrollRestoration",ke.UseSubmit="useSubmit",ke.UseSubmitFetcher="useSubmitFetcher",ke.UseFetcher="useFetcher",ke.useViewTransitionState="useViewTransitionState",(Ye=Je||(Je={})).UseFetcher="useFetcher",Ye.UseFetchers="useFetchers",Ye.UseScrollRestoration="useScrollRestoration";var we=t(8168),He=t(8587),Ne=t(3030);function Fe(e){const{theme:g,name:t,props:I}=e;return g&&g.components&&g.components[t]&&g.components[t].defaultProps?(0,Ne.A)(g.components[t].defaultProps,I):I}var Ke=t(8280),xe=t(9369);const Me=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const g=n.useContext(xe.T);return g&&(t=g,0!==Object.keys(t).length)?g:e;var t},ze=(0,Ke.A)();const Ee=function(){return Me(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze)};function De(e){let{props:g,name:t,defaultTheme:I,themeId:n}=e,l=Ee(I);n&&(l=l[n]||l);return Fe({theme:l,name:t,props:g})}var Ue=t(5170),Te=t(3375);function Le(e){let{props:g,name:t}=e;return De({props:g,name:t,defaultTheme:Ue.A,themeId:Te.A})}var Qe=t(579);const je=["localeText"],Pe=n.createContext(null);const Oe=function(e){var g;const{localeText:t}=e,I=(0,He.A)(e,je),{utils:l,localeText:C}=null!=(g=n.useContext(Pe))?g:{utils:void 0,localeText:void 0},o=Le({props:I,name:"MuiLocalizationProvider"}),{children:a,dateAdapter:r,dateFormats:i,dateLibInstance:c,adapterLocale:A,localeText:d}=o,s=n.useMemo((()=>(0,we.A)({},d,C,t)),[d,C,t]),u=n.useMemo((()=>{if(!r)return l||null;const e=new r({locale:A,formats:i,instance:c});if(!e.isMUIAdapter)throw new Error(["MUI: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/getting-started/#installation"].join("\n"));return e}),[r,A,i,c,l]),m=n.useMemo((()=>u?{minDate:u.date("1900-01-01T00:00:00.000"),maxDate:u.date("2099-12-31T00:00:00.000")}:null),[u]),b=n.useMemo((()=>({utils:u,defaultDates:m,localeText:s})),[m,u,s]);return(0,Qe.jsx)(Pe.Provider,{value:b,children:a})};function qe(e){if(null===e||!0===e||!1===e)return NaN;var g=Number(e);return isNaN(g)?g:g<0?Math.ceil(g):Math.floor(g)}function $e(e){return $e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$e(e)}function _e(e,g){if(g.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+g.length+" present")}function eg(e){_e(1,arguments);var g=Object.prototype.toString.call(e);return e instanceof Date||"object"===$e(e)&&"[object Date]"===g?new Date(e.getTime()):"number"===typeof e||"[object Number]"===g?new Date(e):("string"!==typeof e&&"[object String]"!==g||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function gg(e,g){_e(2,arguments);var t=eg(e),I=qe(g);return isNaN(I)?new Date(NaN):I?(t.setDate(t.getDate()+I),t):t}function tg(e,g){_e(2,arguments);var t=eg(e).getTime(),I=qe(g);return new Date(t+I)}function Ig(e,g){_e(2,arguments);var t=eg(e),I=qe(g);if(isNaN(I))return new Date(NaN);if(!I)return t;var n=t.getDate(),l=new Date(t.getTime());return l.setMonth(t.getMonth()+I+1,0),n>=l.getDate()?l:(t.setFullYear(l.getFullYear(),l.getMonth(),n),t)}function ng(e,g){return _e(2,arguments),Ig(e,12*qe(g))}function lg(e,g){_e(2,arguments);var t=eg(e),I=eg(g),n=t.getTime()-I.getTime();return n<0?-1:n>0?1:n}function Cg(e,g){_e(2,arguments);var t=eg(e),I=eg(g),n=lg(t,I),l=Math.abs(function(e,g){_e(2,arguments);var t=eg(e),I=eg(g);return t.getFullYear()-I.getFullYear()}(t,I));t.setFullYear(1584),I.setFullYear(1584);var C=lg(t,I)===-n,o=n*(l-Number(C));return 0===o?0:o}function og(e){_e(1,arguments);var g=eg(e);return g.setHours(23,59,59,999),g}function ag(e){_e(1,arguments);var g=eg(e),t=g.getMonth();return g.setFullYear(g.getFullYear(),t+1,0),g.setHours(23,59,59,999),g}function rg(e,g){_e(2,arguments);var t,I=eg(e),n=eg(g),l=lg(I,n),C=Math.abs(function(e,g){_e(2,arguments);var t=eg(e),I=eg(g);return 12*(t.getFullYear()-I.getFullYear())+(t.getMonth()-I.getMonth())}(I,n));if(C<1)t=0;else{1===I.getMonth()&&I.getDate()>27&&I.setDate(30),I.setMonth(I.getMonth()-l*C);var o=lg(I,n)===-l;(function(e){_e(1,arguments);var g=eg(e);return og(g).getTime()===ag(g).getTime()})(eg(e))&&1===C&&1===lg(e,n)&&(o=!1),t=l*(C-Number(o))}return 0===t?0:t}var ig={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}};function cg(e){return e?ig[e]:ig.trunc}function Ag(e){var g=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return g.setUTCFullYear(e.getFullYear()),e.getTime()-g.getTime()}function dg(e){_e(1,arguments);var g=eg(e);return g.setHours(0,0,0,0),g}function sg(e,g){var t=e.getFullYear()-g.getFullYear()||e.getMonth()-g.getMonth()||e.getDate()-g.getDate()||e.getHours()-g.getHours()||e.getMinutes()-g.getMinutes()||e.getSeconds()-g.getSeconds()||e.getMilliseconds()-g.getMilliseconds();return t<0?-1:t>0?1:t}function ug(e,g){_e(2,arguments);var t=eg(e),I=eg(g),n=sg(t,I),l=Math.abs(function(e,g){_e(2,arguments);var t=dg(e),I=dg(g),n=t.getTime()-Ag(t),l=I.getTime()-Ag(I);return Math.round((n-l)/864e5)}(t,I));t.setDate(t.getDate()-n*l);var C=n*(l-Number(sg(t,I)===-n));return 0===C?0:C}Math.pow(10,8);var mg=6e4,bg=36e5;function Zg(e,g){return _e(2,arguments),eg(e).getTime()-eg(g).getTime()}var pg={};function hg(){return pg}function Gg(e,g){var t,I,n,l,C,o,a,r;_e(1,arguments);var i=hg(),c=qe(null!==(t=null!==(I=null!==(n=null!==(l=null===g||void 0===g?void 0:g.weekStartsOn)&&void 0!==l?l:null===g||void 0===g||null===(C=g.locale)||void 0===C||null===(o=C.options)||void 0===o?void 0:o.weekStartsOn)&&void 0!==n?n:i.weekStartsOn)&&void 0!==I?I:null===(a=i.locale)||void 0===a||null===(r=a.options)||void 0===r?void 0:r.weekStartsOn)&&void 0!==t?t:0);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var A=eg(e),d=A.getDay(),s=6+(d<c?-7:0)-(d-c);return A.setDate(A.getDate()+s),A.setHours(23,59,59,999),A}function yg(e){_e(1,arguments);var g=eg(e),t=g.getFullYear();return g.setFullYear(t+1,0,0),g.setHours(23,59,59,999),g}function Bg(e){if(_e(1,arguments),!function(e){return _e(1,arguments),e instanceof Date||"object"===$e(e)&&"[object Date]"===Object.prototype.toString.call(e)}(e)&&"number"!==typeof e)return!1;var g=eg(e);return!isNaN(Number(g))}function Sg(e,g){return _e(2,arguments),tg(e,-qe(g))}function Wg(e){_e(1,arguments);var g=eg(e),t=g.getUTCDay(),I=(t<1?7:0)+t-1;return g.setUTCDate(g.getUTCDate()-I),g.setUTCHours(0,0,0,0),g}function Vg(e){_e(1,arguments);var g=eg(e),t=g.getUTCFullYear(),I=new Date(0);I.setUTCFullYear(t+1,0,4),I.setUTCHours(0,0,0,0);var n=Wg(I),l=new Date(0);l.setUTCFullYear(t,0,4),l.setUTCHours(0,0,0,0);var C=Wg(l);return g.getTime()>=n.getTime()?t+1:g.getTime()>=C.getTime()?t:t-1}function vg(e){_e(1,arguments);var g=eg(e),t=Wg(g).getTime()-function(e){_e(1,arguments);var g=Vg(e),t=new Date(0);return t.setUTCFullYear(g,0,4),t.setUTCHours(0,0,0,0),Wg(t)}(g).getTime();return Math.round(t/6048e5)+1}function Rg(e,g){var t,I,n,l,C,o,a,r;_e(1,arguments);var i=hg(),c=qe(null!==(t=null!==(I=null!==(n=null!==(l=null===g||void 0===g?void 0:g.weekStartsOn)&&void 0!==l?l:null===g||void 0===g||null===(C=g.locale)||void 0===C||null===(o=C.options)||void 0===o?void 0:o.weekStartsOn)&&void 0!==n?n:i.weekStartsOn)&&void 0!==I?I:null===(a=i.locale)||void 0===a||null===(r=a.options)||void 0===r?void 0:r.weekStartsOn)&&void 0!==t?t:0);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var A=eg(e),d=A.getUTCDay(),s=(d<c?7:0)+d-c;return A.setUTCDate(A.getUTCDate()-s),A.setUTCHours(0,0,0,0),A}function fg(e,g){var t,I,n,l,C,o,a,r;_e(1,arguments);var i=eg(e),c=i.getUTCFullYear(),A=hg(),d=qe(null!==(t=null!==(I=null!==(n=null!==(l=null===g||void 0===g?void 0:g.firstWeekContainsDate)&&void 0!==l?l:null===g||void 0===g||null===(C=g.locale)||void 0===C||null===(o=C.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==n?n:A.firstWeekContainsDate)&&void 0!==I?I:null===(a=A.locale)||void 0===a||null===(r=a.options)||void 0===r?void 0:r.firstWeekContainsDate)&&void 0!==t?t:1);if(!(d>=1&&d<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var s=new Date(0);s.setUTCFullYear(c+1,0,d),s.setUTCHours(0,0,0,0);var u=Rg(s,g),m=new Date(0);m.setUTCFullYear(c,0,d),m.setUTCHours(0,0,0,0);var b=Rg(m,g);return i.getTime()>=u.getTime()?c+1:i.getTime()>=b.getTime()?c:c-1}function Xg(e,g){_e(1,arguments);var t=eg(e),I=Rg(t,g).getTime()-function(e,g){var t,I,n,l,C,o,a,r;_e(1,arguments);var i=hg(),c=qe(null!==(t=null!==(I=null!==(n=null!==(l=null===g||void 0===g?void 0:g.firstWeekContainsDate)&&void 0!==l?l:null===g||void 0===g||null===(C=g.locale)||void 0===C||null===(o=C.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==n?n:i.firstWeekContainsDate)&&void 0!==I?I:null===(a=i.locale)||void 0===a||null===(r=a.options)||void 0===r?void 0:r.firstWeekContainsDate)&&void 0!==t?t:1),A=fg(e,g),d=new Date(0);return d.setUTCFullYear(A,0,c),d.setUTCHours(0,0,0,0),Rg(d,g)}(t,g).getTime();return Math.round(I/6048e5)+1}function kg(e,g){for(var t=e<0?"-":"",I=Math.abs(e).toString();I.length<g;)I="0"+I;return t+I}const Jg={y:function(e,g){var t=e.getUTCFullYear(),I=t>0?t:1-t;return kg("yy"===g?I%100:I,g.length)},M:function(e,g){var t=e.getUTCMonth();return"M"===g?String(t+1):kg(t+1,2)},d:function(e,g){return kg(e.getUTCDate(),g.length)},a:function(e,g){var t=e.getUTCHours()/12>=1?"pm":"am";switch(g){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];default:return"am"===t?"a.m.":"p.m."}},h:function(e,g){return kg(e.getUTCHours()%12||12,g.length)},H:function(e,g){return kg(e.getUTCHours(),g.length)},m:function(e,g){return kg(e.getUTCMinutes(),g.length)},s:function(e,g){return kg(e.getUTCSeconds(),g.length)},S:function(e,g){var t=g.length,I=e.getUTCMilliseconds();return kg(Math.floor(I*Math.pow(10,t-3)),g.length)}};var Yg="midnight",wg="noon",Hg="morning",Ng="afternoon",Fg="evening",Kg="night";function xg(e,g){var t=e>0?"-":"+",I=Math.abs(e),n=Math.floor(I/60),l=I%60;if(0===l)return t+String(n);var C=g||"";return t+String(n)+C+kg(l,2)}function Mg(e,g){return e%60===0?(e>0?"-":"+")+kg(Math.abs(e)/60,2):zg(e,g)}function zg(e,g){var t=g||"",I=e>0?"-":"+",n=Math.abs(e);return I+kg(Math.floor(n/60),2)+t+kg(n%60,2)}const Eg={G:function(e,g,t){var I=e.getUTCFullYear()>0?1:0;switch(g){case"G":case"GG":case"GGG":return t.era(I,{width:"abbreviated"});case"GGGGG":return t.era(I,{width:"narrow"});default:return t.era(I,{width:"wide"})}},y:function(e,g,t){if("yo"===g){var I=e.getUTCFullYear(),n=I>0?I:1-I;return t.ordinalNumber(n,{unit:"year"})}return Jg.y(e,g)},Y:function(e,g,t,I){var n=fg(e,I),l=n>0?n:1-n;return"YY"===g?kg(l%100,2):"Yo"===g?t.ordinalNumber(l,{unit:"year"}):kg(l,g.length)},R:function(e,g){return kg(Vg(e),g.length)},u:function(e,g){return kg(e.getUTCFullYear(),g.length)},Q:function(e,g,t){var I=Math.ceil((e.getUTCMonth()+1)/3);switch(g){case"Q":return String(I);case"QQ":return kg(I,2);case"Qo":return t.ordinalNumber(I,{unit:"quarter"});case"QQQ":return t.quarter(I,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(I,{width:"narrow",context:"formatting"});default:return t.quarter(I,{width:"wide",context:"formatting"})}},q:function(e,g,t){var I=Math.ceil((e.getUTCMonth()+1)/3);switch(g){case"q":return String(I);case"qq":return kg(I,2);case"qo":return t.ordinalNumber(I,{unit:"quarter"});case"qqq":return t.quarter(I,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(I,{width:"narrow",context:"standalone"});default:return t.quarter(I,{width:"wide",context:"standalone"})}},M:function(e,g,t){var I=e.getUTCMonth();switch(g){case"M":case"MM":return Jg.M(e,g);case"Mo":return t.ordinalNumber(I+1,{unit:"month"});case"MMM":return t.month(I,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(I,{width:"narrow",context:"formatting"});default:return t.month(I,{width:"wide",context:"formatting"})}},L:function(e,g,t){var I=e.getUTCMonth();switch(g){case"L":return String(I+1);case"LL":return kg(I+1,2);case"Lo":return t.ordinalNumber(I+1,{unit:"month"});case"LLL":return t.month(I,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(I,{width:"narrow",context:"standalone"});default:return t.month(I,{width:"wide",context:"standalone"})}},w:function(e,g,t,I){var n=Xg(e,I);return"wo"===g?t.ordinalNumber(n,{unit:"week"}):kg(n,g.length)},I:function(e,g,t){var I=vg(e);return"Io"===g?t.ordinalNumber(I,{unit:"week"}):kg(I,g.length)},d:function(e,g,t){return"do"===g?t.ordinalNumber(e.getUTCDate(),{unit:"date"}):Jg.d(e,g)},D:function(e,g,t){var I=function(e){_e(1,arguments);var g=eg(e),t=g.getTime();g.setUTCMonth(0,1),g.setUTCHours(0,0,0,0);var I=t-g.getTime();return Math.floor(I/864e5)+1}(e);return"Do"===g?t.ordinalNumber(I,{unit:"dayOfYear"}):kg(I,g.length)},E:function(e,g,t){var I=e.getUTCDay();switch(g){case"E":case"EE":case"EEE":return t.day(I,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(I,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(I,{width:"short",context:"formatting"});default:return t.day(I,{width:"wide",context:"formatting"})}},e:function(e,g,t,I){var n=e.getUTCDay(),l=(n-I.weekStartsOn+8)%7||7;switch(g){case"e":return String(l);case"ee":return kg(l,2);case"eo":return t.ordinalNumber(l,{unit:"day"});case"eee":return t.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(n,{width:"short",context:"formatting"});default:return t.day(n,{width:"wide",context:"formatting"})}},c:function(e,g,t,I){var n=e.getUTCDay(),l=(n-I.weekStartsOn+8)%7||7;switch(g){case"c":return String(l);case"cc":return kg(l,g.length);case"co":return t.ordinalNumber(l,{unit:"day"});case"ccc":return t.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(n,{width:"narrow",context:"standalone"});case"cccccc":return t.day(n,{width:"short",context:"standalone"});default:return t.day(n,{width:"wide",context:"standalone"})}},i:function(e,g,t){var I=e.getUTCDay(),n=0===I?7:I;switch(g){case"i":return String(n);case"ii":return kg(n,g.length);case"io":return t.ordinalNumber(n,{unit:"day"});case"iii":return t.day(I,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(I,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(I,{width:"short",context:"formatting"});default:return t.day(I,{width:"wide",context:"formatting"})}},a:function(e,g,t){var I=e.getUTCHours()/12>=1?"pm":"am";switch(g){case"a":case"aa":return t.dayPeriod(I,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(I,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(I,{width:"narrow",context:"formatting"});default:return t.dayPeriod(I,{width:"wide",context:"formatting"})}},b:function(e,g,t){var I,n=e.getUTCHours();switch(I=12===n?wg:0===n?Yg:n/12>=1?"pm":"am",g){case"b":case"bb":return t.dayPeriod(I,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(I,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(I,{width:"narrow",context:"formatting"});default:return t.dayPeriod(I,{width:"wide",context:"formatting"})}},B:function(e,g,t){var I,n=e.getUTCHours();switch(I=n>=17?Fg:n>=12?Ng:n>=4?Hg:Kg,g){case"B":case"BB":case"BBB":return t.dayPeriod(I,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(I,{width:"narrow",context:"formatting"});default:return t.dayPeriod(I,{width:"wide",context:"formatting"})}},h:function(e,g,t){if("ho"===g){var I=e.getUTCHours()%12;return 0===I&&(I=12),t.ordinalNumber(I,{unit:"hour"})}return Jg.h(e,g)},H:function(e,g,t){return"Ho"===g?t.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Jg.H(e,g)},K:function(e,g,t){var I=e.getUTCHours()%12;return"Ko"===g?t.ordinalNumber(I,{unit:"hour"}):kg(I,g.length)},k:function(e,g,t){var I=e.getUTCHours();return 0===I&&(I=24),"ko"===g?t.ordinalNumber(I,{unit:"hour"}):kg(I,g.length)},m:function(e,g,t){return"mo"===g?t.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Jg.m(e,g)},s:function(e,g,t){return"so"===g?t.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Jg.s(e,g)},S:function(e,g){return Jg.S(e,g)},X:function(e,g,t,I){var n=(I._originalDate||e).getTimezoneOffset();if(0===n)return"Z";switch(g){case"X":return Mg(n);case"XXXX":case"XX":return zg(n);default:return zg(n,":")}},x:function(e,g,t,I){var n=(I._originalDate||e).getTimezoneOffset();switch(g){case"x":return Mg(n);case"xxxx":case"xx":return zg(n);default:return zg(n,":")}},O:function(e,g,t,I){var n=(I._originalDate||e).getTimezoneOffset();switch(g){case"O":case"OO":case"OOO":return"GMT"+xg(n,":");default:return"GMT"+zg(n,":")}},z:function(e,g,t,I){var n=(I._originalDate||e).getTimezoneOffset();switch(g){case"z":case"zz":case"zzz":return"GMT"+xg(n,":");default:return"GMT"+zg(n,":")}},t:function(e,g,t,I){var n=I._originalDate||e;return kg(Math.floor(n.getTime()/1e3),g.length)},T:function(e,g,t,I){return kg((I._originalDate||e).getTime(),g.length)}};var Dg=function(e,g){switch(e){case"P":return g.date({width:"short"});case"PP":return g.date({width:"medium"});case"PPP":return g.date({width:"long"});default:return g.date({width:"full"})}},Ug=function(e,g){switch(e){case"p":return g.time({width:"short"});case"pp":return g.time({width:"medium"});case"ppp":return g.time({width:"long"});default:return g.time({width:"full"})}};const Tg={p:Ug,P:function(e,g){var t,I=e.match(/(P+)(p+)?/)||[],n=I[1],l=I[2];if(!l)return Dg(e,g);switch(n){case"P":t=g.dateTime({width:"short"});break;case"PP":t=g.dateTime({width:"medium"});break;case"PPP":t=g.dateTime({width:"long"});break;default:t=g.dateTime({width:"full"})}return t.replace("{{date}}",Dg(n,g)).replace("{{time}}",Ug(l,g))}};var Lg=["D","DD"],Qg=["YY","YYYY"];function jg(e){return-1!==Lg.indexOf(e)}function Pg(e){return-1!==Qg.indexOf(e)}function Og(e,g,t){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(g,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(g,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(g,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(g,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var qg={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};const $g=function(e,g,t){var I,n=qg[e];return I="string"===typeof n?n:1===g?n.one:n.other.replace("{{count}}",g.toString()),null!==t&&void 0!==t&&t.addSuffix?t.comparison&&t.comparison>0?"in "+I:I+" ago":I};function _g(e){return function(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=g.width?String(g.width):e.defaultWidth;return e.formats[t]||e.formats[e.defaultWidth]}}var et={date:_g({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:_g({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:_g({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var gt={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function tt(e){return function(g,t){var I;if("formatting"===(null!==t&&void 0!==t&&t.context?String(t.context):"standalone")&&e.formattingValues){var n=e.defaultFormattingWidth||e.defaultWidth,l=null!==t&&void 0!==t&&t.width?String(t.width):n;I=e.formattingValues[l]||e.formattingValues[n]}else{var C=e.defaultWidth,o=null!==t&&void 0!==t&&t.width?String(t.width):e.defaultWidth;I=e.values[o]||e.values[C]}return I[e.argumentCallback?e.argumentCallback(g):g]}}function It(e){return function(g){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},I=t.width,n=I&&e.matchPatterns[I]||e.matchPatterns[e.defaultMatchWidth],l=g.match(n);if(!l)return null;var C,o=l[0],a=I&&e.parsePatterns[I]||e.parsePatterns[e.defaultParseWidth],r=Array.isArray(a)?function(e,g){for(var t=0;t<e.length;t++)if(g(e[t]))return t;return}(a,(function(e){return e.test(o)})):function(e,g){for(var t in e)if(e.hasOwnProperty(t)&&g(e[t]))return t;return}(a,(function(e){return e.test(o)}));return C=e.valueCallback?e.valueCallback(r):r,{value:C=t.valueCallback?t.valueCallback(C):C,rest:g.slice(o.length)}}}function nt(e){return function(g){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},I=g.match(e.matchPattern);if(!I)return null;var n=I[0],l=g.match(e.parsePattern);if(!l)return null;var C=e.valueCallback?e.valueCallback(l[0]):l[0];return{value:C=t.valueCallback?t.valueCallback(C):C,rest:g.slice(n.length)}}}const lt={code:"en-US",formatDistance:$g,formatLong:et,formatRelative:function(e,g,t,I){return gt[e]},localize:{ordinalNumber:function(e,g){var t=Number(e),I=t%100;if(I>20||I<10)switch(I%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},era:tt({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:tt({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:tt({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:tt({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:tt({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:nt({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:It({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:It({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:It({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:It({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:It({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},Ct=lt;var ot=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,at=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,rt=/^'([^]*?)'?$/,it=/''/g,ct=/[a-zA-Z]/;function At(e,g,t){var I,n,l,C,o,a,r,i,c,A,d,s,u,m,b,Z,p,h;_e(2,arguments);var G=String(g),y=hg(),B=null!==(I=null!==(n=null===t||void 0===t?void 0:t.locale)&&void 0!==n?n:y.locale)&&void 0!==I?I:Ct,S=qe(null!==(l=null!==(C=null!==(o=null!==(a=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==a?a:null===t||void 0===t||null===(r=t.locale)||void 0===r||null===(i=r.options)||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==o?o:y.firstWeekContainsDate)&&void 0!==C?C:null===(c=y.locale)||void 0===c||null===(A=c.options)||void 0===A?void 0:A.firstWeekContainsDate)&&void 0!==l?l:1);if(!(S>=1&&S<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var W=qe(null!==(d=null!==(s=null!==(u=null!==(m=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==m?m:null===t||void 0===t||null===(b=t.locale)||void 0===b||null===(Z=b.options)||void 0===Z?void 0:Z.weekStartsOn)&&void 0!==u?u:y.weekStartsOn)&&void 0!==s?s:null===(p=y.locale)||void 0===p||null===(h=p.options)||void 0===h?void 0:h.weekStartsOn)&&void 0!==d?d:0);if(!(W>=0&&W<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!B.localize)throw new RangeError("locale must contain localize property");if(!B.formatLong)throw new RangeError("locale must contain formatLong property");var V=eg(e);if(!Bg(V))throw new RangeError("Invalid time value");var v=Sg(V,Ag(V)),R={firstWeekContainsDate:S,weekStartsOn:W,locale:B,_originalDate:V};return G.match(at).map((function(e){var g=e[0];return"p"===g||"P"===g?(0,Tg[g])(e,B.formatLong):e})).join("").match(ot).map((function(I){if("''"===I)return"'";var n=I[0];if("'"===n)return function(e){var g=e.match(rt);if(!g)return e;return g[1].replace(it,"'")}(I);var l=Eg[n];if(l)return null!==t&&void 0!==t&&t.useAdditionalWeekYearTokens||!Pg(I)||Og(I,g,String(e)),null!==t&&void 0!==t&&t.useAdditionalDayOfYearTokens||!jg(I)||Og(I,g,String(e)),l(v,I,B.localize,R);if(n.match(ct))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");return I})).join("")}function dt(e){_e(1,arguments);var g=eg(e),t=g.getFullYear(),I=g.getMonth(),n=new Date(0);return n.setFullYear(t,I+1,0),n.setHours(0,0,0,0),n.getDate()}function st(e,g){var t,I,n,l,C,o,a,r;_e(1,arguments);var i=hg(),c=qe(null!==(t=null!==(I=null!==(n=null!==(l=null===g||void 0===g?void 0:g.weekStartsOn)&&void 0!==l?l:null===g||void 0===g||null===(C=g.locale)||void 0===C||null===(o=C.options)||void 0===o?void 0:o.weekStartsOn)&&void 0!==n?n:i.weekStartsOn)&&void 0!==I?I:null===(a=i.locale)||void 0===a||null===(r=a.options)||void 0===r?void 0:r.weekStartsOn)&&void 0!==t?t:0);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var A=eg(e),d=A.getDay(),s=(d<c?7:0)+d-c;return A.setDate(A.getDate()-s),A.setHours(0,0,0,0),A}function ut(e,g){var t,I,n,l,C,o,a,r;_e(1,arguments);var i=hg(),c=qe(null!==(t=null!==(I=null!==(n=null!==(l=null===g||void 0===g?void 0:g.firstWeekContainsDate)&&void 0!==l?l:null===g||void 0===g||null===(C=g.locale)||void 0===C||null===(o=C.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==n?n:i.firstWeekContainsDate)&&void 0!==I?I:null===(a=i.locale)||void 0===a||null===(r=a.options)||void 0===r?void 0:r.firstWeekContainsDate)&&void 0!==t?t:1),A=function(e,g){var t,I,n,l,C,o,a,r;_e(1,arguments);var i=eg(e),c=i.getFullYear(),A=hg(),d=qe(null!==(t=null!==(I=null!==(n=null!==(l=null===g||void 0===g?void 0:g.firstWeekContainsDate)&&void 0!==l?l:null===g||void 0===g||null===(C=g.locale)||void 0===C||null===(o=C.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==n?n:A.firstWeekContainsDate)&&void 0!==I?I:null===(a=A.locale)||void 0===a||null===(r=a.options)||void 0===r?void 0:r.firstWeekContainsDate)&&void 0!==t?t:1);if(!(d>=1&&d<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var s=new Date(0);s.setFullYear(c+1,0,d),s.setHours(0,0,0,0);var u=st(s,g),m=new Date(0);m.setFullYear(c,0,d),m.setHours(0,0,0,0);var b=st(m,g);return i.getTime()>=u.getTime()?c+1:i.getTime()>=b.getTime()?c:c-1}(e,g),d=new Date(0);return d.setFullYear(A,0,c),d.setHours(0,0,0,0),st(d,g)}function mt(e,g){_e(2,arguments);var t=eg(e),I=eg(g);return t.getTime()>I.getTime()}function bt(e,g){_e(2,arguments);var t=eg(e),I=eg(g);return t.getTime()<I.getTime()}function Zt(e){_e(1,arguments);var g=eg(e);return g.setMinutes(0,0,0),g}function pt(e,g){(null==g||g>e.length)&&(g=e.length);for(var t=0,I=Array(g);t<g;t++)I[t]=e[t];return I}function ht(e,g){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,g){if(e){if("string"==typeof e)return pt(e,g);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?pt(e,g):void 0}}(e))||g&&e&&"number"==typeof e.length){t&&(e=t);var I=0,n=function(){};return{s:n,n:function(){return I>=e.length?{done:!0}:{done:!1,value:e[I++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,C=!0,o=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return C=e.done,e},e:function(e){o=!0,l=e},f:function(){try{C||null==t.return||t.return()}finally{if(o)throw l}}}}function Gt(e,g){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var t in g)Object.prototype.hasOwnProperty.call(g,t)&&(e[t]=g[t]);return e}function yt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bt(e,g){return Bt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,g){return e.__proto__=g,e},Bt(e,g)}function St(e,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(g&&g.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),g&&Bt(e,g)}function Wt(e){return Wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wt(e)}function Vt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Vt=function(){return!!e})()}function vt(e){var g=Vt();return function(){var t,I=Wt(e);if(g){var n=Wt(this).constructor;t=Reflect.construct(I,arguments,n)}else t=I.apply(this,arguments);return function(e,g){if(g&&("object"==$e(g)||"function"==typeof g))return g;if(void 0!==g)throw new TypeError("Derived constructors may only return object or undefined");return yt(e)}(this,t)}}function Rt(e,g){if(!(e instanceof g))throw new TypeError("Cannot call a class as a function")}function ft(e){var g=function(e,g){if("object"!=$e(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var I=t.call(e,g||"default");if("object"!=$e(I))return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===g?String:Number)(e)}(e,"string");return"symbol"==$e(g)?g:g+""}function Xt(e,g){for(var t=0;t<g.length;t++){var I=g[t];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(e,ft(I.key),I)}}function kt(e,g,t){return g&&Xt(e.prototype,g),t&&Xt(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jt(e,g,t){return(g=ft(g))in e?Object.defineProperty(e,g,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[g]=t,e}var Yt=function(){function e(){Rt(this,e),Jt(this,"priority",void 0),Jt(this,"subPriority",0)}return kt(e,[{key:"validate",value:function(e,g){return!0}}]),e}(),wt=function(e){St(t,e);var g=vt(t);function t(e,I,n,l,C){var o;return Rt(this,t),(o=g.call(this)).value=e,o.validateValue=I,o.setValue=n,o.priority=l,C&&(o.subPriority=C),o}return kt(t,[{key:"validate",value:function(e,g){return this.validateValue(e,this.value,g)}},{key:"set",value:function(e,g,t){return this.setValue(e,g,this.value,t)}}]),t}(Yt),Ht=function(e){St(t,e);var g=vt(t);function t(){var e;Rt(this,t);for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];return Jt(yt(e=g.call.apply(g,[this].concat(n))),"priority",10),Jt(yt(e),"subPriority",-1),e}return kt(t,[{key:"set",value:function(e,g){if(g.timestampIsSet)return e;var t=new Date(0);return t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t}}]),t}(Yt),Nt=function(){function e(){Rt(this,e),Jt(this,"incompatibleTokens",void 0),Jt(this,"priority",void 0),Jt(this,"subPriority",void 0)}return kt(e,[{key:"run",value:function(e,g,t,I){var n=this.parse(e,g,t,I);return n?{setter:new wt(n.value,this.validate,this.set,this.priority,this.subPriority),rest:n.rest}:null}},{key:"validate",value:function(e,g,t){return!0}}]),e}(),Ft=function(e){St(t,e);var g=vt(t);function t(){var e;Rt(this,t);for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];return Jt(yt(e=g.call.apply(g,[this].concat(n))),"priority",140),Jt(yt(e),"incompatibleTokens",["R","u","t","T"]),e}return kt(t,[{key:"parse",value:function(e,g,t){switch(g){case"G":case"GG":case"GGG":return t.era(e,{width:"abbreviated"})||t.era(e,{width:"narrow"});case"GGGGG":return t.era(e,{width:"narrow"});default:return t.era(e,{width:"wide"})||t.era(e,{width:"abbreviated"})||t.era(e,{width:"narrow"})}}},{key:"set",value:function(e,g,t){return g.era=t,e.setUTCFullYear(t,0,1),e.setUTCHours(0,0,0,0),e}}]),t}(Nt),Kt=/^(1[0-2]|0?\d)/,xt=/^(3[0-1]|[0-2]?\d)/,Mt=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,zt=/^(5[0-3]|[0-4]?\d)/,Et=/^(2[0-3]|[0-1]?\d)/,Dt=/^(2[0-4]|[0-1]?\d)/,Ut=/^(1[0-1]|0?\d)/,Tt=/^(1[0-2]|0?\d)/,Lt=/^[0-5]?\d/,Qt=/^[0-5]?\d/,jt=/^\d/,Pt=/^\d{1,2}/,Ot=/^\d{1,3}/,qt=/^\d{1,4}/,$t=/^-?\d+/,_t=/^-?\d/,eI=/^-?\d{1,2}/,gI=/^-?\d{1,3}/,tI=/^-?\d{1,4}/,II=/^([+-])(\d{2})(\d{2})?|Z/,nI=/^([+-])(\d{2})(\d{2})|Z/,lI=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,CI=/^([+-])(\d{2}):(\d{2})|Z/,oI=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function aI(e,g){return e?{value:g(e.value),rest:e.rest}:e}function rI(e,g){var t=g.match(e);return t?{value:parseInt(t[0],10),rest:g.slice(t[0].length)}:null}function iI(e,g){var t=g.match(e);if(!t)return null;if("Z"===t[0])return{value:0,rest:g.slice(1)};var I="+"===t[1]?1:-1,n=t[2]?parseInt(t[2],10):0,l=t[3]?parseInt(t[3],10):0,C=t[5]?parseInt(t[5],10):0;return{value:I*(n*bg+l*mg+1e3*C),rest:g.slice(t[0].length)}}function cI(e){return rI($t,e)}function AI(e,g){switch(e){case 1:return rI(jt,g);case 2:return rI(Pt,g);case 3:return rI(Ot,g);case 4:return rI(qt,g);default:return rI(new RegExp("^\\d{1,"+e+"}"),g)}}function dI(e,g){switch(e){case 1:return rI(_t,g);case 2:return rI(eI,g);case 3:return rI(gI,g);case 4:return rI(tI,g);default:return rI(new RegExp("^-?\\d{1,"+e+"}"),g)}}function sI(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function uI(e,g){var t,I=g>0,n=I?g:1-g;if(n<=50)t=e||100;else{var l=n+50;t=e+100*Math.floor(l/100)-(e>=l%100?100:0)}return I?t:1-t}function mI(e){return e%400===0||e%4===0&&e%100!==0}var bI=function(e){St(t,e);var g=vt(t);function t(){var e;Rt(this,t);for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];return Jt(yt(e=g.call.apply(g,[this].concat(n))),"priority",130),Jt(yt(e),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),e}return kt(t,[{key:"parse",value:function(e,g,t){var I=function(e){return{year:e,isTwoDigitYear:"yy"===g}};switch(g){case"y":return aI(AI(4,e),I);case"yo":return aI(t.ordinalNumber(e,{unit:"year"}),I);default:return aI(AI(g.length,e),I)}}},{key:"validate",value:function(e,g){return g.isTwoDigitYear||g.year>0}},{key:"set",value:function(e,g,t){var I=e.getUTCFullYear();if(t.isTwoDigitYear){var n=uI(t.year,I);return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}var l="era"in g&&1!==g.era?1-t.year:t.year;return e.setUTCFullYear(l,0,1),e.setUTCHours(0,0,0,0),e}}]),t}(Nt),ZI=function(e){St(t,e);var g=vt(t);function t(){var e;Rt(this,t);for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];return Jt(yt(e=g.call.apply(g,[this].concat(n))),"priority",130),Jt(yt(e),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),e}return kt(t,[{key:"parse",value:function(e,g,t){var I=function(e){return{year:e,isTwoDigitYear:"YY"===g}};switch(g){case"Y":return aI(AI(4,e),I);case"Yo":return aI(t.ordinalNumber(e,{unit:"year"}),I);default:return aI(AI(g.length,e),I)}}},{key:"validate",value:function(e,g){return g.isTwoDigitYear||g.year>0}},{key:"set",value:function(e,g,t,I){var n=fg(e,I);if(t.isTwoDigitYear){var l=uI(t.year,n);return e.setUTCFullYear(l,0,I.firstWeekContainsDate),e.setUTCHours(0,0,0,0),Rg(e,I)}var C="era"in g&&1!==g.era?1-t.year:t.year;return e.setUTCFullYear(C,0,I.firstWeekContainsDate),e.setUTCHours(0,0,0,0),Rg(e,I)}}]),t}(Nt),pI=function(e){St(t,e);var g=vt(t);function t(){var e;Rt(this,t);for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];return Jt(yt(e=g.call.apply(g,[this].concat(n))),"priority",130),Jt(yt(e),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),e}return kt(t,[{key:"parse",value:function(e,g){return dI("R"===g?4:g.length,e)}},{key:"set",value:function(e,g,t){var I=new Date(0);return I.setUTCFullYear(t,0,4),I.setUTCHours(0,0,0,0),Wg(I)}}]),t}(Nt),hI=function(e){St(t,e);var g=vt(t);function t(){var e;Rt(this,t);for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];return Jt(yt(e=g.call.apply(g,[this].concat(n))),"priority",130),Jt(yt(e),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),e}return kt(t,[{key:"parse",value:function(e,g){return dI("u"===g?4:g.length,e)}},{key:"set",value:function(e,g,t){return e.setUTCFullYear(t,0,1),e.setUTCHours(0,0,0,0),e}}]),t}(Nt),GI=function(e){St(t,e);var g=vt(t);function t(){var e;Rt(this,t);for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];return Jt(yt(e=g.call.apply(g,[this].concat(n))),"priority",120),Jt(yt(e),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),e}return kt(t,[{key:"parse",value:function(e,g,t){switch(g){case"Q":case"QQ":return AI(g.length,e);case"Qo":return t.ordinalNumber(e,{unit:"quarter"});case"QQQ":return t.quarter(e,{width:"abbreviated",context:"formatting"})||t.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return t.quarter(e,{width:"narrow",context:"formatting"});default:return t.quarter(e,{width:"wide",context:"formatting"})||t.quarter(e,{width:"abbreviated",context:"formatting"})||t.quarter(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,g){return g>=1&&g<=4}},{key:"set",value:function(e,g,t){return e.setUTCMonth(3*(t-1),1),e.setUTCHours(0,0,0,0),e}}]),t}(Nt),yI=function(e){St(t,e);var g=vt(t);function t(){var e;Rt(this,t);for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];return Jt(yt(e=g.call.apply(g,[this].concat(n))),"priority",120),Jt(yt(e),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),e}return kt(t,[{key:"parse",value:function(e,g,t){switch(g){case"q":case"qq":return AI(g.length,e);case"qo":return t.ordinalNumber(e,{unit:"quarter"});case"qqq":return t.quarter(e,{width:"abbreviated",context:"standalone"})||t.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return t.quarter(e,{width:"narrow",context:"standalone"});default:return t.quarter(e,{width:"wide",context:"standalone"})||t.quarter(e,{width:"abbreviated",context:"standalone"})||t.quarter(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,g){return g>=1&&g<=4}},{key:"set",value:function(e,g,t){return e.setUTCMonth(3*(t-1),1),e.setUTCHours(0,0,0,0),e}}]),t}(Nt),BI=function(e){St(t,e);var g=vt(t);function t(){var e;Rt(this,t);for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];return Jt(yt(e=g.call.apply(g,[this].concat(n))),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),Jt(yt(e),"priority",110),e}return kt(t,[{key:"parse",value:function(e,g,t){var I=function(e){return e-1};switch(g){case"M":return aI(rI(Kt,e),I);case"MM":return aI(AI(2,e),I);case"Mo":return aI(t.ordinalNumber(e,{unit:"month"}),I);case"MMM":return t.month(e,{width:"abbreviated",context:"formatting"})||t.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return t.month(e,{width:"narrow",context:"formatting"});default:return t.month(e,{width:"wide",context:"formatting"})||t.month(e,{width:"abbreviated",context:"formatting"})||t.month(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,g){return g>=0&&g<=11}},{key:"set",value:function(e,g,t){return e.setUTCMonth(t,1),e.setUTCHours(0,0,0,0),e}}]),t}(Nt),SI=function(e){St(t,e);var g=vt(t);function t(){var e;Rt(this,t);for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];return Jt(yt(e=g.call.apply(g,[this].concat(n))),"priority",110),Jt(yt(e),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),e}return kt(t,[{key:"parse",value:function(e,g,t){var I=function(e){return e-1};switch(g){case"L":return aI(rI(Kt,e),I);case"LL":return aI(AI(2,e),I);case"Lo":return aI(t.ordinalNumber(e,{unit:"month"}),I);case"LLL":return t.month(e,{width:"abbreviated",context:"standalone"})||t.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return t.month(e,{width:"narrow",context:"standalone"});default:return t.month(e,{width:"wide",context:"standalone"})||t.month(e,{width:"abbreviated",context:"standalone"})||t.month(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,g){return g>=0&&g<=11}},{key:"set",value:function(e,g,t){return e.setUTCMonth(t,1),e.setUTCHours(0,0,0,0),e}}]),t}(Nt);var WI=function(e){St(t,e);var g=vt(t);function t(){var e;Rt(this,t);for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];return Jt(yt(e=g.call.apply(g,[this].concat(n))),"priority",100),Jt(yt(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),e}return kt(t,[{key:"parse",value:function(e,g,t){switch(g){case"w":return rI(zt,e);case"wo":return t.ordinalNumber(e,{unit:"week"});default:return AI(g.length,e)}}},{key:"validate",value:function(e,g){return g>=1&&g<=53}},{key:"set",value:function(e,g,t,I){return Rg(function(e,g,t){_e(2,arguments);var I=eg(e),n=qe(g),l=Xg(I,t)-n;return I.setUTCDate(I.getUTCDate()-7*l),I}(e,t,I),I)}}]),t}(Nt);var VI=function(e){St(t,e);var g=vt(t);function t(){var e;Rt(this,t);for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];return Jt(yt(e=g.call.apply(g,[this].concat(n))),"priority",100),Jt(yt(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),e}return kt(t,[{key:"parse",value:function(e,g,t){switch(g){case"I":return rI(zt,e);case"Io":return t.ordinalNumber(e,{unit:"week"});default:return AI(g.length,e)}}},{key:"validate",value:function(e,g){return g>=1&&g<=53}},{key:"set",value:function(e,g,t){return Wg(function(e,g){_e(2,arguments);var t=eg(e),I=qe(g),n=vg(t)-I;return t.setUTCDate(t.getUTCDate()-7*n),t}(e,t))}}]),t}(Nt),vI=[31,28,31,30,31,30,31,31,30,31,30,31],RI=[31,29,31,30,31,30,31,31,30,31,30,31],fI=function(e){St(t,e);var g=vt(t);function t(){var e;Rt(this,t);for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];return Jt(yt(e=g.call.apply(g,[this].concat(n))),"priority",90),Jt(yt(e),"subPriority",1),Jt(yt(e),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),e}return kt(t,[{key:"parse",value:function(e,g,t){switch(g){case"d":return rI(xt,e);case"do":return t.ordinalNumber(e,{unit:"date"});default:return AI(g.length,e)}}},{key:"validate",value:function(e,g){var t=mI(e.getUTCFullYear()),I=e.getUTCMonth();return t?g>=1&&g<=RI[I]:g>=1&&g<=vI[I]}},{key:"set",value:function(e,g,t){return e.setUTCDate(t),e.setUTCHours(0,0,0,0),e}}]),t}(Nt),XI=function(e){St(t,e);var g=vt(t);function t(){var e;Rt(this,t);for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];return Jt(yt(e=g.call.apply(g,[this].concat(n))),"priority",90),Jt(yt(e),"subpriority",1),Jt(yt(e),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),e}return kt(t,[{key:"parse",value:function(e,g,t){switch(g){case"D":case"DD":return rI(Mt,e);case"Do":return t.ordinalNumber(e,{unit:"date"});default:return AI(g.length,e)}}},{key:"validate",value:function(e,g){return mI(e.getUTCFullYear())?g>=1&&g<=366:g>=1&&g<=365}},{key:"set",value:function(e,g,t){return e.setUTCMonth(0,t),e.setUTCHours(0,0,0,0),e}}]),t}(Nt);function kI(e,g,t){var I,n,l,C,o,a,r,i;_e(2,arguments);var c=hg(),A=qe(null!==(I=null!==(n=null!==(l=null!==(C=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==C?C:null===t||void 0===t||null===(o=t.locale)||void 0===o||null===(a=o.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==l?l:c.weekStartsOn)&&void 0!==n?n:null===(r=c.locale)||void 0===r||null===(i=r.options)||void 0===i?void 0:i.weekStartsOn)&&void 0!==I?I:0);if(!(A>=0&&A<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=eg(e),s=qe(g),u=((s%7+7)%7<A?7:0)+s-d.getUTCDay();return d.setUTCDate(d.getUTCDate()+u),d}var JI=function(e){St(t,e);var g=vt(t);function t(){var e;Rt(this,t);for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];return Jt(yt(e=g.call.apply(g,[this].concat(n))),"priority",90),Jt(yt(e),"incompatibleTokens",["D","i","e","c","t","T"]),e}return kt(t,[{key:"parse",value:function(e,g,t){switch(g){case"E":case"EE":case"EEE":return t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return t.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"});default:return t.day(e,{width:"wide",context:"formatting"})||t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,g){return g>=0&&g<=6}},{key:"set",value:function(e,g,t,I){return(e=kI(e,t,I)).setUTCHours(0,0,0,0),e}}]),t}(Nt),YI=function(e){St(t,e);var g=vt(t);function t(){var e;Rt(this,t);for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];return Jt(yt(e=g.call.apply(g,[this].concat(n))),"priority",90),Jt(yt(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),e}return kt(t,[{key:"parse",value:function(e,g,t,I){var n=function(e){var g=7*Math.floor((e-1)/7);return(e+I.weekStartsOn+6)%7+g};switch(g){case"e":case"ee":return aI(AI(g.length,e),n);case"eo":return aI(t.ordinalNumber(e,{unit:"day"}),n);case"eee":return t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"});case"eeeee":return t.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"});default:return t.day(e,{width:"wide",context:"formatting"})||t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,g){return g>=0&&g<=6}},{key:"set",value:function(e,g,t,I){return(e=kI(e,t,I)).setUTCHours(0,0,0,0),e}}]),t}(Nt),wI=function(e){St(t,e);var g=vt(t);function t(){var e;Rt(this,t);for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];return Jt(yt(e=g.call.apply(g,[this].concat(n))),"priority",90),Jt(yt(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),e}return kt(t,[{key:"parse",value:function(e,g,t,I){var n=function(e){var g=7*Math.floor((e-1)/7);return(e+I.weekStartsOn+6)%7+g};switch(g){case"c":case"cc":return aI(AI(g.length,e),n);case"co":return aI(t.ordinalNumber(e,{unit:"day"}),n);case"ccc":return t.day(e,{width:"abbreviated",context:"standalone"})||t.day(e,{width:"short",context:"standalone"})||t.day(e,{width:"narrow",context:"standalone"});case"ccccc":return t.day(e,{width:"narrow",context:"standalone"});case"cccccc":return t.day(e,{width:"short",context:"standalone"})||t.day(e,{width:"narrow",context:"standalone"});default:return t.day(e,{width:"wide",context:"standalone"})||t.day(e,{width:"abbreviated",context:"standalone"})||t.day(e,{width:"short",context:"standalone"})||t.day(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,g){return g>=0&&g<=6}},{key:"set",value:function(e,g,t,I){return(e=kI(e,t,I)).setUTCHours(0,0,0,0),e}}]),t}(Nt);var HI=function(e){St(t,e);var g=vt(t);function t(){var e;Rt(this,t);for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];return Jt(yt(e=g.call.apply(g,[this].concat(n))),"priority",90),Jt(yt(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),e}return kt(t,[{key:"parse",value:function(e,g,t){var I=function(e){return 0===e?7:e};switch(g){case"i":case"ii":return AI(g.length,e);case"io":return t.ordinalNumber(e,{unit:"day"});case"iii":return aI(t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"}),I);case"iiiii":return aI(t.day(e,{width:"narrow",context:"formatting"}),I);case"iiiiii":return aI(t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"}),I);default:return aI(t.day(e,{width:"wide",context:"formatting"})||t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"}),I)}}},{key:"validate",value:function(e,g){return g>=1&&g<=7}},{key:"set",value:function(e,g,t){return e=function(e,g){_e(2,arguments);var t=qe(g);t%7===0&&(t-=7);var I=eg(e),n=((t%7+7)%7<1?7:0)+t-I.getUTCDay();return I.setUTCDate(I.getUTCDate()+n),I}(e,t),e.setUTCHours(0,0,0,0),e}}]),t}(Nt),NI=function(e){St(t,e);var g=vt(t);function t(){var e;Rt(this,t);for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];return Jt(yt(e=g.call.apply(g,[this].concat(n))),"priority",80),Jt(yt(e),"incompatibleTokens",["b","B","H","k","t","T"]),e}return kt(t,[{key:"parse",value:function(e,g,t){switch(g){case"a":case"aa":case"aaa":return t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return t.dayPeriod(e,{width:"narrow",context:"formatting"});default:return t.dayPeriod(e,{width:"wide",context:"formatting"})||t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,g,t){return e.setUTCHours(sI(t),0,0,0),e}}]),t}(Nt),FI=function(e){St(t,e);var g=vt(t);function t(){var e;Rt(this,t);for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];return Jt(yt(e=g.call.apply(g,[this].concat(n))),"priority",80),Jt(yt(e),"incompatibleTokens",["a","B","H","k","t","T"]),e}return kt(t,[{key:"parse",value:function(e,g,t){switch(g){case"b":case"bb":case"bbb":return t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return t.dayPeriod(e,{width:"narrow",context:"formatting"});default:return t.dayPeriod(e,{width:"wide",context:"formatting"})||t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,g,t){return e.setUTCHours(sI(t),0,0,0),e}}]),t}(Nt),KI=function(e){St(t,e);var g=vt(t);function t(){var e;Rt(this,t);for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];return Jt(yt(e=g.call.apply(g,[this].concat(n))),"priority",80),Jt(yt(e),"incompatibleTokens",["a","b","t","T"]),e}return kt(t,[{key:"parse",value:function(e,g,t){switch(g){case"B":case"BB":case"BBB":return t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return t.dayPeriod(e,{width:"narrow",context:"formatting"});default:return t.dayPeriod(e,{width:"wide",context:"formatting"})||t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,g,t){return e.setUTCHours(sI(t),0,0,0),e}}]),t}(Nt),xI=function(e){St(t,e);var g=vt(t);function t(){var e;Rt(this,t);for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];return Jt(yt(e=g.call.apply(g,[this].concat(n))),"priority",70),Jt(yt(e),"incompatibleTokens",["H","K","k","t","T"]),e}return kt(t,[{key:"parse",value:function(e,g,t){switch(g){case"h":return rI(Tt,e);case"ho":return t.ordinalNumber(e,{unit:"hour"});default:return AI(g.length,e)}}},{key:"validate",value:function(e,g){return g>=1&&g<=12}},{key:"set",value:function(e,g,t){var I=e.getUTCHours()>=12;return I&&t<12?e.setUTCHours(t+12,0,0,0):I||12!==t?e.setUTCHours(t,0,0,0):e.setUTCHours(0,0,0,0),e}}]),t}(Nt),MI=function(e){St(t,e);var g=vt(t);function t(){var e;Rt(this,t);for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];return Jt(yt(e=g.call.apply(g,[this].concat(n))),"priority",70),Jt(yt(e),"incompatibleTokens",["a","b","h","K","k","t","T"]),e}return kt(t,[{key:"parse",value:function(e,g,t){switch(g){case"H":return rI(Et,e);case"Ho":return t.ordinalNumber(e,{unit:"hour"});default:return AI(g.length,e)}}},{key:"validate",value:function(e,g){return g>=0&&g<=23}},{key:"set",value:function(e,g,t){return e.setUTCHours(t,0,0,0),e}}]),t}(Nt),zI=function(e){St(t,e);var g=vt(t);function t(){var e;Rt(this,t);for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];return Jt(yt(e=g.call.apply(g,[this].concat(n))),"priority",70),Jt(yt(e),"incompatibleTokens",["h","H","k","t","T"]),e}return kt(t,[{key:"parse",value:function(e,g,t){switch(g){case"K":return rI(Ut,e);case"Ko":return t.ordinalNumber(e,{unit:"hour"});default:return AI(g.length,e)}}},{key:"validate",value:function(e,g){return g>=0&&g<=11}},{key:"set",value:function(e,g,t){return e.getUTCHours()>=12&&t<12?e.setUTCHours(t+12,0,0,0):e.setUTCHours(t,0,0,0),e}}]),t}(Nt),EI=function(e){St(t,e);var g=vt(t);function t(){var e;Rt(this,t);for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];return Jt(yt(e=g.call.apply(g,[this].concat(n))),"priority",70),Jt(yt(e),"incompatibleTokens",["a","b","h","H","K","t","T"]),e}return kt(t,[{key:"parse",value:function(e,g,t){switch(g){case"k":return rI(Dt,e);case"ko":return t.ordinalNumber(e,{unit:"hour"});default:return AI(g.length,e)}}},{key:"validate",value:function(e,g){return g>=1&&g<=24}},{key:"set",value:function(e,g,t){var I=t<=24?t%24:t;return e.setUTCHours(I,0,0,0),e}}]),t}(Nt),DI=function(e){St(t,e);var g=vt(t);function t(){var e;Rt(this,t);for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];return Jt(yt(e=g.call.apply(g,[this].concat(n))),"priority",60),Jt(yt(e),"incompatibleTokens",["t","T"]),e}return kt(t,[{key:"parse",value:function(e,g,t){switch(g){case"m":return rI(Lt,e);case"mo":return t.ordinalNumber(e,{unit:"minute"});default:return AI(g.length,e)}}},{key:"validate",value:function(e,g){return g>=0&&g<=59}},{key:"set",value:function(e,g,t){return e.setUTCMinutes(t,0,0),e}}]),t}(Nt),UI=function(e){St(t,e);var g=vt(t);function t(){var e;Rt(this,t);for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];return Jt(yt(e=g.call.apply(g,[this].concat(n))),"priority",50),Jt(yt(e),"incompatibleTokens",["t","T"]),e}return kt(t,[{key:"parse",value:function(e,g,t){switch(g){case"s":return rI(Qt,e);case"so":return t.ordinalNumber(e,{unit:"second"});default:return AI(g.length,e)}}},{key:"validate",value:function(e,g){return g>=0&&g<=59}},{key:"set",value:function(e,g,t){return e.setUTCSeconds(t,0),e}}]),t}(Nt),TI=function(e){St(t,e);var g=vt(t);function t(){var e;Rt(this,t);for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];return Jt(yt(e=g.call.apply(g,[this].concat(n))),"priority",30),Jt(yt(e),"incompatibleTokens",["t","T"]),e}return kt(t,[{key:"parse",value:function(e,g){return aI(AI(g.length,e),(function(e){return Math.floor(e*Math.pow(10,3-g.length))}))}},{key:"set",value:function(e,g,t){return e.setUTCMilliseconds(t),e}}]),t}(Nt),LI=function(e){St(t,e);var g=vt(t);function t(){var e;Rt(this,t);for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];return Jt(yt(e=g.call.apply(g,[this].concat(n))),"priority",10),Jt(yt(e),"incompatibleTokens",["t","T","x"]),e}return kt(t,[{key:"parse",value:function(e,g){switch(g){case"X":return iI(II,e);case"XX":return iI(nI,e);case"XXXX":return iI(lI,e);case"XXXXX":return iI(oI,e);default:return iI(CI,e)}}},{key:"set",value:function(e,g,t){return g.timestampIsSet?e:new Date(e.getTime()-t)}}]),t}(Nt),QI=function(e){St(t,e);var g=vt(t);function t(){var e;Rt(this,t);for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];return Jt(yt(e=g.call.apply(g,[this].concat(n))),"priority",10),Jt(yt(e),"incompatibleTokens",["t","T","X"]),e}return kt(t,[{key:"parse",value:function(e,g){switch(g){case"x":return iI(II,e);case"xx":return iI(nI,e);case"xxxx":return iI(lI,e);case"xxxxx":return iI(oI,e);default:return iI(CI,e)}}},{key:"set",value:function(e,g,t){return g.timestampIsSet?e:new Date(e.getTime()-t)}}]),t}(Nt),jI=function(e){St(t,e);var g=vt(t);function t(){var e;Rt(this,t);for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];return Jt(yt(e=g.call.apply(g,[this].concat(n))),"priority",40),Jt(yt(e),"incompatibleTokens","*"),e}return kt(t,[{key:"parse",value:function(e){return cI(e)}},{key:"set",value:function(e,g,t){return[new Date(1e3*t),{timestampIsSet:!0}]}}]),t}(Nt),PI=function(e){St(t,e);var g=vt(t);function t(){var e;Rt(this,t);for(var I=arguments.length,n=new Array(I),l=0;l<I;l++)n[l]=arguments[l];return Jt(yt(e=g.call.apply(g,[this].concat(n))),"priority",20),Jt(yt(e),"incompatibleTokens","*"),e}return kt(t,[{key:"parse",value:function(e){return cI(e)}},{key:"set",value:function(e,g,t){return[new Date(t),{timestampIsSet:!0}]}}]),t}(Nt),OI={G:new Ft,y:new bI,Y:new ZI,R:new pI,u:new hI,Q:new GI,q:new yI,M:new BI,L:new SI,w:new WI,I:new VI,d:new fI,D:new XI,E:new JI,e:new YI,c:new wI,i:new HI,a:new NI,b:new FI,B:new KI,h:new xI,H:new MI,K:new zI,k:new EI,m:new DI,s:new UI,S:new TI,X:new LI,x:new QI,t:new jI,T:new PI},qI=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,$I=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,_I=/^'([^]*?)'?$/,en=/''/g,gn=/\S/,tn=/[a-zA-Z]/;function In(e,g,t,I){var n,l,C,o,a,r,i,c,A,d,s,u,m,b,Z,p,h,G;_e(3,arguments);var y=String(e),B=String(g),S=hg(),W=null!==(n=null!==(l=null===I||void 0===I?void 0:I.locale)&&void 0!==l?l:S.locale)&&void 0!==n?n:Ct;if(!W.match)throw new RangeError("locale must contain match property");var V=qe(null!==(C=null!==(o=null!==(a=null!==(r=null===I||void 0===I?void 0:I.firstWeekContainsDate)&&void 0!==r?r:null===I||void 0===I||null===(i=I.locale)||void 0===i||null===(c=i.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==a?a:S.firstWeekContainsDate)&&void 0!==o?o:null===(A=S.locale)||void 0===A||null===(d=A.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==C?C:1);if(!(V>=1&&V<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var v=qe(null!==(s=null!==(u=null!==(m=null!==(b=null===I||void 0===I?void 0:I.weekStartsOn)&&void 0!==b?b:null===I||void 0===I||null===(Z=I.locale)||void 0===Z||null===(p=Z.options)||void 0===p?void 0:p.weekStartsOn)&&void 0!==m?m:S.weekStartsOn)&&void 0!==u?u:null===(h=S.locale)||void 0===h||null===(G=h.options)||void 0===G?void 0:G.weekStartsOn)&&void 0!==s?s:0);if(!(v>=0&&v<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===B)return""===y?eg(t):new Date(NaN);var R,f={firstWeekContainsDate:V,weekStartsOn:v,locale:W},X=[new Ht],k=B.match($I).map((function(e){var g=e[0];return g in Tg?(0,Tg[g])(e,W.formatLong):e})).join("").match(qI),J=[],Y=ht(k);try{var w=function(){var g=R.value;null!==I&&void 0!==I&&I.useAdditionalWeekYearTokens||!Pg(g)||Og(g,B,e),null!==I&&void 0!==I&&I.useAdditionalDayOfYearTokens||!jg(g)||Og(g,B,e);var t=g[0],n=OI[t];if(n){var l=n.incompatibleTokens;if(Array.isArray(l)){var C=J.find((function(e){return l.includes(e.token)||e.token===t}));if(C)throw new RangeError("The format string mustn't contain `".concat(C.fullToken,"` and `").concat(g,"` at the same time"))}else if("*"===n.incompatibleTokens&&J.length>0)throw new RangeError("The format string mustn't contain `".concat(g,"` and any other token at the same time"));J.push({token:t,fullToken:g});var o=n.run(y,g,W.match,f);if(!o)return{v:new Date(NaN)};X.push(o.setter),y=o.rest}else{if(t.match(tn))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");if("''"===g?g="'":"'"===t&&(g=g.match(_I)[1].replace(en,"'")),0!==y.indexOf(g))return{v:new Date(NaN)};y=y.slice(g.length)}};for(Y.s();!(R=Y.n()).done;){var H=w();if("object"===$e(H))return H.v}}catch(U){Y.e(U)}finally{Y.f()}if(y.length>0&&gn.test(y))return new Date(NaN);var N=X.map((function(e){return e.priority})).sort((function(e,g){return g-e})).filter((function(e,g,t){return t.indexOf(e)===g})).map((function(e){return X.filter((function(g){return g.priority===e})).sort((function(e,g){return g.subPriority-e.subPriority}))})).map((function(e){return e[0]})),F=eg(t);if(isNaN(F.getTime()))return new Date(NaN);var K,x=Sg(F,Ag(F)),M={},z=ht(N);try{for(z.s();!(K=z.n()).done;){var E=K.value;if(!E.validate(x,f))return new Date(NaN);var D=E.set(x,M,f);Array.isArray(D)?(x=D[0],Gt(M,D[1])):x=D}}catch(U){z.e(U)}finally{z.f()}return x}function nn(e){_e(1,arguments);var g=eg(e);return g.setDate(1),g.setHours(0,0,0,0),g}function ln(e){_e(1,arguments);var g=eg(e),t=new Date(0);return t.setFullYear(g.getFullYear(),0,1),t.setHours(0,0,0,0),t}function Cn(e,g){var t;_e(1,arguments);var I=qe(null!==(t=null===g||void 0===g?void 0:g.additionalDigits)&&void 0!==t?t:2);if(2!==I&&1!==I&&0!==I)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!==typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var n,l=function(e){var g,t={},I=e.split(on.dateTimeDelimiter);if(I.length>2)return t;/:/.test(I[0])?g=I[0]:(t.date=I[0],g=I[1],on.timeZoneDelimiter.test(t.date)&&(t.date=e.split(on.timeZoneDelimiter)[0],g=e.substr(t.date.length,e.length)));if(g){var n=on.timezone.exec(g);n?(t.time=g.replace(n[1],""),t.timezone=n[1]):t.time=g}return t}(e);if(l.date){var C=function(e,g){var t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+g)+"})|(\\d{2}|[+-]\\d{"+(2+g)+"})$)"),I=e.match(t);if(!I)return{year:NaN,restDateString:""};var n=I[1]?parseInt(I[1]):null,l=I[2]?parseInt(I[2]):null;return{year:null===l?n:100*l,restDateString:e.slice((I[1]||I[2]).length)}}(l.date,I);n=function(e,g){if(null===g)return new Date(NaN);var t=e.match(an);if(!t)return new Date(NaN);var I=!!t[4],n=An(t[1]),l=An(t[2])-1,C=An(t[3]),o=An(t[4]),a=An(t[5])-1;if(I)return function(e,g,t){return g>=1&&g<=53&&t>=0&&t<=6}(0,o,a)?function(e,g,t){var I=new Date(0);I.setUTCFullYear(e,0,4);var n=I.getUTCDay()||7,l=7*(g-1)+t+1-n;return I.setUTCDate(I.getUTCDate()+l),I}(g,o,a):new Date(NaN);var r=new Date(0);return function(e,g,t){return g>=0&&g<=11&&t>=1&&t<=(sn[g]||(un(e)?29:28))}(g,l,C)&&function(e,g){return g>=1&&g<=(un(e)?366:365)}(g,n)?(r.setUTCFullYear(g,l,Math.max(n,C)),r):new Date(NaN)}(C.restDateString,C.year)}if(!n||isNaN(n.getTime()))return new Date(NaN);var o,a=n.getTime(),r=0;if(l.time&&(r=function(e){var g=e.match(rn);if(!g)return NaN;var t=dn(g[1]),I=dn(g[2]),n=dn(g[3]);if(!function(e,g,t){if(24===e)return 0===g&&0===t;return t>=0&&t<60&&g>=0&&g<60&&e>=0&&e<25}(t,I,n))return NaN;return t*bg+I*mg+1e3*n}(l.time),isNaN(r)))return new Date(NaN);if(!l.timezone){var i=new Date(a+r),c=new Date(0);return c.setFullYear(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()),c.setHours(i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()),c}return o=function(e){if("Z"===e)return 0;var g=e.match(cn);if(!g)return 0;var t="+"===g[1]?-1:1,I=parseInt(g[2]),n=g[3]&&parseInt(g[3])||0;if(!function(e,g){return g>=0&&g<=59}(0,n))return NaN;return t*(I*bg+n*mg)}(l.timezone),isNaN(o)?new Date(NaN):new Date(a+r+o)}var on={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},an=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,rn=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,cn=/^([+-])(\d{2})(?::?(\d{2}))?$/;function An(e){return e?parseInt(e):1}function dn(e){return e&&parseFloat(e.replace(",","."))||0}var sn=[31,null,31,30,31,30,31,31,30,31,30,31];function un(e){return e%400===0||e%4===0&&e%100!==0}var mn=t(6723),bn=t.n(mn);const Zn={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},pn={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",fullDateWithWeekday:"PPPP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",monthAndYear:"LLLL yyyy",monthAndDate:"MMMM d",fullTime:"p",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",fullDateTime:"PP p",fullDateTime12h:"PP hh:mm aa",fullDateTime24h:"PP HH:mm",keyboardDateTime:"P p",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class hn{constructor(){let{locale:e,formats:g}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isMUIAdapter=!0,this.isTimezoneCompatible=!1,this.lib="date-fns",this.locale=void 0,this.formats=void 0,this.formatTokenMap=Zn,this.escapedCharacters={start:"'",end:"'"},this.date=e=>"undefined"===typeof e?new Date:null===e?null:new Date(e),this.dateWithTimezone=e=>this.date(e),this.getTimezone=()=>"default",this.setTimezone=e=>e,this.toJsDate=e=>e,this.parseISO=e=>Cn(e),this.toISO=e=>function(e,g){var t,I;_e(1,arguments);var n=eg(e);if(isNaN(n.getTime()))throw new RangeError("Invalid time value");var l=String(null!==(t=null===g||void 0===g?void 0:g.format)&&void 0!==t?t:"extended"),C=String(null!==(I=null===g||void 0===g?void 0:g.representation)&&void 0!==I?I:"complete");if("extended"!==l&&"basic"!==l)throw new RangeError("format must be 'extended' or 'basic'");if("date"!==C&&"time"!==C&&"complete"!==C)throw new RangeError("representation must be 'date', 'time', or 'complete'");var o="",a="",r="extended"===l?"-":"",i="extended"===l?":":"";if("time"!==C){var c=kg(n.getDate(),2),A=kg(n.getMonth()+1,2),d=kg(n.getFullYear(),4);o="".concat(d).concat(r).concat(A).concat(r).concat(c)}if("date"!==C){var s=n.getTimezoneOffset();if(0!==s){var u=Math.abs(s),m=kg(Math.floor(u/60),2),b=kg(u%60,2);a="".concat(s<0?"+":"-").concat(m,":").concat(b)}else a="Z";var Z=""===o?"":"T",p=[kg(n.getHours(),2),kg(n.getMinutes(),2),kg(n.getSeconds(),2)].join(i);o="".concat(o).concat(Z).concat(p).concat(a)}return o}(e,{format:"extended"}),this.parse=(e,g)=>""===e?null:In(e,g,new Date,{locale:this.locale}),this.getCurrentLocaleCode=()=>{var e;return(null==(e=this.locale)?void 0:e.code)||"en-US"},this.is12HourCycleInCurrentLocale=()=>!this.locale||/a/.test(this.locale.formatLong.time()),this.expandFormat=e=>e.match(/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g).map((e=>{const g=e[0];if("p"===g||"P"===g){return(0,bn()[g])(e,(this.locale||lt).formatLong,{})}return e})).join(""),this.getFormatHelperText=e=>this.expandFormat(e).replace(/(aaa|aa|a)/g,"(a|p)m").toLocaleLowerCase(),this.isNull=e=>null===e,this.isValid=e=>Bg(this.date(e)),this.format=(e,g)=>this.formatByString(e,this.formats[g]),this.formatByString=(e,g)=>At(e,g,{locale:this.locale}),this.formatNumber=e=>e,this.getDiff=(e,g,t)=>{switch(t){case"years":return Cg(e,this.date(g));case"quarters":return function(e,g,t){_e(2,arguments);var I=rg(e,g)/3;return cg(null===t||void 0===t?void 0:t.roundingMethod)(I)}(e,this.date(g));case"months":return rg(e,this.date(g));case"weeks":return function(e,g,t){_e(2,arguments);var I=ug(e,g)/7;return cg(null===t||void 0===t?void 0:t.roundingMethod)(I)}(e,this.date(g));case"days":return ug(e,this.date(g));case"hours":return function(e,g,t){_e(2,arguments);var I=Zg(e,g)/bg;return cg(null===t||void 0===t?void 0:t.roundingMethod)(I)}(e,this.date(g));case"minutes":return function(e,g,t){_e(2,arguments);var I=Zg(e,g)/mg;return cg(null===t||void 0===t?void 0:t.roundingMethod)(I)}(e,this.date(g));case"seconds":return function(e,g,t){_e(2,arguments);var I=Zg(e,g)/1e3;return cg(null===t||void 0===t?void 0:t.roundingMethod)(I)}(e,this.date(g));default:return Zg(e,this.date(g))}},this.isEqual=(e,g)=>null===e&&null===g||function(e,g){_e(2,arguments);var t=eg(e),I=eg(g);return t.getTime()===I.getTime()}(e,g),this.isSameYear=(e,g)=>function(e,g){_e(2,arguments);var t=eg(e),I=eg(g);return t.getFullYear()===I.getFullYear()}(e,g),this.isSameMonth=(e,g)=>function(e,g){_e(2,arguments);var t=eg(e),I=eg(g);return t.getFullYear()===I.getFullYear()&&t.getMonth()===I.getMonth()}(e,g),this.isSameDay=(e,g)=>function(e,g){_e(2,arguments);var t=dg(e),I=dg(g);return t.getTime()===I.getTime()}(e,g),this.isSameHour=(e,g)=>function(e,g){_e(2,arguments);var t=Zt(e),I=Zt(g);return t.getTime()===I.getTime()}(e,g),this.isAfter=(e,g)=>mt(e,g),this.isAfterYear=(e,g)=>mt(e,yg(g)),this.isAfterDay=(e,g)=>mt(e,og(g)),this.isBefore=(e,g)=>bt(e,g),this.isBeforeYear=(e,g)=>bt(e,ln(g)),this.isBeforeDay=(e,g)=>bt(e,dg(g)),this.isWithinRange=(e,g)=>{let[t,I]=g;return function(e,g){_e(2,arguments);var t=eg(e).getTime(),I=eg(g.start).getTime(),n=eg(g.end).getTime();if(!(I<=n))throw new RangeError("Invalid interval");return t>=I&&t<=n}(e,{start:t,end:I})},this.startOfYear=e=>ln(e),this.startOfMonth=e=>nn(e),this.startOfWeek=e=>st(e,{locale:this.locale}),this.startOfDay=e=>dg(e),this.endOfYear=e=>yg(e),this.endOfMonth=e=>ag(e),this.endOfWeek=e=>Gg(e,{locale:this.locale}),this.endOfDay=e=>og(e),this.addYears=(e,g)=>ng(e,g),this.addMonths=(e,g)=>Ig(e,g),this.addWeeks=(e,g)=>function(e,g){return _e(2,arguments),gg(e,7*qe(g))}(e,g),this.addDays=(e,g)=>gg(e,g),this.addHours=(e,g)=>function(e,g){return _e(2,arguments),tg(e,36e5*qe(g))}(e,g),this.addMinutes=(e,g)=>function(e,g){return _e(2,arguments),tg(e,6e4*qe(g))}(e,g),this.addSeconds=(e,g)=>function(e,g){return _e(2,arguments),tg(e,1e3*qe(g))}(e,g),this.getYear=e=>function(e){return _e(1,arguments),eg(e).getFullYear()}(e),this.getMonth=e=>function(e){return _e(1,arguments),eg(e).getMonth()}(e),this.getDate=e=>function(e){return _e(1,arguments),eg(e).getDate()}(e),this.getHours=e=>function(e){return _e(1,arguments),eg(e).getHours()}(e),this.getMinutes=e=>function(e){return _e(1,arguments),eg(e).getMinutes()}(e),this.getSeconds=e=>function(e){return _e(1,arguments),eg(e).getSeconds()}(e),this.getMilliseconds=e=>function(e){return _e(1,arguments),eg(e).getMilliseconds()}(e),this.setYear=(e,g)=>function(e,g){_e(2,arguments);var t=eg(e),I=qe(g);return isNaN(t.getTime())?new Date(NaN):(t.setFullYear(I),t)}(e,g),this.setMonth=(e,g)=>function(e,g){_e(2,arguments);var t=eg(e),I=qe(g),n=t.getFullYear(),l=t.getDate(),C=new Date(0);C.setFullYear(n,I,15),C.setHours(0,0,0,0);var o=dt(C);return t.setMonth(I,Math.min(l,o)),t}(e,g),this.setDate=(e,g)=>function(e,g){_e(2,arguments);var t=eg(e),I=qe(g);return t.setDate(I),t}(e,g),this.setHours=(e,g)=>function(e,g){_e(2,arguments);var t=eg(e),I=qe(g);return t.setHours(I),t}(e,g),this.setMinutes=(e,g)=>function(e,g){_e(2,arguments);var t=eg(e),I=qe(g);return t.setMinutes(I),t}(e,g),this.setSeconds=(e,g)=>function(e,g){_e(2,arguments);var t=eg(e),I=qe(g);return t.setSeconds(I),t}(e,g),this.setMilliseconds=(e,g)=>function(e,g){_e(2,arguments);var t=eg(e),I=qe(g);return t.setMilliseconds(I),t}(e,g),this.getDaysInMonth=e=>dt(e),this.getNextMonth=e=>Ig(e,1),this.getPreviousMonth=e=>Ig(e,-1),this.getMonthArray=e=>{const g=[ln(e)];for(;g.length<12;){const e=g[g.length-1];g.push(this.getNextMonth(e))}return g},this.mergeDateAndTime=(e,g)=>this.setSeconds(this.setMinutes(this.setHours(e,this.getHours(g)),this.getMinutes(g)),this.getSeconds(g)),this.getWeekdays=()=>{const e=new Date;return function(e,g){var t;_e(1,arguments);var I=e||{},n=eg(I.start),l=eg(I.end).getTime();if(!(n.getTime()<=l))throw new RangeError("Invalid interval");var C=[],o=n;o.setHours(0,0,0,0);var a=Number(null!==(t=null===g||void 0===g?void 0:g.step)&&void 0!==t?t:1);if(a<1||isNaN(a))throw new RangeError("`options.step` must be a number greater than 1");for(;o.getTime()<=l;)C.push(eg(o)),o.setDate(o.getDate()+a),o.setHours(0,0,0,0);return C}({start:st(e,{locale:this.locale}),end:Gg(e,{locale:this.locale})}).map((e=>this.formatByString(e,"EEEEEE")))},this.getWeekArray=e=>{const g=st(nn(e),{locale:this.locale}),t=Gg(ag(e),{locale:this.locale});let I=0,n=g;const l=[];for(;bt(n,t);){const e=Math.floor(I/7);l[e]=l[e]||[],l[e].push(n),n=gg(n,1),I+=1}return l},this.getWeekNumber=e=>function(e,g){_e(1,arguments);var t=eg(e),I=st(t,g).getTime()-ut(t,g).getTime();return Math.round(I/6048e5)+1}(e,{locale:this.locale}),this.getYearRange=(e,g)=>{const t=ln(e),I=yg(g),n=[];let l=t;for(;bt(l,I);)n.push(l),l=ng(l,1);return n},this.getMeridiemText=e=>"am"===e?"AM":"PM",this.locale=e,this.formats=(0,we.A)({},pn,g)}}var Gn={lessThanXSeconds:{one:"moins d\u2019une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d\u2019une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d\u2019un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu\u2019un an",other:"presque {{count}} ans"}};const yn=function(e,g,t){var I,n=Gn[e];return I="string"===typeof n?n:1===g?n.one:n.other.replace("{{count}}",String(g)),null!==t&&void 0!==t&&t.addSuffix?t.comparison&&t.comparison>0?"dans "+I:"il y a "+I:I};var Bn={date:_g({formats:{full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},defaultWidth:"full"}),time:_g({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:_g({formats:{full:"{{date}} '\xe0' {{time}}",long:"{{date}} '\xe0' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var Sn={lastWeek:"eeee 'dernier \xe0' p",yesterday:"'hier \xe0' p",today:"'aujourd\u2019hui \xe0' p",tomorrow:"'demain \xe0' p'",nextWeek:"eeee 'prochain \xe0' p",other:"P"};const Wn={code:"fr",formatDistance:yn,formatLong:Bn,formatRelative:function(e,g,t,I){return Sn[e]},localize:{ordinalNumber:function(e,g){var t=Number(e),I=null===g||void 0===g?void 0:g.unit;if(0===t)return"0";return t+(1===t?I&&["year","week","hour","minute","second"].includes(I)?"\xe8re":"er":"\xe8me")},era:tt({values:{narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant J\xe9sus-Christ","apr\xe8s J\xe9sus-Christ"]},defaultWidth:"wide"}),quarter:tt({values:{narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2\xe8me trim.","3\xe8me trim.","4\xe8me trim."],wide:["1er trimestre","2\xe8me trimestre","3\xe8me trimestre","4\xe8me trimestre"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:tt({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","f\xe9vr.","mars","avr.","mai","juin","juil.","ao\xfbt","sept.","oct.","nov.","d\xe9c."],wide:["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre"]},defaultWidth:"wide"}),day:tt({values:{narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},defaultWidth:"wide"}),dayPeriod:tt({values:{narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"apr\xe8s-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l\u2019apr\xe8s-midi",evening:"du soir",night:"du matin"}},defaultWidth:"wide"})},match:{ordinalNumber:nt({matchPattern:/^(\d+)(i\xe8me|\xe8re|\xe8me|er|e)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e)}}),era:It({matchPatterns:{narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant J\xe9sus-Christ|apr\xe8s J\xe9sus-Christ)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^av/i,/^ap/i]},defaultParseWidth:"any"}),quarter:It({matchPatterns:{narrow:/^T?[1234]/i,abbreviated:/^[1234](er|\xe8me|e)? trim\.?/i,wide:/^[1234](er|\xe8me|e)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:It({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(janv|f\xe9vr|mars|avr|mai|juin|juill|juil|ao\xfbt|sept|oct|nov|d\xe9c)\.?/i,wide:/^(janvier|f\xe9vrier|mars|avril|mai|juin|juillet|ao\xfbt|septembre|octobre|novembre|d\xe9cembre)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:It({matchPatterns:{narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:It({matchPatterns:{narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'apr\xe8s[-\s]midi|du soir|de la nuit)/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:4}};var Vn=t(4440);function vn(e,g,t,I,l){const[C,o]=n.useState((()=>l&&t?t(e).matches:I?I(e).matches:g));return(0,Vn.A)((()=>{let g=!0;if(!t)return;const I=t(e),n=()=>{g&&o(I.matches)};return n(),I.addListener(n),()=>{g=!1,I.removeListener(n)}}),[e,t]),C}const Rn=l.useSyncExternalStore;function fn(e,g,t,I,l){const C=n.useCallback((()=>g),[g]),o=n.useMemo((()=>{if(l&&t)return()=>t(e).matches;if(null!==I){const{matches:g}=I(e);return()=>g}return C}),[C,e,I,l,t]),[a,r]=n.useMemo((()=>{if(null===t)return[C,()=>()=>{}];const g=t(e);return[()=>g.matches,e=>(g.addListener(e),()=>{g.removeListener(e)})]}),[C,t,e]);return Rn(r,a,o)}function Xn(e){let g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const t=Me(),I="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,{defaultMatches:n=!1,matchMedia:l=(I?window.matchMedia:null),ssrMatchMedia:C=null,noSsr:o=!1}=Fe({name:"MuiUseMediaQuery",props:g,theme:t});let a="function"===typeof e?e(t):e;a=a.replace(/^@media( ?)/m,"");return(void 0!==Rn?fn:vn)(a,n,l,C,o)}var kn=t(8279);const Jn=n.createContext(null);function Yn(){return n.useContext(Jn)}const wn="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__";const Hn=function(e){const{children:g,theme:t}=e,I=Yn(),l=n.useMemo((()=>{const e=null===I?t:function(e,g){if("function"===typeof g)return g(e);return(0,we.A)({},e,g)}(I,t);return null!=e&&(e[wn]=null!==I),e}),[t,I]);return(0,Qe.jsx)(Jn.Provider,{value:l,children:g})},Nn=["value"],Fn=n.createContext();const Kn=()=>{const e=n.useContext(Fn);return null!=e&&e},xn=function(e){let{value:g}=e,t=(0,He.A)(e,Nn);return(0,Qe.jsx)(Fn.Provider,(0,we.A)({value:null==g||g},t))};var Mn=t(3654);const zn={};function En(e,g,t){let I=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return n.useMemo((()=>{const n=e&&g[e]||g;if("function"===typeof t){const l=t(n),C=e?(0,we.A)({},g,{[e]:l}):l;return I?()=>C:C}return e?(0,we.A)({},g,{[e]:t}):(0,we.A)({},g,t)}),[e,g,t,I])}const Dn=function(e){const{children:g,theme:t,themeId:I}=e,n=Me(zn),l=Yn()||zn,C=En(I,n,t),o=En(I,l,t,!0),a="rtl"===C.direction;return(0,Qe.jsx)(Hn,{theme:o,children:(0,Qe.jsx)(xe.T.Provider,{value:C,children:(0,Qe.jsx)(xn,{value:a,children:(0,Qe.jsx)(Mn.A,{value:null==C?void 0:C.components,children:g})})})})},Un=["theme"];function Tn(e){let{theme:g}=e,t=(0,He.A)(e,Un);const I=g[Te.A];return(0,Qe.jsx)(Dn,(0,we.A)({},t,{themeId:I?Te.A:void 0,theme:I||g}))}var Ln=t(8387),Qn=t(3174),jn=t(8812),Pn=t(8698);const On=["className","component"];var qn=t(9386),$n=t(2532);const _n=(0,$n.A)("MuiBox",["root"]),el=(0,kn.A)(),gl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:g,defaultTheme:t,defaultClassName:I="MuiBox-root",generateClassName:l}=e,C=(0,Qn.default)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(jn.A);return n.forwardRef((function(e,n){const o=Ee(t),a=(0,Pn.A)(e),{className:r,component:i="div"}=a,c=(0,He.A)(a,On);return(0,Qe.jsx)(C,(0,we.A)({as:i,ref:n,className:(0,Ln.A)(r,l?l(I):I),theme:g&&o[g]||o},c))}))}({themeId:Te.A,defaultTheme:el,defaultClassName:_n.root,generateClassName:qn.A.generate});var tl=t(8610),Il=t(7266),nl=t(4535),ll=t(8206),Cl=t(5849),ol=t(3319),al=t(3574);function rl(e,g){e.prototype=Object.create(g.prototype),e.prototype.constructor=e,Bt(e,g)}const il=n.createContext(null);function cl(e,g){var t=Object.create(null);return e&&n.Children.map(e,(function(e){return e})).forEach((function(e){t[e.key]=function(e){return g&&(0,n.isValidElement)(e)?g(e):e}(e)})),t}function Al(e,g,t){return null!=t[g]?t[g]:e.props[g]}function dl(e,g,t){var I=cl(e.children),l=function(e,g){function t(t){return t in g?g[t]:e[t]}e=e||{},g=g||{};var I,n=Object.create(null),l=[];for(var C in e)C in g?l.length&&(n[C]=l,l=[]):l.push(C);var o={};for(var a in g){if(n[a])for(I=0;I<n[a].length;I++){var r=n[a][I];o[n[a][I]]=t(r)}o[a]=t(a)}for(I=0;I<l.length;I++)o[l[I]]=t(l[I]);return o}(g,I);return Object.keys(l).forEach((function(C){var o=l[C];if((0,n.isValidElement)(o)){var a=C in g,r=C in I,i=g[C],c=(0,n.isValidElement)(i)&&!i.props.in;!r||a&&!c?r||!a||c?r&&a&&(0,n.isValidElement)(i)&&(l[C]=(0,n.cloneElement)(o,{onExited:t.bind(null,o),in:i.props.in,exit:Al(o,"exit",e),enter:Al(o,"enter",e)})):l[C]=(0,n.cloneElement)(o,{in:!1}):l[C]=(0,n.cloneElement)(o,{onExited:t.bind(null,o),in:!0,exit:Al(o,"exit",e),enter:Al(o,"enter",e)})}})),l}var sl=Object.values||function(e){return Object.keys(e).map((function(g){return e[g]}))},ul=function(e){function g(g,t){var I,n=(I=e.call(this,g,t)||this).handleExited.bind(yt(I));return I.state={contextValue:{isMounting:!0},handleExited:n,firstRender:!0},I}rl(g,e);var t=g.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},g.getDerivedStateFromProps=function(e,g){var t,I,l=g.children,C=g.handleExited;return{children:g.firstRender?(t=e,I=C,cl(t.children,(function(e){return(0,n.cloneElement)(e,{onExited:I.bind(null,e),in:!0,appear:Al(e,"appear",t),enter:Al(e,"enter",t),exit:Al(e,"exit",t)})}))):dl(e,l,C),firstRender:!1}},t.handleExited=function(e,g){var t=cl(this.props.children);e.key in t||(e.props.onExited&&e.props.onExited(g),this.mounted&&this.setState((function(g){var t=(0,we.A)({},g.children);return delete t[e.key],{children:t}})))},t.render=function(){var e=this.props,g=e.component,t=e.childFactory,I=(0,He.A)(e,["component","childFactory"]),l=this.state.contextValue,C=sl(this.state.children).map(t);return delete I.appear,delete I.enter,delete I.exit,null===g?n.createElement(il.Provider,{value:l},C):n.createElement(il.Provider,{value:l},n.createElement(g,I,C))},g}(n.Component);ul.propTypes={},ul.defaultProps={component:"div",childFactory:function(e){return e}};const ml=ul;var bl=t(3290),Zl=t(9303);const pl=function(e){const{className:g,classes:t,pulsate:I=!1,rippleX:l,rippleY:C,rippleSize:o,in:a,onExited:r,timeout:i}=e,[c,A]=n.useState(!1),d=(0,Ln.A)(g,t.ripple,t.rippleVisible,I&&t.ripplePulsate),s={width:o,height:o,top:-o/2+C,left:-o/2+l},u=(0,Ln.A)(t.child,c&&t.childLeaving,I&&t.childPulsate);return a||c||A(!0),n.useEffect((()=>{if(!a&&null!=r){const e=setTimeout(r,i);return()=>{clearTimeout(e)}}}),[r,a,i]),(0,Qe.jsx)("span",{className:d,style:s,children:(0,Qe.jsx)("span",{className:u})})};const hl=(0,$n.A)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Gl=["center","classes","className"];let yl,Bl,Sl,Wl,Vl=e=>e;const vl=(0,bl.i7)(yl||(yl=Vl`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),Rl=(0,bl.i7)(Bl||(Bl=Vl`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),fl=(0,bl.i7)(Sl||(Sl=Vl`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),Xl=(0,nl.Ay)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),kl=(0,nl.Ay)(pl,{name:"MuiTouchRipple",slot:"Ripple"})(Wl||(Wl=Vl`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),hl.rippleVisible,vl,550,(e=>{let{theme:g}=e;return g.transitions.easing.easeInOut}),hl.ripplePulsate,(e=>{let{theme:g}=e;return g.transitions.duration.shorter}),hl.child,hl.childLeaving,Rl,550,(e=>{let{theme:g}=e;return g.transitions.easing.easeInOut}),hl.childPulsate,fl,(e=>{let{theme:g}=e;return g.transitions.easing.easeInOut})),Jl=n.forwardRef((function(e,g){const t=(0,ll.b)({props:e,name:"MuiTouchRipple"}),{center:I=!1,classes:l={},className:C}=t,o=(0,He.A)(t,Gl),[a,r]=n.useState([]),i=n.useRef(0),c=n.useRef(null);n.useEffect((()=>{c.current&&(c.current(),c.current=null)}),[a]);const A=n.useRef(!1),d=(0,Zl.A)(),s=n.useRef(null),u=n.useRef(null),m=n.useCallback((e=>{const{pulsate:g,rippleX:t,rippleY:I,rippleSize:n,cb:C}=e;r((e=>[...e,(0,Qe.jsx)(kl,{classes:{ripple:(0,Ln.A)(l.ripple,hl.ripple),rippleVisible:(0,Ln.A)(l.rippleVisible,hl.rippleVisible),ripplePulsate:(0,Ln.A)(l.ripplePulsate,hl.ripplePulsate),child:(0,Ln.A)(l.child,hl.child),childLeaving:(0,Ln.A)(l.childLeaving,hl.childLeaving),childPulsate:(0,Ln.A)(l.childPulsate,hl.childPulsate)},timeout:550,pulsate:g,rippleX:t,rippleY:I,rippleSize:n},i.current)])),i.current+=1,c.current=C}),[l]),b=n.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:n=!1,center:l=I||g.pulsate,fakeElement:C=!1}=g;if("mousedown"===(null==e?void 0:e.type)&&A.current)return void(A.current=!1);"touchstart"===(null==e?void 0:e.type)&&(A.current=!0);const o=C?null:u.current,a=o?o.getBoundingClientRect():{width:0,height:0,left:0,top:0};let r,i,c;if(l||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)r=Math.round(a.width/2),i=Math.round(a.height/2);else{const{clientX:g,clientY:t}=e.touches&&e.touches.length>0?e.touches[0]:e;r=Math.round(g-a.left),i=Math.round(t-a.top)}if(l)c=Math.sqrt((2*a.width**2+a.height**2)/3),c%2===0&&(c+=1);else{const e=2*Math.max(Math.abs((o?o.clientWidth:0)-r),r)+2,g=2*Math.max(Math.abs((o?o.clientHeight:0)-i),i)+2;c=Math.sqrt(e**2+g**2)}null!=e&&e.touches?null===s.current&&(s.current=()=>{m({pulsate:n,rippleX:r,rippleY:i,rippleSize:c,cb:t})},d.start(80,(()=>{s.current&&(s.current(),s.current=null)}))):m({pulsate:n,rippleX:r,rippleY:i,rippleSize:c,cb:t})}),[I,m,d]),Z=n.useCallback((()=>{b({},{pulsate:!0})}),[b]),p=n.useCallback(((e,g)=>{if(d.clear(),"touchend"===(null==e?void 0:e.type)&&s.current)return s.current(),s.current=null,void d.start(0,(()=>{p(e,g)}));s.current=null,r((e=>e.length>0?e.slice(1):e)),c.current=g}),[d]);return n.useImperativeHandle(g,(()=>({pulsate:Z,start:b,stop:p})),[Z,b,p]),(0,Qe.jsx)(Xl,(0,we.A)({className:(0,Ln.A)(hl.root,l.root,C),ref:u},o,{children:(0,Qe.jsx)(ml,{component:null,exit:!0,children:a})}))}));var Yl=t(2372);function wl(e){return(0,Yl.Ay)("MuiButtonBase",e)}const Hl=(0,$n.A)("MuiButtonBase",["root","disabled","focusVisible"]),Nl=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Fl=(0,nl.Ay)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,g)=>g.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Hl.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Kl=n.forwardRef((function(e,g){const t=(0,ll.b)({props:e,name:"MuiButtonBase"}),{action:I,centerRipple:l=!1,children:C,className:o,component:a="button",disabled:r=!1,disableRipple:i=!1,disableTouchRipple:c=!1,focusRipple:A=!1,LinkComponent:d="a",onBlur:s,onClick:u,onContextMenu:m,onDragLeave:b,onFocus:Z,onFocusVisible:p,onKeyDown:h,onKeyUp:G,onMouseDown:y,onMouseLeave:B,onMouseUp:S,onTouchEnd:W,onTouchMove:V,onTouchStart:v,tabIndex:R=0,TouchRippleProps:f,touchRippleRef:X,type:k}=t,J=(0,He.A)(t,Nl),Y=n.useRef(null),w=n.useRef(null),H=(0,Cl.A)(w,X),{isFocusVisibleRef:N,onFocus:F,onBlur:K,ref:x}=(0,al.A)(),[M,z]=n.useState(!1);r&&M&&z(!1),n.useImperativeHandle(I,(()=>({focusVisible:()=>{z(!0),Y.current.focus()}})),[]);const[E,D]=n.useState(!1);n.useEffect((()=>{D(!0)}),[]);const U=E&&!i&&!r;function T(e,g){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c;return(0,ol.A)((I=>{g&&g(I);return!t&&w.current&&w.current[e](I),!0}))}n.useEffect((()=>{M&&A&&!i&&E&&w.current.pulsate()}),[i,A,M,E]);const L=T("start",y),Q=T("stop",m),j=T("stop",b),P=T("stop",S),O=T("stop",(e=>{M&&e.preventDefault(),B&&B(e)})),q=T("start",v),$=T("stop",W),_=T("stop",V),ee=T("stop",(e=>{K(e),!1===N.current&&z(!1),s&&s(e)}),!1),ge=(0,ol.A)((e=>{Y.current||(Y.current=e.currentTarget),F(e),!0===N.current&&(z(!0),p&&p(e)),Z&&Z(e)})),te=()=>{const e=Y.current;return a&&"button"!==a&&!("A"===e.tagName&&e.href)},Ie=n.useRef(!1),ne=(0,ol.A)((e=>{A&&!Ie.current&&M&&w.current&&" "===e.key&&(Ie.current=!0,w.current.stop(e,(()=>{w.current.start(e)}))),e.target===e.currentTarget&&te()&&" "===e.key&&e.preventDefault(),h&&h(e),e.target===e.currentTarget&&te()&&"Enter"===e.key&&!r&&(e.preventDefault(),u&&u(e))})),le=(0,ol.A)((e=>{A&&" "===e.key&&w.current&&M&&!e.defaultPrevented&&(Ie.current=!1,w.current.stop(e,(()=>{w.current.pulsate(e)}))),G&&G(e),u&&e.target===e.currentTarget&&te()&&" "===e.key&&!e.defaultPrevented&&u(e)}));let Ce=a;"button"===Ce&&(J.href||J.to)&&(Ce=d);const oe={};"button"===Ce?(oe.type=void 0===k?"button":k,oe.disabled=r):(J.href||J.to||(oe.role="button"),r&&(oe["aria-disabled"]=r));const ae=(0,Cl.A)(g,x,Y);const re=(0,we.A)({},t,{centerRipple:l,component:a,disabled:r,disableRipple:i,disableTouchRipple:c,focusRipple:A,tabIndex:R,focusVisible:M}),ie=(e=>{const{disabled:g,focusVisible:t,focusVisibleClassName:I,classes:n}=e,l={root:["root",g&&"disabled",t&&"focusVisible"]},C=(0,tl.A)(l,wl,n);return t&&I&&(C.root+=` ${I}`),C})(re);return(0,Qe.jsxs)(Fl,(0,we.A)({as:Ce,className:(0,Ln.A)(ie.root,o),ownerState:re,onBlur:ee,onClick:u,onContextMenu:Q,onFocus:ge,onKeyDown:ne,onKeyUp:le,onMouseDown:L,onMouseLeave:O,onMouseUp:P,onDragLeave:j,onTouchEnd:$,onTouchMove:_,onTouchStart:q,ref:ae,tabIndex:r?-1:R,type:k},oe,J,{children:[C,U?(0,Qe.jsx)(Jl,(0,we.A)({ref:H,center:l},f)):null]}))}));var xl=t(6803);function Ml(e){return(0,Yl.Ay)("MuiIconButton",e)}const zl=(0,$n.A)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),El=["edge","children","className","color","disabled","disableFocusRipple","size"],Dl=(0,nl.Ay)(Kl,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,"default"!==t.color&&g[`color${(0,xl.A)(t.color)}`],t.edge&&g[`edge${(0,xl.A)(t.edge)}`],g[`size${(0,xl.A)(t.size)}`]]}})((e=>{let{theme:g,ownerState:t}=e;return(0,we.A)({textAlign:"center",flex:"0 0 auto",fontSize:g.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(g.vars||g).palette.action.active,transition:g.transitions.create("background-color",{duration:g.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:g.vars?`rgba(${g.vars.palette.action.activeChannel} / ${g.vars.palette.action.hoverOpacity})`:(0,Il.X4)(g.palette.action.active,g.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})}),(e=>{let{theme:g,ownerState:t}=e;var I;const n=null==(I=(g.vars||g).palette)?void 0:I[t.color];return(0,we.A)({},"inherit"===t.color&&{color:"inherit"},"inherit"!==t.color&&"default"!==t.color&&(0,we.A)({color:null==n?void 0:n.main},!t.disableRipple&&{"&:hover":(0,we.A)({},n&&{backgroundColor:g.vars?`rgba(${n.mainChannel} / ${g.vars.palette.action.hoverOpacity})`:(0,Il.X4)(n.main,g.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===t.size&&{padding:5,fontSize:g.typography.pxToRem(18)},"large"===t.size&&{padding:12,fontSize:g.typography.pxToRem(28)},{[`&.${zl.disabled}`]:{backgroundColor:"transparent",color:(g.vars||g).palette.action.disabled}})})),Ul=n.forwardRef((function(e,g){const t=(0,ll.b)({props:e,name:"MuiIconButton"}),{edge:I=!1,children:n,className:l,color:C="default",disabled:o=!1,disableFocusRipple:a=!1,size:r="medium"}=t,i=(0,He.A)(t,El),c=(0,we.A)({},t,{edge:I,color:C,disabled:o,disableFocusRipple:a,size:r}),A=(e=>{const{classes:g,disabled:t,color:I,edge:n,size:l}=e,C={root:["root",t&&"disabled","default"!==I&&`color${(0,xl.A)(I)}`,n&&`edge${(0,xl.A)(n)}`,`size${(0,xl.A)(l)}`]};return(0,tl.A)(C,Ml,g)})(c);return(0,Qe.jsx)(Dl,(0,we.A)({className:(0,Ln.A)(A.root,l),centerRipple:!0,focusRipple:!a,disabled:o,ref:g},i,{ownerState:c,children:n}))}));var Tl=t(7598),Ll=t(9172);const Ql=["ownerState"],jl=["variants"],Pl=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function Ol(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const ql=(0,Ke.A)(),$l=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function _l(e){let{defaultTheme:g,theme:t,themeId:I}=e;return n=t,0===Object.keys(n).length?g:t[I]||t;var n}function eC(e){return e?(g,t)=>t[e]:null}function gC(e,g){let{ownerState:t}=g,I=(0,He.A)(g,Ql);const n="function"===typeof e?e((0,we.A)({ownerState:t},I)):e;if(Array.isArray(n))return n.flatMap((e=>gC(e,(0,we.A)({ownerState:t},I))));if(n&&"object"===typeof n&&Array.isArray(n.variants)){const{variants:e=[]}=n;let g=(0,He.A)(n,jl);return e.forEach((e=>{let n=!0;"function"===typeof e.props?n=e.props((0,we.A)({ownerState:t},I,t)):Object.keys(e.props).forEach((g=>{(null==t?void 0:t[g])!==e.props[g]&&I[g]!==e.props[g]&&(n=!1)})),n&&(Array.isArray(g)||(g=[g]),g.push("function"===typeof e.style?e.style((0,we.A)({ownerState:t},I,t)):e.style))})),g}return n}const tC=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:g,defaultTheme:t=ql,rootShouldForwardProp:I=Ol,slotShouldForwardProp:n=Ol}=e,l=e=>(0,jn.A)((0,we.A)({},e,{theme:_l((0,we.A)({},e,{defaultTheme:t,themeId:g}))}));return l.__mui_systemSx=!0,function(e){let C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,Qn.internal_processStyles)(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:o,slot:a,skipVariantsResolver:r,skipSx:i,overridesResolver:c=eC($l(a))}=C,A=(0,He.A)(C,Pl),d=void 0!==r?r:a&&"Root"!==a&&"root"!==a||!1,s=i||!1;let u=Ol;"Root"===a||"root"===a?u=I:a?u=n:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(u=void 0);const m=(0,Qn.default)(e,(0,we.A)({shouldForwardProp:u,label:undefined},A)),b=e=>"function"===typeof e&&e.__emotion_real!==e||(0,Ll.Q)(e)?I=>gC(e,(0,we.A)({},I,{theme:_l({theme:I.theme,defaultTheme:t,themeId:g})})):e,Z=function(I){let n=b(I);for(var C=arguments.length,a=new Array(C>1?C-1:0),r=1;r<C;r++)a[r-1]=arguments[r];const i=a?a.map(b):[];o&&c&&i.push((e=>{const I=_l((0,we.A)({},e,{defaultTheme:t,themeId:g}));if(!I.components||!I.components[o]||!I.components[o].styleOverrides)return null;const n=I.components[o].styleOverrides,l={};return Object.entries(n).forEach((g=>{let[t,n]=g;l[t]=gC(n,(0,we.A)({},e,{theme:I}))})),c(e,l)})),o&&!d&&i.push((e=>{var I;const n=_l((0,we.A)({},e,{defaultTheme:t,themeId:g}));return gC({variants:null==n||null==(I=n.components)||null==(I=I[o])?void 0:I.variants},(0,we.A)({},e,{theme:n}))})),s||i.push(l);const A=i.length-a.length;if(Array.isArray(I)&&A>0){const e=new Array(A).fill("");n=[...I,...e],n.raw=[...I.raw,...e]}const u=m(n,...i);return e.muiName&&(u.muiName=e.muiName),u};return m.withConfig&&(Z.withConfig=m.withConfig),Z}}(),IC=["className","component","disableGutters","fixed","maxWidth","classes"],nC=(0,Ke.A)(),lC=tC("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,g[`maxWidth${(0,Tl.A)(String(t.maxWidth))}`],t.fixed&&g.fixed,t.disableGutters&&g.disableGutters]}}),CC=e=>De({props:e,name:"MuiContainer",defaultTheme:nC});const oC=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:g=lC,useThemeProps:t=CC,componentName:I="MuiContainer"}=e,l=g((e=>{let{theme:g,ownerState:t}=e;return(0,we.A)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!t.disableGutters&&{paddingLeft:g.spacing(2),paddingRight:g.spacing(2),[g.breakpoints.up("sm")]:{paddingLeft:g.spacing(3),paddingRight:g.spacing(3)}})}),(e=>{let{theme:g,ownerState:t}=e;return t.fixed&&Object.keys(g.breakpoints.values).reduce(((e,t)=>{const I=t,n=g.breakpoints.values[I];return 0!==n&&(e[g.breakpoints.up(I)]={maxWidth:`${n}${g.breakpoints.unit}`}),e}),{})}),(e=>{let{theme:g,ownerState:t}=e;return(0,we.A)({},"xs"===t.maxWidth&&{[g.breakpoints.up("xs")]:{maxWidth:Math.max(g.breakpoints.values.xs,444)}},t.maxWidth&&"xs"!==t.maxWidth&&{[g.breakpoints.up(t.maxWidth)]:{maxWidth:`${g.breakpoints.values[t.maxWidth]}${g.breakpoints.unit}`}})}));return n.forwardRef((function(e,g){const n=t(e),{className:C,component:o="div",disableGutters:a=!1,fixed:r=!1,maxWidth:i="lg"}=n,c=(0,He.A)(n,IC),A=(0,we.A)({},n,{component:o,disableGutters:a,fixed:r,maxWidth:i}),d=((e,g)=>{const{classes:t,fixed:I,disableGutters:n,maxWidth:l}=e,C={root:["root",l&&`maxWidth${(0,Tl.A)(String(l))}`,I&&"fixed",n&&"disableGutters"]};return(0,tl.A)(C,(e=>(0,Yl.Ay)(g,e)),t)})(A,I);return(0,Qe.jsx)(l,(0,we.A)({as:o,ownerState:A,className:(0,Ln.A)(d.root,C),ref:g},c))}))}({createStyledComponent:(0,nl.Ay)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,g[`maxWidth${(0,xl.A)(String(t.maxWidth))}`],t.fixed&&g.fixed,t.disableGutters&&g.disableGutters]}}),useThemeProps:e=>(0,ll.b)({props:e,name:"MuiContainer"})}),aC=e=>{let g;return g=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,(g/100).toFixed(2)};function rC(e){return(0,Yl.Ay)("MuiPaper",e)}(0,$n.A)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const iC=["className","component","elevation","square","variant"],cC=(0,nl.Ay)("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,g[t.variant],!t.square&&g.rounded,"elevation"===t.variant&&g[`elevation${t.elevation}`]]}})((e=>{let{theme:g,ownerState:t}=e;var I;return(0,we.A)({backgroundColor:(g.vars||g).palette.background.paper,color:(g.vars||g).palette.text.primary,transition:g.transitions.create("box-shadow")},!t.square&&{borderRadius:g.shape.borderRadius},"outlined"===t.variant&&{border:`1px solid ${(g.vars||g).palette.divider}`},"elevation"===t.variant&&(0,we.A)({boxShadow:(g.vars||g).shadows[t.elevation]},!g.vars&&"dark"===g.palette.mode&&{backgroundImage:`linear-gradient(${(0,Il.X4)("#fff",aC(t.elevation))}, ${(0,Il.X4)("#fff",aC(t.elevation))})`},g.vars&&{backgroundImage:null==(I=g.vars.overlays)?void 0:I[t.elevation]}))})),AC=n.forwardRef((function(e,g){const t=(0,ll.b)({props:e,name:"MuiPaper"}),{className:I,component:n="div",elevation:l=1,square:C=!1,variant:o="elevation"}=t,a=(0,He.A)(t,iC),r=(0,we.A)({},t,{component:n,elevation:l,square:C,variant:o}),i=(e=>{const{square:g,elevation:t,variant:I,classes:n}=e,l={root:["root",I,!g&&"rounded","elevation"===I&&`elevation${t}`]};return(0,tl.A)(l,rC,n)})(r);return(0,Qe.jsx)(cC,(0,we.A)({as:n,ownerState:r,className:(0,Ln.A)(i.root,I),ref:g},a))}));function dC(e){return(0,Yl.Ay)("MuiTypography",e)}(0,$n.A)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const sC=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],uC=(0,nl.Ay)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,t.variant&&g[t.variant],"inherit"!==t.align&&g[`align${(0,xl.A)(t.align)}`],t.noWrap&&g.noWrap,t.gutterBottom&&g.gutterBottom,t.paragraph&&g.paragraph]}})((e=>{let{theme:g,ownerState:t}=e;return(0,we.A)({margin:0},"inherit"===t.variant&&{font:"inherit"},"inherit"!==t.variant&&g.typography[t.variant],"inherit"!==t.align&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})})),mC={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},bC={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},ZC=n.forwardRef((function(e,g){const t=(0,ll.b)({props:e,name:"MuiTypography"}),I=(e=>bC[e]||e)(t.color),n=(0,Pn.A)((0,we.A)({},t,{color:I})),{align:l="inherit",className:C,component:o,gutterBottom:a=!1,noWrap:r=!1,paragraph:i=!1,variant:c="body1",variantMapping:A=mC}=n,d=(0,He.A)(n,sC),s=(0,we.A)({},n,{align:l,color:I,className:C,component:o,gutterBottom:a,noWrap:r,paragraph:i,variant:c,variantMapping:A}),u=o||(i?"p":A[c]||mC[c])||"span",m=(e=>{const{align:g,gutterBottom:t,noWrap:I,paragraph:n,variant:l,classes:C}=e,o={root:["root",l,"inherit"!==e.align&&`align${(0,xl.A)(g)}`,t&&"gutterBottom",I&&"noWrap",n&&"paragraph"]};return(0,tl.A)(o,dC,C)})(s);return(0,Qe.jsx)(uC,(0,we.A)({as:u,ref:g,ownerState:s,className:(0,Ln.A)(m.root,C)},d))}));var pC=t(5844),hC=t(7868);const GC=function(e){return"string"===typeof e};var yC=t(3462),BC=t(3940),SC=t(3468);const WC=["onChange","maxRows","minRows","style","value"];function VC(e){return parseInt(e,10)||0}const vC={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};const RC=n.forwardRef((function(e,g){const{onChange:t,maxRows:I,minRows:l=1,style:C,value:o}=e,a=(0,He.A)(e,WC),{current:r}=n.useRef(null!=o),i=n.useRef(null),c=(0,yC.A)(g,i),A=n.useRef(null),d=n.useRef(null),s=n.useCallback((()=>{const g=i.current,t=(0,BC.A)(g).getComputedStyle(g);if("0px"===t.width)return{outerHeightStyle:0,overflowing:!1};const n=d.current;n.style.width=t.width,n.value=g.value||e.placeholder||"x","\n"===n.value.slice(-1)&&(n.value+=" ");const C=t.boxSizing,o=VC(t.paddingBottom)+VC(t.paddingTop),a=VC(t.borderBottomWidth)+VC(t.borderTopWidth),r=n.scrollHeight;n.value="x";const c=n.scrollHeight;let A=r;l&&(A=Math.max(Number(l)*c,A)),I&&(A=Math.min(Number(I)*c,A)),A=Math.max(A,c);return{outerHeightStyle:A+("border-box"===C?o+a:0),overflowing:Math.abs(A-r)<=1}}),[I,l,e.placeholder]),u=n.useCallback((()=>{const e=s();if(void 0===(g=e)||null===g||0===Object.keys(g).length||0===g.outerHeightStyle&&!g.overflowing)return;var g;const t=e.outerHeightStyle,I=i.current;A.current!==t&&(A.current=t,I.style.height=`${t}px`),I.style.overflow=e.overflowing?"hidden":""}),[s]);(0,Vn.A)((()=>{const e=()=>{u()};let g;const t=(0,SC.A)(e),I=i.current,n=(0,BC.A)(I);let l;return n.addEventListener("resize",t),"undefined"!==typeof ResizeObserver&&(l=new ResizeObserver(e),l.observe(I)),()=>{t.clear(),cancelAnimationFrame(g),n.removeEventListener("resize",t),l&&l.disconnect()}}),[s,u]),(0,Vn.A)((()=>{u()}));return(0,Qe.jsxs)(n.Fragment,{children:[(0,Qe.jsx)("textarea",(0,we.A)({value:o,onChange:e=>{r||u(),t&&t(e)},ref:c,rows:l,style:C},a)),(0,Qe.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:d,tabIndex:-1,style:(0,we.A)({},vC,C,{paddingTop:0,paddingBottom:0})})]})}));function fC(e){let{props:g,states:t,muiFormControl:I}=e;return t.reduce(((e,t)=>(e[t]=g[t],I&&"undefined"===typeof g[t]&&(e[t]=I[t]),e)),{})}const XC=n.createContext(void 0);function kC(){return n.useContext(XC)}var JC=t(5013),YC=t(869);const wC=function(e){let{styles:g,themeId:t,defaultTheme:I={}}=e;const n=Ee(I),l="function"===typeof g?g(t&&n[t]||n):g;return(0,Qe.jsx)(YC.A,{styles:l})};const HC=function(e){return(0,Qe.jsx)(wC,(0,we.A)({},e,{defaultTheme:Ue.A,themeId:Te.A}))};function NC(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function FC(e){let g=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(NC(e.value)&&""!==e.value||g&&NC(e.defaultValue)&&""!==e.defaultValue)}function KC(e){return(0,Yl.Ay)("MuiInputBase",e)}const xC=(0,$n.A)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),MC=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],zC=(e,g)=>{const{ownerState:t}=e;return[g.root,t.formControl&&g.formControl,t.startAdornment&&g.adornedStart,t.endAdornment&&g.adornedEnd,t.error&&g.error,"small"===t.size&&g.sizeSmall,t.multiline&&g.multiline,t.color&&g[`color${(0,xl.A)(t.color)}`],t.fullWidth&&g.fullWidth,t.hiddenLabel&&g.hiddenLabel]},EC=(e,g)=>{const{ownerState:t}=e;return[g.input,"small"===t.size&&g.inputSizeSmall,t.multiline&&g.inputMultiline,"search"===t.type&&g.inputTypeSearch,t.startAdornment&&g.inputAdornedStart,t.endAdornment&&g.inputAdornedEnd,t.hiddenLabel&&g.inputHiddenLabel]},DC=(0,nl.Ay)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:zC})((e=>{let{theme:g,ownerState:t}=e;return(0,we.A)({},g.typography.body1,{color:(g.vars||g).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${xC.disabled}`]:{color:(g.vars||g).palette.text.disabled,cursor:"default"}},t.multiline&&(0,we.A)({padding:"4px 0 5px"},"small"===t.size&&{paddingTop:1}),t.fullWidth&&{width:"100%"})})),UC=(0,nl.Ay)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:EC})((e=>{let{theme:g,ownerState:t}=e;const I="light"===g.palette.mode,n=(0,we.A)({color:"currentColor"},g.vars?{opacity:g.vars.opacity.inputPlaceholder}:{opacity:I?.42:.5},{transition:g.transitions.create("opacity",{duration:g.transitions.duration.shorter})}),l={opacity:"0 !important"},C=g.vars?{opacity:g.vars.opacity.inputPlaceholder}:{opacity:I?.42:.5};return(0,we.A)({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&:-ms-input-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${xC.formControl} &`]:{"&::-webkit-input-placeholder":l,"&::-moz-placeholder":l,"&:-ms-input-placeholder":l,"&::-ms-input-placeholder":l,"&:focus::-webkit-input-placeholder":C,"&:focus::-moz-placeholder":C,"&:focus:-ms-input-placeholder":C,"&:focus::-ms-input-placeholder":C},[`&.${xC.disabled}`]:{opacity:1,WebkitTextFillColor:(g.vars||g).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},"small"===t.size&&{paddingTop:1},t.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===t.type&&{MozAppearance:"textfield"})})),TC=(0,Qe.jsx)(HC,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),LC=n.forwardRef((function(e,g){var t;const I=(0,ll.b)({props:e,name:"MuiInputBase"}),{"aria-describedby":l,autoComplete:C,autoFocus:o,className:a,components:r={},componentsProps:i={},defaultValue:c,disabled:A,disableInjectingGlobalStyles:d,endAdornment:s,fullWidth:u=!1,id:m,inputComponent:b="input",inputProps:Z={},inputRef:p,maxRows:h,minRows:G,multiline:y=!1,name:B,onBlur:S,onChange:W,onClick:V,onFocus:v,onKeyDown:R,onKeyUp:f,placeholder:X,readOnly:k,renderSuffix:J,rows:Y,slotProps:w={},slots:H={},startAdornment:N,type:F="text",value:K}=I,x=(0,He.A)(I,MC),M=null!=Z.value?Z.value:K,{current:z}=n.useRef(null!=M),E=n.useRef(),D=n.useCallback((e=>{0}),[]),U=(0,Cl.A)(E,p,Z.ref,D),[T,L]=n.useState(!1),Q=kC();const j=fC({props:I,muiFormControl:Q,states:["color","disabled","error","hiddenLabel","size","required","filled"]});j.focused=Q?Q.focused:T,n.useEffect((()=>{!Q&&A&&T&&(L(!1),S&&S())}),[Q,A,T,S]);const P=Q&&Q.onFilled,O=Q&&Q.onEmpty,q=n.useCallback((e=>{FC(e)?P&&P():O&&O()}),[P,O]);(0,JC.A)((()=>{z&&q({value:M})}),[M,q,z]);n.useEffect((()=>{q(E.current)}),[]);let $=b,_=Z;y&&"input"===$&&(_=Y?(0,we.A)({type:void 0,minRows:Y,maxRows:Y},_):(0,we.A)({type:void 0,maxRows:h,minRows:G},_),$=RC);n.useEffect((()=>{Q&&Q.setAdornedStart(Boolean(N))}),[Q,N]);const ee=(0,we.A)({},I,{color:j.color||"primary",disabled:j.disabled,endAdornment:s,error:j.error,focused:j.focused,formControl:Q,fullWidth:u,hiddenLabel:j.hiddenLabel,multiline:y,size:j.size,startAdornment:N,type:F}),ge=(e=>{const{classes:g,color:t,disabled:I,error:n,endAdornment:l,focused:C,formControl:o,fullWidth:a,hiddenLabel:r,multiline:i,readOnly:c,size:A,startAdornment:d,type:s}=e,u={root:["root",`color${(0,xl.A)(t)}`,I&&"disabled",n&&"error",a&&"fullWidth",C&&"focused",o&&"formControl",A&&"medium"!==A&&`size${(0,xl.A)(A)}`,i&&"multiline",d&&"adornedStart",l&&"adornedEnd",r&&"hiddenLabel",c&&"readOnly"],input:["input",I&&"disabled","search"===s&&"inputTypeSearch",i&&"inputMultiline","small"===A&&"inputSizeSmall",r&&"inputHiddenLabel",d&&"inputAdornedStart",l&&"inputAdornedEnd",c&&"readOnly"]};return(0,tl.A)(u,KC,g)})(ee),te=H.root||r.Root||DC,Ie=w.root||i.root||{},ne=H.input||r.Input||UC;return _=(0,we.A)({},_,null!=(t=w.input)?t:i.input),(0,Qe.jsxs)(n.Fragment,{children:[!d&&TC,(0,Qe.jsxs)(te,(0,we.A)({},Ie,!GC(te)&&{ownerState:(0,we.A)({},ee,Ie.ownerState)},{ref:g,onClick:e=>{E.current&&e.currentTarget===e.target&&E.current.focus(),V&&V(e)}},x,{className:(0,Ln.A)(ge.root,Ie.className,a,k&&"MuiInputBase-readOnly"),children:[N,(0,Qe.jsx)(XC.Provider,{value:null,children:(0,Qe.jsx)(ne,(0,we.A)({ownerState:ee,"aria-invalid":j.error,"aria-describedby":l,autoComplete:C,autoFocus:o,defaultValue:c,disabled:j.disabled,id:m,onAnimationStart:e=>{q("mui-auto-fill-cancel"===e.animationName?E.current:{value:"x"})},name:B,placeholder:X,readOnly:k,required:j.required,rows:Y,value:M,onKeyDown:R,onKeyUp:f,type:F},_,!GC(ne)&&{as:$,ownerState:(0,we.A)({},ee,_.ownerState)},{ref:U,className:(0,Ln.A)(ge.input,_.className,k&&"MuiInputBase-readOnly"),onBlur:e=>{S&&S(e),Z.onBlur&&Z.onBlur(e),Q&&Q.onBlur?Q.onBlur(e):L(!1)},onChange:function(e){if(!z){const g=e.target||E.current;if(null==g)throw new Error((0,hC.A)(1));q({value:g.value})}for(var g=arguments.length,t=new Array(g>1?g-1:0),I=1;I<g;I++)t[I-1]=arguments[I];Z.onChange&&Z.onChange(e,...t),W&&W(e,...t)},onFocus:e=>{j.disabled?e.stopPropagation():(v&&v(e),Z.onFocus&&Z.onFocus(e),Q&&Q.onFocus?Q.onFocus(e):L(!0))}}))}),s,J?J((0,we.A)({},j,{startAdornment:N})):null]}))]})}));var QC=t(1475);function jC(e){return(0,Yl.Ay)("MuiInput",e)}const PC=(0,we.A)({},xC,(0,$n.A)("MuiInput",["root","underline","input"])),OC=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],qC=(0,nl.Ay)(DC,{shouldForwardProp:e=>(0,QC.A)(e)||"classes"===e,name:"MuiInput",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[...zC(e,g),!t.disableUnderline&&g.underline]}})((e=>{let{theme:g,ownerState:t}=e;let I="light"===g.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return g.vars&&(I=`rgba(${g.vars.palette.common.onBackgroundChannel} / ${g.vars.opacity.inputUnderline})`),(0,we.A)({position:"relative"},t.formControl&&{"label + &":{marginTop:16}},!t.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(g.vars||g).palette[t.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:g.transitions.create("transform",{duration:g.transitions.duration.shorter,easing:g.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${PC.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${PC.error}`]:{"&::before, &::after":{borderBottomColor:(g.vars||g).palette.error.main}},"&::before":{borderBottom:`1px solid ${I}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:g.transitions.create("border-bottom-color",{duration:g.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${PC.disabled}, .${PC.error}):before`]:{borderBottom:`2px solid ${(g.vars||g).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${I}`}},[`&.${PC.disabled}:before`]:{borderBottomStyle:"dotted"}})})),$C=(0,nl.Ay)(UC,{name:"MuiInput",slot:"Input",overridesResolver:EC})({}),_C=n.forwardRef((function(e,g){var t,I,n,l;const C=(0,ll.b)({props:e,name:"MuiInput"}),{disableUnderline:o,components:a={},componentsProps:r,fullWidth:i=!1,inputComponent:c="input",multiline:A=!1,slotProps:d,slots:s={},type:u="text"}=C,m=(0,He.A)(C,OC),b=(e=>{const{classes:g,disableUnderline:t}=e,I={root:["root",!t&&"underline"],input:["input"]},n=(0,tl.A)(I,jC,g);return(0,we.A)({},g,n)})(C),Z={root:{ownerState:{disableUnderline:o}}},p=(null!=d?d:r)?(0,Ll.A)(null!=d?d:r,Z):Z,h=null!=(t=null!=(I=s.root)?I:a.Root)?t:qC,G=null!=(n=null!=(l=s.input)?l:a.Input)?n:$C;return(0,Qe.jsx)(LC,(0,we.A)({slots:{root:h,input:G},slotProps:p,fullWidth:i,inputComponent:c,multiline:A,ref:g,type:u},m,{classes:b}))}));_C.muiName="Input";const eo=_C;function go(e){return(0,Yl.Ay)("MuiFilledInput",e)}const to=(0,we.A)({},xC,(0,$n.A)("MuiFilledInput",["root","underline","input"])),Io=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],no=(0,nl.Ay)(DC,{shouldForwardProp:e=>(0,QC.A)(e)||"classes"===e,name:"MuiFilledInput",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[...zC(e,g),!t.disableUnderline&&g.underline]}})((e=>{let{theme:g,ownerState:t}=e;var I;const n="light"===g.palette.mode,l=n?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",C=n?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",o=n?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=n?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return(0,we.A)({position:"relative",backgroundColor:g.vars?g.vars.palette.FilledInput.bg:C,borderTopLeftRadius:(g.vars||g).shape.borderRadius,borderTopRightRadius:(g.vars||g).shape.borderRadius,transition:g.transitions.create("background-color",{duration:g.transitions.duration.shorter,easing:g.transitions.easing.easeOut}),"&:hover":{backgroundColor:g.vars?g.vars.palette.FilledInput.hoverBg:o,"@media (hover: none)":{backgroundColor:g.vars?g.vars.palette.FilledInput.bg:C}},[`&.${to.focused}`]:{backgroundColor:g.vars?g.vars.palette.FilledInput.bg:C},[`&.${to.disabled}`]:{backgroundColor:g.vars?g.vars.palette.FilledInput.disabledBg:a}},!t.disableUnderline&&{"&::after":{borderBottom:`2px solid ${null==(I=(g.vars||g).palette[t.color||"primary"])?void 0:I.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:g.transitions.create("transform",{duration:g.transitions.duration.shorter,easing:g.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${to.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${to.error}`]:{"&::before, &::after":{borderBottomColor:(g.vars||g).palette.error.main}},"&::before":{borderBottom:`1px solid ${g.vars?`rgba(${g.vars.palette.common.onBackgroundChannel} / ${g.vars.opacity.inputUnderline})`:l}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:g.transitions.create("border-bottom-color",{duration:g.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${to.disabled}, .${to.error}):before`]:{borderBottom:`1px solid ${(g.vars||g).palette.text.primary}`},[`&.${to.disabled}:before`]:{borderBottomStyle:"dotted"}},t.startAdornment&&{paddingLeft:12},t.endAdornment&&{paddingRight:12},t.multiline&&(0,we.A)({padding:"25px 12px 8px"},"small"===t.size&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.hiddenLabel&&"small"===t.size&&{paddingTop:8,paddingBottom:9}))})),lo=(0,nl.Ay)(UC,{name:"MuiFilledInput",slot:"Input",overridesResolver:EC})((e=>{let{theme:g,ownerState:t}=e;return(0,we.A)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!g.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===g.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===g.palette.mode?null:"#fff",caretColor:"light"===g.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},g.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[g.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===t.size&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0},t.hiddenLabel&&"small"===t.size&&{paddingTop:8,paddingBottom:9},t.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})})),Co=n.forwardRef((function(e,g){var t,I,n,l;const C=(0,ll.b)({props:e,name:"MuiFilledInput"}),{components:o={},componentsProps:a,fullWidth:r=!1,inputComponent:i="input",multiline:c=!1,slotProps:A,slots:d={},type:s="text"}=C,u=(0,He.A)(C,Io),m=(0,we.A)({},C,{fullWidth:r,inputComponent:i,multiline:c,type:s}),b=(e=>{const{classes:g,disableUnderline:t}=e,I={root:["root",!t&&"underline"],input:["input"]},n=(0,tl.A)(I,go,g);return(0,we.A)({},g,n)})(C),Z={root:{ownerState:m},input:{ownerState:m}},p=(null!=A?A:a)?(0,Ll.A)(Z,null!=A?A:a):Z,h=null!=(t=null!=(I=d.root)?I:o.Root)?t:no,G=null!=(n=null!=(l=d.input)?l:o.Input)?n:lo;return(0,Qe.jsx)(LC,(0,we.A)({slots:{root:h,input:G},componentsProps:p,fullWidth:r,inputComponent:i,multiline:c,ref:g,type:s},u,{classes:b}))}));Co.muiName="Input";const oo=Co;var ao;const ro=["children","classes","className","label","notched"],io=(0,nl.Ay)("fieldset",{shouldForwardProp:QC.A})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),co=(0,nl.Ay)("legend",{shouldForwardProp:QC.A})((e=>{let{ownerState:g,theme:t}=e;return(0,we.A)({float:"unset",width:"auto",overflow:"hidden"},!g.withLabel&&{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})},g.withLabel&&(0,we.A)({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},g.notched&&{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}))}));function Ao(e){return(0,Yl.Ay)("MuiOutlinedInput",e)}const so=(0,we.A)({},xC,(0,$n.A)("MuiOutlinedInput",["root","notchedOutline","input"])),uo=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],mo=(0,nl.Ay)(DC,{shouldForwardProp:e=>(0,QC.A)(e)||"classes"===e,name:"MuiOutlinedInput",slot:"Root",overridesResolver:zC})((e=>{let{theme:g,ownerState:t}=e;const I="light"===g.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,we.A)({position:"relative",borderRadius:(g.vars||g).shape.borderRadius,[`&:hover .${so.notchedOutline}`]:{borderColor:(g.vars||g).palette.text.primary},"@media (hover: none)":{[`&:hover .${so.notchedOutline}`]:{borderColor:g.vars?`rgba(${g.vars.palette.common.onBackgroundChannel} / 0.23)`:I}},[`&.${so.focused} .${so.notchedOutline}`]:{borderColor:(g.vars||g).palette[t.color].main,borderWidth:2},[`&.${so.error} .${so.notchedOutline}`]:{borderColor:(g.vars||g).palette.error.main},[`&.${so.disabled} .${so.notchedOutline}`]:{borderColor:(g.vars||g).palette.action.disabled}},t.startAdornment&&{paddingLeft:14},t.endAdornment&&{paddingRight:14},t.multiline&&(0,we.A)({padding:"16.5px 14px"},"small"===t.size&&{padding:"8.5px 14px"}))})),bo=(0,nl.Ay)((function(e){const{className:g,label:t,notched:I}=e,n=(0,He.A)(e,ro),l=null!=t&&""!==t,C=(0,we.A)({},e,{notched:I,withLabel:l});return(0,Qe.jsx)(io,(0,we.A)({"aria-hidden":!0,className:g,ownerState:C},n,{children:(0,Qe.jsx)(co,{ownerState:C,children:l?(0,Qe.jsx)("span",{children:t}):ao||(ao=(0,Qe.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,g)=>g.notchedOutline})((e=>{let{theme:g}=e;const t="light"===g.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:g.vars?`rgba(${g.vars.palette.common.onBackgroundChannel} / 0.23)`:t}})),Zo=(0,nl.Ay)(UC,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:EC})((e=>{let{theme:g,ownerState:t}=e;return(0,we.A)({padding:"16.5px 14px"},!g.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===g.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===g.palette.mode?null:"#fff",caretColor:"light"===g.palette.mode?null:"#fff",borderRadius:"inherit"}},g.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[g.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===t.size&&{padding:"8.5px 14px"},t.multiline&&{padding:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0})})),po=n.forwardRef((function(e,g){var t,I,l,C,o;const a=(0,ll.b)({props:e,name:"MuiOutlinedInput"}),{components:r={},fullWidth:i=!1,inputComponent:c="input",label:A,multiline:d=!1,notched:s,slots:u={},type:m="text"}=a,b=(0,He.A)(a,uo),Z=(e=>{const{classes:g}=e,t=(0,tl.A)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Ao,g);return(0,we.A)({},g,t)})(a),p=kC(),h=fC({props:a,muiFormControl:p,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),G=(0,we.A)({},a,{color:h.color||"primary",disabled:h.disabled,error:h.error,focused:h.focused,formControl:p,fullWidth:i,hiddenLabel:h.hiddenLabel,multiline:d,size:h.size,type:m}),y=null!=(t=null!=(I=u.root)?I:r.Root)?t:mo,B=null!=(l=null!=(C=u.input)?C:r.Input)?l:Zo;return(0,Qe.jsx)(LC,(0,we.A)({slots:{root:y,input:B},renderSuffix:e=>(0,Qe.jsx)(bo,{ownerState:G,className:Z.notchedOutline,label:null!=A&&""!==A&&h.required?o||(o=(0,Qe.jsxs)(n.Fragment,{children:[A,"\u2009","*"]})):A,notched:"undefined"!==typeof s?s:Boolean(e.startAdornment||e.filled||e.focused)}),fullWidth:i,inputComponent:c,multiline:d,ref:g,type:m},b,{classes:(0,we.A)({},Z,{notchedOutline:null})}))}));po.muiName="Input";const ho=po;function Go(e){return(0,Yl.Ay)("MuiFormLabel",e)}const yo=(0,$n.A)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Bo=["children","className","color","component","disabled","error","filled","focused","required"],So=(0,nl.Ay)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,g)=>{let{ownerState:t}=e;return(0,we.A)({},g.root,"secondary"===t.color&&g.colorSecondary,t.filled&&g.filled)}})((e=>{let{theme:g,ownerState:t}=e;return(0,we.A)({color:(g.vars||g).palette.text.secondary},g.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${yo.focused}`]:{color:(g.vars||g).palette[t.color].main},[`&.${yo.disabled}`]:{color:(g.vars||g).palette.text.disabled},[`&.${yo.error}`]:{color:(g.vars||g).palette.error.main}})})),Wo=(0,nl.Ay)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,g)=>g.asterisk})((e=>{let{theme:g}=e;return{[`&.${yo.error}`]:{color:(g.vars||g).palette.error.main}}})),Vo=n.forwardRef((function(e,g){const t=(0,ll.b)({props:e,name:"MuiFormLabel"}),{children:I,className:n,component:l="label"}=t,C=(0,He.A)(t,Bo),o=fC({props:t,muiFormControl:kC(),states:["color","required","focused","disabled","error","filled"]}),a=(0,we.A)({},t,{color:o.color||"primary",component:l,disabled:o.disabled,error:o.error,filled:o.filled,focused:o.focused,required:o.required}),r=(e=>{const{classes:g,color:t,focused:I,disabled:n,error:l,filled:C,required:o}=e,a={root:["root",`color${(0,xl.A)(t)}`,n&&"disabled",l&&"error",C&&"filled",I&&"focused",o&&"required"],asterisk:["asterisk",l&&"error"]};return(0,tl.A)(a,Go,g)})(a);return(0,Qe.jsxs)(So,(0,we.A)({as:l,ownerState:a,className:(0,Ln.A)(r.root,n),ref:g},C,{children:[I,o.required&&(0,Qe.jsxs)(Wo,{ownerState:a,"aria-hidden":!0,className:r.asterisk,children:["\u2009","*"]})]}))}));function vo(e){return(0,Yl.Ay)("MuiInputLabel",e)}(0,$n.A)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Ro=["disableAnimation","margin","shrink","variant","className"],fo=(0,nl.Ay)(Vo,{shouldForwardProp:e=>(0,QC.A)(e)||"classes"===e,name:"MuiInputLabel",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[{[`& .${yo.asterisk}`]:g.asterisk},g.root,t.formControl&&g.formControl,"small"===t.size&&g.sizeSmall,t.shrink&&g.shrink,!t.disableAnimation&&g.animated,t.focused&&g.focused,g[t.variant]]}})((e=>{let{theme:g,ownerState:t}=e;return(0,we.A)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},t.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===t.size&&{transform:"translate(0, 17px) scale(1)"},t.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!t.disableAnimation&&{transition:g.transitions.create(["color","transform","max-width"],{duration:g.transitions.duration.shorter,easing:g.transitions.easing.easeOut})},"filled"===t.variant&&(0,we.A)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===t.size&&{transform:"translate(12px, 13px) scale(1)"},t.shrink&&(0,we.A)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===t.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===t.variant&&(0,we.A)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===t.size&&{transform:"translate(14px, 9px) scale(1)"},t.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))})),Xo=n.forwardRef((function(e,g){const t=(0,ll.b)({name:"MuiInputLabel",props:e}),{disableAnimation:I=!1,shrink:n,className:l}=t,C=(0,He.A)(t,Ro),o=kC();let a=n;"undefined"===typeof a&&o&&(a=o.filled||o.focused||o.adornedStart);const r=fC({props:t,muiFormControl:o,states:["size","variant","required","focused"]}),i=(0,we.A)({},t,{disableAnimation:I,formControl:o,shrink:a,size:r.size,variant:r.variant,required:r.required,focused:r.focused}),c=(e=>{const{classes:g,formControl:t,size:I,shrink:n,disableAnimation:l,variant:C,required:o}=e,a={root:["root",t&&"formControl",!l&&"animated",n&&"shrink",I&&"normal"!==I&&`size${(0,xl.A)(I)}`,C],asterisk:[o&&"asterisk"]},r=(0,tl.A)(a,vo,g);return(0,we.A)({},g,r)})(i);return(0,Qe.jsx)(fo,(0,we.A)({"data-shrink":a,ownerState:i,ref:g,className:(0,Ln.A)(c.root,l)},C,{classes:c}))}));var ko=t(7328);function Jo(e){return(0,Yl.Ay)("MuiFormControl",e)}(0,$n.A)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Yo=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],wo=(0,nl.Ay)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,g)=>{let{ownerState:t}=e;return(0,we.A)({},g.root,g[`margin${(0,xl.A)(t.margin)}`],t.fullWidth&&g.fullWidth)}})((e=>{let{ownerState:g}=e;return(0,we.A)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===g.margin&&{marginTop:16,marginBottom:8},"dense"===g.margin&&{marginTop:8,marginBottom:4},g.fullWidth&&{width:"100%"})})),Ho=n.forwardRef((function(e,g){const t=(0,ll.b)({props:e,name:"MuiFormControl"}),{children:I,className:l,color:C="primary",component:o="div",disabled:a=!1,error:r=!1,focused:i,fullWidth:c=!1,hiddenLabel:A=!1,margin:d="none",required:s=!1,size:u="medium",variant:m="outlined"}=t,b=(0,He.A)(t,Yo),Z=(0,we.A)({},t,{color:C,component:o,disabled:a,error:r,fullWidth:c,hiddenLabel:A,margin:d,required:s,size:u,variant:m}),p=(e=>{const{classes:g,margin:t,fullWidth:I}=e,n={root:["root","none"!==t&&`margin${(0,xl.A)(t)}`,I&&"fullWidth"]};return(0,tl.A)(n,Jo,g)})(Z),[h,G]=n.useState((()=>{let e=!1;return I&&n.Children.forEach(I,(g=>{if(!(0,ko.A)(g,["Input","Select"]))return;const t=(0,ko.A)(g,["Select"])?g.props.input:g;t&&t.props.startAdornment&&(e=!0)})),e})),[y,B]=n.useState((()=>{let e=!1;return I&&n.Children.forEach(I,(g=>{(0,ko.A)(g,["Input","Select"])&&(FC(g.props,!0)||FC(g.props.inputProps,!0))&&(e=!0)})),e})),[S,W]=n.useState(!1);a&&S&&W(!1);const V=void 0===i||a?S:i;let v;const R=n.useMemo((()=>({adornedStart:h,setAdornedStart:G,color:C,disabled:a,error:r,filled:y,focused:V,fullWidth:c,hiddenLabel:A,size:u,onBlur:()=>{W(!1)},onEmpty:()=>{B(!1)},onFilled:()=>{B(!0)},onFocus:()=>{W(!0)},registerEffect:v,required:s,variant:m})),[h,C,a,r,y,V,c,A,v,s,u,m]);return(0,Qe.jsx)(XC.Provider,{value:R,children:(0,Qe.jsx)(wo,(0,we.A)({as:o,ownerState:Z,className:(0,Ln.A)(p.root,l),ref:g},b,{children:I}))})}));function No(e){return(0,Yl.Ay)("MuiFormHelperText",e)}const Fo=(0,$n.A)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var Ko;const xo=["children","className","component","disabled","error","filled","focused","margin","required","variant"],Mo=(0,nl.Ay)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,t.size&&g[`size${(0,xl.A)(t.size)}`],t.contained&&g.contained,t.filled&&g.filled]}})((e=>{let{theme:g,ownerState:t}=e;return(0,we.A)({color:(g.vars||g).palette.text.secondary},g.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${Fo.disabled}`]:{color:(g.vars||g).palette.text.disabled},[`&.${Fo.error}`]:{color:(g.vars||g).palette.error.main}},"small"===t.size&&{marginTop:4},t.contained&&{marginLeft:14,marginRight:14})})),zo=n.forwardRef((function(e,g){const t=(0,ll.b)({props:e,name:"MuiFormHelperText"}),{children:I,className:n,component:l="p"}=t,C=(0,He.A)(t,xo),o=fC({props:t,muiFormControl:kC(),states:["variant","size","disabled","error","filled","focused","required"]}),a=(0,we.A)({},t,{component:l,contained:"filled"===o.variant||"outlined"===o.variant,variant:o.variant,size:o.size,disabled:o.disabled,error:o.error,filled:o.filled,focused:o.focused,required:o.required}),r=(e=>{const{classes:g,contained:t,size:I,disabled:n,error:l,filled:C,focused:o,required:a}=e,r={root:["root",n&&"disabled",l&&"error",I&&`size${(0,xl.A)(I)}`,t&&"contained",o&&"focused",C&&"filled",a&&"required"]};return(0,tl.A)(r,No,g)})(a);return(0,Qe.jsx)(Mo,(0,we.A)({as:l,ownerState:a,className:(0,Ln.A)(r.root,n),ref:g},C,{children:" "===I?Ko||(Ko=(0,Qe.jsx)("span",{className:"notranslate",children:"\u200b"})):I}))}));function Eo(e){var g;return parseInt(n.version,10)>=19?(null==e||null==(g=e.props)?void 0:g.ref)||null:(null==e?void 0:e.ref)||null}var Do=t(2427);const Uo=function(e,g,t){return void 0===e||GC(e)?g:(0,we.A)({},g,{ownerState:(0,we.A)({},g.ownerState,t)})};const To=function(e){let g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};const t={};return Object.keys(e).filter((t=>t.match(/^on[A-Z]/)&&"function"===typeof e[t]&&!g.includes(t))).forEach((g=>{t[g]=e[g]})),t};const Lo=function(e){if(void 0===e)return{};const g={};return Object.keys(e).filter((g=>!(g.match(/^on[A-Z]/)&&"function"===typeof e[g]))).forEach((t=>{g[t]=e[t]})),g};const Qo=function(e){const{getSlotProps:g,additionalProps:t,externalSlotProps:I,externalForwardedProps:n,className:l}=e;if(!g){const e=(0,Ln.A)(null==t?void 0:t.className,l,null==n?void 0:n.className,null==I?void 0:I.className),g=(0,we.A)({},null==t?void 0:t.style,null==n?void 0:n.style,null==I?void 0:I.style),C=(0,we.A)({},t,n,I);return e.length>0&&(C.className=e),Object.keys(g).length>0&&(C.style=g),{props:C,internalRef:void 0}}const C=To((0,we.A)({},n,I)),o=Lo(I),a=Lo(n),r=g(C),i=(0,Ln.A)(null==r?void 0:r.className,null==t?void 0:t.className,l,null==n?void 0:n.className,null==I?void 0:I.className),c=(0,we.A)({},null==r?void 0:r.style,null==t?void 0:t.style,null==n?void 0:n.style,null==I?void 0:I.style),A=(0,we.A)({},r,t,a,o);return i.length>0&&(A.className=i),Object.keys(c).length>0&&(A.style=c),{props:A,internalRef:r.ref}};const jo=function(e,g,t){return"function"===typeof e?e(g,t):e},Po=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];const Oo=function(e){var g;const{elementType:t,externalSlotProps:I,ownerState:n,skipResolvingSlotProps:l=!1}=e,C=(0,He.A)(e,Po),o=l?{}:jo(I,n),{props:a,internalRef:r}=Qo((0,we.A)({},C,{externalSlotProps:o})),i=(0,yC.A)(r,null==o?void 0:o.ref,null==(g=e.additionalProps)?void 0:g.ref);return Uo(t,(0,we.A)({},a,{ref:i}),n)};const qo=n.createContext({});function $o(e){return(0,Yl.Ay)("MuiList",e)}(0,$n.A)("MuiList",["root","padding","dense","subheader"]);const _o=["children","className","component","dense","disablePadding","subheader"],ea=(0,nl.Ay)("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,!t.disablePadding&&g.padding,t.dense&&g.dense,t.subheader&&g.subheader]}})((e=>{let{ownerState:g}=e;return(0,we.A)({listStyle:"none",margin:0,padding:0,position:"relative"},!g.disablePadding&&{paddingTop:8,paddingBottom:8},g.subheader&&{paddingTop:0})})),ga=n.forwardRef((function(e,g){const t=(0,ll.b)({props:e,name:"MuiList"}),{children:I,className:l,component:C="ul",dense:o=!1,disablePadding:a=!1,subheader:r}=t,i=(0,He.A)(t,_o),c=n.useMemo((()=>({dense:o})),[o]),A=(0,we.A)({},t,{component:C,dense:o,disablePadding:a}),d=(e=>{const{classes:g,disablePadding:t,dense:I,subheader:n}=e,l={root:["root",!t&&"padding",I&&"dense",n&&"subheader"]};return(0,tl.A)(l,$o,g)})(A);return(0,Qe.jsx)(qo.Provider,{value:c,children:(0,Qe.jsxs)(ea,(0,we.A)({as:C,className:(0,Ln.A)(d.root,l),ref:g,ownerState:A},i,{children:[r,I]}))})}));function ta(e){const g=e.documentElement.clientWidth;return Math.abs(window.innerWidth-g)}const Ia=ta,na=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function la(e,g,t){return e===g?e.firstChild:g&&g.nextElementSibling?g.nextElementSibling:t?null:e.firstChild}function Ca(e,g,t){return e===g?t?e.firstChild:e.lastChild:g&&g.previousElementSibling?g.previousElementSibling:t?null:e.lastChild}function oa(e,g){if(void 0===g)return!0;let t=e.innerText;return void 0===t&&(t=e.textContent),t=t.trim().toLowerCase(),0!==t.length&&(g.repeating?t[0]===g.keys[0]:0===t.indexOf(g.keys.join("")))}function aa(e,g,t,I,n,l){let C=!1,o=n(e,g,!!g&&t);for(;o;){if(o===e.firstChild){if(C)return!1;C=!0}const g=!I&&(o.disabled||"true"===o.getAttribute("aria-disabled"));if(o.hasAttribute("tabindex")&&oa(o,l)&&!g)return o.focus(),!0;o=n(e,o,t)}return!1}const ra=n.forwardRef((function(e,g){const{actions:t,autoFocus:I=!1,autoFocusItem:l=!1,children:C,className:o,disabledItemsFocusable:a=!1,disableListWrap:r=!1,onKeyDown:i,variant:c="selectedMenu"}=e,A=(0,He.A)(e,na),d=n.useRef(null),s=n.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});(0,JC.A)((()=>{I&&d.current.focus()}),[I]),n.useImperativeHandle(t,(()=>({adjustStyleForScrollbar:(e,g)=>{let{direction:t}=g;const I=!d.current.style.width;if(e.clientHeight<d.current.clientHeight&&I){const g=`${Ia((0,Do.A)(e))}px`;d.current.style["rtl"===t?"paddingLeft":"paddingRight"]=g,d.current.style.width=`calc(100% + ${g})`}return d.current}})),[]);const u=(0,Cl.A)(d,g);let m=-1;n.Children.forEach(C,((e,g)=>{n.isValidElement(e)?(e.props.disabled||("selectedMenu"===c&&e.props.selected||-1===m)&&(m=g),m===g&&(e.props.disabled||e.props.muiSkipListHighlight||e.type.muiSkipListHighlight)&&(m+=1,m>=C.length&&(m=-1))):m===g&&(m+=1,m>=C.length&&(m=-1))}));const b=n.Children.map(C,((e,g)=>{if(g===m){const g={};return l&&(g.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===c&&(g.tabIndex=0),n.cloneElement(e,g)}return e}));return(0,Qe.jsx)(ga,(0,we.A)({role:"menu",ref:u,className:o,onKeyDown:e=>{const g=d.current,t=e.key,I=(0,Do.A)(g).activeElement;if("ArrowDown"===t)e.preventDefault(),aa(g,I,r,a,la);else if("ArrowUp"===t)e.preventDefault(),aa(g,I,r,a,Ca);else if("Home"===t)e.preventDefault(),aa(g,null,r,a,la);else if("End"===t)e.preventDefault(),aa(g,null,r,a,Ca);else if(1===t.length){const n=s.current,l=t.toLowerCase(),C=performance.now();n.keys.length>0&&(C-n.lastTime>500?(n.keys=[],n.repeating=!0,n.previousKeyMatched=!0):n.repeating&&l!==n.keys[0]&&(n.repeating=!1)),n.lastTime=C,n.keys.push(l);const o=I&&!n.repeating&&oa(I,n);n.previousKeyMatched&&(o||aa(g,I,!1,a,la,n))?e.preventDefault():n.previousKeyMatched=!1}i&&i(e)},tabIndex:I?0:-1},A,{children:b}))}));var ia=t(950),ca=t(6078);const Aa=!1;var da=function(e){return e.scrollTop},sa="unmounted",ua="exited",ma="entering",ba="entered",Za="exiting",pa=function(e){function g(g,t){var I;I=e.call(this,g,t)||this;var n,l=t&&!t.isMounting?g.enter:g.appear;return I.appearStatus=null,g.in?l?(n=ua,I.appearStatus=ma):n=ba:n=g.unmountOnExit||g.mountOnEnter?sa:ua,I.state={status:n},I.nextCallback=null,I}rl(g,e),g.getDerivedStateFromProps=function(e,g){return e.in&&g.status===sa?{status:ua}:null};var t=g.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(e){var g=null;if(e!==this.props){var t=this.state.status;this.props.in?t!==ma&&t!==ba&&(g=ma):t!==ma&&t!==ba||(g=Za)}this.updateStatus(!1,g)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var e,g,t,I=this.props.timeout;return e=g=t=I,null!=I&&"number"!==typeof I&&(e=I.exit,g=I.enter,t=void 0!==I.appear?I.appear:g),{exit:e,enter:g,appear:t}},t.updateStatus=function(e,g){if(void 0===e&&(e=!1),null!==g)if(this.cancelNextCallback(),g===ma){if(this.props.unmountOnExit||this.props.mountOnEnter){var t=this.props.nodeRef?this.props.nodeRef.current:o.findDOMNode(this);t&&da(t)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ua&&this.setState({status:sa})},t.performEnter=function(e){var g=this,t=this.props.enter,I=this.context?this.context.isMounting:e,n=this.props.nodeRef?[I]:[o.findDOMNode(this),I],l=n[0],C=n[1],a=this.getTimeouts(),r=I?a.appear:a.enter;!e&&!t||Aa?this.safeSetState({status:ba},(function(){g.props.onEntered(l)})):(this.props.onEnter(l,C),this.safeSetState({status:ma},(function(){g.props.onEntering(l,C),g.onTransitionEnd(r,(function(){g.safeSetState({status:ba},(function(){g.props.onEntered(l,C)}))}))})))},t.performExit=function(){var e=this,g=this.props.exit,t=this.getTimeouts(),I=this.props.nodeRef?void 0:o.findDOMNode(this);g&&!Aa?(this.props.onExit(I),this.safeSetState({status:Za},(function(){e.props.onExiting(I),e.onTransitionEnd(t.exit,(function(){e.safeSetState({status:ua},(function(){e.props.onExited(I)}))}))}))):this.safeSetState({status:ua},(function(){e.props.onExited(I)}))},t.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(e,g){g=this.setNextCallback(g),this.setState(e,g)},t.setNextCallback=function(e){var g=this,t=!0;return this.nextCallback=function(I){t&&(t=!1,g.nextCallback=null,e(I))},this.nextCallback.cancel=function(){t=!1},this.nextCallback},t.onTransitionEnd=function(e,g){this.setNextCallback(g);var t=this.props.nodeRef?this.props.nodeRef.current:o.findDOMNode(this),I=null==e&&!this.props.addEndListener;if(t&&!I){if(this.props.addEndListener){var n=this.props.nodeRef?[this.nextCallback]:[t,this.nextCallback],l=n[0],C=n[1];this.props.addEndListener(l,C)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},t.render=function(){var e=this.state.status;if(e===sa)return null;var g=this.props,t=g.children,I=(g.in,g.mountOnEnter,g.unmountOnExit,g.appear,g.enter,g.exit,g.timeout,g.addEndListener,g.onEnter,g.onEntering,g.onEntered,g.onExit,g.onExiting,g.onExited,g.nodeRef,(0,He.A)(g,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return n.createElement(il.Provider,{value:null},"function"===typeof t?t(e,I):n.cloneElement(n.Children.only(t),I))},g}(n.Component);function ha(){}pa.contextType=il,pa.propTypes={},pa.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ha,onEntering:ha,onEntered:ha,onExit:ha,onExiting:ha,onExited:ha},pa.UNMOUNTED=sa,pa.EXITED=ua,pa.ENTERING=ma,pa.ENTERED=ba,pa.EXITING=Za;const Ga=pa;function ya(){const e=Ee(Ue.A);return e[Te.A]||e}const Ba=e=>e.scrollTop;function Sa(e,g){var t,I;const{timeout:n,easing:l,style:C={}}=e;return{duration:null!=(t=C.transitionDuration)?t:"number"===typeof n?n:n[g.mode]||0,easing:null!=(I=C.transitionTimingFunction)?I:"object"===typeof l?l[g.mode]:l,delay:C.transitionDelay}}const Wa=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Va(e){return`scale(${e}, ${e**2})`}const va={entering:{opacity:1,transform:Va(1)},entered:{opacity:1,transform:"none"}},Ra="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),fa=n.forwardRef((function(e,g){const{addEndListener:t,appear:I=!0,children:l,easing:C,in:o,onEnter:a,onEntered:r,onEntering:i,onExit:c,onExited:A,onExiting:d,style:s,timeout:u="auto",TransitionComponent:m=Ga}=e,b=(0,He.A)(e,Wa),Z=(0,Zl.A)(),p=n.useRef(),h=ya(),G=n.useRef(null),y=(0,Cl.A)(G,Eo(l),g),B=e=>g=>{if(e){const t=G.current;void 0===g?e(t):e(t,g)}},S=B(i),W=B(((e,g)=>{Ba(e);const{duration:t,delay:I,easing:n}=Sa({style:s,timeout:u,easing:C},{mode:"enter"});let l;"auto"===u?(l=h.transitions.getAutoHeightDuration(e.clientHeight),p.current=l):l=t,e.style.transition=[h.transitions.create("opacity",{duration:l,delay:I}),h.transitions.create("transform",{duration:Ra?l:.666*l,delay:I,easing:n})].join(","),a&&a(e,g)})),V=B(r),v=B(d),R=B((e=>{const{duration:g,delay:t,easing:I}=Sa({style:s,timeout:u,easing:C},{mode:"exit"});let n;"auto"===u?(n=h.transitions.getAutoHeightDuration(e.clientHeight),p.current=n):n=g,e.style.transition=[h.transitions.create("opacity",{duration:n,delay:t}),h.transitions.create("transform",{duration:Ra?n:.666*n,delay:Ra?t:t||.333*n,easing:I})].join(","),e.style.opacity=0,e.style.transform=Va(.75),c&&c(e)})),f=B(A);return(0,Qe.jsx)(m,(0,we.A)({appear:I,in:o,nodeRef:G,onEnter:W,onEntered:V,onEntering:S,onExit:R,onExited:f,onExiting:v,addEndListener:e=>{"auto"===u&&Z.start(p.current||0,e),t&&t(G.current,e)},timeout:"auto"===u?null:u},b,{children:(e,g)=>n.cloneElement(l,(0,we.A)({style:(0,we.A)({opacity:0,transform:Va(.75),visibility:"exited"!==e||o?void 0:"hidden"},va[e],s,l.props.style),ref:y},g))}))}));fa.muiSupportAuto=!0;const Xa=fa;var ka=t(1668);const Ja=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Ya(e){const g=[],t=[];return Array.from(e.querySelectorAll(Ja)).forEach(((e,I)=>{const n=function(e){const g=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(g)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:g}(e);-1!==n&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;const g=g=>e.ownerDocument.querySelector(`input[type="radio"]${g}`);let t=g(`[name="${e.name}"]:checked`);return t||(t=g(`[name="${e.name}"]`)),t!==e}(e))}(e)&&(0===n?g.push(e):t.push({documentOrder:I,tabIndex:n,node:e}))})),t.sort(((e,g)=>e.tabIndex===g.tabIndex?e.documentOrder-g.documentOrder:e.tabIndex-g.tabIndex)).map((e=>e.node)).concat(g)}function wa(){return!0}const Ha=function(e){const{children:g,disableAutoFocus:t=!1,disableEnforceFocus:I=!1,disableRestoreFocus:l=!1,getTabbable:C=Ya,isEnabled:o=wa,open:a}=e,r=n.useRef(!1),i=n.useRef(null),c=n.useRef(null),A=n.useRef(null),d=n.useRef(null),s=n.useRef(!1),u=n.useRef(null),m=(0,yC.A)(Eo(g),u),b=n.useRef(null);n.useEffect((()=>{a&&u.current&&(s.current=!t)}),[t,a]),n.useEffect((()=>{if(!a||!u.current)return;const e=(0,ka.A)(u.current);return u.current.contains(e.activeElement)||(u.current.hasAttribute("tabIndex")||u.current.setAttribute("tabIndex","-1"),s.current&&u.current.focus()),()=>{l||(A.current&&A.current.focus&&(r.current=!0,A.current.focus()),A.current=null)}}),[a]),n.useEffect((()=>{if(!a||!u.current)return;const e=(0,ka.A)(u.current),g=g=>{b.current=g,!I&&o()&&"Tab"===g.key&&e.activeElement===u.current&&g.shiftKey&&(r.current=!0,c.current&&c.current.focus())},t=()=>{const g=u.current;if(null===g)return;if(!e.hasFocus()||!o()||r.current)return void(r.current=!1);if(g.contains(e.activeElement))return;if(I&&e.activeElement!==i.current&&e.activeElement!==c.current)return;if(e.activeElement!==d.current)d.current=null;else if(null!==d.current)return;if(!s.current)return;let t=[];if(e.activeElement!==i.current&&e.activeElement!==c.current||(t=C(u.current)),t.length>0){var n,l;const e=Boolean((null==(n=b.current)?void 0:n.shiftKey)&&"Tab"===(null==(l=b.current)?void 0:l.key)),g=t[0],I=t[t.length-1];"string"!==typeof g&&"string"!==typeof I&&(e?I.focus():g.focus())}else g.focus()};e.addEventListener("focusin",t),e.addEventListener("keydown",g,!0);const n=setInterval((()=>{e.activeElement&&"BODY"===e.activeElement.tagName&&t()}),50);return()=>{clearInterval(n),e.removeEventListener("focusin",t),e.removeEventListener("keydown",g,!0)}}),[t,I,l,o,a,C]);const Z=e=>{null===A.current&&(A.current=e.relatedTarget),s.current=!0};return(0,Qe.jsxs)(n.Fragment,{children:[(0,Qe.jsx)("div",{tabIndex:a?0:-1,onFocus:Z,ref:i,"data-testid":"sentinelStart"}),n.cloneElement(g,{ref:m,onFocus:e=>{null===A.current&&(A.current=e.relatedTarget),s.current=!0,d.current=e.target;const t=g.props.onFocus;t&&t(e)}}),(0,Qe.jsx)("div",{tabIndex:a?0:-1,onFocus:Z,ref:c,"data-testid":"sentinelEnd"})]})};var Na=t(6564);const Fa=n.forwardRef((function(e,g){const{children:t,container:I,disablePortal:l=!1}=e,[C,a]=n.useState(null),r=(0,yC.A)(n.isValidElement(t)?Eo(t):null,g);if((0,Vn.A)((()=>{l||a(function(e){return"function"===typeof e?e():e}(I)||document.body)}),[I,l]),(0,Vn.A)((()=>{if(C&&!l)return(0,Na.A)(g,C),()=>{(0,Na.A)(g,null)}}),[g,C,l]),l){if(n.isValidElement(t)){const e={ref:r};return n.cloneElement(t,e)}return(0,Qe.jsx)(n.Fragment,{children:t})}return(0,Qe.jsx)(n.Fragment,{children:C?o.createPortal(t,C):C})})),Ka=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],xa={entering:{opacity:1},entered:{opacity:1}},Ma=n.forwardRef((function(e,g){const t=ya(),I={enter:t.transitions.duration.enteringScreen,exit:t.transitions.duration.leavingScreen},{addEndListener:l,appear:C=!0,children:o,easing:a,in:r,onEnter:i,onEntered:c,onEntering:A,onExit:d,onExited:s,onExiting:u,style:m,timeout:b=I,TransitionComponent:Z=Ga}=e,p=(0,He.A)(e,Ka),h=n.useRef(null),G=(0,Cl.A)(h,Eo(o),g),y=e=>g=>{if(e){const t=h.current;void 0===g?e(t):e(t,g)}},B=y(A),S=y(((e,g)=>{Ba(e);const I=Sa({style:m,timeout:b,easing:a},{mode:"enter"});e.style.webkitTransition=t.transitions.create("opacity",I),e.style.transition=t.transitions.create("opacity",I),i&&i(e,g)})),W=y(c),V=y(u),v=y((e=>{const g=Sa({style:m,timeout:b,easing:a},{mode:"exit"});e.style.webkitTransition=t.transitions.create("opacity",g),e.style.transition=t.transitions.create("opacity",g),d&&d(e)})),R=y(s);return(0,Qe.jsx)(Z,(0,we.A)({appear:C,in:r,nodeRef:h,onEnter:S,onEntered:W,onEntering:B,onExit:v,onExited:R,onExiting:V,addEndListener:e=>{l&&l(h.current,e)},timeout:b},p,{children:(e,g)=>n.cloneElement(o,(0,we.A)({style:(0,we.A)({opacity:0,visibility:"exited"!==e||r?void 0:"hidden"},xa[e],m,o.props.style),ref:G},g))}))}));function za(e){return(0,Yl.Ay)("MuiBackdrop",e)}(0,$n.A)("MuiBackdrop",["root","invisible"]);const Ea=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],Da=(0,nl.Ay)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,t.invisible&&g.invisible]}})((e=>{let{ownerState:g}=e;return(0,we.A)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},g.invisible&&{backgroundColor:"transparent"})})),Ua=n.forwardRef((function(e,g){var t,I,n;const l=(0,ll.b)({props:e,name:"MuiBackdrop"}),{children:C,className:o,component:a="div",components:r={},componentsProps:i={},invisible:c=!1,open:A,slotProps:d={},slots:s={},TransitionComponent:u=Ma,transitionDuration:m}=l,b=(0,He.A)(l,Ea),Z=(0,we.A)({},l,{component:a,invisible:c}),p=(e=>{const{classes:g,invisible:t}=e,I={root:["root",t&&"invisible"]};return(0,tl.A)(I,za,g)})(Z),h=null!=(t=d.root)?t:i.root;return(0,Qe.jsx)(u,(0,we.A)({in:A,timeout:m},b,{children:(0,Qe.jsx)(Da,(0,we.A)({"aria-hidden":!0},h,{as:null!=(I=null!=(n=s.root)?n:r.Root)?I:a,className:(0,Ln.A)(p.root,o,null==h?void 0:h.className),ownerState:(0,we.A)({},Z,null==h?void 0:h.ownerState),classes:p,ref:g,children:C}))}))}));var Ta=t(1782),La=t(2456);function Qa(e,g){g?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function ja(e){return parseInt((0,BC.A)(e).getComputedStyle(e).paddingRight,10)||0}function Pa(e,g,t,I,n){const l=[g,t,...I];[].forEach.call(e.children,(e=>{const g=-1===l.indexOf(e),t=!function(e){const g=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName),t="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return g||t}(e);g&&t&&Qa(e,n)}))}function Oa(e,g){let t=-1;return e.some(((e,I)=>!!g(e)&&(t=I,!0))),t}function qa(e,g){const t=[],I=e.container;if(!g.disableScrollLock){if(function(e){const g=(0,ka.A)(e);return g.body===e?(0,BC.A)(e).innerWidth>g.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(I)){const e=ta((0,ka.A)(I));t.push({value:I.style.paddingRight,property:"padding-right",el:I}),I.style.paddingRight=`${ja(I)+e}px`;const g=(0,ka.A)(I).querySelectorAll(".mui-fixed");[].forEach.call(g,(g=>{t.push({value:g.style.paddingRight,property:"padding-right",el:g}),g.style.paddingRight=`${ja(g)+e}px`}))}let e;if(I.parentNode instanceof DocumentFragment)e=(0,ka.A)(I).body;else{const g=I.parentElement,t=(0,BC.A)(I);e="HTML"===(null==g?void 0:g.nodeName)&&"scroll"===t.getComputedStyle(g).overflowY?g:I}t.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e}),e.style.overflow="hidden"}return()=>{t.forEach((e=>{let{value:g,el:t,property:I}=e;g?t.style.setProperty(I,g):t.style.removeProperty(I)}))}}const $a=new class{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,g){let t=this.modals.indexOf(e);if(-1!==t)return t;t=this.modals.length,this.modals.push(e),e.modalRef&&Qa(e.modalRef,!1);const I=function(e){const g=[];return[].forEach.call(e.children,(e=>{"true"===e.getAttribute("aria-hidden")&&g.push(e)})),g}(g);Pa(g,e.mount,e.modalRef,I,!0);const n=Oa(this.containers,(e=>e.container===g));return-1!==n?(this.containers[n].modals.push(e),t):(this.containers.push({modals:[e],container:g,restore:null,hiddenSiblings:I}),t)}mount(e,g){const t=Oa(this.containers,(g=>-1!==g.modals.indexOf(e))),I=this.containers[t];I.restore||(I.restore=qa(I,g))}remove(e){let g=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const t=this.modals.indexOf(e);if(-1===t)return t;const I=Oa(this.containers,(g=>-1!==g.modals.indexOf(e))),n=this.containers[I];if(n.modals.splice(n.modals.indexOf(e),1),this.modals.splice(t,1),0===n.modals.length)n.restore&&n.restore(),e.modalRef&&Qa(e.modalRef,g),Pa(n.container,e.mount,e.modalRef,n.hiddenSiblings,!1),this.containers.splice(I,1);else{const e=n.modals[n.modals.length-1];e.modalRef&&Qa(e.modalRef,!1)}return t}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}};const _a=function(e){const{container:g,disableEscapeKeyDown:t=!1,disableScrollLock:I=!1,manager:l=$a,closeAfterTransition:C=!1,onTransitionEnter:o,onTransitionExited:a,children:r,onClose:i,open:c,rootRef:A}=e,d=n.useRef({}),s=n.useRef(null),u=n.useRef(null),m=(0,yC.A)(u,A),[b,Z]=n.useState(!c),p=function(e){return!!e&&e.props.hasOwnProperty("in")}(r);let h=!0;"false"!==e["aria-hidden"]&&!1!==e["aria-hidden"]||(h=!1);const G=()=>(d.current.modalRef=u.current,d.current.mount=s.current,d.current),y=()=>{l.mount(G(),{disableScrollLock:I}),u.current&&(u.current.scrollTop=0)},B=(0,Ta.A)((()=>{const e=function(e){return"function"===typeof e?e():e}(g)||(0,ka.A)(s.current).body;l.add(G(),e),u.current&&y()})),S=n.useCallback((()=>l.isTopModal(G())),[l]),W=(0,Ta.A)((e=>{s.current=e,e&&(c&&S()?y():u.current&&Qa(u.current,h))})),V=n.useCallback((()=>{l.remove(G(),h)}),[h,l]);n.useEffect((()=>()=>{V()}),[V]),n.useEffect((()=>{c?B():p&&C||V()}),[c,V,p,C,B]);const v=e=>g=>{var I;null==(I=e.onKeyDown)||I.call(e,g),"Escape"===g.key&&229!==g.which&&S()&&(t||(g.stopPropagation(),i&&i(g,"escapeKeyDown")))},R=e=>g=>{var t;null==(t=e.onClick)||t.call(e,g),g.target===g.currentTarget&&i&&i(g,"backdropClick")};return{getRootProps:function(){let g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=To(e);delete t.onTransitionEnter,delete t.onTransitionExited;const I=(0,we.A)({},t,g);return(0,we.A)({role:"presentation"},I,{onKeyDown:v(I),ref:m})},getBackdropProps:function(){const e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,we.A)({"aria-hidden":!0},e,{onClick:R(e),open:c})},getTransitionProps:()=>({onEnter:(0,La.A)((()=>{Z(!1),o&&o()}),null==r?void 0:r.props.onEnter),onExited:(0,La.A)((()=>{Z(!0),a&&a(),C&&V()}),null==r?void 0:r.props.onExited)}),rootRef:m,portalRef:W,isTopModal:S,exited:b,hasTransition:p}};function er(e){return(0,Yl.Ay)("MuiModal",e)}(0,$n.A)("MuiModal",["root","hidden","backdrop"]);const gr=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],tr=(0,nl.Ay)("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,!t.open&&t.exited&&g.hidden]}})((e=>{let{theme:g,ownerState:t}=e;return(0,we.A)({position:"fixed",zIndex:(g.vars||g).zIndex.modal,right:0,bottom:0,top:0,left:0},!t.open&&t.exited&&{visibility:"hidden"})})),Ir=(0,nl.Ay)(Ua,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,g)=>g.backdrop})({zIndex:-1}),nr=n.forwardRef((function(e,g){var t,I,l,C,o,a;const r=(0,ll.b)({name:"MuiModal",props:e}),{BackdropComponent:i=Ir,BackdropProps:c,className:A,closeAfterTransition:d=!1,children:s,container:u,component:m,components:b={},componentsProps:Z={},disableAutoFocus:p=!1,disableEnforceFocus:h=!1,disableEscapeKeyDown:G=!1,disablePortal:y=!1,disableRestoreFocus:B=!1,disableScrollLock:S=!1,hideBackdrop:W=!1,keepMounted:V=!1,onBackdropClick:v,open:R,slotProps:f,slots:X}=r,k=(0,He.A)(r,gr),J=(0,we.A)({},r,{closeAfterTransition:d,disableAutoFocus:p,disableEnforceFocus:h,disableEscapeKeyDown:G,disablePortal:y,disableRestoreFocus:B,disableScrollLock:S,hideBackdrop:W,keepMounted:V}),{getRootProps:Y,getBackdropProps:w,getTransitionProps:H,portalRef:N,isTopModal:F,exited:K,hasTransition:x}=_a((0,we.A)({},J,{rootRef:g})),M=(0,we.A)({},J,{exited:K}),z=(e=>{const{open:g,exited:t,classes:I}=e,n={root:["root",!g&&t&&"hidden"],backdrop:["backdrop"]};return(0,tl.A)(n,er,I)})(M),E={};if(void 0===s.props.tabIndex&&(E.tabIndex="-1"),x){const{onEnter:e,onExited:g}=H();E.onEnter=e,E.onExited=g}const D=null!=(t=null!=(I=null==X?void 0:X.root)?I:b.Root)?t:tr,U=null!=(l=null!=(C=null==X?void 0:X.backdrop)?C:b.Backdrop)?l:i,T=null!=(o=null==f?void 0:f.root)?o:Z.root,L=null!=(a=null==f?void 0:f.backdrop)?a:Z.backdrop,Q=Oo({elementType:D,externalSlotProps:T,externalForwardedProps:k,getSlotProps:Y,additionalProps:{ref:g,as:m},ownerState:M,className:(0,Ln.A)(A,null==T?void 0:T.className,null==z?void 0:z.root,!M.open&&M.exited&&(null==z?void 0:z.hidden))}),j=Oo({elementType:U,externalSlotProps:L,additionalProps:c,getSlotProps:e=>w((0,we.A)({},e,{onClick:g=>{v&&v(g),null!=e&&e.onClick&&e.onClick(g)}})),className:(0,Ln.A)(null==L?void 0:L.className,null==c?void 0:c.className,null==z?void 0:z.backdrop),ownerState:M});return V||R||x&&!K?(0,Qe.jsx)(Fa,{ref:N,container:u,disablePortal:y,children:(0,Qe.jsxs)(D,(0,we.A)({},Q,{children:[!W&&i?(0,Qe.jsx)(U,(0,we.A)({},j)):null,(0,Qe.jsx)(Ha,{disableEnforceFocus:h,disableAutoFocus:p,disableRestoreFocus:B,isEnabled:F,open:R,children:n.cloneElement(s,E)})]}))}):null}));function lr(e){return(0,Yl.Ay)("MuiPopover",e)}(0,$n.A)("MuiPopover",["root","paper"]);const Cr=["onEntering"],or=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],ar=["slotProps"];function rr(e,g){let t=0;return"number"===typeof g?t=g:"center"===g?t=e.height/2:"bottom"===g&&(t=e.height),t}function ir(e,g){let t=0;return"number"===typeof g?t=g:"center"===g?t=e.width/2:"right"===g&&(t=e.width),t}function cr(e){return[e.horizontal,e.vertical].map((e=>"number"===typeof e?`${e}px`:e)).join(" ")}function Ar(e){return"function"===typeof e?e():e}const dr=(0,nl.Ay)(nr,{name:"MuiPopover",slot:"Root",overridesResolver:(e,g)=>g.root})({}),sr=(0,nl.Ay)(AC,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,g)=>g.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),ur=n.forwardRef((function(e,g){var t,I,l;const C=(0,ll.b)({props:e,name:"MuiPopover"}),{action:o,anchorEl:a,anchorOrigin:r={vertical:"top",horizontal:"left"},anchorPosition:i,anchorReference:c="anchorEl",children:A,className:d,container:s,elevation:u=8,marginThreshold:m=16,open:b,PaperProps:Z={},slots:p,slotProps:h,transformOrigin:G={vertical:"top",horizontal:"left"},TransitionComponent:y=Xa,transitionDuration:B="auto",TransitionProps:{onEntering:S}={},disableScrollLock:W=!1}=C,V=(0,He.A)(C.TransitionProps,Cr),v=(0,He.A)(C,or),R=null!=(t=null==h?void 0:h.paper)?t:Z,f=n.useRef(),X=(0,Cl.A)(f,R.ref),k=(0,we.A)({},C,{anchorOrigin:r,anchorReference:c,elevation:u,marginThreshold:m,externalPaperSlotProps:R,transformOrigin:G,TransitionComponent:y,transitionDuration:B,TransitionProps:V}),J=(e=>{const{classes:g}=e;return(0,tl.A)({root:["root"],paper:["paper"]},lr,g)})(k),Y=n.useCallback((()=>{if("anchorPosition"===c)return i;const e=Ar(a),g=(e&&1===e.nodeType?e:(0,Do.A)(f.current).body).getBoundingClientRect();return{top:g.top+rr(g,r.vertical),left:g.left+ir(g,r.horizontal)}}),[a,r.horizontal,r.vertical,i,c]),w=n.useCallback((e=>({vertical:rr(e,G.vertical),horizontal:ir(e,G.horizontal)})),[G.horizontal,G.vertical]),H=n.useCallback((e=>{const g={width:e.offsetWidth,height:e.offsetHeight},t=w(g);if("none"===c)return{top:null,left:null,transformOrigin:cr(t)};const I=Y();let n=I.top-t.vertical,l=I.left-t.horizontal;const C=n+g.height,o=l+g.width,r=(0,ca.A)(Ar(a)),i=r.innerHeight-m,A=r.innerWidth-m;if(null!==m&&n<m){const e=n-m;n-=e,t.vertical+=e}else if(null!==m&&C>i){const e=C-i;n-=e,t.vertical+=e}if(null!==m&&l<m){const e=l-m;l-=e,t.horizontal+=e}else if(o>A){const e=o-A;l-=e,t.horizontal+=e}return{top:`${Math.round(n)}px`,left:`${Math.round(l)}px`,transformOrigin:cr(t)}}),[a,c,Y,w,m]),[N,F]=n.useState(b),K=n.useCallback((()=>{const e=f.current;if(!e)return;const g=H(e);null!==g.top&&(e.style.top=g.top),null!==g.left&&(e.style.left=g.left),e.style.transformOrigin=g.transformOrigin,F(!0)}),[H]);n.useEffect((()=>(W&&window.addEventListener("scroll",K),()=>window.removeEventListener("scroll",K))),[a,W,K]);n.useEffect((()=>{b&&K()})),n.useImperativeHandle(o,(()=>b?{updatePosition:()=>{K()}}:null),[b,K]),n.useEffect((()=>{if(!b)return;const e=(0,ia.A)((()=>{K()})),g=(0,ca.A)(a);return g.addEventListener("resize",e),()=>{e.clear(),g.removeEventListener("resize",e)}}),[a,b,K]);let x=B;"auto"!==B||y.muiSupportAuto||(x=void 0);const M=s||(a?(0,Do.A)(Ar(a)).body:void 0),z=null!=(I=null==p?void 0:p.root)?I:dr,E=null!=(l=null==p?void 0:p.paper)?l:sr,D=Oo({elementType:E,externalSlotProps:(0,we.A)({},R,{style:N?R.style:(0,we.A)({},R.style,{opacity:0})}),additionalProps:{elevation:u,ref:X},ownerState:k,className:(0,Ln.A)(J.paper,null==R?void 0:R.className)}),U=Oo({elementType:z,externalSlotProps:(null==h?void 0:h.root)||{},externalForwardedProps:v,additionalProps:{ref:g,slotProps:{backdrop:{invisible:!0}},container:M,open:b},ownerState:k,className:(0,Ln.A)(J.root,d)}),{slotProps:T}=U,L=(0,He.A)(U,ar);return(0,Qe.jsx)(z,(0,we.A)({},L,!GC(z)&&{slotProps:T,disableScrollLock:W},{children:(0,Qe.jsx)(y,(0,we.A)({appear:!0,in:b,onEntering:(e,g)=>{S&&S(e,g),K()},onExited:()=>{F(!1)},timeout:x},V,{children:(0,Qe.jsx)(E,(0,we.A)({},D,{children:A}))}))}))}));function mr(e){return(0,Yl.Ay)("MuiMenu",e)}(0,$n.A)("MuiMenu",["root","paper","list"]);const br=["onEntering"],Zr=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],pr={vertical:"top",horizontal:"right"},hr={vertical:"top",horizontal:"left"},Gr=(0,nl.Ay)(ur,{shouldForwardProp:e=>(0,QC.A)(e)||"classes"===e,name:"MuiMenu",slot:"Root",overridesResolver:(e,g)=>g.root})({}),yr=(0,nl.Ay)(sr,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,g)=>g.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Br=(0,nl.Ay)(ra,{name:"MuiMenu",slot:"List",overridesResolver:(e,g)=>g.list})({outline:0}),Sr=n.forwardRef((function(e,g){var t,I;const l=(0,ll.b)({props:e,name:"MuiMenu"}),{autoFocus:C=!0,children:o,className:a,disableAutoFocusItem:r=!1,MenuListProps:i={},onClose:c,open:A,PaperProps:d={},PopoverClasses:s,transitionDuration:u="auto",TransitionProps:{onEntering:m}={},variant:b="selectedMenu",slots:Z={},slotProps:p={}}=l,h=(0,He.A)(l.TransitionProps,br),G=(0,He.A)(l,Zr),y=Kn(),B=(0,we.A)({},l,{autoFocus:C,disableAutoFocusItem:r,MenuListProps:i,onEntering:m,PaperProps:d,transitionDuration:u,TransitionProps:h,variant:b}),S=(e=>{const{classes:g}=e;return(0,tl.A)({root:["root"],paper:["paper"],list:["list"]},mr,g)})(B),W=C&&!r&&A,V=n.useRef(null);let v=-1;n.Children.map(o,((e,g)=>{n.isValidElement(e)&&(e.props.disabled||("selectedMenu"===b&&e.props.selected||-1===v)&&(v=g))}));const R=null!=(t=Z.paper)?t:yr,f=null!=(I=p.paper)?I:d,X=Oo({elementType:Z.root,externalSlotProps:p.root,ownerState:B,className:[S.root,a]}),k=Oo({elementType:R,externalSlotProps:f,ownerState:B,className:S.paper});return(0,Qe.jsx)(Gr,(0,we.A)({onClose:c,anchorOrigin:{vertical:"bottom",horizontal:y?"right":"left"},transformOrigin:y?pr:hr,slots:{paper:R,root:Z.root},slotProps:{root:X,paper:k},open:A,ref:g,transitionDuration:u,TransitionProps:(0,we.A)({onEntering:(e,g)=>{V.current&&V.current.adjustStyleForScrollbar(e,{direction:y?"rtl":"ltr"}),m&&m(e,g)}},h),ownerState:B},G,{classes:s,children:(0,Qe.jsx)(Br,(0,we.A)({onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),c&&c(e,"tabKeyDown"))},actions:V,autoFocus:C&&(-1===v||r),autoFocusItem:W,variant:b},i,{className:(0,Ln.A)(S.list,i.className),children:o}))}))}));function Wr(e){return(0,Yl.Ay)("MuiNativeSelect",e)}const Vr=(0,$n.A)("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),vr=["className","disabled","error","IconComponent","inputRef","variant"],Rr=e=>{let{ownerState:g,theme:t}=e;return(0,we.A)({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":(0,we.A)({},t.vars?{backgroundColor:`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:"light"===t.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${Vr.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},"filled"===g.variant&&{"&&&":{paddingRight:32}},"outlined"===g.variant&&{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}})},fr=(0,nl.Ay)("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:QC.A,overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.select,g[t.variant],t.error&&g.error,{[`&.${Vr.multiple}`]:g.multiple}]}})(Rr),Xr=e=>{let{ownerState:g,theme:t}=e;return(0,we.A)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${Vr.disabled}`]:{color:(t.vars||t).palette.action.disabled}},g.open&&{transform:"rotate(180deg)"},"filled"===g.variant&&{right:7},"outlined"===g.variant&&{right:7})},kr=(0,nl.Ay)("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.icon,t.variant&&g[`icon${(0,xl.A)(t.variant)}`],t.open&&g.iconOpen]}})(Xr),Jr=n.forwardRef((function(e,g){const{className:t,disabled:I,error:l,IconComponent:C,inputRef:o,variant:a="standard"}=e,r=(0,He.A)(e,vr),i=(0,we.A)({},e,{disabled:I,variant:a,error:l}),c=(e=>{const{classes:g,variant:t,disabled:I,multiple:n,open:l,error:C}=e,o={select:["select",t,I&&"disabled",n&&"multiple",C&&"error"],icon:["icon",`icon${(0,xl.A)(t)}`,l&&"iconOpen",I&&"disabled"]};return(0,tl.A)(o,Wr,g)})(i);return(0,Qe.jsxs)(n.Fragment,{children:[(0,Qe.jsx)(fr,(0,we.A)({ownerState:i,className:(0,Ln.A)(c.select,t),disabled:I,ref:o||g},r)),e.multiple?null:(0,Qe.jsx)(kr,{as:C,ownerState:i,className:c.icon})]})}));var Yr=t(7123),wr=t(4516);function Hr(e){return(0,Yl.Ay)("MuiSelect",e)}const Nr=(0,$n.A)("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var Fr;const Kr=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],xr=(0,nl.Ay)("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[{[`&.${Nr.select}`]:g.select},{[`&.${Nr.select}`]:g[t.variant]},{[`&.${Nr.error}`]:g.error},{[`&.${Nr.multiple}`]:g.multiple}]}})(Rr,{[`&.${Nr.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),Mr=(0,nl.Ay)("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.icon,t.variant&&g[`icon${(0,xl.A)(t.variant)}`],t.open&&g.iconOpen]}})(Xr),zr=(0,nl.Ay)("input",{shouldForwardProp:e=>(0,Yr.A)(e)&&"classes"!==e,name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,g)=>g.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function Er(e,g){return"object"===typeof g&&null!==g?e===g:String(e)===String(g)}function Dr(e){return null==e||"string"===typeof e&&!e.trim()}const Ur=n.forwardRef((function(e,g){var t;const{"aria-describedby":I,"aria-label":l,autoFocus:C,autoWidth:o,children:a,className:r,defaultOpen:i,defaultValue:c,disabled:A,displayEmpty:d,error:s=!1,IconComponent:u,inputRef:m,labelId:b,MenuProps:Z={},multiple:p,name:h,onBlur:G,onChange:y,onClose:B,onFocus:S,onOpen:W,open:V,readOnly:v,renderValue:R,SelectDisplayProps:f={},tabIndex:X,value:k,variant:J="standard"}=e,Y=(0,He.A)(e,Kr),[w,H]=(0,wr.A)({controlled:k,default:c,name:"Select"}),[N,F]=(0,wr.A)({controlled:V,default:i,name:"Select"}),K=n.useRef(null),x=n.useRef(null),[M,z]=n.useState(null),{current:E}=n.useRef(null!=V),[D,U]=n.useState(),T=(0,Cl.A)(g,m),L=n.useCallback((e=>{x.current=e,e&&z(e)}),[]),Q=null==M?void 0:M.parentNode;n.useImperativeHandle(T,(()=>({focus:()=>{x.current.focus()},node:K.current,value:w})),[w]),n.useEffect((()=>{i&&N&&M&&!E&&(U(o?null:Q.clientWidth),x.current.focus())}),[M,o]),n.useEffect((()=>{C&&x.current.focus()}),[C]),n.useEffect((()=>{if(!b)return;const e=(0,Do.A)(x.current).getElementById(b);if(e){const g=()=>{getSelection().isCollapsed&&x.current.focus()};return e.addEventListener("click",g),()=>{e.removeEventListener("click",g)}}}),[b]);const j=(e,g)=>{e?W&&W(g):B&&B(g),E||(U(o?null:Q.clientWidth),F(e))},P=n.Children.toArray(a),O=e=>g=>{let t;if(g.currentTarget.hasAttribute("tabindex")){if(p){t=Array.isArray(w)?w.slice():[];const g=w.indexOf(e.props.value);-1===g?t.push(e.props.value):t.splice(g,1)}else t=e.props.value;if(e.props.onClick&&e.props.onClick(g),w!==t&&(H(t),y)){const I=g.nativeEvent||g,n=new I.constructor(I.type,I);Object.defineProperty(n,"target",{writable:!0,value:{value:t,name:h}}),y(n,e)}p||j(!1,g)}},q=null!==M&&N;let $,_;delete Y["aria-invalid"];const ee=[];let ge=!1,te=!1;(FC({value:w})||d)&&(R?$=R(w):ge=!0);const Ie=P.map((e=>{if(!n.isValidElement(e))return null;let g;if(p){if(!Array.isArray(w))throw new Error((0,hC.A)(2));g=w.some((g=>Er(g,e.props.value))),g&&ge&&ee.push(e.props.children)}else g=Er(w,e.props.value),g&&ge&&(_=e.props.children);return g&&(te=!0),n.cloneElement(e,{"aria-selected":g?"true":"false",onClick:O(e),onKeyUp:g=>{" "===g.key&&g.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(g)},role:"option",selected:g,value:void 0,"data-value":e.props.value})}));ge&&($=p?0===ee.length?null:ee.reduce(((e,g,t)=>(e.push(g),t<ee.length-1&&e.push(", "),e)),[]):_);let ne,le=D;!o&&E&&M&&(le=Q.clientWidth),ne="undefined"!==typeof X?X:A?null:0;const Ce=f.id||(h?`mui-component-select-${h}`:void 0),oe=(0,we.A)({},e,{variant:J,value:w,open:q,error:s}),ae=(e=>{const{classes:g,variant:t,disabled:I,multiple:n,open:l,error:C}=e,o={select:["select",t,I&&"disabled",n&&"multiple",C&&"error"],icon:["icon",`icon${(0,xl.A)(t)}`,l&&"iconOpen",I&&"disabled"],nativeInput:["nativeInput"]};return(0,tl.A)(o,Hr,g)})(oe),re=(0,we.A)({},Z.PaperProps,null==(t=Z.slotProps)?void 0:t.paper),ie=(0,pC.A)();return(0,Qe.jsxs)(n.Fragment,{children:[(0,Qe.jsx)(xr,(0,we.A)({ref:L,tabIndex:ne,role:"combobox","aria-controls":ie,"aria-disabled":A?"true":void 0,"aria-expanded":q?"true":"false","aria-haspopup":"listbox","aria-label":l,"aria-labelledby":[b,Ce].filter(Boolean).join(" ")||void 0,"aria-describedby":I,onKeyDown:e=>{if(!v){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),j(!0,e))}},onMouseDown:A||v?null:e=>{0===e.button&&(e.preventDefault(),x.current.focus(),j(!0,e))},onBlur:e=>{!q&&G&&(Object.defineProperty(e,"target",{writable:!0,value:{value:w,name:h}}),G(e))},onFocus:S},f,{ownerState:oe,className:(0,Ln.A)(f.className,ae.select,r),id:Ce,children:Dr($)?Fr||(Fr=(0,Qe.jsx)("span",{className:"notranslate",children:"\u200b"})):$})),(0,Qe.jsx)(zr,(0,we.A)({"aria-invalid":s,value:Array.isArray(w)?w.join(","):w,name:h,ref:K,"aria-hidden":!0,onChange:e=>{const g=P.find((g=>g.props.value===e.target.value));void 0!==g&&(H(g.props.value),y&&y(e,g))},tabIndex:-1,disabled:A,className:ae.nativeInput,autoFocus:C,ownerState:oe},Y)),(0,Qe.jsx)(Mr,{as:u,className:ae.icon,ownerState:oe}),(0,Qe.jsx)(Sr,(0,we.A)({id:`menu-${h||""}`,anchorEl:Q,open:q,onClose:e=>{j(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},Z,{MenuListProps:(0,we.A)({"aria-labelledby":b,role:"listbox","aria-multiselectable":p?"true":void 0,disableListWrap:!0,id:ie},Z.MenuListProps),slotProps:(0,we.A)({},Z.slotProps,{paper:(0,we.A)({},re,{style:(0,we.A)({minWidth:le},null!=re?re.style:null)})}),children:Ie}))]})}));var Tr=t(9662);const Lr=(0,Tr.A)((0,Qe.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Qr=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],jr=["root"],Pr={name:"MuiSelect",overridesResolver:(e,g)=>g.root,shouldForwardProp:e=>(0,QC.A)(e)&&"variant"!==e,slot:"Root"},Or=(0,nl.Ay)(eo,Pr)(""),qr=(0,nl.Ay)(ho,Pr)(""),$r=(0,nl.Ay)(oo,Pr)(""),_r=n.forwardRef((function(e,g){const t=(0,ll.b)({name:"MuiSelect",props:e}),{autoWidth:I=!1,children:l,classes:C={},className:o,defaultOpen:a=!1,displayEmpty:r=!1,IconComponent:i=Lr,id:c,input:A,inputProps:d,label:s,labelId:u,MenuProps:m,multiple:b=!1,native:Z=!1,onClose:p,onOpen:h,open:G,renderValue:y,SelectDisplayProps:B,variant:S="outlined"}=t,W=(0,He.A)(t,Qr),V=Z?Jr:Ur,v=fC({props:t,muiFormControl:kC(),states:["variant","error"]}),R=v.variant||S,f=(0,we.A)({},t,{variant:R,classes:C}),X=(e=>{const{classes:g}=e;return g})(f),k=(0,He.A)(X,jr),J=A||{standard:(0,Qe.jsx)(Or,{ownerState:f}),outlined:(0,Qe.jsx)(qr,{label:s,ownerState:f}),filled:(0,Qe.jsx)($r,{ownerState:f})}[R],Y=(0,Cl.A)(g,Eo(J));return(0,Qe.jsx)(n.Fragment,{children:n.cloneElement(J,(0,we.A)({inputComponent:V,inputProps:(0,we.A)({children:l,error:v.error,IconComponent:i,variant:R,type:void 0,multiple:b},Z?{id:c}:{autoWidth:I,defaultOpen:a,displayEmpty:r,labelId:u,MenuProps:m,onClose:p,onOpen:h,open:G,renderValue:y,SelectDisplayProps:(0,we.A)({id:c},B)},d,{classes:d?(0,Ll.A)(k,d.classes):k},A?A.props.inputProps:{})},(b&&Z||r)&&"outlined"===R?{notched:!0}:{},{ref:Y,className:(0,Ln.A)(J.props.className,o,X.root)},!A&&{variant:R},W))})}));_r.muiName="Select";const ei=_r;function gi(e){return(0,Yl.Ay)("MuiTextField",e)}(0,$n.A)("MuiTextField",["root"]);const ti=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],Ii={standard:eo,filled:oo,outlined:ho},ni=(0,nl.Ay)(Ho,{name:"MuiTextField",slot:"Root",overridesResolver:(e,g)=>g.root})({}),li=n.forwardRef((function(e,g){const t=(0,ll.b)({props:e,name:"MuiTextField"}),{autoComplete:I,autoFocus:n=!1,children:l,className:C,color:o="primary",defaultValue:a,disabled:r=!1,error:i=!1,FormHelperTextProps:c,fullWidth:A=!1,helperText:d,id:s,InputLabelProps:u,inputProps:m,InputProps:b,inputRef:Z,label:p,maxRows:h,minRows:G,multiline:y=!1,name:B,onBlur:S,onChange:W,onFocus:V,placeholder:v,required:R=!1,rows:f,select:X=!1,SelectProps:k,type:J,value:Y,variant:w="outlined"}=t,H=(0,He.A)(t,ti),N=(0,we.A)({},t,{autoFocus:n,color:o,disabled:r,error:i,fullWidth:A,multiline:y,required:R,select:X,variant:w}),F=(e=>{const{classes:g}=e;return(0,tl.A)({root:["root"]},gi,g)})(N);const K={};"outlined"===w&&(u&&"undefined"!==typeof u.shrink&&(K.notched=u.shrink),K.label=p),X&&(k&&k.native||(K.id=void 0),K["aria-describedby"]=void 0);const x=(0,pC.A)(s),M=d&&x?`${x}-helper-text`:void 0,z=p&&x?`${x}-label`:void 0,E=Ii[w],D=(0,Qe.jsx)(E,(0,we.A)({"aria-describedby":M,autoComplete:I,autoFocus:n,defaultValue:a,fullWidth:A,multiline:y,name:B,rows:f,maxRows:h,minRows:G,type:J,value:Y,id:x,inputRef:Z,onBlur:S,onChange:W,onFocus:V,placeholder:v,inputProps:m},K,b));return(0,Qe.jsxs)(ni,(0,we.A)({className:(0,Ln.A)(F.root,C),disabled:r,error:i,fullWidth:A,ref:g,required:R,color:o,variant:w,ownerState:N},H,{children:[null!=p&&""!==p&&(0,Qe.jsx)(Xo,(0,we.A)({htmlFor:x,id:z},u,{children:p})),X?(0,Qe.jsx)(ei,(0,we.A)({"aria-describedby":M,id:x,labelId:z,value:Y,input:D},k,{children:l})):D,d&&(0,Qe.jsx)(zo,(0,we.A)({id:M},c,{children:d}))]}))}));function Ci(e){return(0,Yl.Ay)("MuiInputAdornment",e)}const oi=(0,$n.A)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var ai;const ri=["children","className","component","disablePointerEvents","disableTypography","position","variant"],ii=(0,nl.Ay)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,g[`position${(0,xl.A)(t.position)}`],!0===t.disablePointerEvents&&g.disablePointerEvents,g[t.variant]]}})((e=>{let{theme:g,ownerState:t}=e;return(0,we.A)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(g.vars||g).palette.action.active},"filled"===t.variant&&{[`&.${oi.positionStart}&:not(.${oi.hiddenLabel})`]:{marginTop:16}},"start"===t.position&&{marginRight:8},"end"===t.position&&{marginLeft:8},!0===t.disablePointerEvents&&{pointerEvents:"none"})})),ci=n.forwardRef((function(e,g){const t=(0,ll.b)({props:e,name:"MuiInputAdornment"}),{children:I,className:l,component:C="div",disablePointerEvents:o=!1,disableTypography:a=!1,position:r,variant:i}=t,c=(0,He.A)(t,ri),A=kC()||{};let d=i;i&&A.variant,A&&!d&&(d=A.variant);const s=(0,we.A)({},t,{hiddenLabel:A.hiddenLabel,size:A.size,disablePointerEvents:o,position:r,variant:d}),u=(e=>{const{classes:g,disablePointerEvents:t,hiddenLabel:I,position:n,size:l,variant:C}=e,o={root:["root",t&&"disablePointerEvents",n&&`position${(0,xl.A)(n)}`,C,I&&"hiddenLabel",l&&`size${(0,xl.A)(l)}`]};return(0,tl.A)(o,Ci,g)})(s);return(0,Qe.jsx)(XC.Provider,{value:null,children:(0,Qe.jsx)(ii,(0,we.A)({as:C,ownerState:s,className:(0,Ln.A)(u.root,l),ref:g},c,{children:"string"!==typeof I||a?(0,Qe.jsxs)(n.Fragment,{children:["start"===r?ai||(ai=(0,Qe.jsx)("span",{className:"notranslate",children:"\u200b"})):null,I]}):(0,Qe.jsx)(ZC,{color:"text.secondary",children:I})}))})}));function Ai(e){return(0,Yl.Ay)("MuiButton",e)}const di=(0,$n.A)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);const si=n.createContext({});const ui=n.createContext(void 0),mi=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],bi=e=>(0,we.A)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}}),Zi=(0,nl.Ay)(Kl,{shouldForwardProp:e=>(0,QC.A)(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,g[t.variant],g[`${t.variant}${(0,xl.A)(t.color)}`],g[`size${(0,xl.A)(t.size)}`],g[`${t.variant}Size${(0,xl.A)(t.size)}`],"inherit"===t.color&&g.colorInherit,t.disableElevation&&g.disableElevation,t.fullWidth&&g.fullWidth]}})((e=>{let{theme:g,ownerState:t}=e;var I,n;const l="light"===g.palette.mode?g.palette.grey[300]:g.palette.grey[800],C="light"===g.palette.mode?g.palette.grey.A100:g.palette.grey[700];return(0,we.A)({},g.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(g.vars||g).shape.borderRadius,transition:g.transitions.create(["background-color","box-shadow","border-color","color"],{duration:g.transitions.duration.short}),"&:hover":(0,we.A)({textDecoration:"none",backgroundColor:g.vars?`rgba(${g.vars.palette.text.primaryChannel} / ${g.vars.palette.action.hoverOpacity})`:(0,Il.X4)(g.palette.text.primary,g.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===t.variant&&"inherit"!==t.color&&{backgroundColor:g.vars?`rgba(${g.vars.palette[t.color].mainChannel} / ${g.vars.palette.action.hoverOpacity})`:(0,Il.X4)(g.palette[t.color].main,g.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===t.variant&&"inherit"!==t.color&&{border:`1px solid ${(g.vars||g).palette[t.color].main}`,backgroundColor:g.vars?`rgba(${g.vars.palette[t.color].mainChannel} / ${g.vars.palette.action.hoverOpacity})`:(0,Il.X4)(g.palette[t.color].main,g.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===t.variant&&{backgroundColor:g.vars?g.vars.palette.Button.inheritContainedHoverBg:C,boxShadow:(g.vars||g).shadows[4],"@media (hover: none)":{boxShadow:(g.vars||g).shadows[2],backgroundColor:(g.vars||g).palette.grey[300]}},"contained"===t.variant&&"inherit"!==t.color&&{backgroundColor:(g.vars||g).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(g.vars||g).palette[t.color].main}}),"&:active":(0,we.A)({},"contained"===t.variant&&{boxShadow:(g.vars||g).shadows[8]}),[`&.${di.focusVisible}`]:(0,we.A)({},"contained"===t.variant&&{boxShadow:(g.vars||g).shadows[6]}),[`&.${di.disabled}`]:(0,we.A)({color:(g.vars||g).palette.action.disabled},"outlined"===t.variant&&{border:`1px solid ${(g.vars||g).palette.action.disabledBackground}`},"contained"===t.variant&&{color:(g.vars||g).palette.action.disabled,boxShadow:(g.vars||g).shadows[0],backgroundColor:(g.vars||g).palette.action.disabledBackground})},"text"===t.variant&&{padding:"6px 8px"},"text"===t.variant&&"inherit"!==t.color&&{color:(g.vars||g).palette[t.color].main},"outlined"===t.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===t.variant&&"inherit"!==t.color&&{color:(g.vars||g).palette[t.color].main,border:g.vars?`1px solid rgba(${g.vars.palette[t.color].mainChannel} / 0.5)`:`1px solid ${(0,Il.X4)(g.palette[t.color].main,.5)}`},"contained"===t.variant&&{color:g.vars?g.vars.palette.text.primary:null==(I=(n=g.palette).getContrastText)?void 0:I.call(n,g.palette.grey[300]),backgroundColor:g.vars?g.vars.palette.Button.inheritContainedBg:l,boxShadow:(g.vars||g).shadows[2]},"contained"===t.variant&&"inherit"!==t.color&&{color:(g.vars||g).palette[t.color].contrastText,backgroundColor:(g.vars||g).palette[t.color].main},"inherit"===t.color&&{color:"inherit",borderColor:"currentColor"},"small"===t.size&&"text"===t.variant&&{padding:"4px 5px",fontSize:g.typography.pxToRem(13)},"large"===t.size&&"text"===t.variant&&{padding:"8px 11px",fontSize:g.typography.pxToRem(15)},"small"===t.size&&"outlined"===t.variant&&{padding:"3px 9px",fontSize:g.typography.pxToRem(13)},"large"===t.size&&"outlined"===t.variant&&{padding:"7px 21px",fontSize:g.typography.pxToRem(15)},"small"===t.size&&"contained"===t.variant&&{padding:"4px 10px",fontSize:g.typography.pxToRem(13)},"large"===t.size&&"contained"===t.variant&&{padding:"8px 22px",fontSize:g.typography.pxToRem(15)},t.fullWidth&&{width:"100%"})}),(e=>{let{ownerState:g}=e;return g.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${di.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${di.disabled}`]:{boxShadow:"none"}}})),pi=(0,nl.Ay)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.startIcon,g[`iconSize${(0,xl.A)(t.size)}`]]}})((e=>{let{ownerState:g}=e;return(0,we.A)({display:"inherit",marginRight:8,marginLeft:-4},"small"===g.size&&{marginLeft:-2},bi(g))})),hi=(0,nl.Ay)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.endIcon,g[`iconSize${(0,xl.A)(t.size)}`]]}})((e=>{let{ownerState:g}=e;return(0,we.A)({display:"inherit",marginRight:-4,marginLeft:8},"small"===g.size&&{marginRight:-2},bi(g))})),Gi=n.forwardRef((function(e,g){const t=n.useContext(si),I=n.useContext(ui),l=(0,Ne.A)(t,e),C=(0,ll.b)({props:l,name:"MuiButton"}),{children:o,color:a="primary",component:r="button",className:i,disabled:c=!1,disableElevation:A=!1,disableFocusRipple:d=!1,endIcon:s,focusVisibleClassName:u,fullWidth:m=!1,size:b="medium",startIcon:Z,type:p,variant:h="text"}=C,G=(0,He.A)(C,mi),y=(0,we.A)({},C,{color:a,component:r,disabled:c,disableElevation:A,disableFocusRipple:d,fullWidth:m,size:b,type:p,variant:h}),B=(e=>{const{color:g,disableElevation:t,fullWidth:I,size:n,variant:l,classes:C}=e,o={root:["root",l,`${l}${(0,xl.A)(g)}`,`size${(0,xl.A)(n)}`,`${l}Size${(0,xl.A)(n)}`,`color${(0,xl.A)(g)}`,t&&"disableElevation",I&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${(0,xl.A)(n)}`],endIcon:["icon","endIcon",`iconSize${(0,xl.A)(n)}`]},a=(0,tl.A)(o,Ai,C);return(0,we.A)({},C,a)})(y),S=Z&&(0,Qe.jsx)(pi,{className:B.startIcon,ownerState:y,children:Z}),W=s&&(0,Qe.jsx)(hi,{className:B.endIcon,ownerState:y,children:s}),V=I||"";return(0,Qe.jsxs)(Zi,(0,we.A)({ownerState:y,className:(0,Ln.A)(t.className,B.root,i,V),component:r,disabled:c,focusRipple:!d,focusVisibleClassName:(0,Ln.A)(B.focusVisible,u),ref:g,type:p},G,{classes:B,children:[S,o,W]}))})),yi=(0,Tr.A)((0,Qe.jsx)("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5M2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1m18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1M11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1m0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1M5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0z"}),"LightMode"),Bi=(0,Tr.A)((0,Qe.jsx)("path",{d:"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1"}),"DarkMode"),Si=(0,Tr.A)((0,Qe.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person"),Wi=(0,Tr.A)((0,Qe.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1z"}),"Lock"),Vi=(0,Tr.A)((0,Qe.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff"),vi=(0,Tr.A)((0,Qe.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility");var Ri=t(348);function fi(e){return(0,Yl.Ay)("MuiLink",e)}const Xi=(0,$n.A)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);var ki=t(7162);const Ji={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Yi=e=>{let{theme:g,ownerState:t}=e;const I=(e=>Ji[e]||e)(t.color),n=(0,ki.Yn)(g,`palette.${I}`,!1)||t.color,l=(0,ki.Yn)(g,`palette.${I}Channel`);return"vars"in g&&l?`rgba(${l} / 0.4)`:(0,Il.X4)(n,.4)},wi=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],Hi=(0,nl.Ay)(ZC,{name:"MuiLink",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,g[`underline${(0,xl.A)(t.underline)}`],"button"===t.component&&g.button]}})((e=>{let{theme:g,ownerState:t}=e;return(0,we.A)({},"none"===t.underline&&{textDecoration:"none"},"hover"===t.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===t.underline&&(0,we.A)({textDecoration:"underline"},"inherit"!==t.color&&{textDecorationColor:Yi({theme:g,ownerState:t})},{"&:hover":{textDecorationColor:"inherit"}}),"button"===t.component&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Xi.focusVisible}`]:{outline:"auto"}})})),Ni=n.forwardRef((function(e,g){const t=(0,ll.b)({props:e,name:"MuiLink"}),{className:I,color:l="primary",component:C="a",onBlur:o,onFocus:a,TypographyClasses:r,underline:i="always",variant:c="inherit",sx:A}=t,d=(0,He.A)(t,wi),{isFocusVisibleRef:s,onBlur:u,onFocus:m,ref:b}=(0,al.A)(),[Z,p]=n.useState(!1),h=(0,Cl.A)(g,b),G=(0,we.A)({},t,{color:l,component:C,focusVisible:Z,underline:i,variant:c}),y=(e=>{const{classes:g,component:t,focusVisible:I,underline:n}=e,l={root:["root",`underline${(0,xl.A)(n)}`,"button"===t&&"button",I&&"focusVisible"]};return(0,tl.A)(l,fi,g)})(G);return(0,Qe.jsx)(Hi,(0,we.A)({color:l,className:(0,Ln.A)(y.root,I),classes:r,component:C,onBlur:e=>{u(e),!1===s.current&&p(!1),o&&o(e)},onFocus:e=>{m(e),!0===s.current&&p(!0),a&&a(e)},ref:h,ownerState:G,variant:c,sx:[...Object.keys(Ji).includes(l)?[]:[{color:l}],...Array.isArray(A)?A:[A]]},d))})),Fi=()=>{const e=Xn("(prefers-color-scheme: dark)"),[g,t]=(0,n.useState)((()=>{const g=localStorage.getItem("theme");return g?"dark"===g:e})),[I,l]=(0,n.useState)(!1);(0,n.useEffect)((()=>{const e=()=>{l(window.scrollY>100)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)}),[]);const C=(0,kn.A)({palette:{mode:g?"dark":"light"}});(0,n.useEffect)((()=>{document.body.classList.toggle("dark-mode",g)}),[g]);const[o,a]=(0,n.useState)({identifier:"",password:""}),[r,i]=(0,n.useState)(!1),c=e=>{const{name:g,value:t}=e.target;a((e=>({...e,[g]:t})))},[A,d]=(0,n.useState)({identifier:"",password:""});return(0,Qe.jsx)(Tn,{theme:C,children:(0,Qe.jsxs)(gl,{className:"login-container "+(g?"dark-mode":""),children:[(0,Qe.jsx)(Ul,{className:"theme-toggle",onClick:()=>{const e=!g;t(e),localStorage.setItem("theme",e?"dark":"light")},"aria-label":"toggle theme",children:g?(0,Qe.jsx)(yi,{}):(0,Qe.jsx)(Bi,{})}),(0,Qe.jsx)(oC,{component:"main",maxWidth:"xs",children:(0,Qe.jsx)(gl,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"90vh"},children:(0,Qe.jsxs)(AC,{elevation:0,className:"login-card",sx:{padding:4,width:"100%"},children:[(0,Qe.jsx)(gl,{className:"logo-container",children:(0,Qe.jsx)("img",{src:"/logo-fsei.png",alt:"FSEI Mostaganem",className:"logo-image"})}),(0,Qe.jsx)(ZC,{variant:"h6",align:"center",className:"typing-text",sx:{mb:4,display:"inline-block",width:"fit-content"},children:"Syst\xe8me de Gestion des Pr\xe9sences"}),(0,Qe.jsxs)(gl,{component:"form",onSubmit:async e=>{e.preventDefault(),(()=>{let e=!0;const g={identifier:"",password:""};return o.identifier?o.identifier.length<3&&(g.identifier="L'identifiant doit contenir au moins 3 caract\xe8res",e=!1):(g.identifier="L'identifiant est requis",e=!1),o.password?o.password.length<6&&(g.password="Le mot de passe doit contenir au moins 6 caract\xe8res",e=!1):(g.password="Le mot de passe est requis",e=!1),d(g),e})()&&console.log("Form submitted:",o)},sx:{mt:1},children:[(0,Qe.jsx)(li,{className:"input-field",required:!0,fullWidth:!0,id:"identifier",label:"Identifiant",name:"identifier",autoComplete:"username",autoFocus:!0,variant:"outlined",value:o.identifier,onChange:c,InputProps:{startAdornment:(0,Qe.jsx)(ci,{position:"start",children:(0,Qe.jsx)(Si,{sx:{color:g?"#90caf9":"#2196F3"}})})},error:!!A.identifier,helperText:A.identifier}),(0,Qe.jsx)(li,{className:"input-field",required:!0,fullWidth:!0,name:"password",label:"Mot de passe",type:r?"text":"password",id:"password",variant:"outlined",autoComplete:"current-password",value:o.password,onChange:c,InputProps:{startAdornment:(0,Qe.jsx)(ci,{position:"start",children:(0,Qe.jsx)(Wi,{sx:{color:g?"#90caf9":"#2196F3"}})}),endAdornment:(0,Qe.jsx)(ci,{position:"end",children:(0,Qe.jsx)(Ul,{"aria-label":"toggle password visibility",onClick:()=>{i(!r)},edge:"end",children:r?(0,Qe.jsx)(Vi,{}):(0,Qe.jsx)(vi,{})})})},error:!!A.password,helperText:A.password}),(0,Qe.jsx)(Gi,{className:"submit-button",type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Se connecter"})]})]})})}),(0,Qe.jsxs)(gl,{className:"footer "+(I?"visible":""),children:[(0,Qe.jsxs)(gl,{className:"footer-section",children:[(0,Qe.jsx)(ZC,{className:"footer-title",children:"INFORMATION"}),(0,Qe.jsx)(Ni,{href:"https://www.univ-mosta.dz/",className:"footer-link",target:"_blank",children:"www.univ-mosta.dz"}),(0,Qe.jsx)(Ni,{href:"https://www.univ-mosta.dz/fsei",className:"footer-link",target:"_blank",children:"www.univ-mosta.dz/fsei"}),(0,Qe.jsx)(Ni,{href:"https://www.mesrs.dz/",className:"footer-link",target:"_blank",children:"www.mesrs.dz"})]}),(0,Qe.jsxs)(gl,{className:"footer-section",children:[(0,Qe.jsx)(ZC,{className:"footer-title",children:"CONTACT"}),(0,Qe.jsx)(ZC,{sx:{color:g?"#fff":"#666"},children:"Chemin des cretes ex INES Mostaganem"}),(0,Qe.jsx)(ZC,{sx:{color:g?"#fff":"#666"},children:"T\xe9l\xe9phone: +213 45 36 64 72"}),(0,Qe.jsx)(ZC,{sx:{color:g?"#fff":"#666"},children:"E-mail: admin.fseimoodle@univ-mosta.dz"})]}),(0,Qe.jsxs)(gl,{className:"footer-section",children:[(0,Qe.jsx)(ZC,{className:"footer-title",children:"D\xc9VELOPPEUR"}),(0,Qe.jsx)(ZC,{className:"developer-name",children:"Benderbouz Abdelkader Bilal"})]}),(0,Qe.jsxs)(gl,{className:"footer-section",children:[(0,Qe.jsx)(ZC,{className:"footer-title",children:"SUIVEZ-NOUS"}),(0,Qe.jsx)(gl,{className:"social-icons",children:(0,Qe.jsx)(Ni,{href:"https://www.facebook.com/fsei.mostaganem",target:"_blank",children:(0,Qe.jsx)(Ri.A,{})})})]})]})]})})};var Ki=t(9751);const xi=n.createContext();function Mi(e){return(0,Yl.Ay)("MuiGrid",e)}const zi=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],Ei=(0,$n.A)("MuiGrid",["root","container","item","zeroMinWidth",...[0,1,2,3,4,5,6,7,8,9,10].map((e=>`spacing-xs-${e}`)),...["column-reverse","column","row-reverse","row"].map((e=>`direction-xs-${e}`)),...["nowrap","wrap-reverse","wrap"].map((e=>`wrap-xs-${e}`)),...zi.map((e=>`grid-xs-${e}`)),...zi.map((e=>`grid-sm-${e}`)),...zi.map((e=>`grid-md-${e}`)),...zi.map((e=>`grid-lg-${e}`)),...zi.map((e=>`grid-xl-${e}`))]),Di=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function Ui(e){const g=parseFloat(e);return`${g}${String(e).replace(String(g),"")||"px"}`}function Ti(e){let{breakpoints:g,values:t}=e,I="";Object.keys(t).forEach((e=>{""===I&&0!==t[e]&&(I=e)}));const n=Object.keys(g).sort(((e,t)=>g[e]-g[t]));return n.slice(0,n.indexOf(I))}const Li=(0,nl.Ay)("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e,{container:I,direction:n,item:l,spacing:C,wrap:o,zeroMinWidth:a,breakpoints:r}=t;let i=[];I&&(i=function(e,g){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[t[`spacing-xs-${String(e)}`]];const I=[];return g.forEach((g=>{const n=e[g];Number(n)>0&&I.push(t[`spacing-${g}-${String(n)}`])})),I}(C,r,g));const c=[];return r.forEach((e=>{const I=t[e];I&&c.push(g[`grid-${e}-${String(I)}`])})),[g.root,I&&g.container,l&&g.item,a&&g.zeroMinWidth,...i,"row"!==n&&g[`direction-xs-${String(n)}`],"wrap"!==o&&g[`wrap-xs-${String(o)}`],...c]}})((e=>{let{ownerState:g}=e;return(0,we.A)({boxSizing:"border-box"},g.container&&{display:"flex",flexWrap:"wrap",width:"100%"},g.item&&{margin:0},g.zeroMinWidth&&{minWidth:0},"wrap"!==g.wrap&&{flexWrap:g.wrap})}),(function(e){let{theme:g,ownerState:t}=e;const I=(0,Ki.kW)({values:t.direction,breakpoints:g.breakpoints.values});return(0,Ki.NI)({theme:g},I,(e=>{const g={flexDirection:e};return 0===e.indexOf("column")&&(g[`& > .${Ei.item}`]={maxWidth:"none"}),g}))}),(function(e){let{theme:g,ownerState:t}=e;const{container:I,rowSpacing:n}=t;let l={};if(I&&0!==n){const e=(0,Ki.kW)({values:n,breakpoints:g.breakpoints.values});let t;"object"===typeof e&&(t=Ti({breakpoints:g.breakpoints.values,values:e})),l=(0,Ki.NI)({theme:g},e,((e,I)=>{var n;const l=g.spacing(e);return"0px"!==l?{marginTop:`-${Ui(l)}`,[`& > .${Ei.item}`]:{paddingTop:Ui(l)}}:null!=(n=t)&&n.includes(I)?{}:{marginTop:0,[`& > .${Ei.item}`]:{paddingTop:0}}}))}return l}),(function(e){let{theme:g,ownerState:t}=e;const{container:I,columnSpacing:n}=t;let l={};if(I&&0!==n){const e=(0,Ki.kW)({values:n,breakpoints:g.breakpoints.values});let t;"object"===typeof e&&(t=Ti({breakpoints:g.breakpoints.values,values:e})),l=(0,Ki.NI)({theme:g},e,((e,I)=>{var n;const l=g.spacing(e);return"0px"!==l?{width:`calc(100% + ${Ui(l)})`,marginLeft:`-${Ui(l)}`,[`& > .${Ei.item}`]:{paddingLeft:Ui(l)}}:null!=(n=t)&&n.includes(I)?{}:{width:"100%",marginLeft:0,[`& > .${Ei.item}`]:{paddingLeft:0}}}))}return l}),(function(e){let g,{theme:t,ownerState:I}=e;return t.breakpoints.keys.reduce(((e,n)=>{let l={};if(I[n]&&(g=I[n]),!g)return e;if(!0===g)l={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===g)l={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const C=(0,Ki.kW)({values:I.columns,breakpoints:t.breakpoints.values}),o="object"===typeof C?C[n]:C;if(void 0===o||null===o)return e;const a=Math.round(g/o*1e8)/1e6+"%";let r={};if(I.container&&I.item&&0!==I.columnSpacing){const e=t.spacing(I.columnSpacing);if("0px"!==e){const g=`calc(${a} + ${Ui(e)})`;r={flexBasis:g,maxWidth:g}}}l=(0,we.A)({flexBasis:a,flexGrow:0,maxWidth:a},r)}return 0===t.breakpoints.values[n]?Object.assign(e,l):e[t.breakpoints.up(n)]=l,e}),{})}));const Qi=e=>{const{classes:g,container:t,direction:I,item:n,spacing:l,wrap:C,zeroMinWidth:o,breakpoints:a}=e;let r=[];t&&(r=function(e,g){if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[`spacing-xs-${String(e)}`];const t=[];return g.forEach((g=>{const I=e[g];if(Number(I)>0){const e=`spacing-${g}-${String(I)}`;t.push(e)}})),t}(l,a));const i=[];a.forEach((g=>{const t=e[g];t&&i.push(`grid-${g}-${String(t)}`)}));const c={root:["root",t&&"container",n&&"item",o&&"zeroMinWidth",...r,"row"!==I&&`direction-xs-${String(I)}`,"wrap"!==C&&`wrap-xs-${String(C)}`,...i]};return(0,tl.A)(c,Mi,g)};const ji=n.forwardRef((function(e,g){const t=(0,ll.b)({props:e,name:"MuiGrid"}),{breakpoints:I}=ya(),l=(0,Pn.A)(t),{className:C,columns:o,columnSpacing:a,component:r="div",container:i=!1,direction:c="row",item:A=!1,rowSpacing:d,spacing:s=0,wrap:u="wrap",zeroMinWidth:m=!1}=l,b=(0,He.A)(l,Di),Z=d||s,p=a||s,h=n.useContext(xi),G=i?o||12:h,y={},B=(0,we.A)({},b);I.keys.forEach((e=>{null!=b[e]&&(y[e]=b[e],delete B[e])}));const S=(0,we.A)({},l,{columns:G,container:i,direction:c,item:A,rowSpacing:Z,columnSpacing:p,wrap:u,zeroMinWidth:m,spacing:s},y,{breakpoints:I.keys}),W=Qi(S);return(0,Qe.jsx)(xi.Provider,{value:G,children:(0,Qe.jsx)(Li,(0,we.A)({ownerState:S,className:(0,Ln.A)(W.root,C),as:r,ref:g},B))})}));function Pi(e){return(0,Yl.Ay)("MuiCard",e)}(0,$n.A)("MuiCard",["root"]);const Oi=["className","raised"],qi=(0,nl.Ay)(AC,{name:"MuiCard",slot:"Root",overridesResolver:(e,g)=>g.root})((()=>({overflow:"hidden"}))),$i=n.forwardRef((function(e,g){const t=(0,ll.b)({props:e,name:"MuiCard"}),{className:I,raised:n=!1}=t,l=(0,He.A)(t,Oi),C=(0,we.A)({},t,{raised:n}),o=(e=>{const{classes:g}=e;return(0,tl.A)({root:["root"]},Pi,g)})(C);return(0,Qe.jsx)(qi,(0,we.A)({className:(0,Ln.A)(o.root,I),elevation:n?8:void 0,ref:g,ownerState:C},l))}));function _i(e){return(0,Yl.Ay)("MuiCardContent",e)}(0,$n.A)("MuiCardContent",["root"]);const ec=["className","component"],gc=(0,nl.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,g)=>g.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),tc=n.forwardRef((function(e,g){const t=(0,ll.b)({props:e,name:"MuiCardContent"}),{className:I,component:n="div"}=t,l=(0,He.A)(t,ec),C=(0,we.A)({},t,{component:n}),o=(e=>{const{classes:g}=e;return(0,tl.A)({root:["root"]},_i,g)})(C);return(0,Qe.jsx)(gc,(0,we.A)({as:n,className:(0,Ln.A)(o.root,I),ownerState:C,ref:g},l))})),Ic=()=>(0,Qe.jsxs)(gl,{sx:{flexGrow:1,p:3},children:[(0,Qe.jsx)(ZC,{variant:"h4",gutterBottom:!0,children:"Tableau de bord du professeur"}),(0,Qe.jsxs)(ji,{container:!0,spacing:3,children:[(0,Qe.jsx)(ji,{item:!0,xs:12,sm:6,md:4,children:(0,Qe.jsx)($i,{children:(0,Qe.jsxs)(tc,{children:[(0,Qe.jsx)(ZC,{variant:"h6",children:"Contr\xf4le d'assiduit\xe9"}),(0,Qe.jsx)(ZC,{variant:"body2",color:"text.secondary",children:"G\xe9rer les pr\xe9sences pour TD/TP et examens"}),(0,Qe.jsx)(Gi,{component:fe,to:"/professor/attendance",variant:"contained",sx:{mt:2},children:"Acc\xe9der"})]})})}),(0,Qe.jsx)(ji,{item:!0,xs:12,sm:6,md:4,children:(0,Qe.jsx)($i,{children:(0,Qe.jsxs)(tc,{children:[(0,Qe.jsx)(ZC,{variant:"h6",children:"Historique des s\xe9ances"}),(0,Qe.jsx)(ZC,{variant:"body2",color:"text.secondary",children:"Consulter l'historique des pr\xe9sences"}),(0,Qe.jsx)(Gi,{component:fe,to:"/professor/history",variant:"contained",sx:{mt:2},children:"Consulter"})]})})}),(0,Qe.jsx)(ji,{item:!0,xs:12,sm:6,md:4,children:(0,Qe.jsx)($i,{children:(0,Qe.jsxs)(tc,{children:[(0,Qe.jsx)(ZC,{variant:"h6",children:"Quiz et Sondages"}),(0,Qe.jsx)(ZC,{variant:"body2",color:"text.secondary",children:"Cr\xe9er et g\xe9rer les \xe9valuations"}),(0,Qe.jsx)(Gi,{component:fe,to:"/professor/quiz",variant:"contained",sx:{mt:2},children:"G\xe9rer"})]})})}),(0,Qe.jsx)(ji,{item:!0,xs:12,sm:6,md:4,children:(0,Qe.jsx)($i,{children:(0,Qe.jsxs)(tc,{children:[(0,Qe.jsx)(ZC,{variant:"h6",children:"Demandes d'absence"}),(0,Qe.jsx)(ZC,{variant:"body2",color:"text.secondary",children:"G\xe9rer les justificatifs et demandes"}),(0,Qe.jsx)(Gi,{component:fe,to:"/professor/absence-requests",variant:"contained",sx:{mt:2},children:"G\xe9rer"})]})})})]})]});const nc=(0,$n.A)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const lc=(0,$n.A)("MuiListItemIcon",["root","alignItemsFlexStart"]);const Cc=(0,$n.A)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function oc(e){return(0,Yl.Ay)("MuiMenuItem",e)}const ac=(0,$n.A)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),rc=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],ic=(0,nl.Ay)(Kl,{shouldForwardProp:e=>(0,QC.A)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,t.dense&&g.dense,t.divider&&g.divider,!t.disableGutters&&g.gutters]}})((e=>{let{theme:g,ownerState:t}=e;return(0,we.A)({},g.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(g.vars||g).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(g.vars||g).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ac.selected}`]:{backgroundColor:g.vars?`rgba(${g.vars.palette.primary.mainChannel} / ${g.vars.palette.action.selectedOpacity})`:(0,Il.X4)(g.palette.primary.main,g.palette.action.selectedOpacity),[`&.${ac.focusVisible}`]:{backgroundColor:g.vars?`rgba(${g.vars.palette.primary.mainChannel} / calc(${g.vars.palette.action.selectedOpacity} + ${g.vars.palette.action.focusOpacity}))`:(0,Il.X4)(g.palette.primary.main,g.palette.action.selectedOpacity+g.palette.action.focusOpacity)}},[`&.${ac.selected}:hover`]:{backgroundColor:g.vars?`rgba(${g.vars.palette.primary.mainChannel} / calc(${g.vars.palette.action.selectedOpacity} + ${g.vars.palette.action.hoverOpacity}))`:(0,Il.X4)(g.palette.primary.main,g.palette.action.selectedOpacity+g.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:g.vars?`rgba(${g.vars.palette.primary.mainChannel} / ${g.vars.palette.action.selectedOpacity})`:(0,Il.X4)(g.palette.primary.main,g.palette.action.selectedOpacity)}},[`&.${ac.focusVisible}`]:{backgroundColor:(g.vars||g).palette.action.focus},[`&.${ac.disabled}`]:{opacity:(g.vars||g).palette.action.disabledOpacity},[`& + .${nc.root}`]:{marginTop:g.spacing(1),marginBottom:g.spacing(1)},[`& + .${nc.inset}`]:{marginLeft:52},[`& .${Cc.root}`]:{marginTop:0,marginBottom:0},[`& .${Cc.inset}`]:{paddingLeft:36},[`& .${lc.root}`]:{minWidth:36}},!t.dense&&{[g.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&(0,we.A)({minHeight:32,paddingTop:4,paddingBottom:4},g.typography.body2,{[`& .${lc.root} svg`]:{fontSize:"1.25rem"}}))})),cc=n.forwardRef((function(e,g){const t=(0,ll.b)({props:e,name:"MuiMenuItem"}),{autoFocus:I=!1,component:l="li",dense:C=!1,divider:o=!1,disableGutters:a=!1,focusVisibleClassName:r,role:i="menuitem",tabIndex:c,className:A}=t,d=(0,He.A)(t,rc),s=n.useContext(qo),u=n.useMemo((()=>({dense:C||s.dense||!1,disableGutters:a})),[s.dense,C,a]),m=n.useRef(null);(0,JC.A)((()=>{I&&m.current&&m.current.focus()}),[I]);const b=(0,we.A)({},t,{dense:u.dense,divider:o,disableGutters:a}),Z=(e=>{const{disabled:g,dense:t,divider:I,disableGutters:n,selected:l,classes:C}=e,o={root:["root",t&&"dense",g&&"disabled",!n&&"gutters",I&&"divider",l&&"selected"]},a=(0,tl.A)(o,oc,C);return(0,we.A)({},C,a)})(t),p=(0,Cl.A)(m,g);let h;return t.disabled||(h=void 0!==c?c:-1),(0,Qe.jsx)(qo.Provider,{value:u,children:(0,Qe.jsx)(ic,(0,we.A)({ref:p,role:i,tabIndex:h,component:l,focusVisibleClassName:(0,Ln.A)(Z.focusVisible,r),className:(0,Ln.A)(Z.root,A)},d,{ownerState:b,classes:Z}))})}));function Ac(e){return(0,Yl.Ay)("MuiTableContainer",e)}(0,$n.A)("MuiTableContainer",["root"]);const dc=["className","component"],sc=(0,nl.Ay)("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,g)=>g.root})({width:"100%",overflowX:"auto"}),uc=n.forwardRef((function(e,g){const t=(0,ll.b)({props:e,name:"MuiTableContainer"}),{className:I,component:n="div"}=t,l=(0,He.A)(t,dc),C=(0,we.A)({},t,{component:n}),o=(e=>{const{classes:g}=e;return(0,tl.A)({root:["root"]},Ac,g)})(C);return(0,Qe.jsx)(sc,(0,we.A)({ref:g,as:n,className:(0,Ln.A)(o.root,I),ownerState:C},l))}));const mc=n.createContext();function bc(e){return(0,Yl.Ay)("MuiTable",e)}(0,$n.A)("MuiTable",["root","stickyHeader"]);const Zc=["className","component","padding","size","stickyHeader"],pc=(0,nl.Ay)("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,t.stickyHeader&&g.stickyHeader]}})((e=>{let{theme:g,ownerState:t}=e;return(0,we.A)({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":(0,we.A)({},g.typography.body2,{padding:g.spacing(2),color:(g.vars||g).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},t.stickyHeader&&{borderCollapse:"separate"})})),hc="table",Gc=n.forwardRef((function(e,g){const t=(0,ll.b)({props:e,name:"MuiTable"}),{className:I,component:l=hc,padding:C="normal",size:o="medium",stickyHeader:a=!1}=t,r=(0,He.A)(t,Zc),i=(0,we.A)({},t,{component:l,padding:C,size:o,stickyHeader:a}),c=(e=>{const{classes:g,stickyHeader:t}=e,I={root:["root",t&&"stickyHeader"]};return(0,tl.A)(I,bc,g)})(i),A=n.useMemo((()=>({padding:C,size:o,stickyHeader:a})),[C,o,a]);return(0,Qe.jsx)(mc.Provider,{value:A,children:(0,Qe.jsx)(pc,(0,we.A)({as:l,role:l===hc?null:"table",ref:g,className:(0,Ln.A)(c.root,I),ownerState:i},r))})}));const yc=n.createContext();function Bc(e){return(0,Yl.Ay)("MuiTableHead",e)}(0,$n.A)("MuiTableHead",["root"]);const Sc=["className","component"],Wc=(0,nl.Ay)("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,g)=>g.root})({display:"table-header-group"}),Vc={variant:"head"},vc="thead",Rc=n.forwardRef((function(e,g){const t=(0,ll.b)({props:e,name:"MuiTableHead"}),{className:I,component:n=vc}=t,l=(0,He.A)(t,Sc),C=(0,we.A)({},t,{component:n}),o=(e=>{const{classes:g}=e;return(0,tl.A)({root:["root"]},Bc,g)})(C);return(0,Qe.jsx)(yc.Provider,{value:Vc,children:(0,Qe.jsx)(Wc,(0,we.A)({as:n,className:(0,Ln.A)(o.root,I),ref:g,role:n===vc?null:"rowgroup",ownerState:C},l))})}));function fc(e){return(0,Yl.Ay)("MuiTableRow",e)}const Xc=(0,$n.A)("MuiTableRow",["root","selected","hover","head","footer"]),kc=["className","component","hover","selected"],Jc=(0,nl.Ay)("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,t.head&&g.head,t.footer&&g.footer]}})((e=>{let{theme:g}=e;return{color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${Xc.hover}:hover`]:{backgroundColor:(g.vars||g).palette.action.hover},[`&.${Xc.selected}`]:{backgroundColor:g.vars?`rgba(${g.vars.palette.primary.mainChannel} / ${g.vars.palette.action.selectedOpacity})`:(0,Il.X4)(g.palette.primary.main,g.palette.action.selectedOpacity),"&:hover":{backgroundColor:g.vars?`rgba(${g.vars.palette.primary.mainChannel} / calc(${g.vars.palette.action.selectedOpacity} + ${g.vars.palette.action.hoverOpacity}))`:(0,Il.X4)(g.palette.primary.main,g.palette.action.selectedOpacity+g.palette.action.hoverOpacity)}}}})),Yc="tr",wc=n.forwardRef((function(e,g){const t=(0,ll.b)({props:e,name:"MuiTableRow"}),{className:I,component:l=Yc,hover:C=!1,selected:o=!1}=t,a=(0,He.A)(t,kc),r=n.useContext(yc),i=(0,we.A)({},t,{component:l,hover:C,selected:o,head:r&&"head"===r.variant,footer:r&&"footer"===r.variant}),c=(e=>{const{classes:g,selected:t,hover:I,head:n,footer:l}=e,C={root:["root",t&&"selected",I&&"hover",n&&"head",l&&"footer"]};return(0,tl.A)(C,fc,g)})(i);return(0,Qe.jsx)(Jc,(0,we.A)({as:l,ref:g,className:(0,Ln.A)(c.root,I),role:l===Yc?null:"row",ownerState:i},a))}));function Hc(e){return(0,Yl.Ay)("MuiTableCell",e)}const Nc=(0,$n.A)("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),Fc=["align","className","component","padding","scope","size","sortDirection","variant"],Kc=(0,nl.Ay)("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,g[t.variant],g[`size${(0,xl.A)(t.size)}`],"normal"!==t.padding&&g[`padding${(0,xl.A)(t.padding)}`],"inherit"!==t.align&&g[`align${(0,xl.A)(t.align)}`],t.stickyHeader&&g.stickyHeader]}})((e=>{let{theme:g,ownerState:t}=e;return(0,we.A)({},g.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:g.vars?`1px solid ${g.vars.palette.TableCell.border}`:`1px solid\n    ${"light"===g.palette.mode?(0,Il.a)((0,Il.X4)(g.palette.divider,1),.88):(0,Il.e$)((0,Il.X4)(g.palette.divider,1),.68)}`,textAlign:"left",padding:16},"head"===t.variant&&{color:(g.vars||g).palette.text.primary,lineHeight:g.typography.pxToRem(24),fontWeight:g.typography.fontWeightMedium},"body"===t.variant&&{color:(g.vars||g).palette.text.primary},"footer"===t.variant&&{color:(g.vars||g).palette.text.secondary,lineHeight:g.typography.pxToRem(21),fontSize:g.typography.pxToRem(12)},"small"===t.size&&{padding:"6px 16px",[`&.${Nc.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},"checkbox"===t.padding&&{width:48,padding:"0 0 0 4px"},"none"===t.padding&&{padding:0},"left"===t.align&&{textAlign:"left"},"center"===t.align&&{textAlign:"center"},"right"===t.align&&{textAlign:"right",flexDirection:"row-reverse"},"justify"===t.align&&{textAlign:"justify"},t.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(g.vars||g).palette.background.default})})),xc=n.forwardRef((function(e,g){const t=(0,ll.b)({props:e,name:"MuiTableCell"}),{align:I="inherit",className:l,component:C,padding:o,scope:a,size:r,sortDirection:i,variant:c}=t,A=(0,He.A)(t,Fc),d=n.useContext(mc),s=n.useContext(yc),u=s&&"head"===s.variant;let m;m=C||(u?"th":"td");let b=a;"td"===m?b=void 0:!b&&u&&(b="col");const Z=c||s&&s.variant,p=(0,we.A)({},t,{align:I,component:m,padding:o||(d&&d.padding?d.padding:"normal"),size:r||(d&&d.size?d.size:"medium"),sortDirection:i,stickyHeader:"head"===Z&&d&&d.stickyHeader,variant:Z}),h=(e=>{const{classes:g,variant:t,align:I,padding:n,size:l,stickyHeader:C}=e,o={root:["root",t,C&&"stickyHeader","inherit"!==I&&`align${(0,xl.A)(I)}`,"normal"!==n&&`padding${(0,xl.A)(n)}`,`size${(0,xl.A)(l)}`]};return(0,tl.A)(o,Hc,g)})(p);let G=null;return i&&(G="asc"===i?"ascending":"descending"),(0,Qe.jsx)(Kc,(0,we.A)({as:m,ref:g,className:(0,Ln.A)(h.root,l),"aria-sort":G,scope:b,ownerState:p},A))}));function Mc(e){return(0,Yl.Ay)("MuiTableBody",e)}(0,$n.A)("MuiTableBody",["root"]);const zc=["className","component"],Ec=(0,nl.Ay)("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,g)=>g.root})({display:"table-row-group"}),Dc={variant:"body"},Uc="tbody",Tc=n.forwardRef((function(e,g){const t=(0,ll.b)({props:e,name:"MuiTableBody"}),{className:I,component:n=Uc}=t,l=(0,He.A)(t,zc),C=(0,we.A)({},t,{component:n}),o=(e=>{const{classes:g}=e;return(0,tl.A)({root:["root"]},Mc,g)})(C);return(0,Qe.jsx)(yc.Provider,{value:Dc,children:(0,Qe.jsx)(Ec,(0,we.A)({className:(0,Ln.A)(o.root,I),as:n,ref:g,role:n===Uc?null:"rowgroup",ownerState:C},l))})}));function Lc(e){return(0,Yl.Ay)("MuiDialog",e)}const Qc=(0,$n.A)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]);const jc=n.createContext({}),Pc=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],Oc=(0,nl.Ay)(Ua,{name:"MuiDialog",slot:"Backdrop",overrides:(e,g)=>g.backdrop})({zIndex:-1}),qc=(0,nl.Ay)(nr,{name:"MuiDialog",slot:"Root",overridesResolver:(e,g)=>g.root})({"@media print":{position:"absolute !important"}}),$c=(0,nl.Ay)("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.container,g[`scroll${(0,xl.A)(t.scroll)}`]]}})((e=>{let{ownerState:g}=e;return(0,we.A)({height:"100%","@media print":{height:"auto"},outline:0},"paper"===g.scroll&&{display:"flex",justifyContent:"center",alignItems:"center"},"body"===g.scroll&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})})),_c=(0,nl.Ay)(AC,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.paper,g[`scrollPaper${(0,xl.A)(t.scroll)}`],g[`paperWidth${(0,xl.A)(String(t.maxWidth))}`],t.fullWidth&&g.paperFullWidth,t.fullScreen&&g.paperFullScreen]}})((e=>{let{theme:g,ownerState:t}=e;return(0,we.A)({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},"paper"===t.scroll&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},"body"===t.scroll&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!t.maxWidth&&{maxWidth:"calc(100% - 64px)"},"xs"===t.maxWidth&&{maxWidth:"px"===g.breakpoints.unit?Math.max(g.breakpoints.values.xs,444):`max(${g.breakpoints.values.xs}${g.breakpoints.unit}, 444px)`,[`&.${Qc.paperScrollBody}`]:{[g.breakpoints.down(Math.max(g.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}},t.maxWidth&&"xs"!==t.maxWidth&&{maxWidth:`${g.breakpoints.values[t.maxWidth]}${g.breakpoints.unit}`,[`&.${Qc.paperScrollBody}`]:{[g.breakpoints.down(g.breakpoints.values[t.maxWidth]+64)]:{maxWidth:"calc(100% - 64px)"}}},t.fullWidth&&{width:"calc(100% - 64px)"},t.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${Qc.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})})),eA=n.forwardRef((function(e,g){const t=(0,ll.b)({props:e,name:"MuiDialog"}),I=ya(),l={enter:I.transitions.duration.enteringScreen,exit:I.transitions.duration.leavingScreen},{"aria-describedby":C,"aria-labelledby":o,BackdropComponent:a,BackdropProps:r,children:i,className:c,disableEscapeKeyDown:A=!1,fullScreen:d=!1,fullWidth:s=!1,maxWidth:u="sm",onBackdropClick:m,onClick:b,onClose:Z,open:p,PaperComponent:h=AC,PaperProps:G={},scroll:y="paper",TransitionComponent:B=Ma,transitionDuration:S=l,TransitionProps:W}=t,V=(0,He.A)(t,Pc),v=(0,we.A)({},t,{disableEscapeKeyDown:A,fullScreen:d,fullWidth:s,maxWidth:u,scroll:y}),R=(e=>{const{classes:g,scroll:t,maxWidth:I,fullWidth:n,fullScreen:l}=e,C={root:["root"],container:["container",`scroll${(0,xl.A)(t)}`],paper:["paper",`paperScroll${(0,xl.A)(t)}`,`paperWidth${(0,xl.A)(String(I))}`,n&&"paperFullWidth",l&&"paperFullScreen"]};return(0,tl.A)(C,Lc,g)})(v),f=n.useRef(),X=(0,pC.A)(o),k=n.useMemo((()=>({titleId:X})),[X]);return(0,Qe.jsx)(qc,(0,we.A)({className:(0,Ln.A)(R.root,c),closeAfterTransition:!0,components:{Backdrop:Oc},componentsProps:{backdrop:(0,we.A)({transitionDuration:S,as:a},r)},disableEscapeKeyDown:A,onClose:Z,open:p,ref:g,onClick:e=>{b&&b(e),f.current&&(f.current=null,m&&m(e),Z&&Z(e,"backdropClick"))},ownerState:v},V,{children:(0,Qe.jsx)(B,(0,we.A)({appear:!0,in:p,timeout:S,role:"presentation"},W,{children:(0,Qe.jsx)($c,{className:(0,Ln.A)(R.container),onMouseDown:e=>{f.current=e.target===e.currentTarget},ownerState:v,children:(0,Qe.jsx)(_c,(0,we.A)({as:h,elevation:24,role:"dialog","aria-describedby":C,"aria-labelledby":X},G,{className:(0,Ln.A)(R.paper,G.className),ownerState:v,children:(0,Qe.jsx)(jc.Provider,{value:k,children:i})}))})}))}))}));function gA(e){return(0,Yl.Ay)("MuiDialogTitle",e)}const tA=(0,$n.A)("MuiDialogTitle",["root"]),IA=["className","id"],nA=(0,nl.Ay)(ZC,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,g)=>g.root})({padding:"16px 24px",flex:"0 0 auto"}),lA=n.forwardRef((function(e,g){const t=(0,ll.b)({props:e,name:"MuiDialogTitle"}),{className:I,id:l}=t,C=(0,He.A)(t,IA),o=t,a=(e=>{const{classes:g}=e;return(0,tl.A)({root:["root"]},gA,g)})(o),{titleId:r=l}=n.useContext(jc);return(0,Qe.jsx)(nA,(0,we.A)({component:"h2",className:(0,Ln.A)(a.root,I),ownerState:o,ref:g,variant:"h6",id:null!=l?l:r},C))}));function CA(e){return(0,Yl.Ay)("MuiDialogContent",e)}(0,$n.A)("MuiDialogContent",["root","dividers"]);const oA=["className","dividers"],aA=(0,nl.Ay)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,t.dividers&&g.dividers]}})((e=>{let{theme:g,ownerState:t}=e;return(0,we.A)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},t.dividers?{padding:"16px 24px",borderTop:`1px solid ${(g.vars||g).palette.divider}`,borderBottom:`1px solid ${(g.vars||g).palette.divider}`}:{[`.${tA.root} + &`]:{paddingTop:0}})})),rA=n.forwardRef((function(e,g){const t=(0,ll.b)({props:e,name:"MuiDialogContent"}),{className:I,dividers:n=!1}=t,l=(0,He.A)(t,oA),C=(0,we.A)({},t,{dividers:n}),o=(e=>{const{classes:g,dividers:t}=e,I={root:["root",t&&"dividers"]};return(0,tl.A)(I,CA,g)})(C);return(0,Qe.jsx)(aA,(0,we.A)({className:(0,Ln.A)(o.root,I),ownerState:C,ref:g},l))}));function iA(e){return(0,Yl.Ay)("MuiDialogActions",e)}(0,$n.A)("MuiDialogActions",["root","spacing"]);const cA=["className","disableSpacing"],AA=(0,nl.Ay)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,!t.disableSpacing&&g.spacing]}})((e=>{let{ownerState:g}=e;return(0,we.A)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!g.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})})),dA=n.forwardRef((function(e,g){const t=(0,ll.b)({props:e,name:"MuiDialogActions"}),{className:I,disableSpacing:n=!1}=t,l=(0,He.A)(t,cA),C=(0,we.A)({},t,{disableSpacing:n}),o=(e=>{const{classes:g,disableSpacing:t}=e,I={root:["root",!t&&"spacing"]};return(0,tl.A)(I,iA,g)})(C);return(0,Qe.jsx)(AA,(0,we.A)({className:(0,Ln.A)(o.root,I),ownerState:C,ref:g},l))}));var sA=t(9309),uA=t.n(sA);const mA=()=>{const[e,g]=(0,n.useState)(null),[t,I]=(0,n.useState)(""),[l,C]=(0,n.useState)(""),[o,a]=(0,n.useState)([]),[r,i]=(0,n.useState)(!1),c=e=>{a(o.map((g=>g.id===e?{...g,present:!g.present}:g)))};return(0,Qe.jsxs)(gl,{sx:{p:3},children:[(0,Qe.jsx)(ZC,{variant:"h5",gutterBottom:!0,children:"Gestion des pr\xe9sences"}),(0,Qe.jsxs)(gl,{sx:{display:"flex",gap:2,mb:3},children:[(0,Qe.jsxs)(Ho,{sx:{minWidth:200},children:[(0,Qe.jsx)(Xo,{children:"Classe"}),(0,Qe.jsx)(ei,{value:t,label:"Classe",onChange:e=>{I(e.target.value),a([{id:"1",name:"Student 1",present:!1},{id:"2",name:"Student 2",present:!1}])},children:["Class A","Class B","Class C"].map((e=>(0,Qe.jsx)(cc,{value:e,children:e},e)))})]}),(0,Qe.jsxs)(Ho,{sx:{minWidth:200},children:[(0,Qe.jsx)(Xo,{children:"Type de s\xe9ance"}),(0,Qe.jsx)(ei,{value:l,label:"Type de s\xe9ance",onChange:e=>C(e.target.value),children:["Cours","TD","TP","Examen"].map((e=>(0,Qe.jsx)(cc,{value:e,children:e},e)))})]}),(0,Qe.jsx)(Gi,{variant:"contained",onClick:()=>i(!0),children:"Scanner QR Code"})]}),(0,Qe.jsx)(uc,{component:AC,children:(0,Qe.jsxs)(Gc,{children:[(0,Qe.jsx)(Rc,{children:(0,Qe.jsxs)(wc,{children:[(0,Qe.jsx)(xc,{children:"ID"}),(0,Qe.jsx)(xc,{children:"Nom"}),(0,Qe.jsx)(xc,{children:"Pr\xe9sence"}),(0,Qe.jsx)(xc,{children:"Actions"})]})}),(0,Qe.jsx)(Tc,{children:o.map((e=>(0,Qe.jsxs)(wc,{children:[(0,Qe.jsx)(xc,{children:e.id}),(0,Qe.jsx)(xc,{children:e.name}),(0,Qe.jsx)(xc,{children:e.present?"Pr\xe9sent":"Absent"}),(0,Qe.jsx)(xc,{children:(0,Qe.jsx)(Gi,{variant:"outlined",onClick:()=>c(e.id),children:e.present?"Marquer absent":"Marquer pr\xe9sent"})})]},e.id)))})]})}),(0,Qe.jsx)(gl,{sx:{mt:2},children:(0,Qe.jsx)(Gi,{variant:"contained",onClick:()=>{console.log("Saving attendance:",{class:t,type:l,students:o})},disabled:!t||!l,children:"Enregistrer"})}),(0,Qe.jsxs)(eA,{open:r,onClose:()=>i(!1),children:[(0,Qe.jsx)(lA,{children:"Scanner le QR Code"}),(0,Qe.jsxs)(rA,{children:[e&&(0,Qe.jsx)(ZC,{color:"error",sx:{mb:2},children:e}),r&&(0,Qe.jsx)(uA(),{onError:e=>{g((null===e||void 0===e?void 0:e.message)||"Erreur de scan"),console.error("Erreur QR Scanner:",e)},onScan:e=>{if(g(null),e)try{const g=JSON.parse(e);g.studentId&&(c(g.studentId),i(!1))}catch(t){g("Format QR code invalide")}},style:{width:"100%"}})]}),(0,Qe.jsx)(dA,{children:(0,Qe.jsx)(Gi,{onClick:()=>i(!1),children:"Fermer"})})]})]})};var bA=t(3471),ZA=t(5540);const pA=()=>{const[e,g]=(0,n.useState)([]),[t,I]=(0,n.useState)(!1),[l,C]=(0,n.useState)({title:"",type:"quiz",questions:[]});return(0,Qe.jsxs)(gl,{sx:{p:3},children:[(0,Qe.jsx)(ZC,{variant:"h5",gutterBottom:!0,children:"Gestion des Quiz et Sondages"}),(0,Qe.jsx)(Gi,{variant:"contained",onClick:()=>I(!0),sx:{mb:3},children:"Cr\xe9er un nouveau quiz/sondage"}),(0,Qe.jsx)(ji,{container:!0,spacing:3,children:e.map((t=>(0,Qe.jsx)(ji,{item:!0,xs:12,sm:6,md:4,children:(0,Qe.jsx)($i,{children:(0,Qe.jsxs)(tc,{children:[(0,Qe.jsx)(ZC,{variant:"h6",children:t.title}),(0,Qe.jsxs)(ZC,{color:"textSecondary",children:["Type: ","quiz"===t.type?"Quiz":"Sondage"]}),(0,Qe.jsxs)(ZC,{children:[t.questions.length," question(s)"]}),(0,Qe.jsxs)(gl,{sx:{mt:2},children:[(0,Qe.jsx)(Ul,{onClick:()=>{return I=t.id,void g(e.filter((e=>e.id!==I)));var I},children:(0,Qe.jsx)(bA.A,{})}),(0,Qe.jsx)(Ul,{children:(0,Qe.jsx)(ZA.A,{})})]})]})})},t.id)))}),(0,Qe.jsxs)(eA,{open:t,onClose:()=>I(!1),children:[(0,Qe.jsx)(lA,{children:"Cr\xe9er un nouveau quiz/sondage"}),(0,Qe.jsx)(rA,{children:(0,Qe.jsxs)(gl,{sx:{display:"flex",flexDirection:"column",gap:2,mt:2},children:[(0,Qe.jsx)(li,{label:"Titre",value:l.title,onChange:e=>C({...l,title:e.target.value}),fullWidth:!0}),(0,Qe.jsxs)(Ho,{fullWidth:!0,children:[(0,Qe.jsx)(Xo,{children:"Type"}),(0,Qe.jsxs)(ei,{value:l.type,label:"Type",onChange:e=>C({...l,type:e.target.value}),children:[(0,Qe.jsx)(cc,{value:"quiz",children:"Quiz"}),(0,Qe.jsx)(cc,{value:"survey",children:"Sondage"})]})]})]})}),(0,Qe.jsxs)(dA,{children:[(0,Qe.jsx)(Gi,{onClick:()=>I(!1),children:"Annuler"}),(0,Qe.jsx)(Gi,{onClick:()=>{if(l.title&&l.type){const t={id:Date.now().toString(),title:l.title,type:l.type,questions:l.questions||[]};g([...e,t]),I(!1),C({title:"",type:"quiz",questions:[]})}},variant:"contained",children:"Cr\xe9er"})]})]})]})};function hA(e,g){return function(){return e.apply(g,arguments)}}const{toString:GA}=Object.prototype,{getPrototypeOf:yA}=Object,BA=(SA=Object.create(null),e=>{const g=GA.call(e);return SA[g]||(SA[g]=g.slice(8,-1).toLowerCase())});var SA;const WA=e=>(e=e.toLowerCase(),g=>BA(g)===e),VA=e=>g=>typeof g===e,{isArray:vA}=Array,RA=VA("undefined");const fA=WA("ArrayBuffer");const XA=VA("string"),kA=VA("function"),JA=VA("number"),YA=e=>null!==e&&"object"===typeof e,wA=e=>{if("object"!==BA(e))return!1;const g=yA(e);return(null===g||g===Object.prototype||null===Object.getPrototypeOf(g))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},HA=WA("Date"),NA=WA("File"),FA=WA("Blob"),KA=WA("FileList"),xA=WA("URLSearchParams"),[MA,zA,EA,DA]=["ReadableStream","Request","Response","Headers"].map(WA);function UA(e,g){let t,I,{allOwnKeys:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),vA(e))for(t=0,I=e.length;t<I;t++)g.call(null,e[t],t,e);else{const I=n?Object.getOwnPropertyNames(e):Object.keys(e),l=I.length;let C;for(t=0;t<l;t++)C=I[t],g.call(null,e[C],C,e)}}function TA(e,g){g=g.toLowerCase();const t=Object.keys(e);let I,n=t.length;for(;n-- >0;)if(I=t[n],g===I.toLowerCase())return I;return null}const LA="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,QA=e=>!RA(e)&&e!==LA;const jA=(PA="undefined"!==typeof Uint8Array&&yA(Uint8Array),e=>PA&&e instanceof PA);var PA;const OA=WA("HTMLFormElement"),qA=(e=>{let{hasOwnProperty:g}=e;return(e,t)=>g.call(e,t)})(Object.prototype),$A=WA("RegExp"),_A=(e,g)=>{const t=Object.getOwnPropertyDescriptors(e),I={};UA(t,((t,n)=>{let l;!1!==(l=g(t,n,e))&&(I[n]=l||t)})),Object.defineProperties(e,I)},ed="abcdefghijklmnopqrstuvwxyz",gd="0123456789",td={DIGIT:gd,ALPHA:ed,ALPHA_DIGIT:ed+ed.toUpperCase()+gd};const Id=WA("AsyncFunction"),nd=((e,g)=>{return e?setImmediate:g?(t=`axios@${Math.random()}`,I=[],LA.addEventListener("message",(e=>{let{source:g,data:n}=e;g===LA&&n===t&&I.length&&I.shift()()}),!1),e=>{I.push(e),LA.postMessage(t,"*")}):e=>setTimeout(e);var t,I})("function"===typeof setImmediate,kA(LA.postMessage)),ld="undefined"!==typeof queueMicrotask?queueMicrotask.bind(LA):"undefined"!==typeof process&&process.nextTick||nd,Cd={isArray:vA,isArrayBuffer:fA,isBuffer:function(e){return null!==e&&!RA(e)&&null!==e.constructor&&!RA(e.constructor)&&kA(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let g;return e&&("function"===typeof FormData&&e instanceof FormData||kA(e.append)&&("formdata"===(g=BA(e))||"object"===g&&kA(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let g;return g="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&fA(e.buffer),g},isString:XA,isNumber:JA,isBoolean:e=>!0===e||!1===e,isObject:YA,isPlainObject:wA,isReadableStream:MA,isRequest:zA,isResponse:EA,isHeaders:DA,isUndefined:RA,isDate:HA,isFile:NA,isBlob:FA,isRegExp:$A,isFunction:kA,isStream:e=>YA(e)&&kA(e.pipe),isURLSearchParams:xA,isTypedArray:jA,isFileList:KA,forEach:UA,merge:function e(){const{caseless:g}=QA(this)&&this||{},t={},I=(I,n)=>{const l=g&&TA(t,n)||n;wA(t[l])&&wA(I)?t[l]=e(t[l],I):wA(I)?t[l]=e({},I):vA(I)?t[l]=I.slice():t[l]=I};for(let n=0,l=arguments.length;n<l;n++)arguments[n]&&UA(arguments[n],I);return t},extend:function(e,g,t){let{allOwnKeys:I}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return UA(g,((g,I)=>{t&&kA(g)?e[I]=hA(g,t):e[I]=g}),{allOwnKeys:I}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,g,t,I)=>{e.prototype=Object.create(g.prototype,I),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:g.prototype}),t&&Object.assign(e.prototype,t)},toFlatObject:(e,g,t,I)=>{let n,l,C;const o={};if(g=g||{},null==e)return g;do{for(n=Object.getOwnPropertyNames(e),l=n.length;l-- >0;)C=n[l],I&&!I(C,e,g)||o[C]||(g[C]=e[C],o[C]=!0);e=!1!==t&&yA(e)}while(e&&(!t||t(e,g))&&e!==Object.prototype);return g},kindOf:BA,kindOfTest:WA,endsWith:(e,g,t)=>{e=String(e),(void 0===t||t>e.length)&&(t=e.length),t-=g.length;const I=e.indexOf(g,t);return-1!==I&&I===t},toArray:e=>{if(!e)return null;if(vA(e))return e;let g=e.length;if(!JA(g))return null;const t=new Array(g);for(;g-- >0;)t[g]=e[g];return t},forEachEntry:(e,g)=>{const t=(e&&e[Symbol.iterator]).call(e);let I;for(;(I=t.next())&&!I.done;){const t=I.value;g.call(e,t[0],t[1])}},matchAll:(e,g)=>{let t;const I=[];for(;null!==(t=e.exec(g));)I.push(t);return I},isHTMLForm:OA,hasOwnProperty:qA,hasOwnProp:qA,reduceDescriptors:_A,freezeMethods:e=>{_A(e,((g,t)=>{if(kA(e)&&-1!==["arguments","caller","callee"].indexOf(t))return!1;const I=e[t];kA(I)&&(g.enumerable=!1,"writable"in g?g.writable=!1:g.set||(g.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")}))}))},toObjectSet:(e,g)=>{const t={},I=e=>{e.forEach((e=>{t[e]=!0}))};return vA(e)?I(e):I(String(e).split(g)),t},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,g,t){return g.toUpperCase()+t})),noop:()=>{},toFiniteNumber:(e,g)=>null!=e&&Number.isFinite(e=+e)?e:g,findKey:TA,global:LA,isContextDefined:QA,ALPHABET:td,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:td.ALPHA_DIGIT,t="";const{length:I}=g;for(;e--;)t+=g[Math.random()*I|0];return t},isSpecCompliantForm:function(e){return!!(e&&kA(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const g=new Array(10),t=(e,I)=>{if(YA(e)){if(g.indexOf(e)>=0)return;if(!("toJSON"in e)){g[I]=e;const n=vA(e)?[]:{};return UA(e,((e,g)=>{const l=t(e,I+1);!RA(l)&&(n[g]=l)})),g[I]=void 0,n}}return e};return t(e,0)},isAsyncFn:Id,isThenable:e=>e&&(YA(e)||kA(e))&&kA(e.then)&&kA(e.catch),setImmediate:nd,asap:ld};function od(e,g,t,I,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",g&&(this.code=g),t&&(this.config=t),I&&(this.request=I),n&&(this.response=n,this.status=n.status?n.status:null)}Cd.inherits(od,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Cd.toJSONObject(this.config),code:this.code,status:this.status}}});const ad=od.prototype,rd={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{rd[e]={value:e}})),Object.defineProperties(od,rd),Object.defineProperty(ad,"isAxiosError",{value:!0}),od.from=(e,g,t,I,n,l)=>{const C=Object.create(ad);return Cd.toFlatObject(e,C,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),od.call(C,e.message,g,t,I,n),C.cause=e,C.name=e.name,l&&Object.assign(C,l),C};const id=od;function cd(e){return Cd.isPlainObject(e)||Cd.isArray(e)}function Ad(e){return Cd.endsWith(e,"[]")?e.slice(0,-2):e}function dd(e,g,t){return e?e.concat(g).map((function(e,g){return e=Ad(e),!t&&g?"["+e+"]":e})).join(t?".":""):g}const sd=Cd.toFlatObject(Cd,{},null,(function(e){return/^is[A-Z]/.test(e)}));const ud=function(e,g,t){if(!Cd.isObject(e))throw new TypeError("target must be an object");g=g||new FormData;const I=(t=Cd.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,g){return!Cd.isUndefined(g[e])}))).metaTokens,n=t.visitor||r,l=t.dots,C=t.indexes,o=(t.Blob||"undefined"!==typeof Blob&&Blob)&&Cd.isSpecCompliantForm(g);if(!Cd.isFunction(n))throw new TypeError("visitor must be a function");function a(e){if(null===e)return"";if(Cd.isDate(e))return e.toISOString();if(!o&&Cd.isBlob(e))throw new id("Blob is not supported. Use a Buffer instead.");return Cd.isArrayBuffer(e)||Cd.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function r(e,t,n){let o=e;if(e&&!n&&"object"===typeof e)if(Cd.endsWith(t,"{}"))t=I?t:t.slice(0,-2),e=JSON.stringify(e);else if(Cd.isArray(e)&&function(e){return Cd.isArray(e)&&!e.some(cd)}(e)||(Cd.isFileList(e)||Cd.endsWith(t,"[]"))&&(o=Cd.toArray(e)))return t=Ad(t),o.forEach((function(e,I){!Cd.isUndefined(e)&&null!==e&&g.append(!0===C?dd([t],I,l):null===C?t:t+"[]",a(e))})),!1;return!!cd(e)||(g.append(dd(n,t,l),a(e)),!1)}const i=[],c=Object.assign(sd,{defaultVisitor:r,convertValue:a,isVisitable:cd});if(!Cd.isObject(e))throw new TypeError("data must be an object");return function e(t,I){if(!Cd.isUndefined(t)){if(-1!==i.indexOf(t))throw Error("Circular reference detected in "+I.join("."));i.push(t),Cd.forEach(t,(function(t,l){!0===(!(Cd.isUndefined(t)||null===t)&&n.call(g,t,Cd.isString(l)?l.trim():l,I,c))&&e(t,I?I.concat(l):[l])})),i.pop()}}(e),g};function md(e){const g={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return g[e]}))}function bd(e,g){this._pairs=[],e&&ud(e,this,g)}const Zd=bd.prototype;Zd.append=function(e,g){this._pairs.push([e,g])},Zd.toString=function(e){const g=e?function(g){return e.call(this,g,md)}:md;return this._pairs.map((function(e){return g(e[0])+"="+g(e[1])}),"").join("&")};const pd=bd;function hd(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Gd(e,g,t){if(!g)return e;const I=t&&t.encode||hd;Cd.isFunction(t)&&(t={serialize:t});const n=t&&t.serialize;let l;if(l=n?n(g,t):Cd.isURLSearchParams(g)?g.toString():new pd(g,t).toString(I),l){const g=e.indexOf("#");-1!==g&&(e=e.slice(0,g)),e+=(-1===e.indexOf("?")?"?":"&")+l}return e}const yd=class{constructor(){this.handlers=[]}use(e,g,t){return this.handlers.push({fulfilled:e,rejected:g,synchronous:!!t&&t.synchronous,runWhen:t?t.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Cd.forEach(this.handlers,(function(g){null!==g&&e(g)}))}},Bd={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Sd={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:pd,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Wd="undefined"!==typeof window&&"undefined"!==typeof document,Vd="object"===typeof navigator&&navigator||void 0,vd=Wd&&(!Vd||["ReactNative","NativeScript","NS"].indexOf(Vd.product)<0),Rd="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,fd=Wd&&window.location.href||"http://localhost",Xd={...e,...Sd};const kd=function(e){function g(e,t,I,n){let l=e[n++];if("__proto__"===l)return!0;const C=Number.isFinite(+l),o=n>=e.length;if(l=!l&&Cd.isArray(I)?I.length:l,o)return Cd.hasOwnProp(I,l)?I[l]=[I[l],t]:I[l]=t,!C;I[l]&&Cd.isObject(I[l])||(I[l]=[]);return g(e,t,I[l],n)&&Cd.isArray(I[l])&&(I[l]=function(e){const g={},t=Object.keys(e);let I;const n=t.length;let l;for(I=0;I<n;I++)l=t[I],g[l]=e[l];return g}(I[l])),!C}if(Cd.isFormData(e)&&Cd.isFunction(e.entries)){const t={};return Cd.forEachEntry(e,((e,I)=>{g(function(e){return Cd.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),I,t,0)})),t}return null};const Jd={transitional:Bd,adapter:["xhr","http","fetch"],transformRequest:[function(e,g){const t=g.getContentType()||"",I=t.indexOf("application/json")>-1,n=Cd.isObject(e);n&&Cd.isHTMLForm(e)&&(e=new FormData(e));if(Cd.isFormData(e))return I?JSON.stringify(kd(e)):e;if(Cd.isArrayBuffer(e)||Cd.isBuffer(e)||Cd.isStream(e)||Cd.isFile(e)||Cd.isBlob(e)||Cd.isReadableStream(e))return e;if(Cd.isArrayBufferView(e))return e.buffer;if(Cd.isURLSearchParams(e))return g.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(n){if(t.indexOf("application/x-www-form-urlencoded")>-1)return function(e,g){return ud(e,new Xd.classes.URLSearchParams,Object.assign({visitor:function(e,g,t,I){return Xd.isNode&&Cd.isBuffer(e)?(this.append(g,e.toString("base64")),!1):I.defaultVisitor.apply(this,arguments)}},g))}(e,this.formSerializer).toString();if((l=Cd.isFileList(e))||t.indexOf("multipart/form-data")>-1){const g=this.env&&this.env.FormData;return ud(l?{"files[]":e}:e,g&&new g,this.formSerializer)}}return n||I?(g.setContentType("application/json",!1),function(e,g,t){if(Cd.isString(e))try{return(g||JSON.parse)(e),Cd.trim(e)}catch(iG){if("SyntaxError"!==iG.name)throw iG}return(t||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const g=this.transitional||Jd.transitional,t=g&&g.forcedJSONParsing,I="json"===this.responseType;if(Cd.isResponse(e)||Cd.isReadableStream(e))return e;if(e&&Cd.isString(e)&&(t&&!this.responseType||I)){const t=!(g&&g.silentJSONParsing)&&I;try{return JSON.parse(e)}catch(iG){if(t){if("SyntaxError"===iG.name)throw id.from(iG,id.ERR_BAD_RESPONSE,this,null,this.response);throw iG}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Xd.classes.FormData,Blob:Xd.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Cd.forEach(["delete","get","head","post","put","patch"],(e=>{Jd.headers[e]={}}));const Yd=Jd,wd=Cd.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Hd=Symbol("internals");function Nd(e){return e&&String(e).trim().toLowerCase()}function Fd(e){return!1===e||null==e?e:Cd.isArray(e)?e.map(Fd):String(e)}function Kd(e,g,t,I,n){return Cd.isFunction(I)?I.call(this,g,t):(n&&(g=t),Cd.isString(g)?Cd.isString(I)?-1!==g.indexOf(I):Cd.isRegExp(I)?I.test(g):void 0:void 0)}class xd{constructor(e){e&&this.set(e)}set(e,g,t){const I=this;function n(e,g,t){const n=Nd(g);if(!n)throw new Error("header name must be a non-empty string");const l=Cd.findKey(I,n);(!l||void 0===I[l]||!0===t||void 0===t&&!1!==I[l])&&(I[l||g]=Fd(e))}const l=(e,g)=>Cd.forEach(e,((e,t)=>n(e,t,g)));if(Cd.isPlainObject(e)||e instanceof this.constructor)l(e,g);else if(Cd.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))l((e=>{const g={};let t,I,n;return e&&e.split("\n").forEach((function(e){n=e.indexOf(":"),t=e.substring(0,n).trim().toLowerCase(),I=e.substring(n+1).trim(),!t||g[t]&&wd[t]||("set-cookie"===t?g[t]?g[t].push(I):g[t]=[I]:g[t]=g[t]?g[t]+", "+I:I)})),g})(e),g);else if(Cd.isHeaders(e))for(const[C,o]of e.entries())n(o,C,t);else null!=e&&n(g,e,t);return this}get(e,g){if(e=Nd(e)){const t=Cd.findKey(this,e);if(t){const e=this[t];if(!g)return e;if(!0===g)return function(e){const g=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let I;for(;I=t.exec(e);)g[I[1]]=I[2];return g}(e);if(Cd.isFunction(g))return g.call(this,e,t);if(Cd.isRegExp(g))return g.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,g){if(e=Nd(e)){const t=Cd.findKey(this,e);return!(!t||void 0===this[t]||g&&!Kd(0,this[t],t,g))}return!1}delete(e,g){const t=this;let I=!1;function n(e){if(e=Nd(e)){const n=Cd.findKey(t,e);!n||g&&!Kd(0,t[n],n,g)||(delete t[n],I=!0)}}return Cd.isArray(e)?e.forEach(n):n(e),I}clear(e){const g=Object.keys(this);let t=g.length,I=!1;for(;t--;){const n=g[t];e&&!Kd(0,this[n],n,e,!0)||(delete this[n],I=!0)}return I}normalize(e){const g=this,t={};return Cd.forEach(this,((I,n)=>{const l=Cd.findKey(t,n);if(l)return g[l]=Fd(I),void delete g[n];const C=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,g,t)=>g.toUpperCase()+t))}(n):String(n).trim();C!==n&&delete g[n],g[C]=Fd(I),t[C]=!0})),this}concat(){for(var e=arguments.length,g=new Array(e),t=0;t<e;t++)g[t]=arguments[t];return this.constructor.concat(this,...g)}toJSON(e){const g=Object.create(null);return Cd.forEach(this,((t,I)=>{null!=t&&!1!==t&&(g[I]=e&&Cd.isArray(t)?t.join(", "):t)})),g}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[g,t]=e;return g+": "+t})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const g=new this(e);for(var t=arguments.length,I=new Array(t>1?t-1:0),n=1;n<t;n++)I[n-1]=arguments[n];return I.forEach((e=>g.set(e))),g}static accessor(e){const g=(this[Hd]=this[Hd]={accessors:{}}).accessors,t=this.prototype;function I(e){const I=Nd(e);g[I]||(!function(e,g){const t=Cd.toCamelCase(" "+g);["get","set","has"].forEach((I=>{Object.defineProperty(e,I+t,{value:function(e,t,n){return this[I].call(this,g,e,t,n)},configurable:!0})}))}(t,e),g[I]=!0)}return Cd.isArray(e)?e.forEach(I):I(e),this}}xd.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Cd.reduceDescriptors(xd.prototype,((e,g)=>{let{value:t}=e,I=g[0].toUpperCase()+g.slice(1);return{get:()=>t,set(e){this[I]=e}}})),Cd.freezeMethods(xd);const Md=xd;function zd(e,g){const t=this||Yd,I=g||t,n=Md.from(I.headers);let l=I.data;return Cd.forEach(e,(function(e){l=e.call(t,l,n.normalize(),g?g.status:void 0)})),n.normalize(),l}function Ed(e){return!(!e||!e.__CANCEL__)}function Dd(e,g,t){id.call(this,null==e?"canceled":e,id.ERR_CANCELED,g,t),this.name="CanceledError"}Cd.inherits(Dd,id,{__CANCEL__:!0});const Ud=Dd;function Td(e,g,t){const I=t.config.validateStatus;t.status&&I&&!I(t.status)?g(new id("Request failed with status code "+t.status,[id.ERR_BAD_REQUEST,id.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t)):e(t)}const Ld=function(e,g){e=e||10;const t=new Array(e),I=new Array(e);let n,l=0,C=0;return g=void 0!==g?g:1e3,function(o){const a=Date.now(),r=I[C];n||(n=a),t[l]=o,I[l]=a;let i=C,c=0;for(;i!==l;)c+=t[i++],i%=e;if(l=(l+1)%e,l===C&&(C=(C+1)%e),a-n<g)return;const A=r&&a-r;return A?Math.round(1e3*c/A):void 0}};const Qd=function(e,g){let t,I,n=0,l=1e3/g;const C=function(g){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();n=l,t=null,I&&(clearTimeout(I),I=null),e.apply(null,g)};return[function(){const e=Date.now(),g=e-n;for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];g>=l?C(a,e):(t=a,I||(I=setTimeout((()=>{I=null,C(t)}),l-g)))},()=>t&&C(t)]},jd=function(e,g){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,I=0;const n=Ld(50,250);return Qd((t=>{const l=t.loaded,C=t.lengthComputable?t.total:void 0,o=l-I,a=n(o);I=l;e({loaded:l,total:C,progress:C?l/C:void 0,bytes:o,rate:a||void 0,estimated:a&&C&&l<=C?(C-l)/a:void 0,event:t,lengthComputable:null!=C,[g?"download":"upload"]:!0})}),t)},Pd=(e,g)=>{const t=null!=e;return[I=>g[0]({lengthComputable:t,total:e,loaded:I}),g[1]]},Od=e=>function(){for(var g=arguments.length,t=new Array(g),I=0;I<g;I++)t[I]=arguments[I];return Cd.asap((()=>e(...t)))},qd=Xd.hasStandardBrowserEnv?($d=new URL(Xd.origin),_d=Xd.navigator&&/(msie|trident)/i.test(Xd.navigator.userAgent),e=>(e=new URL(e,Xd.origin),$d.protocol===e.protocol&&$d.host===e.host&&(_d||$d.port===e.port))):()=>!0;var $d,_d;const es=Xd.hasStandardBrowserEnv?{write(e,g,t,I,n,l){const C=[e+"="+encodeURIComponent(g)];Cd.isNumber(t)&&C.push("expires="+new Date(t).toGMTString()),Cd.isString(I)&&C.push("path="+I),Cd.isString(n)&&C.push("domain="+n),!0===l&&C.push("secure"),document.cookie=C.join("; ")},read(e){const g=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return g?decodeURIComponent(g[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function gs(e,g){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(g)?function(e,g){return g?e.replace(/\/?\/$/,"")+"/"+g.replace(/^\/+/,""):e}(e,g):g}const ts=e=>e instanceof Md?{...e}:e;function Is(e,g){g=g||{};const t={};function I(e,g,t,I){return Cd.isPlainObject(e)&&Cd.isPlainObject(g)?Cd.merge.call({caseless:I},e,g):Cd.isPlainObject(g)?Cd.merge({},g):Cd.isArray(g)?g.slice():g}function n(e,g,t,n){return Cd.isUndefined(g)?Cd.isUndefined(e)?void 0:I(void 0,e,0,n):I(e,g,0,n)}function l(e,g){if(!Cd.isUndefined(g))return I(void 0,g)}function C(e,g){return Cd.isUndefined(g)?Cd.isUndefined(e)?void 0:I(void 0,e):I(void 0,g)}function o(t,n,l){return l in g?I(t,n):l in e?I(void 0,t):void 0}const a={url:l,method:l,data:l,baseURL:C,transformRequest:C,transformResponse:C,paramsSerializer:C,timeout:C,timeoutMessage:C,withCredentials:C,withXSRFToken:C,adapter:C,responseType:C,xsrfCookieName:C,xsrfHeaderName:C,onUploadProgress:C,onDownloadProgress:C,decompress:C,maxContentLength:C,maxBodyLength:C,beforeRedirect:C,transport:C,httpAgent:C,httpsAgent:C,cancelToken:C,socketPath:C,responseEncoding:C,validateStatus:o,headers:(e,g,t)=>n(ts(e),ts(g),0,!0)};return Cd.forEach(Object.keys(Object.assign({},e,g)),(function(I){const l=a[I]||n,C=l(e[I],g[I],I);Cd.isUndefined(C)&&l!==o||(t[I]=C)})),t}const ns=e=>{const g=Is({},e);let t,{data:I,withXSRFToken:n,xsrfHeaderName:l,xsrfCookieName:C,headers:o,auth:a}=g;if(g.headers=o=Md.from(o),g.url=Gd(gs(g.baseURL,g.url),e.params,e.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),Cd.isFormData(I))if(Xd.hasStandardBrowserEnv||Xd.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(t=o.getContentType())){const[e,...g]=t?t.split(";").map((e=>e.trim())).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...g].join("; "))}if(Xd.hasStandardBrowserEnv&&(n&&Cd.isFunction(n)&&(n=n(g)),n||!1!==n&&qd(g.url))){const e=l&&C&&es.read(C);e&&o.set(l,e)}return g},ls="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(g,t){const I=ns(e);let n=I.data;const l=Md.from(I.headers).normalize();let C,o,a,r,i,{responseType:c,onUploadProgress:A,onDownloadProgress:d}=I;function s(){r&&r(),i&&i(),I.cancelToken&&I.cancelToken.unsubscribe(C),I.signal&&I.signal.removeEventListener("abort",C)}let u=new XMLHttpRequest;function m(){if(!u)return;const I=Md.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());Td((function(e){g(e),s()}),(function(e){t(e),s()}),{data:c&&"text"!==c&&"json"!==c?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:I,config:e,request:u}),u=null}u.open(I.method.toUpperCase(),I.url,!0),u.timeout=I.timeout,"onloadend"in u?u.onloadend=m:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(m)},u.onabort=function(){u&&(t(new id("Request aborted",id.ECONNABORTED,e,u)),u=null)},u.onerror=function(){t(new id("Network Error",id.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let g=I.timeout?"timeout of "+I.timeout+"ms exceeded":"timeout exceeded";const n=I.transitional||Bd;I.timeoutErrorMessage&&(g=I.timeoutErrorMessage),t(new id(g,n.clarifyTimeoutError?id.ETIMEDOUT:id.ECONNABORTED,e,u)),u=null},void 0===n&&l.setContentType(null),"setRequestHeader"in u&&Cd.forEach(l.toJSON(),(function(e,g){u.setRequestHeader(g,e)})),Cd.isUndefined(I.withCredentials)||(u.withCredentials=!!I.withCredentials),c&&"json"!==c&&(u.responseType=I.responseType),d&&([a,i]=jd(d,!0),u.addEventListener("progress",a)),A&&u.upload&&([o,r]=jd(A),u.upload.addEventListener("progress",o),u.upload.addEventListener("loadend",r)),(I.cancelToken||I.signal)&&(C=g=>{u&&(t(!g||g.type?new Ud(null,e,u):g),u.abort(),u=null)},I.cancelToken&&I.cancelToken.subscribe(C),I.signal&&(I.signal.aborted?C():I.signal.addEventListener("abort",C)));const b=function(e){const g=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return g&&g[1]||""}(I.url);b&&-1===Xd.protocols.indexOf(b)?t(new id("Unsupported protocol "+b+":",id.ERR_BAD_REQUEST,e)):u.send(n||null)}))},Cs=(e,g)=>{const{length:t}=e=e?e.filter(Boolean):[];if(g||t){let t,I=new AbortController;const n=function(e){if(!t){t=!0,C();const g=e instanceof Error?e:this.reason;I.abort(g instanceof id?g:new Ud(g instanceof Error?g.message:g))}};let l=g&&setTimeout((()=>{l=null,n(new id(`timeout ${g} of ms exceeded`,id.ETIMEDOUT))}),g);const C=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(n):e.removeEventListener("abort",n)})),e=null)};e.forEach((e=>e.addEventListener("abort",n)));const{signal:o}=I;return o.unsubscribe=()=>Cd.asap(C),o}},os=function*(e,g){let t=e.byteLength;if(!g||t<g)return void(yield e);let I,n=0;for(;n<t;)I=n+g,yield e.slice(n,I),n=I},as=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const g=e.getReader();try{for(;;){const{done:e,value:t}=await g.read();if(e)break;yield t}}finally{await g.cancel()}},rs=(e,g,t,I)=>{const n=async function*(e,g){for await(const t of as(e))yield*os(t,g)}(e,g);let l,C=0,o=e=>{l||(l=!0,I&&I(e))};return new ReadableStream({async pull(e){try{const{done:g,value:I}=await n.next();if(g)return o(),void e.close();let l=I.byteLength;if(t){let e=C+=l;t(e)}e.enqueue(new Uint8Array(I))}catch(g){throw o(g),g}},cancel:e=>(o(e),n.return())},{highWaterMark:2})},is="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,cs=is&&"function"===typeof ReadableStream,As=is&&("function"===typeof TextEncoder?(ds=new TextEncoder,e=>ds.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var ds;const ss=function(e){try{for(var g=arguments.length,t=new Array(g>1?g-1:0),I=1;I<g;I++)t[I-1]=arguments[I];return!!e(...t)}catch(iG){return!1}},us=cs&&ss((()=>{let e=!1;const g=new Request(Xd.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!g})),ms=cs&&ss((()=>Cd.isReadableStream(new Response("").body))),bs={stream:ms&&(e=>e.body)};var Zs;is&&(Zs=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!bs[e]&&(bs[e]=Cd.isFunction(Zs[e])?g=>g[e]():(g,t)=>{throw new id(`Response type '${e}' is not supported`,id.ERR_NOT_SUPPORT,t)})})));const ps=async(e,g)=>{const t=Cd.toFiniteNumber(e.getContentLength());return null==t?(async e=>{if(null==e)return 0;if(Cd.isBlob(e))return e.size;if(Cd.isSpecCompliantForm(e)){const g=new Request(Xd.origin,{method:"POST",body:e});return(await g.arrayBuffer()).byteLength}return Cd.isArrayBufferView(e)||Cd.isArrayBuffer(e)?e.byteLength:(Cd.isURLSearchParams(e)&&(e+=""),Cd.isString(e)?(await As(e)).byteLength:void 0)})(g):t},hs={http:null,xhr:ls,fetch:is&&(async e=>{let{url:g,method:t,data:I,signal:n,cancelToken:l,timeout:C,onDownloadProgress:o,onUploadProgress:a,responseType:r,headers:i,withCredentials:c="same-origin",fetchOptions:A}=ns(e);r=r?(r+"").toLowerCase():"text";let d,s=Cs([n,l&&l.toAbortSignal()],C);const u=s&&s.unsubscribe&&(()=>{s.unsubscribe()});let m;try{if(a&&us&&"get"!==t&&"head"!==t&&0!==(m=await ps(i,I))){let e,t=new Request(g,{method:"POST",body:I,duplex:"half"});if(Cd.isFormData(I)&&(e=t.headers.get("content-type"))&&i.setContentType(e),t.body){const[e,g]=Pd(m,jd(Od(a)));I=rs(t.body,65536,e,g)}}Cd.isString(c)||(c=c?"include":"omit");const n="credentials"in Request.prototype;d=new Request(g,{...A,signal:s,method:t.toUpperCase(),headers:i.normalize().toJSON(),body:I,duplex:"half",credentials:n?c:void 0});let l=await fetch(d);const C=ms&&("stream"===r||"response"===r);if(ms&&(o||C&&u)){const e={};["status","statusText","headers"].forEach((g=>{e[g]=l[g]}));const g=Cd.toFiniteNumber(l.headers.get("content-length")),[t,I]=o&&Pd(g,jd(Od(o),!0))||[];l=new Response(rs(l.body,65536,t,(()=>{I&&I(),u&&u()})),e)}r=r||"text";let b=await bs[Cd.findKey(bs,r)||"text"](l,e);return!C&&u&&u(),await new Promise(((g,t)=>{Td(g,t,{data:b,headers:Md.from(l.headers),status:l.status,statusText:l.statusText,config:e,request:d})}))}catch(b){if(u&&u(),b&&"TypeError"===b.name&&/fetch/i.test(b.message))throw Object.assign(new id("Network Error",id.ERR_NETWORK,e,d),{cause:b.cause||b});throw id.from(b,b&&b.code,e,d)}})};Cd.forEach(hs,((e,g)=>{if(e){try{Object.defineProperty(e,"name",{value:g})}catch(iG){}Object.defineProperty(e,"adapterName",{value:g})}}));const Gs=e=>`- ${e}`,ys=e=>Cd.isFunction(e)||null===e||!1===e,Bs=e=>{e=Cd.isArray(e)?e:[e];const{length:g}=e;let t,I;const n={};for(let l=0;l<g;l++){let g;if(t=e[l],I=t,!ys(t)&&(I=hs[(g=String(t)).toLowerCase()],void 0===I))throw new id(`Unknown adapter '${g}'`);if(I)break;n[g||"#"+l]=I}if(!I){const e=Object.entries(n).map((e=>{let[g,t]=e;return`adapter ${g} `+(!1===t?"is not supported by the environment":"is not available in the build")}));let t=g?e.length>1?"since :\n"+e.map(Gs).join("\n"):" "+Gs(e[0]):"as no adapter specified";throw new id("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return I};function Ss(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ud(null,e)}function Ws(e){Ss(e),e.headers=Md.from(e.headers),e.data=zd.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Bs(e.adapter||Yd.adapter)(e).then((function(g){return Ss(e),g.data=zd.call(e,e.transformResponse,g),g.headers=Md.from(g.headers),g}),(function(g){return Ed(g)||(Ss(e),g&&g.response&&(g.response.data=zd.call(e,e.transformResponse,g.response),g.response.headers=Md.from(g.response.headers))),Promise.reject(g)}))}const Vs="1.7.9",vs={};["object","boolean","number","function","string","symbol"].forEach(((e,g)=>{vs[e]=function(t){return typeof t===e||"a"+(g<1?"n ":" ")+e}}));const Rs={};vs.transitional=function(e,g,t){function I(e,g){return"[Axios v1.7.9] Transitional option '"+e+"'"+g+(t?". "+t:"")}return(t,n,l)=>{if(!1===e)throw new id(I(n," has been removed"+(g?" in "+g:"")),id.ERR_DEPRECATED);return g&&!Rs[n]&&(Rs[n]=!0,console.warn(I(n," has been deprecated since v"+g+" and will be removed in the near future"))),!e||e(t,n,l)}},vs.spelling=function(e){return(g,t)=>(console.warn(`${t} is likely a misspelling of ${e}`),!0)};const fs={assertOptions:function(e,g,t){if("object"!==typeof e)throw new id("options must be an object",id.ERR_BAD_OPTION_VALUE);const I=Object.keys(e);let n=I.length;for(;n-- >0;){const l=I[n],C=g[l];if(C){const g=e[l],t=void 0===g||C(g,l,e);if(!0!==t)throw new id("option "+l+" must be "+t,id.ERR_BAD_OPTION_VALUE)}else if(!0!==t)throw new id("Unknown option "+l,id.ERR_BAD_OPTION)}},validators:vs},Xs=fs.validators;class ks{constructor(e){this.defaults=e,this.interceptors={request:new yd,response:new yd}}async request(e,g){try{return await this._request(e,g)}catch(t){if(t instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const g=e.stack?e.stack.replace(/^.+\n/,""):"";try{t.stack?g&&!String(t.stack).endsWith(g.replace(/^.+\n.+\n/,""))&&(t.stack+="\n"+g):t.stack=g}catch(iG){}}throw t}}_request(e,g){"string"===typeof e?(g=g||{}).url=e:g=e||{},g=Is(this.defaults,g);const{transitional:t,paramsSerializer:I,headers:n}=g;void 0!==t&&fs.assertOptions(t,{silentJSONParsing:Xs.transitional(Xs.boolean),forcedJSONParsing:Xs.transitional(Xs.boolean),clarifyTimeoutError:Xs.transitional(Xs.boolean)},!1),null!=I&&(Cd.isFunction(I)?g.paramsSerializer={serialize:I}:fs.assertOptions(I,{encode:Xs.function,serialize:Xs.function},!0)),fs.assertOptions(g,{baseUrl:Xs.spelling("baseURL"),withXsrfToken:Xs.spelling("withXSRFToken")},!0),g.method=(g.method||this.defaults.method||"get").toLowerCase();let l=n&&Cd.merge(n.common,n[g.method]);n&&Cd.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete n[e]})),g.headers=Md.concat(l,n);const C=[];let o=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(g)||(o=o&&e.synchronous,C.unshift(e.fulfilled,e.rejected))}));const a=[];let r;this.interceptors.response.forEach((function(e){a.push(e.fulfilled,e.rejected)}));let i,c=0;if(!o){const e=[Ws.bind(this),void 0];for(e.unshift.apply(e,C),e.push.apply(e,a),i=e.length,r=Promise.resolve(g);c<i;)r=r.then(e[c++],e[c++]);return r}i=C.length;let A=g;for(c=0;c<i;){const e=C[c++],g=C[c++];try{A=e(A)}catch(d){g.call(this,d);break}}try{r=Ws.call(this,A)}catch(d){return Promise.reject(d)}for(c=0,i=a.length;c<i;)r=r.then(a[c++],a[c++]);return r}getUri(e){return Gd(gs((e=Is(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}Cd.forEach(["delete","get","head","options"],(function(e){ks.prototype[e]=function(g,t){return this.request(Is(t||{},{method:e,url:g,data:(t||{}).data}))}})),Cd.forEach(["post","put","patch"],(function(e){function g(g){return function(t,I,n){return this.request(Is(n||{},{method:e,headers:g?{"Content-Type":"multipart/form-data"}:{},url:t,data:I}))}}ks.prototype[e]=g(),ks.prototype[e+"Form"]=g(!0)}));const Js=ks;class Ys{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let g;this.promise=new Promise((function(e){g=e}));const t=this;this.promise.then((e=>{if(!t._listeners)return;let g=t._listeners.length;for(;g-- >0;)t._listeners[g](e);t._listeners=null})),this.promise.then=e=>{let g;const I=new Promise((e=>{t.subscribe(e),g=e})).then(e);return I.cancel=function(){t.unsubscribe(g)},I},e((function(e,I,n){t.reason||(t.reason=new Ud(e,I,n),g(t.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const g=this._listeners.indexOf(e);-1!==g&&this._listeners.splice(g,1)}toAbortSignal(){const e=new AbortController,g=g=>{e.abort(g)};return this.subscribe(g),e.signal.unsubscribe=()=>this.unsubscribe(g),e.signal}static source(){let e;return{token:new Ys((function(g){e=g})),cancel:e}}}const ws=Ys;const Hs={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Hs).forEach((e=>{let[g,t]=e;Hs[t]=g}));const Ns=Hs;const Fs=function e(g){const t=new Js(g),I=hA(Js.prototype.request,t);return Cd.extend(I,Js.prototype,t,{allOwnKeys:!0}),Cd.extend(I,t,null,{allOwnKeys:!0}),I.create=function(t){return e(Is(g,t))},I}(Yd);Fs.Axios=Js,Fs.CanceledError=Ud,Fs.CancelToken=ws,Fs.isCancel=Ed,Fs.VERSION=Vs,Fs.toFormData=ud,Fs.AxiosError=id,Fs.Cancel=Fs.CanceledError,Fs.all=function(e){return Promise.all(e)},Fs.spread=function(e){return function(g){return e.apply(null,g)}},Fs.isAxiosError=function(e){return Cd.isObject(e)&&!0===e.isAxiosError},Fs.mergeConfig=Is,Fs.AxiosHeaders=Md,Fs.formToJSON=e=>kd(Cd.isHTMLForm(e)?new FormData(e):e),Fs.getAdapter=Bs,Fs.HttpStatusCode=Ns,Fs.default=Fs;const Ks=Fs.create({baseURL:"http://localhost:3001/api",headers:{"Content-Type":"application/json"}});Ks.interceptors.request.use((e=>{const g=localStorage.getItem("token");return g&&(e.headers.Authorization=`Bearer ${g}`),e})),Ks.interceptors.response.use((e=>e),(e=>{var g;switch(null===(g=e.response)||void 0===g?void 0:g.status){case 401:localStorage.removeItem("token"),window.location.href="/";break;case 403:console.error("Acc\xe8s non autoris\xe9");break;case 404:console.error("Ressource non trouv\xe9e");break;case 500:console.error("Erreur serveur");break;default:console.error("Erreur r\xe9seau")}return Promise.reject(e)}));const xs=Ks,Ms=async e=>(await xs.get("/absence-requests",{params:{status:e}})).data,zs=async(e,g,t)=>(await xs.put(`/absence-requests/${e}`,{status:g,comment:t})).data,Es=async e=>(await xs.get(`/documents/${e}`,{responseType:"blob"})).data,Ds=()=>{const[e,g]=(0,n.useState)([]),[t,I]=(0,n.useState)(null),[l,C]=(0,n.useState)(!1),[o,a]=(0,n.useState)(""),[r,i]=(0,n.useState)("ALL");(0,n.useEffect)((()=>{c()}),[r]);const c=async()=>{try{const e=await Ms("ALL"===r?void 0:r);g(e)}catch(e){console.error("Erreur lors du chargement des demandes:",e)}},A=async e=>{if(t)try{await zs(t.id,e,o),C(!1),a(""),c()}catch(g){console.error("Erreur lors du traitement de la demande:",g)}};return(0,Qe.jsxs)(gl,{sx:{p:3},children:[(0,Qe.jsx)(ZC,{variant:"h5",gutterBottom:!0,children:"Gestion des demandes d'absence"}),(0,Qe.jsxs)(Ho,{sx:{mb:3,minWidth:200},children:[(0,Qe.jsx)(Xo,{children:"Filtrer par statut"}),(0,Qe.jsxs)(ei,{value:r,label:"Filtrer par statut",onChange:e=>i(e.target.value),children:[(0,Qe.jsx)(cc,{value:"ALL",children:"Tous"}),(0,Qe.jsx)(cc,{value:"PENDING",children:"En attente"}),(0,Qe.jsx)(cc,{value:"APPROVED",children:"Approuv\xe9"}),(0,Qe.jsx)(cc,{value:"REJECTED",children:"Rejet\xe9"})]})]}),(0,Qe.jsx)(uc,{component:AC,children:(0,Qe.jsxs)(Gc,{children:[(0,Qe.jsx)(Rc,{children:(0,Qe.jsxs)(wc,{children:[(0,Qe.jsx)(xc,{children:"\xc9tudiant"}),(0,Qe.jsx)(xc,{children:"Cours"}),(0,Qe.jsx)(xc,{children:"Date d\xe9but"}),(0,Qe.jsx)(xc,{children:"Date fin"}),(0,Qe.jsx)(xc,{children:"Raison"}),(0,Qe.jsx)(xc,{children:"Statut"}),(0,Qe.jsx)(xc,{children:"Actions"})]})}),(0,Qe.jsx)(Tc,{children:e.map((e=>(0,Qe.jsxs)(wc,{children:[(0,Qe.jsx)(xc,{children:e.studentId}),(0,Qe.jsx)(xc,{children:e.courseId}),(0,Qe.jsx)(xc,{children:new Date(e.startDate).toLocaleDateString()}),(0,Qe.jsx)(xc,{children:new Date(e.endDate).toLocaleDateString()}),(0,Qe.jsx)(xc,{children:e.reason}),(0,Qe.jsx)(xc,{children:e.status}),(0,Qe.jsxs)(xc,{children:["PENDING"===e.status&&(0,Qe.jsx)(Gi,{variant:"contained",onClick:()=>{I(e),C(!0)},children:"Traiter"}),e.document&&(0,Qe.jsx)(Gi,{variant:"outlined",onClick:()=>(async e=>{try{const g=await Es(e),t=window.URL.createObjectURL(g),I=document.createElement("a");I.href=t,I.download=`justificatif-${e}.pdf`,I.click()}catch(g){console.error("Erreur lors du t\xe9l\xe9chargement:",g)}})(e.document),sx:{ml:1},children:"Justificatif"})]})]},e.id)))})]})}),(0,Qe.jsxs)(eA,{open:l,onClose:()=>C(!1),children:[(0,Qe.jsx)(lA,{children:"Traiter la demande d'absence"}),(0,Qe.jsx)(rA,{children:(0,Qe.jsx)(li,{label:"Commentaire",multiline:!0,rows:4,value:o,onChange:e=>a(e.target.value),fullWidth:!0,sx:{mt:2}})}),(0,Qe.jsxs)(dA,{children:[(0,Qe.jsx)(Gi,{onClick:()=>C(!1),children:"Annuler"}),(0,Qe.jsx)(Gi,{onClick:()=>A("REJECTED"),color:"error",variant:"contained",children:"Rejeter"}),(0,Qe.jsx)(Gi,{onClick:()=>A("APPROVED"),color:"primary",variant:"contained",children:"Approuver"})]})]})]})};function Us(e){return(0,Yl.Ay)("MuiToolbar",e)}(0,$n.A)("MuiToolbar",["root","gutters","regular","dense"]);const Ts=["className","component","disableGutters","variant"],Ls=(0,nl.Ay)("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,!t.disableGutters&&g.gutters,g[t.variant]]}})((e=>{let{theme:g,ownerState:t}=e;return(0,we.A)({position:"relative",display:"flex",alignItems:"center"},!t.disableGutters&&{paddingLeft:g.spacing(2),paddingRight:g.spacing(2),[g.breakpoints.up("sm")]:{paddingLeft:g.spacing(3),paddingRight:g.spacing(3)}},"dense"===t.variant&&{minHeight:48})}),(e=>{let{theme:g,ownerState:t}=e;return"regular"===t.variant&&g.mixins.toolbar})),Qs=n.forwardRef((function(e,g){const t=(0,ll.b)({props:e,name:"MuiToolbar"}),{className:I,component:n="div",disableGutters:l=!1,variant:C="regular"}=t,o=(0,He.A)(t,Ts),a=(0,we.A)({},t,{component:n,disableGutters:l,variant:C}),r=(e=>{const{classes:g,disableGutters:t,variant:I}=e,n={root:["root",!t&&"gutters",I]};return(0,tl.A)(n,Us,g)})(a);return(0,Qe.jsx)(Ls,(0,we.A)({as:n,className:(0,Ln.A)(r.root,I),ref:g,ownerState:a},o))})),js=(0,Tr.A)((0,Qe.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),Ps=(0,Tr.A)((0,Qe.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight"),Os=(0,Tr.A)((0,Qe.jsx)("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),qs=(0,Tr.A)((0,Qe.jsx)("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),$s=["backIconButtonProps","count","disabled","getItemAriaLabel","nextIconButtonProps","onPageChange","page","rowsPerPage","showFirstButton","showLastButton","slots","slotProps"],_s=n.forwardRef((function(e,g){var t,I,n,l,C,o,a,r;const{backIconButtonProps:i,count:c,disabled:A=!1,getItemAriaLabel:d,nextIconButtonProps:s,onPageChange:u,page:m,rowsPerPage:b,showFirstButton:Z,showLastButton:p,slots:h={},slotProps:G={}}=e,y=(0,He.A)(e,$s),B=Kn(),S=null!=(t=h.firstButton)?t:Ul,W=null!=(I=h.lastButton)?I:Ul,V=null!=(n=h.nextButton)?n:Ul,v=null!=(l=h.previousButton)?l:Ul,R=null!=(C=h.firstButtonIcon)?C:qs,f=null!=(o=h.lastButtonIcon)?o:Os,X=null!=(a=h.nextButtonIcon)?a:Ps,k=null!=(r=h.previousButtonIcon)?r:js,J=B?W:S,Y=B?V:v,w=B?v:V,H=B?S:W,N=B?G.lastButton:G.firstButton,F=B?G.nextButton:G.previousButton,K=B?G.previousButton:G.nextButton,x=B?G.firstButton:G.lastButton;return(0,Qe.jsxs)("div",(0,we.A)({ref:g},y,{children:[Z&&(0,Qe.jsx)(J,(0,we.A)({onClick:e=>{u(e,0)},disabled:A||0===m,"aria-label":d("first",m),title:d("first",m)},N,{children:B?(0,Qe.jsx)(f,(0,we.A)({},G.lastButtonIcon)):(0,Qe.jsx)(R,(0,we.A)({},G.firstButtonIcon))})),(0,Qe.jsx)(Y,(0,we.A)({onClick:e=>{u(e,m-1)},disabled:A||0===m,color:"inherit","aria-label":d("previous",m),title:d("previous",m)},null!=F?F:i,{children:B?(0,Qe.jsx)(X,(0,we.A)({},G.nextButtonIcon)):(0,Qe.jsx)(k,(0,we.A)({},G.previousButtonIcon))})),(0,Qe.jsx)(w,(0,we.A)({onClick:e=>{u(e,m+1)},disabled:A||-1!==c&&m>=Math.ceil(c/b)-1,color:"inherit","aria-label":d("next",m),title:d("next",m)},null!=K?K:s,{children:B?(0,Qe.jsx)(k,(0,we.A)({},G.previousButtonIcon)):(0,Qe.jsx)(X,(0,we.A)({},G.nextButtonIcon))})),p&&(0,Qe.jsx)(H,(0,we.A)({onClick:e=>{u(e,Math.max(0,Math.ceil(c/b)-1))},disabled:A||m>=Math.ceil(c/b)-1,"aria-label":d("last",m),title:d("last",m)},x,{children:B?(0,Qe.jsx)(R,(0,we.A)({},G.firstButtonIcon)):(0,Qe.jsx)(f,(0,we.A)({},G.lastButtonIcon))}))]}))}));var eu=t(5879);function gu(e){return(0,Yl.Ay)("MuiTablePagination",e)}const tu=(0,$n.A)("MuiTablePagination",["root","toolbar","spacer","selectLabel","selectRoot","select","selectIcon","input","menuItem","displayedRows","actions"]);var Iu;const nu=["ActionsComponent","backIconButtonProps","className","colSpan","component","count","disabled","getItemAriaLabel","labelDisplayedRows","labelRowsPerPage","nextIconButtonProps","onPageChange","onRowsPerPageChange","page","rowsPerPage","rowsPerPageOptions","SelectProps","showFirstButton","showLastButton","slotProps","slots"],lu=(0,nl.Ay)(xc,{name:"MuiTablePagination",slot:"Root",overridesResolver:(e,g)=>g.root})((e=>{let{theme:g}=e;return{overflow:"auto",color:(g.vars||g).palette.text.primary,fontSize:g.typography.pxToRem(14),"&:last-child":{padding:0}}})),Cu=(0,nl.Ay)(Qs,{name:"MuiTablePagination",slot:"Toolbar",overridesResolver:(e,g)=>(0,we.A)({[`& .${tu.actions}`]:g.actions},g.toolbar)})((e=>{let{theme:g}=e;return{minHeight:52,paddingRight:2,[`${g.breakpoints.up("xs")} and (orientation: landscape)`]:{minHeight:52},[g.breakpoints.up("sm")]:{minHeight:52,paddingRight:2},[`& .${tu.actions}`]:{flexShrink:0,marginLeft:20}}})),ou=(0,nl.Ay)("div",{name:"MuiTablePagination",slot:"Spacer",overridesResolver:(e,g)=>g.spacer})({flex:"1 1 100%"}),au=(0,nl.Ay)("p",{name:"MuiTablePagination",slot:"SelectLabel",overridesResolver:(e,g)=>g.selectLabel})((e=>{let{theme:g}=e;return(0,we.A)({},g.typography.body2,{flexShrink:0})})),ru=(0,nl.Ay)(ei,{name:"MuiTablePagination",slot:"Select",overridesResolver:(e,g)=>(0,we.A)({[`& .${tu.selectIcon}`]:g.selectIcon,[`& .${tu.select}`]:g.select},g.input,g.selectRoot)})({color:"inherit",fontSize:"inherit",flexShrink:0,marginRight:32,marginLeft:8,[`& .${tu.select}`]:{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"}}),iu=(0,nl.Ay)(cc,{name:"MuiTablePagination",slot:"MenuItem",overridesResolver:(e,g)=>g.menuItem})({}),cu=(0,nl.Ay)("p",{name:"MuiTablePagination",slot:"DisplayedRows",overridesResolver:(e,g)=>g.displayedRows})((e=>{let{theme:g}=e;return(0,we.A)({},g.typography.body2,{flexShrink:0})}));function Au(e){let{from:g,to:t,count:I}=e;return`${g}\u2013${t} of ${-1!==I?I:`more than ${t}`}`}function du(e){return`Go to ${e} page`}const su=n.forwardRef((function(e,g){var t;const I=(0,ll.b)({props:e,name:"MuiTablePagination"}),{ActionsComponent:l=_s,backIconButtonProps:C,className:o,colSpan:a,component:r=xc,count:i,disabled:c=!1,getItemAriaLabel:A=du,labelDisplayedRows:d=Au,labelRowsPerPage:s="Rows per page:",nextIconButtonProps:u,onPageChange:m,onRowsPerPageChange:b,page:Z,rowsPerPage:p,rowsPerPageOptions:h=[10,25,50,100],SelectProps:G={},showFirstButton:y=!1,showLastButton:B=!1,slotProps:S={},slots:W={}}=I,V=(0,He.A)(I,nu),v=I,R=(e=>{const{classes:g}=e;return(0,tl.A)({root:["root"],toolbar:["toolbar"],spacer:["spacer"],selectLabel:["selectLabel"],select:["select"],input:["input"],selectIcon:["selectIcon"],menuItem:["menuItem"],displayedRows:["displayedRows"],actions:["actions"]},gu,g)})(v),f=null!=(t=null==S?void 0:S.select)?t:G,X=f.native?"option":iu;let k;r!==xc&&"td"!==r||(k=a||1e3);const J=(0,eu.A)(f.id),Y=(0,eu.A)(f.labelId);return(0,Qe.jsx)(lu,(0,we.A)({colSpan:k,ref:g,as:r,ownerState:v,className:(0,Ln.A)(R.root,o)},V,{children:(0,Qe.jsxs)(Cu,{className:R.toolbar,children:[(0,Qe.jsx)(ou,{className:R.spacer}),h.length>1&&(0,Qe.jsx)(au,{className:R.selectLabel,id:Y,children:s}),h.length>1&&(0,Qe.jsx)(ru,(0,we.A)({variant:"standard"},!f.variant&&{input:Iu||(Iu=(0,Qe.jsx)(LC,{}))},{value:p,onChange:b,id:J,labelId:Y},f,{classes:(0,we.A)({},f.classes,{root:(0,Ln.A)(R.input,R.selectRoot,(f.classes||{}).root),select:(0,Ln.A)(R.select,(f.classes||{}).select),icon:(0,Ln.A)(R.selectIcon,(f.classes||{}).icon)}),disabled:c,children:h.map((e=>(0,n.createElement)(X,(0,we.A)({},!GC(X)&&{ownerState:v},{className:R.menuItem,key:e.label?e.label:e,value:e.value?e.value:e}),e.label?e.label:e)))})),(0,Qe.jsx)(cu,{className:R.displayedRows,children:d({from:0===i?0:Z*p+1,to:-1===i?(Z+1)*p:-1===p?i:Math.min(i,(Z+1)*p),count:-1===i?-1:i,page:Z})}),(0,Qe.jsx)(l,{className:R.actions,backIconButtonProps:C,count:i,nextIconButtonProps:u,onPageChange:m,page:Z,rowsPerPage:p,showFirstButton:y,showLastButton:B,slotProps:S.actions,slots:W.actions,getItemAriaLabel:A,disabled:c})]})}))}));var uu=t(5173),mu=t.n(uu);function bu(e,g,t){return"function"===typeof e?e(g,t):e}const Zu=mu().oneOfType([mu().func,mu().object]),pu=(e,g)=>e.length===g.length&&g.every((g=>e.includes(g))),hu=e=>{let{date:g,disableFuture:t,disablePast:I,maxDate:n,minDate:l,isDateDisabled:C,utils:o,timezone:a}=e;const r=o.startOfDay(o.dateWithTimezone(void 0,a));I&&o.isBefore(l,r)&&(l=r),t&&o.isAfter(n,r)&&(n=r);let i=g,c=g;for(o.isBefore(g,l)&&(i=l,c=null),o.isAfter(g,n)&&(c&&(c=n),i=null);i||c;){if(i&&o.isAfter(i,n)&&(i=null),c&&o.isBefore(c,l)&&(c=null),i){if(!C(i))return i;i=o.addDays(i,1)}if(c){if(!C(c))return c;c=o.addDays(c,-1)}}return null},Gu=(e,g,t)=>null!=g&&e.isValid(g)?g:t,yu=(e,g)=>{const t=[e.startOfYear(g)];for(;t.length<12;){const g=t[t.length-1];t.push(e.addMonths(g,1))}return t},Bu=(e,g,t)=>{let I=g;return I=e.setHours(I,e.getHours(t)),I=e.setMinutes(I,e.getMinutes(t)),I=e.setSeconds(I,e.getSeconds(t)),I},Su=(e,g,t)=>"date"===t?e.startOfDay(e.dateWithTimezone(void 0,g)):e.dateWithTimezone(void 0,g),Wu=["year","month","day"],Vu=e=>Wu.includes(e),vu=(e,g,t)=>{let{format:I,views:n}=g;if(null!=I)return I;const l=e.formats;return pu(n,["year"])?l.year:pu(n,["month"])?l.month:pu(n,["day"])?l.dayOfMonth:pu(n,["month","year"])?`${l.month} ${l.year}`:pu(n,["day","month"])?`${l.month} ${l.dayOfMonth}`:t?/en/.test(e.getCurrentLocaleCode())?l.normalDateWithWeekday:l.normalDate:l.keyboardDate},Ru=(e,g)=>{const t=e.startOfWeek(g);return[0,1,2,3,4,5,6].map((g=>e.addDays(t,g)))},fu=["hours","minutes","seconds"],Xu=(e,g)=>3600*g.getHours(e)+60*g.getMinutes(e)+g.getSeconds(e),ku={year:1,month:2,day:3,hours:4,minutes:5,seconds:6,milliseconds:7},Ju=(e,g,t)=>{if(g===ku.year)return e.startOfYear(t);if(g===ku.month)return e.startOfMonth(t);if(g===ku.day)return e.startOfDay(t);let I=t;return g<ku.minutes&&(I=e.setMinutes(I,0)),g<ku.seconds&&(I=e.setSeconds(I,0)),g<ku.milliseconds&&(I=e.setMilliseconds(I,0)),I},Yu=e=>{let{props:g,utils:t,granularity:I,timezone:n,getTodayDate:l}=e;var C;let o=l?l():Ju(t,I,Su(t,n));null!=g.minDate&&t.isAfterDay(g.minDate,o)&&(o=Ju(t,I,g.minDate)),null!=g.maxDate&&t.isBeforeDay(g.maxDate,o)&&(o=Ju(t,I,g.maxDate));const a=((e,g)=>(t,I)=>e?g.isAfter(t,I):Xu(t,g)>Xu(I,g))(null!=(C=g.disableIgnoringDatePartForTimeValidation)&&C,t);return null!=g.minTime&&a(g.minTime,o)&&(o=Ju(t,I,g.disableIgnoringDatePartForTimeValidation?g.minTime:Bu(t,o,g.minTime))),null!=g.maxTime&&a(o,g.maxTime)&&(o=Ju(t,I,g.disableIgnoringDatePartForTimeValidation?g.maxTime:Bu(t,o,g.maxTime))),o},wu=(e,g)=>{const t=e.formatTokenMap[g];if(null==t)throw new Error([`MUI: The token "${g}" is not supported by the Date and Time Pickers.`,"Please try using another token or open an issue on https://github.com/mui/mui-x/issues/new/choose if you think it should be supported."].join("\n"));return"string"===typeof t?{type:t,contentType:"meridiem"===t?"letter":"digit",maxLength:void 0}:{type:t.sectionType,contentType:t.contentType,maxLength:t.maxLength}},Hu=(e,g,t)=>{const I=[],n=e.dateWithTimezone(void 0,g),l=e.startOfWeek(n),C=e.endOfWeek(n);let o=l;for(;e.isBefore(o,C);)I.push(o),o=e.addDays(o,1);return I.map((g=>e.formatByString(g,t)))},Nu=(e,g,t,I)=>{switch(t){case"month":return yu(e,e.dateWithTimezone(void 0,g)).map((g=>e.formatByString(g,I)));case"weekDay":return Hu(e,g,I);case"meridiem":{const t=e.dateWithTimezone(void 0,g);return[e.startOfDay(t),e.endOfDay(t)].map((g=>e.formatByString(g,I)))}default:return[]}},Fu=(e,g,t)=>{let I=g;for(I=Number(I).toString();I.length<t;)I=`0${I}`;return I},Ku=(e,g,t,I,n)=>{if("day"===n.type&&"digit-with-letter"===n.contentType){const g=e.setDate(I.longestMonth,t);return e.formatByString(g,n.format)}const l=t.toString();return n.hasLeadingZerosInInput?Fu(0,l,n.maxLength):l},xu=(e,g,t,I,n,l,C)=>{const o=(e=>{switch(e){case"ArrowUp":return 1;case"ArrowDown":return-1;case"PageUp":return 5;case"PageDown":return-5;default:return 0}})(I),a="Home"===I,r="End"===I,i=""===t.value||a||r;return"digit"===t.contentType||"digit-with-letter"===t.contentType?(()=>{const I=n[t.type]({currentDate:l,format:t.format,contentType:t.contentType}),c=g=>Ku(e,0,g,I,t),A="minutes"===t.type&&null!=C&&C.minutesStep?C.minutesStep:1;let d=parseInt(t.value,10)+o*A;if(i){if("year"===t.type&&!r&&!a)return e.formatByString(e.dateWithTimezone(void 0,g),t.format);d=o>0||a?I.minimum:I.maximum}return d%A!==0&&((o<0||a)&&(d+=A-(A+d)%A),(o>0||r)&&(d-=d%A)),d>I.maximum?c(I.minimum+(d-I.maximum-1)%(I.maximum-I.minimum+1)):d<I.minimum?c(I.maximum-(I.minimum-d-1)%(I.maximum-I.minimum+1)):c(d)})():(()=>{const I=Nu(e,g,t.type,t.format);if(0===I.length)return t.value;if(i)return o>0||a?I[0]:I[I.length-1];const n=I.indexOf(t.value);return I[(n+I.length+o)%I.length]})()},Mu=(e,g)=>{let t=e.value||e.placeholder;const I="non-input"===g?e.hasLeadingZerosInFormat:e.hasLeadingZerosInInput;"non-input"===g&&e.hasLeadingZerosInInput&&!e.hasLeadingZerosInFormat&&(t=Number(t).toString());return["input-rtl","input-ltr"].includes(g)&&"digit"===e.contentType&&!I&&1===t.length&&(t=`${t}\u200e`),"input-rtl"===g&&(t=`\u2068${t}\u2069`),t},zu=e=>e.replace(/[\u2066\u2067\u2068\u2069]/g,""),Eu=(e,g)=>{let t=0,I=g?1:0;const n=[];for(let l=0;l<e.length;l+=1){const C=e[l],o=Mu(C,g?"input-rtl":"input-ltr"),a=`${C.startSeparator}${o}${C.endSeparator}`,r=zu(a).length,i=a.length,c=zu(o),A=I+o.indexOf(c[0])+C.startSeparator.length,d=A+c.length;n.push((0,we.A)({},C,{start:t,end:t+r,startInInput:A,endInInput:d})),t+=r,I+=i}return n},Du=(e,g,t,I,n)=>{switch(I.type){case"year":return t.fieldYearPlaceholder({digitAmount:e.formatByString(e.dateWithTimezone(void 0,g),n).length,format:n});case"month":return t.fieldMonthPlaceholder({contentType:I.contentType,format:n});case"day":return t.fieldDayPlaceholder({format:n});case"weekDay":return t.fieldWeekDayPlaceholder({contentType:I.contentType,format:n});case"hours":return t.fieldHoursPlaceholder({format:n});case"minutes":return t.fieldMinutesPlaceholder({format:n});case"seconds":return t.fieldSecondsPlaceholder({format:n});case"meridiem":return t.fieldMeridiemPlaceholder({format:n});default:return n}},Uu=(e,g,t,I)=>e.formatByString(e.parse(g,t),I),Tu=(e,g,t)=>4===e.formatByString(e.dateWithTimezone(void 0,g),t).length,Lu=(e,g,t,I,n)=>{if("digit"!==t)return!1;const l=e.dateWithTimezone(void 0,g);switch(I){case"year":if(Tu(e,g,n)){return"0001"===e.formatByString(e.setYear(l,1),n)}return"01"===e.formatByString(e.setYear(l,2001),n);case"month":return e.formatByString(e.startOfYear(l),n).length>1;case"day":return e.formatByString(e.startOfMonth(l),n).length>1;case"weekDay":return e.formatByString(e.startOfWeek(l),n).length>1;case"hours":return e.formatByString(e.setHours(l,1),n).length>1;case"minutes":return e.formatByString(e.setMinutes(l,1),n).length>1;case"seconds":return e.formatByString(e.setSeconds(l,1),n).length>1;default:throw new Error("Invalid section type")}},Qu=(e,g,t,I,n,l,C,o)=>{let a="";const r=[],i=e.date(),c=I=>{if(""===I)return null;const l=wu(e,I),o=Lu(e,g,l.contentType,l.type,I),c=C?o:"digit"===l.contentType,A=null!=n&&e.isValid(n);let d=A?e.formatByString(n,I):"",s=null;if(c)if(o)s=""===d?e.formatByString(i,I).length:d.length;else{if(null==l.maxLength)throw new Error(`MUI: The token ${I} should have a 'maxDigitNumber' property on it's adapter`);s=l.maxLength,A&&(d=Fu(0,d,s))}return r.push((0,we.A)({},l,{format:I,maxLength:s,value:d,placeholder:Du(e,g,t,l,I),hasLeadingZeros:o,hasLeadingZerosInFormat:o,hasLeadingZerosInInput:c,startSeparator:0===r.length?a:"",endSeparator:"",modified:!1})),null};let A=10,d=I,s=e.expandFormat(I);for(;s!==d;)if(d=s,s=e.expandFormat(d),A-=1,A<0)throw new Error("MUI: The format expansion seems to be  enter in an infinite loop. Please open an issue with the format passed to the picker component");const u=s,m=((e,g)=>{const t=[],{start:I,end:n}=e.escapedCharacters,l=new RegExp(`(\\${I}[^\\${n}]*\\${n})+`,"g");let C=null;for(;C=l.exec(g);)t.push({start:C.index,end:l.lastIndex-1});return t})(e,u),b=new RegExp(`^(${Object.keys(e.formatTokenMap).sort(((e,g)=>g.length-e.length)).join("|")})`,"g");let Z="";for(let p=0;p<u.length;p+=1){const e=m.find((e=>e.start<=p&&e.end>=p)),g=u[p],t=null!=e,I=`${Z}${u.slice(p)}`,n=b.test(I);if(!t&&g.match(/([A-Za-z]+)/)&&n)Z=I.slice(0,b.lastIndex),p+=b.lastIndex-1;else{t&&(null==e?void 0:e.start)===p||(null==e?void 0:e.end)===p||(c(Z),Z="",0===r.length?a+=g:r[r.length-1].endSeparator+=g)}}return c(Z),r.map((e=>{const g=e=>{let g=e;return o&&null!==g&&g.includes(" ")&&(g=`\u2069${g}\u2066`),"spacious"===l&&["/",".","-"].includes(g)&&(g=` ${g} `),g};return e.startSeparator=g(e.startSeparator),e.endSeparator=g(e.endSeparator),e}))};const ju=(e,g)=>{0},Pu={year:1,month:2,day:3,weekDay:4,hours:5,minutes:6,seconds:7,meridiem:8},Ou=(e,g,t,I,n,l)=>[...I].sort(((e,g)=>Pu[e.type]-Pu[g.type])).reduce(((I,n)=>!l||n.modified?((e,g,t,I,n)=>{switch(t.type){case"year":return e.setYear(n,e.getYear(I));case"month":return e.setMonth(n,e.getMonth(I));case"weekDay":{const n=Hu(e,g,t.format),l=e.formatByString(I,t.format),C=n.indexOf(l),o=n.indexOf(t.value)-C;return e.addDays(I,o)}case"day":return e.setDate(n,e.getDate(I));case"meridiem":{const g=e.getHours(I)<12,t=e.getHours(n);return g&&t>=12?e.addHours(n,-12):!g&&t<12?e.addHours(n,12):n}case"hours":return e.setHours(n,e.getHours(I));case"minutes":return e.setMinutes(n,e.getMinutes(I));case"seconds":return e.setSeconds(n,e.getSeconds(I));default:return n}})(e,g,n,t,I):I),n),qu=["value","referenceDate"],$u={emptyValue:null,getTodayValue:Su,getInitialReferenceValue:e=>{let{value:g,referenceDate:t}=e,I=(0,He.A)(e,qu);return null!=g&&I.utils.isValid(g)?g:null!=t?t:Yu(I)},cleanValue:(e,g)=>null!=g&&e.isValid(g)?g:null,areValuesEqual:(e,g,t)=>!e.isValid(g)&&null!=g&&!e.isValid(t)&&null!=t||e.isEqual(g,t),isSameError:(e,g)=>e===g,hasError:e=>null!=e,defaultErrorState:null,getTimezone:(e,g)=>null!=g&&e.isValid(g)?e.getTimezone(g):null,setTimezone:(e,g,t)=>null==t?null:e.setTimezone(t,g)},_u={updateReferenceValue:(e,g,t)=>null!=g&&e.isValid(g)?g:t,getSectionsFromValue:(e,g,t,I,n)=>!e.isValid(g)&&!!t?t:Eu(n(g),I),getValueStrFromSections:(e,g)=>{const t=e.map((e=>{const t=Mu(e,g?"input-rtl":"input-ltr");return`${e.startSeparator}${t}${e.endSeparator}`})).join("");return g?`\u2066${t}\u2069`:t},getActiveDateManager:(e,g)=>({date:g.value,referenceDate:g.referenceValue,getSections:e=>e,getNewValuesFromNewActiveDate:t=>({value:t,referenceValue:null!=t&&e.isValid(t)?t:g.referenceValue})}),parseValueStr:(e,g,t)=>t(e.trim(),g)},em={previousMonth:"Previous month",nextMonth:"Next month",openPreviousView:"open previous view",openNextView:"open next view",calendarViewSwitchingButtonAriaLabel:e=>"year"===e?"year view is open, switch to calendar view":"calendar view is open, switch to year view",start:"Start",end:"End",cancelButtonLabel:"Cancel",clearButtonLabel:"Clear",okButtonLabel:"OK",todayButtonLabel:"Today",datePickerToolbarTitle:"Select date",dateTimePickerToolbarTitle:"Select date & time",timePickerToolbarTitle:"Select time",dateRangePickerToolbarTitle:"Select date range",clockLabelText:(e,g,t)=>`Select ${e}. ${null===g?"No time selected":`Selected time is ${t.format(g,"fullTime")}`}`,hoursClockNumberText:e=>`${e} hours`,minutesClockNumberText:e=>`${e} minutes`,secondsClockNumberText:e=>`${e} seconds`,selectViewText:e=>`Select ${e}`,calendarWeekNumberHeaderLabel:"Week number",calendarWeekNumberHeaderText:"#",calendarWeekNumberAriaLabelText:e=>`Week ${e}`,calendarWeekNumberText:e=>`${e}`,openDatePickerDialogue:(e,g)=>null!==e&&g.isValid(e)?`Choose date, selected date is ${g.format(e,"fullDate")}`:"Choose date",openTimePickerDialogue:(e,g)=>null!==e&&g.isValid(e)?`Choose time, selected time is ${g.format(e,"fullTime")}`:"Choose time",fieldClearLabel:"Clear value",timeTableLabel:"pick time",dateTableLabel:"pick date",fieldYearPlaceholder:e=>"Y".repeat(e.digitAmount),fieldMonthPlaceholder:e=>"letter"===e.contentType?"MMMM":"MM",fieldDayPlaceholder:()=>"DD",fieldWeekDayPlaceholder:e=>"letter"===e.contentType?"EEEE":"EE",fieldHoursPlaceholder:()=>"hh",fieldMinutesPlaceholder:()=>"mm",fieldSecondsPlaceholder:()=>"ss",fieldMeridiemPlaceholder:()=>"aa"},gm=em;tm=em,(0,we.A)({},tm);var tm;const Im=()=>{const e=n.useContext(Pe);if(null===e)throw new Error(["MUI: Can not find the date and time pickers localization context.","It looks like you forgot to wrap your component in LocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-date-pickers` package"].join("\n"));if(null===e.utils)throw new Error(["MUI: Can not find the date and time pickers adapter from its localization context.","It looks like you forgot to pass a `dateAdapter` to your LocalizationProvider."].join("\n"));const g=n.useMemo((()=>(0,we.A)({},gm,e.localeText)),[e.localeText]);return n.useMemo((()=>(0,we.A)({},e,{localeText:g})),[e,g])},nm=()=>Im().utils,lm=()=>Im().defaultDates,Cm=()=>Im().localeText,om=e=>{const g=nm(),t=n.useRef();return void 0===t.current&&(t.current=g.dateWithTimezone(void 0,e)),t.current};function am(e){return(0,Yl.Ay)("MuiPickersToolbar",e)}(0,$n.A)("MuiPickersToolbar",["root","content"]);const rm=(0,nl.Ay)("div",{name:"MuiPickersToolbar",slot:"Root",overridesResolver:(e,g)=>g.root})((e=>{let{theme:g,ownerState:t}=e;return(0,we.A)({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:g.spacing(2,3)},t.isLandscape&&{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"})})),im=(0,nl.Ay)("div",{name:"MuiPickersToolbar",slot:"Content",overridesResolver:(e,g)=>g.content})((e=>{let{ownerState:g}=e;var t;return{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:g.isLandscape?"flex-start":"space-between",flexDirection:g.isLandscape?null!=(t=g.landscapeDirection)?t:"column":"row",flex:1,alignItems:g.isLandscape?"flex-start":"center"}})),cm=n.forwardRef((function(e,g){const t=Le({props:e,name:"MuiPickersToolbar"}),{children:I,className:n,toolbarTitle:l,hidden:C,titleId:o}=t,a=t,r=(e=>{const{classes:g,isLandscape:t}=e,I={root:["root"],content:["content"],penIconButton:["penIconButton",t&&"penIconButtonLandscape"]};return(0,tl.A)(I,am,g)})(a);return C?null:(0,Qe.jsxs)(rm,{ref:g,className:(0,Ln.A)(r.root,n),ownerState:a,children:[(0,Qe.jsx)(ZC,{color:"text.secondary",variant:"overline",id:o,children:l}),(0,Qe.jsx)(im,{className:r.content,ownerState:a,children:I})]})}));function Am(e){return(0,Yl.Ay)("MuiDatePickerToolbar",e)}(0,$n.A)("MuiDatePickerToolbar",["root","title"]);const dm=["value","isLandscape","onChange","toolbarFormat","toolbarPlaceholder","views"],sm=(0,nl.Ay)(cm,{name:"MuiDatePickerToolbar",slot:"Root",overridesResolver:(e,g)=>g.root})({}),um=(0,nl.Ay)(ZC,{name:"MuiDatePickerToolbar",slot:"Title",overridesResolver:(e,g)=>g.title})((e=>{let{ownerState:g}=e;return(0,we.A)({},g.isLandscape&&{margin:"auto 16px auto auto"})})),mm=n.forwardRef((function(e,g){const t=Le({props:e,name:"MuiDatePickerToolbar"}),{value:I,isLandscape:l,toolbarFormat:C,toolbarPlaceholder:o="\u2013\u2013",views:a}=t,r=(0,He.A)(t,dm),i=nm(),c=Cm(),A=(e=>{const{classes:g}=e;return(0,tl.A)({root:["root"],title:["title"]},Am,g)})(t),d=n.useMemo((()=>{if(!I)return o;const e=vu(i,{format:C,views:a},!0);return i.formatByString(I,e)}),[I,C,o,i,a]),s=t;return(0,Qe.jsx)(sm,(0,we.A)({ref:g,toolbarTitle:c.datePickerToolbarTitle,isLandscape:l,className:A.root},r,{children:(0,Qe.jsx)(um,{variant:"h4",align:l?"left":"center",ownerState:s,className:A.title,children:d})}))})),bm=e=>{if(void 0!==e)return Object.keys(e).reduce(((g,t)=>(0,we.A)({},g,{[`${t.slice(0,1).toLowerCase()}${t.slice(1)}`]:e[t]})),{})};function Zm(e,g){var t,I,l,C;const o=nm(),a=lm(),r=Le({props:e,name:g}),i=n.useMemo((()=>{var e;return null==(null==(e=r.localeText)?void 0:e.toolbarTitle)?r.localeText:(0,we.A)({},r.localeText,{datePickerToolbarTitle:r.localeText.toolbarTitle})}),[r.localeText]),c=null!=(t=r.slots)?t:bm(r.components);return(0,we.A)({},r,{localeText:i},(e=>{let{openTo:g,defaultOpenTo:t,views:I,defaultViews:n}=e;const l=null!=I?I:n;let C;if(null!=g)C=g;else if(l.includes(t))C=t;else{if(!(l.length>0))throw new Error("MUI: The `views` prop must contain at least one view");C=l[0]}return{views:l,openTo:C}})({views:r.views,openTo:r.openTo,defaultViews:["year","day"],defaultOpenTo:"day"}),{disableFuture:null!=(I=r.disableFuture)&&I,disablePast:null!=(l=r.disablePast)&&l,minDate:Gu(o,r.minDate,a.minDate),maxDate:Gu(o,r.maxDate,a.maxDate),slots:(0,we.A)({toolbar:mm},c),slotProps:null!=(C=r.slotProps)?C:r.componentsProps})}const pm=e=>{let{props:g,value:t,adapter:I}=e;if(null===t)return null;const{shouldDisableDate:n,shouldDisableMonth:l,shouldDisableYear:C,disablePast:o,disableFuture:a,timezone:r}=g,i=I.utils.dateWithTimezone(void 0,r),c=Gu(I.utils,g.minDate,I.defaultDates.minDate),A=Gu(I.utils,g.maxDate,I.defaultDates.maxDate);switch(!0){case!I.utils.isValid(t):return"invalidDate";case Boolean(n&&n(t)):return"shouldDisableDate";case Boolean(l&&l(t)):return"shouldDisableMonth";case Boolean(C&&C(t)):return"shouldDisableYear";case Boolean(a&&I.utils.isAfterDay(t,i)):return"disableFuture";case Boolean(o&&I.utils.isBeforeDay(t,i)):return"disablePast";case Boolean(c&&I.utils.isBeforeDay(t,c)):return"minDate";case Boolean(A&&I.utils.isAfterDay(t,A)):return"maxDate";default:return null}};function hm(e){if(void 0===e)return{};const g={};return Object.keys(e).filter((g=>!(g.match(/^on[A-Z]/)&&"function"===typeof e[g]))).forEach((t=>{g[t]=e[t]})),g}function Gm(e){const{getSlotProps:g,additionalProps:t,externalSlotProps:I,externalForwardedProps:n,className:l}=e;if(!g){const e=(0,Ln.A)(t?.className,l,n?.className,I?.className),g={...t?.style,...n?.style,...I?.style},C={...t,...n,...I};return e.length>0&&(C.className=e),Object.keys(g).length>0&&(C.style=g),{props:C,internalRef:void 0}}const C=function(e){let g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};const t={};return Object.keys(e).filter((t=>t.match(/^on[A-Z]/)&&"function"===typeof e[t]&&!g.includes(t))).forEach((g=>{t[g]=e[g]})),t}({...n,...I}),o=hm(I),a=hm(n),r=g(C),i=(0,Ln.A)(r?.className,t?.className,l,n?.className,I?.className),c={...r?.style,...t?.style,...n?.style,...I?.style},A={...r,...t,...a,...o};return i.length>0&&(A.className=i),Object.keys(c).length>0&&(A.style=c),{props:A,internalRef:r.ref}}function ym(e){const{elementType:g,externalSlotProps:t,ownerState:I,skipResolvingSlotProps:l=!1,...C}=e,o=l?{}:bu(t,I),{props:a,internalRef:r}=Gm({...C,externalSlotProps:o}),i=function(){for(var e=arguments.length,g=new Array(e),t=0;t<e;t++)g[t]=arguments[t];return n.useMemo((()=>g.every((e=>null==e))?null:e=>{g.forEach((g=>{!function(e,g){"function"===typeof e?e(g):e&&(e.current=g)}(g,e)}))}),g)}(r,o?.ref,e.additionalProps?.ref),c=function(e,g,t){return void 0===e||"string"===typeof e?g:{...g,ownerState:{...g.ownerState,...t}}}(g,{...a,ref:i},I);return c}var Bm=t(2374);function Sm(e){if(null==e)return window;if("[object Window]"!==e.toString()){var g=e.ownerDocument;return g&&g.defaultView||window}return e}function Wm(e){return e instanceof Sm(e).Element||e instanceof Element}function Vm(e){return e instanceof Sm(e).HTMLElement||e instanceof HTMLElement}function vm(e){return"undefined"!==typeof ShadowRoot&&(e instanceof Sm(e).ShadowRoot||e instanceof ShadowRoot)}var Rm=Math.max,fm=Math.min,Xm=Math.round;function km(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function Jm(){return!/^((?!chrome|android).)*safari/i.test(km())}function Ym(e,g,t){void 0===g&&(g=!1),void 0===t&&(t=!1);var I=e.getBoundingClientRect(),n=1,l=1;g&&Vm(e)&&(n=e.offsetWidth>0&&Xm(I.width)/e.offsetWidth||1,l=e.offsetHeight>0&&Xm(I.height)/e.offsetHeight||1);var C=(Wm(e)?Sm(e):window).visualViewport,o=!Jm()&&t,a=(I.left+(o&&C?C.offsetLeft:0))/n,r=(I.top+(o&&C?C.offsetTop:0))/l,i=I.width/n,c=I.height/l;return{width:i,height:c,top:r,right:a+i,bottom:r+c,left:a,x:a,y:r}}function wm(e){var g=Sm(e);return{scrollLeft:g.pageXOffset,scrollTop:g.pageYOffset}}function Hm(e){return e?(e.nodeName||"").toLowerCase():null}function Nm(e){return((Wm(e)?e.ownerDocument:e.document)||window.document).documentElement}function Fm(e){return Ym(Nm(e)).left+wm(e).scrollLeft}function Km(e){return Sm(e).getComputedStyle(e)}function xm(e){var g=Km(e),t=g.overflow,I=g.overflowX,n=g.overflowY;return/auto|scroll|overlay|hidden/.test(t+n+I)}function Mm(e,g,t){void 0===t&&(t=!1);var I=Vm(g),n=Vm(g)&&function(e){var g=e.getBoundingClientRect(),t=Xm(g.width)/e.offsetWidth||1,I=Xm(g.height)/e.offsetHeight||1;return 1!==t||1!==I}(g),l=Nm(g),C=Ym(e,n,t),o={scrollLeft:0,scrollTop:0},a={x:0,y:0};return(I||!I&&!t)&&(("body"!==Hm(g)||xm(l))&&(o=function(e){return e!==Sm(e)&&Vm(e)?{scrollLeft:(g=e).scrollLeft,scrollTop:g.scrollTop}:wm(e);var g}(g)),Vm(g)?((a=Ym(g,!0)).x+=g.clientLeft,a.y+=g.clientTop):l&&(a.x=Fm(l))),{x:C.left+o.scrollLeft-a.x,y:C.top+o.scrollTop-a.y,width:C.width,height:C.height}}function zm(e){var g=Ym(e),t=e.offsetWidth,I=e.offsetHeight;return Math.abs(g.width-t)<=1&&(t=g.width),Math.abs(g.height-I)<=1&&(I=g.height),{x:e.offsetLeft,y:e.offsetTop,width:t,height:I}}function Em(e){return"html"===Hm(e)?e:e.assignedSlot||e.parentNode||(vm(e)?e.host:null)||Nm(e)}function Dm(e){return["html","body","#document"].indexOf(Hm(e))>=0?e.ownerDocument.body:Vm(e)&&xm(e)?e:Dm(Em(e))}function Um(e,g){var t;void 0===g&&(g=[]);var I=Dm(e),n=I===(null==(t=e.ownerDocument)?void 0:t.body),l=Sm(I),C=n?[l].concat(l.visualViewport||[],xm(I)?I:[]):I,o=g.concat(C);return n?o:o.concat(Um(Em(C)))}function Tm(e){return["table","td","th"].indexOf(Hm(e))>=0}function Lm(e){return Vm(e)&&"fixed"!==Km(e).position?e.offsetParent:null}function Qm(e){for(var g=Sm(e),t=Lm(e);t&&Tm(t)&&"static"===Km(t).position;)t=Lm(t);return t&&("html"===Hm(t)||"body"===Hm(t)&&"static"===Km(t).position)?g:t||function(e){var g=/firefox/i.test(km());if(/Trident/i.test(km())&&Vm(e)&&"fixed"===Km(e).position)return null;var t=Em(e);for(vm(t)&&(t=t.host);Vm(t)&&["html","body"].indexOf(Hm(t))<0;){var I=Km(t);if("none"!==I.transform||"none"!==I.perspective||"paint"===I.contain||-1!==["transform","perspective"].indexOf(I.willChange)||g&&"filter"===I.willChange||g&&I.filter&&"none"!==I.filter)return t;t=t.parentNode}return null}(e)||g}var jm="top",Pm="bottom",Om="right",qm="left",$m="auto",_m=[jm,Pm,Om,qm],eb="start",gb="end",tb="viewport",Ib="popper",nb=_m.reduce((function(e,g){return e.concat([g+"-"+eb,g+"-"+gb])}),[]),lb=[].concat(_m,[$m]).reduce((function(e,g){return e.concat([g,g+"-"+eb,g+"-"+gb])}),[]),Cb=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function ob(e){var g=new Map,t=new Set,I=[];function n(e){t.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!t.has(e)){var I=g.get(e);I&&n(I)}})),I.push(e)}return e.forEach((function(e){g.set(e.name,e)})),e.forEach((function(e){t.has(e.name)||n(e)})),I}function ab(e){var g;return function(){return g||(g=new Promise((function(t){Promise.resolve().then((function(){g=void 0,t(e())}))}))),g}}var rb={placement:"bottom",modifiers:[],strategy:"absolute"};function ib(){for(var e=arguments.length,g=new Array(e),t=0;t<e;t++)g[t]=arguments[t];return!g.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function cb(e){void 0===e&&(e={});var g=e,t=g.defaultModifiers,I=void 0===t?[]:t,n=g.defaultOptions,l=void 0===n?rb:n;return function(e,g,t){void 0===t&&(t=l);var n={placement:"bottom",orderedModifiers:[],options:Object.assign({},rb,l),modifiersData:{},elements:{reference:e,popper:g},attributes:{},styles:{}},C=[],o=!1,a={state:n,setOptions:function(t){var o="function"===typeof t?t(n.options):t;r(),n.options=Object.assign({},l,n.options,o),n.scrollParents={reference:Wm(e)?Um(e):e.contextElement?Um(e.contextElement):[],popper:Um(g)};var i=function(e){var g=ob(e);return Cb.reduce((function(e,t){return e.concat(g.filter((function(e){return e.phase===t})))}),[])}(function(e){var g=e.reduce((function(e,g){var t=e[g.name];return e[g.name]=t?Object.assign({},t,g,{options:Object.assign({},t.options,g.options),data:Object.assign({},t.data,g.data)}):g,e}),{});return Object.keys(g).map((function(e){return g[e]}))}([].concat(I,n.options.modifiers)));return n.orderedModifiers=i.filter((function(e){return e.enabled})),n.orderedModifiers.forEach((function(e){var g=e.name,t=e.options,I=void 0===t?{}:t,l=e.effect;if("function"===typeof l){var o=l({state:n,name:g,instance:a,options:I}),r=function(){};C.push(o||r)}})),a.update()},forceUpdate:function(){if(!o){var e=n.elements,g=e.reference,t=e.popper;if(ib(g,t)){n.rects={reference:Mm(g,Qm(t),"fixed"===n.options.strategy),popper:zm(t)},n.reset=!1,n.placement=n.options.placement,n.orderedModifiers.forEach((function(e){return n.modifiersData[e.name]=Object.assign({},e.data)}));for(var I=0;I<n.orderedModifiers.length;I++)if(!0!==n.reset){var l=n.orderedModifiers[I],C=l.fn,r=l.options,i=void 0===r?{}:r,c=l.name;"function"===typeof C&&(n=C({state:n,options:i,name:c,instance:a})||n)}else n.reset=!1,I=-1}}},update:ab((function(){return new Promise((function(e){a.forceUpdate(),e(n)}))})),destroy:function(){r(),o=!0}};if(!ib(e,g))return a;function r(){C.forEach((function(e){return e()})),C=[]}return a.setOptions(t).then((function(e){!o&&t.onFirstUpdate&&t.onFirstUpdate(e)})),a}}var Ab={passive:!0};function db(e){return e.split("-")[0]}function sb(e){return e.split("-")[1]}function ub(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function mb(e){var g,t=e.reference,I=e.element,n=e.placement,l=n?db(n):null,C=n?sb(n):null,o=t.x+t.width/2-I.width/2,a=t.y+t.height/2-I.height/2;switch(l){case jm:g={x:o,y:t.y-I.height};break;case Pm:g={x:o,y:t.y+t.height};break;case Om:g={x:t.x+t.width,y:a};break;case qm:g={x:t.x-I.width,y:a};break;default:g={x:t.x,y:t.y}}var r=l?ub(l):null;if(null!=r){var i="y"===r?"height":"width";switch(C){case eb:g[r]=g[r]-(t[i]/2-I[i]/2);break;case gb:g[r]=g[r]+(t[i]/2-I[i]/2)}}return g}var bb={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Zb(e){var g,t=e.popper,I=e.popperRect,n=e.placement,l=e.variation,C=e.offsets,o=e.position,a=e.gpuAcceleration,r=e.adaptive,i=e.roundOffsets,c=e.isFixed,A=C.x,d=void 0===A?0:A,s=C.y,u=void 0===s?0:s,m="function"===typeof i?i({x:d,y:u}):{x:d,y:u};d=m.x,u=m.y;var b=C.hasOwnProperty("x"),Z=C.hasOwnProperty("y"),p=qm,h=jm,G=window;if(r){var y=Qm(t),B="clientHeight",S="clientWidth";if(y===Sm(t)&&"static"!==Km(y=Nm(t)).position&&"absolute"===o&&(B="scrollHeight",S="scrollWidth"),n===jm||(n===qm||n===Om)&&l===gb)h=Pm,u-=(c&&y===G&&G.visualViewport?G.visualViewport.height:y[B])-I.height,u*=a?1:-1;if(n===qm||(n===jm||n===Pm)&&l===gb)p=Om,d-=(c&&y===G&&G.visualViewport?G.visualViewport.width:y[S])-I.width,d*=a?1:-1}var W,V=Object.assign({position:o},r&&bb),v=!0===i?function(e,g){var t=e.x,I=e.y,n=g.devicePixelRatio||1;return{x:Xm(t*n)/n||0,y:Xm(I*n)/n||0}}({x:d,y:u},Sm(t)):{x:d,y:u};return d=v.x,u=v.y,a?Object.assign({},V,((W={})[h]=Z?"0":"",W[p]=b?"0":"",W.transform=(G.devicePixelRatio||1)<=1?"translate("+d+"px, "+u+"px)":"translate3d("+d+"px, "+u+"px, 0)",W)):Object.assign({},V,((g={})[h]=Z?u+"px":"",g[p]=b?d+"px":"",g.transform="",g))}var pb={left:"right",right:"left",bottom:"top",top:"bottom"};function hb(e){return e.replace(/left|right|bottom|top/g,(function(e){return pb[e]}))}var Gb={start:"end",end:"start"};function yb(e){return e.replace(/start|end/g,(function(e){return Gb[e]}))}function Bb(e,g){var t=g.getRootNode&&g.getRootNode();if(e.contains(g))return!0;if(t&&vm(t)){var I=g;do{if(I&&e.isSameNode(I))return!0;I=I.parentNode||I.host}while(I)}return!1}function Sb(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Wb(e,g,t){return g===tb?Sb(function(e,g){var t=Sm(e),I=Nm(e),n=t.visualViewport,l=I.clientWidth,C=I.clientHeight,o=0,a=0;if(n){l=n.width,C=n.height;var r=Jm();(r||!r&&"fixed"===g)&&(o=n.offsetLeft,a=n.offsetTop)}return{width:l,height:C,x:o+Fm(e),y:a}}(e,t)):Wm(g)?function(e,g){var t=Ym(e,!1,"fixed"===g);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(g,t):Sb(function(e){var g,t=Nm(e),I=wm(e),n=null==(g=e.ownerDocument)?void 0:g.body,l=Rm(t.scrollWidth,t.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),C=Rm(t.scrollHeight,t.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),o=-I.scrollLeft+Fm(e),a=-I.scrollTop;return"rtl"===Km(n||t).direction&&(o+=Rm(t.clientWidth,n?n.clientWidth:0)-l),{width:l,height:C,x:o,y:a}}(Nm(e)))}function Vb(e,g,t,I){var n="clippingParents"===g?function(e){var g=Um(Em(e)),t=["absolute","fixed"].indexOf(Km(e).position)>=0&&Vm(e)?Qm(e):e;return Wm(t)?g.filter((function(e){return Wm(e)&&Bb(e,t)&&"body"!==Hm(e)})):[]}(e):[].concat(g),l=[].concat(n,[t]),C=l[0],o=l.reduce((function(g,t){var n=Wb(e,t,I);return g.top=Rm(n.top,g.top),g.right=fm(n.right,g.right),g.bottom=fm(n.bottom,g.bottom),g.left=Rm(n.left,g.left),g}),Wb(e,C,I));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function vb(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Rb(e,g){return g.reduce((function(g,t){return g[t]=e,g}),{})}function fb(e,g){void 0===g&&(g={});var t=g,I=t.placement,n=void 0===I?e.placement:I,l=t.strategy,C=void 0===l?e.strategy:l,o=t.boundary,a=void 0===o?"clippingParents":o,r=t.rootBoundary,i=void 0===r?tb:r,c=t.elementContext,A=void 0===c?Ib:c,d=t.altBoundary,s=void 0!==d&&d,u=t.padding,m=void 0===u?0:u,b=vb("number"!==typeof m?m:Rb(m,_m)),Z=A===Ib?"reference":Ib,p=e.rects.popper,h=e.elements[s?Z:A],G=Vb(Wm(h)?h:h.contextElement||Nm(e.elements.popper),a,i,C),y=Ym(e.elements.reference),B=mb({reference:y,element:p,strategy:"absolute",placement:n}),S=Sb(Object.assign({},p,B)),W=A===Ib?S:y,V={top:G.top-W.top+b.top,bottom:W.bottom-G.bottom+b.bottom,left:G.left-W.left+b.left,right:W.right-G.right+b.right},v=e.modifiersData.offset;if(A===Ib&&v){var R=v[n];Object.keys(V).forEach((function(e){var g=[Om,Pm].indexOf(e)>=0?1:-1,t=[jm,Pm].indexOf(e)>=0?"y":"x";V[e]+=R[t]*g}))}return V}function Xb(e,g,t){return Rm(e,fm(g,t))}function kb(e,g,t){return void 0===t&&(t={x:0,y:0}),{top:e.top-g.height-t.y,right:e.right-g.width+t.x,bottom:e.bottom-g.height+t.y,left:e.left-g.width-t.x}}function Jb(e){return[jm,Om,Pm,qm].some((function(g){return e[g]>=0}))}var Yb=cb({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var g=e.state,t=e.instance,I=e.options,n=I.scroll,l=void 0===n||n,C=I.resize,o=void 0===C||C,a=Sm(g.elements.popper),r=[].concat(g.scrollParents.reference,g.scrollParents.popper);return l&&r.forEach((function(e){e.addEventListener("scroll",t.update,Ab)})),o&&a.addEventListener("resize",t.update,Ab),function(){l&&r.forEach((function(e){e.removeEventListener("scroll",t.update,Ab)})),o&&a.removeEventListener("resize",t.update,Ab)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var g=e.state,t=e.name;g.modifiersData[t]=mb({reference:g.rects.reference,element:g.rects.popper,strategy:"absolute",placement:g.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var g=e.state,t=e.options,I=t.gpuAcceleration,n=void 0===I||I,l=t.adaptive,C=void 0===l||l,o=t.roundOffsets,a=void 0===o||o,r={placement:db(g.placement),variation:sb(g.placement),popper:g.elements.popper,popperRect:g.rects.popper,gpuAcceleration:n,isFixed:"fixed"===g.options.strategy};null!=g.modifiersData.popperOffsets&&(g.styles.popper=Object.assign({},g.styles.popper,Zb(Object.assign({},r,{offsets:g.modifiersData.popperOffsets,position:g.options.strategy,adaptive:C,roundOffsets:a})))),null!=g.modifiersData.arrow&&(g.styles.arrow=Object.assign({},g.styles.arrow,Zb(Object.assign({},r,{offsets:g.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),g.attributes.popper=Object.assign({},g.attributes.popper,{"data-popper-placement":g.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var g=e.state;Object.keys(g.elements).forEach((function(e){var t=g.styles[e]||{},I=g.attributes[e]||{},n=g.elements[e];Vm(n)&&Hm(n)&&(Object.assign(n.style,t),Object.keys(I).forEach((function(e){var g=I[e];!1===g?n.removeAttribute(e):n.setAttribute(e,!0===g?"":g)})))}))},effect:function(e){var g=e.state,t={popper:{position:g.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(g.elements.popper.style,t.popper),g.styles=t,g.elements.arrow&&Object.assign(g.elements.arrow.style,t.arrow),function(){Object.keys(g.elements).forEach((function(e){var I=g.elements[e],n=g.attributes[e]||{},l=Object.keys(g.styles.hasOwnProperty(e)?g.styles[e]:t[e]).reduce((function(e,g){return e[g]="",e}),{});Vm(I)&&Hm(I)&&(Object.assign(I.style,l),Object.keys(n).forEach((function(e){I.removeAttribute(e)})))}))}},requires:["computeStyles"]},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var g=e.state,t=e.options,I=e.name,n=t.offset,l=void 0===n?[0,0]:n,C=lb.reduce((function(e,t){return e[t]=function(e,g,t){var I=db(e),n=[qm,jm].indexOf(I)>=0?-1:1,l="function"===typeof t?t(Object.assign({},g,{placement:e})):t,C=l[0],o=l[1];return C=C||0,o=(o||0)*n,[qm,Om].indexOf(I)>=0?{x:o,y:C}:{x:C,y:o}}(t,g.rects,l),e}),{}),o=C[g.placement],a=o.x,r=o.y;null!=g.modifiersData.popperOffsets&&(g.modifiersData.popperOffsets.x+=a,g.modifiersData.popperOffsets.y+=r),g.modifiersData[I]=C}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var g=e.state,t=e.options,I=e.name;if(!g.modifiersData[I]._skip){for(var n=t.mainAxis,l=void 0===n||n,C=t.altAxis,o=void 0===C||C,a=t.fallbackPlacements,r=t.padding,i=t.boundary,c=t.rootBoundary,A=t.altBoundary,d=t.flipVariations,s=void 0===d||d,u=t.allowedAutoPlacements,m=g.options.placement,b=db(m),Z=a||(b===m||!s?[hb(m)]:function(e){if(db(e)===$m)return[];var g=hb(e);return[yb(e),g,yb(g)]}(m)),p=[m].concat(Z).reduce((function(e,t){return e.concat(db(t)===$m?function(e,g){void 0===g&&(g={});var t=g,I=t.placement,n=t.boundary,l=t.rootBoundary,C=t.padding,o=t.flipVariations,a=t.allowedAutoPlacements,r=void 0===a?lb:a,i=sb(I),c=i?o?nb:nb.filter((function(e){return sb(e)===i})):_m,A=c.filter((function(e){return r.indexOf(e)>=0}));0===A.length&&(A=c);var d=A.reduce((function(g,t){return g[t]=fb(e,{placement:t,boundary:n,rootBoundary:l,padding:C})[db(t)],g}),{});return Object.keys(d).sort((function(e,g){return d[e]-d[g]}))}(g,{placement:t,boundary:i,rootBoundary:c,padding:r,flipVariations:s,allowedAutoPlacements:u}):t)}),[]),h=g.rects.reference,G=g.rects.popper,y=new Map,B=!0,S=p[0],W=0;W<p.length;W++){var V=p[W],v=db(V),R=sb(V)===eb,f=[jm,Pm].indexOf(v)>=0,X=f?"width":"height",k=fb(g,{placement:V,boundary:i,rootBoundary:c,altBoundary:A,padding:r}),J=f?R?Om:qm:R?Pm:jm;h[X]>G[X]&&(J=hb(J));var Y=hb(J),w=[];if(l&&w.push(k[v]<=0),o&&w.push(k[J]<=0,k[Y]<=0),w.every((function(e){return e}))){S=V,B=!1;break}y.set(V,w)}if(B)for(var H=function(e){var g=p.find((function(g){var t=y.get(g);if(t)return t.slice(0,e).every((function(e){return e}))}));if(g)return S=g,"break"},N=s?3:1;N>0;N--){if("break"===H(N))break}g.placement!==S&&(g.modifiersData[I]._skip=!0,g.placement=S,g.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var g=e.state,t=e.options,I=e.name,n=t.mainAxis,l=void 0===n||n,C=t.altAxis,o=void 0!==C&&C,a=t.boundary,r=t.rootBoundary,i=t.altBoundary,c=t.padding,A=t.tether,d=void 0===A||A,s=t.tetherOffset,u=void 0===s?0:s,m=fb(g,{boundary:a,rootBoundary:r,padding:c,altBoundary:i}),b=db(g.placement),Z=sb(g.placement),p=!Z,h=ub(b),G="x"===h?"y":"x",y=g.modifiersData.popperOffsets,B=g.rects.reference,S=g.rects.popper,W="function"===typeof u?u(Object.assign({},g.rects,{placement:g.placement})):u,V="number"===typeof W?{mainAxis:W,altAxis:W}:Object.assign({mainAxis:0,altAxis:0},W),v=g.modifiersData.offset?g.modifiersData.offset[g.placement]:null,R={x:0,y:0};if(y){if(l){var f,X="y"===h?jm:qm,k="y"===h?Pm:Om,J="y"===h?"height":"width",Y=y[h],w=Y+m[X],H=Y-m[k],N=d?-S[J]/2:0,F=Z===eb?B[J]:S[J],K=Z===eb?-S[J]:-B[J],x=g.elements.arrow,M=d&&x?zm(x):{width:0,height:0},z=g.modifiersData["arrow#persistent"]?g.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},E=z[X],D=z[k],U=Xb(0,B[J],M[J]),T=p?B[J]/2-N-U-E-V.mainAxis:F-U-E-V.mainAxis,L=p?-B[J]/2+N+U+D+V.mainAxis:K+U+D+V.mainAxis,Q=g.elements.arrow&&Qm(g.elements.arrow),j=Q?"y"===h?Q.clientTop||0:Q.clientLeft||0:0,P=null!=(f=null==v?void 0:v[h])?f:0,O=Y+L-P,q=Xb(d?fm(w,Y+T-P-j):w,Y,d?Rm(H,O):H);y[h]=q,R[h]=q-Y}if(o){var $,_="x"===h?jm:qm,ee="x"===h?Pm:Om,ge=y[G],te="y"===G?"height":"width",Ie=ge+m[_],ne=ge-m[ee],le=-1!==[jm,qm].indexOf(b),Ce=null!=($=null==v?void 0:v[G])?$:0,oe=le?Ie:ge-B[te]-S[te]-Ce+V.altAxis,ae=le?ge+B[te]+S[te]-Ce-V.altAxis:ne,re=d&&le?function(e,g,t){var I=Xb(e,g,t);return I>t?t:I}(oe,ge,ae):Xb(d?oe:Ie,ge,d?ae:ne);y[G]=re,R[G]=re-ge}g.modifiersData[I]=R}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var g,t=e.state,I=e.name,n=e.options,l=t.elements.arrow,C=t.modifiersData.popperOffsets,o=db(t.placement),a=ub(o),r=[qm,Om].indexOf(o)>=0?"height":"width";if(l&&C){var i=function(e,g){return vb("number"!==typeof(e="function"===typeof e?e(Object.assign({},g.rects,{placement:g.placement})):e)?e:Rb(e,_m))}(n.padding,t),c=zm(l),A="y"===a?jm:qm,d="y"===a?Pm:Om,s=t.rects.reference[r]+t.rects.reference[a]-C[a]-t.rects.popper[r],u=C[a]-t.rects.reference[a],m=Qm(l),b=m?"y"===a?m.clientHeight||0:m.clientWidth||0:0,Z=s/2-u/2,p=i[A],h=b-c[r]-i[d],G=b/2-c[r]/2+Z,y=Xb(p,G,h),B=a;t.modifiersData[I]=((g={})[B]=y,g.centerOffset=y-G,g)}},effect:function(e){var g=e.state,t=e.options.element,I=void 0===t?"[data-popper-arrow]":t;null!=I&&("string"!==typeof I||(I=g.elements.popper.querySelector(I)))&&Bb(g.elements.popper,I)&&(g.elements.arrow=I)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var g=e.state,t=e.name,I=g.rects.reference,n=g.rects.popper,l=g.modifiersData.preventOverflow,C=fb(g,{elementContext:"reference"}),o=fb(g,{altBoundary:!0}),a=kb(C,I),r=kb(o,n,l),i=Jb(a),c=Jb(r);g.modifiersData[t]={referenceClippingOffsets:a,popperEscapeOffsets:r,isReferenceHidden:i,hasPopperEscaped:c},g.attributes.popper=Object.assign({},g.attributes.popper,{"data-popper-reference-hidden":i,"data-popper-escaped":c})}}]});function wb(e){return(0,Yl.Ay)("MuiPopper",e)}(0,$n.A)("MuiPopper",["root"]);const Hb=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],Nb=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function Fb(e){return"function"===typeof e?e():e}function Kb(e){return void 0!==e.nodeType}const xb={},Mb=n.forwardRef((function(e,g){var t;const{anchorEl:I,children:l,direction:C,disablePortal:o,modifiers:a,open:r,placement:i,popperOptions:c,popperRef:A,slotProps:d={},slots:s={},TransitionProps:u}=e,m=(0,He.A)(e,Hb),b=n.useRef(null),Z=(0,yC.A)(b,g),p=n.useRef(null),h=(0,yC.A)(p,A),G=n.useRef(h);(0,Vn.A)((()=>{G.current=h}),[h]),n.useImperativeHandle(A,(()=>p.current),[]);const y=function(e,g){if("ltr"===g)return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(i,C),[B,S]=n.useState(y),[W,V]=n.useState(Fb(I));n.useEffect((()=>{p.current&&p.current.forceUpdate()})),n.useEffect((()=>{I&&V(Fb(I))}),[I]),(0,Vn.A)((()=>{if(!W||!r)return;let e=[{name:"preventOverflow",options:{altBoundary:o}},{name:"flip",options:{altBoundary:o}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:e=>{let{state:g}=e;S(g.placement)}}];null!=a&&(e=e.concat(a)),c&&null!=c.modifiers&&(e=e.concat(c.modifiers));const g=Yb(W,b.current,(0,we.A)({placement:y},c,{modifiers:e}));return G.current(g),()=>{g.destroy(),G.current(null)}}),[W,o,a,r,c,y]);const v={placement:B};null!==u&&(v.TransitionProps=u);const R=(e=>{const{classes:g}=e;return(0,tl.A)({root:["root"]},wb,g)})(e),f=null!=(t=s.root)?t:"div",X=Oo({elementType:f,externalSlotProps:d.root,externalForwardedProps:m,additionalProps:{role:"tooltip",ref:Z},ownerState:e,className:R.root});return(0,Qe.jsx)(f,(0,we.A)({},X,{children:"function"===typeof l?l(v):l}))})),zb=n.forwardRef((function(e,g){const{anchorEl:t,children:I,container:l,direction:C="ltr",disablePortal:o=!1,keepMounted:a=!1,modifiers:r,open:i,placement:c="bottom",popperOptions:A=xb,popperRef:d,style:s,transition:u=!1,slotProps:m={},slots:b={}}=e,Z=(0,He.A)(e,Nb),[p,h]=n.useState(!0);if(!a&&!i&&(!u||p))return null;let G;if(l)G=l;else if(t){const e=Fb(t);G=e&&Kb(e)?(0,ka.A)(e).body:(0,ka.A)(null).body}const y=i||!a||u&&!p?void 0:"none",B=u?{in:i,onEnter:()=>{h(!1)},onExited:()=>{h(!0)}}:void 0;return(0,Qe.jsx)(Fa,{disablePortal:o,container:G,children:(0,Qe.jsx)(Mb,(0,we.A)({anchorEl:t,direction:C,disablePortal:o,modifiers:r,ref:g,open:u?!p:i,placement:c,popperOptions:A,popperRef:d,slotProps:m,slots:b},Z,{style:(0,we.A)({position:"fixed",top:0,left:0,display:y},s),TransitionProps:B,children:I}))})})),Eb=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],Db=(0,nl.Ay)(zb,{name:"MuiPopper",slot:"Root",overridesResolver:(e,g)=>g.root})({}),Ub=n.forwardRef((function(e,g){var t;const I=(0,Bm.A)(),n=(0,ll.b)({props:e,name:"MuiPopper"}),{anchorEl:l,component:C,components:o,componentsProps:a,container:r,disablePortal:i,keepMounted:c,modifiers:A,open:d,placement:s,popperOptions:u,popperRef:m,transition:b,slots:Z,slotProps:p}=n,h=(0,He.A)(n,Eb),G=null!=(t=null==Z?void 0:Z.root)?t:null==o?void 0:o.Root,y=(0,we.A)({anchorEl:l,container:r,disablePortal:i,keepMounted:c,modifiers:A,open:d,placement:s,popperOptions:u,popperRef:m,transition:b},h);return(0,Qe.jsx)(Db,(0,we.A)({as:C,direction:null==I?void 0:I.direction,slots:{root:G},slotProps:null!=p?p:a},y,{ref:g}))}));function Tb(e){return(0,Yl.Ay)("MuiPickersPopper",e)}(0,$n.A)("MuiPickersPopper",["root","paper"]);const Lb=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).activeElement;return e?e.shadowRoot?Lb(e.shadowRoot):e:null},Qb="@media (pointer: fine)",jb="undefined"!==typeof navigator&&navigator.userAgent.match(/android\s(\d+)|OS\s(\d+)/i),Pb=jb&&jb[1]?parseInt(jb[1],10):null,Ob=jb&&jb[2]?parseInt(jb[2],10):null,qb=Pb&&Pb<10||Ob&&Ob<13||!1,$b=()=>Xn("@media (prefers-reduced-motion: reduce)",{defaultMatches:!1})||qb,_b=["PaperComponent","popperPlacement","ownerState","children","paperSlotProps","paperClasses","onPaperClick","onPaperTouchStart"],eZ=(0,nl.Ay)(Ub,{name:"MuiPickersPopper",slot:"Root",overridesResolver:(e,g)=>g.root})((e=>{let{theme:g}=e;return{zIndex:g.zIndex.modal}})),gZ=(0,nl.Ay)(AC,{name:"MuiPickersPopper",slot:"Paper",overridesResolver:(e,g)=>g.paper})((e=>{let{ownerState:g}=e;return(0,we.A)({outline:0,transformOrigin:"top center"},g.placement.includes("top")&&{transformOrigin:"bottom center"})}));const tZ=n.forwardRef(((e,g)=>{const{PaperComponent:t,popperPlacement:I,ownerState:n,children:l,paperSlotProps:C,paperClasses:o,onPaperClick:a,onPaperTouchStart:r}=e,i=(0,He.A)(e,_b),c=(0,we.A)({},n,{placement:I}),A=ym({elementType:t,externalSlotProps:C,additionalProps:{tabIndex:-1,elevation:8,ref:g},className:o,ownerState:c});return(0,Qe.jsx)(t,(0,we.A)({},i,A,{onClick:e=>{var g;a(e),null==(g=A.onClick)||g.call(A,e)},onTouchStart:e=>{var g;r(e),null==(g=A.onTouchStart)||g.call(A,e)},ownerState:c,children:l}))}));function IZ(e){var g,t,I,l;const C=Le({props:e,name:"MuiPickersPopper"}),{anchorEl:o,children:a,containerRef:r=null,shouldRestoreFocus:i,onBlur:c,onDismiss:A,open:d,role:s,placement:u,slots:m,slotProps:b,reduceAnimations:Z}=C;n.useEffect((()=>{function e(e){!d||"Escape"!==e.key&&"Esc"!==e.key||A()}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[A,d]);const p=n.useRef(null);n.useEffect((()=>{"tooltip"===s||i&&!i()||(d?p.current=Lb(document):p.current&&p.current instanceof HTMLElement&&setTimeout((()=>{p.current instanceof HTMLElement&&p.current.focus()})))}),[d,s,i]);const[h,G,y]=function(e,g){const t=n.useRef(!1),I=n.useRef(!1),l=n.useRef(null),C=n.useRef(!1);n.useEffect((()=>{if(e)return document.addEventListener("mousedown",g,!0),document.addEventListener("touchstart",g,!0),()=>{document.removeEventListener("mousedown",g,!0),document.removeEventListener("touchstart",g,!0),C.current=!1};function g(){C.current=!0}}),[e]);const o=(0,Ta.A)((e=>{if(!C.current)return;const n=I.current;I.current=!1;const o=(0,ka.A)(l.current);if(!l.current||"clientX"in e&&function(e,g){return g.documentElement.clientWidth<e.clientX||g.documentElement.clientHeight<e.clientY}(e,o))return;if(t.current)return void(t.current=!1);let a;a=e.composedPath?e.composedPath().indexOf(l.current)>-1:!o.documentElement.contains(e.target)||l.current.contains(e.target),a||n||g(e)})),a=()=>{I.current=!0};return n.useEffect((()=>{if(e){const e=(0,ka.A)(l.current),g=()=>{t.current=!0};return e.addEventListener("touchstart",o),e.addEventListener("touchmove",g),()=>{e.removeEventListener("touchstart",o),e.removeEventListener("touchmove",g)}}}),[e,o]),n.useEffect((()=>{if(e){const e=(0,ka.A)(l.current);return e.addEventListener("click",o),()=>{e.removeEventListener("click",o),I.current=!1}}}),[e,o]),[l,a,a]}(d,null!=c?c:A),B=n.useRef(null),S=(0,yC.A)(B,r),W=(0,yC.A)(S,h),V=C,v=(e=>{const{classes:g}=e;return(0,tl.A)({root:["root"],paper:["paper"]},Tb,g)})(V),R=$b(),f=null!=Z?Z:R,X=(null!=(g=null==m?void 0:m.desktopTransition)?g:f)?Ma:Xa,k=null!=(t=null==m?void 0:m.desktopTrapFocus)?t:Ha,J=null!=(I=null==m?void 0:m.desktopPaper)?I:gZ,Y=null!=(l=null==m?void 0:m.popper)?l:eZ,w=ym({elementType:Y,externalSlotProps:null==b?void 0:b.popper,additionalProps:{transition:!0,role:s,open:d,anchorEl:o,placement:u,onKeyDown:e=>{"Escape"===e.key&&(e.stopPropagation(),A())}},className:v.root,ownerState:C});return(0,Qe.jsx)(Y,(0,we.A)({},w,{children:e=>{let{TransitionProps:g,placement:t}=e;return(0,Qe.jsx)(k,(0,we.A)({open:d,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:"tooltip"===s,isEnabled:()=>!0},null==b?void 0:b.desktopTrapFocus,{children:(0,Qe.jsx)(X,(0,we.A)({},g,null==b?void 0:b.desktopTransition,{children:(0,Qe.jsx)(tZ,{PaperComponent:J,ownerState:V,popperPlacement:t,ref:W,onPaperClick:G,onPaperTouchStart:y,paperClasses:v.paper,paperSlotProps:null==b?void 0:b.desktopPaper,children:a})}))}))}}))}var nZ=t(1052);function lZ(e,g,t,I){const{value:l,onError:C}=e,o=Im(),a=n.useRef(I),r=g({adapter:o,value:l,props:e});return n.useEffect((()=>{C&&!t(r,a.current)&&C(r,l),a.current=r}),[t,C,a,r,l]),r}const CZ=e=>{let{timezone:g,value:t,defaultValue:I,onChange:l,valueManager:C}=e;var o,a;const r=nm(),i=n.useRef(I),c=null!=(o=null!=t?t:i.current)?o:C.emptyValue,A=n.useMemo((()=>C.getTimezone(r,c)),[r,C,c]),d=(0,Ta.A)((e=>null==A?e:C.setTimezone(r,A,e))),s=null!=(a=null!=g?g:A)?a:"default";return{value:n.useMemo((()=>C.setTimezone(r,s,c)),[C,r,s,c]),handleValueChange:(0,Ta.A)((function(e){const g=d(e);for(var t=arguments.length,I=new Array(t>1?t-1:0),n=1;n<t;n++)I[n-1]=arguments[n];null==l||l(g,...I)})),timezone:s}},oZ=e=>{let{name:g,timezone:t,value:I,defaultValue:n,onChange:l,valueManager:C}=e;const[o,a]=(0,nZ.A)({name:g,state:"value",controlled:I,default:null!=n?n:C.emptyValue}),r=(0,Ta.A)((function(e){a(e);for(var g=arguments.length,t=new Array(g>1?g-1:0),I=1;I<g;I++)t[I-1]=arguments[I];null==l||l(e,...t)}));return CZ({timezone:t,value:o,defaultValue:void 0,onChange:r,valueManager:C})},aZ=e=>{let{props:g,valueManager:t,valueType:I,wrapperVariant:l,validator:C}=e;const{onAccept:o,onChange:a,value:r,defaultValue:i,closeOnSelect:c="desktop"===l,selectedSections:A,onSelectedSectionsChange:d,timezone:s}=g,{current:u}=n.useRef(i),{current:m}=n.useRef(void 0!==r);const b=nm(),Z=Im(),[p,h]=(0,nZ.A)({controlled:A,default:null,name:"usePickerValue",state:"selectedSections"}),{isOpen:G,setIsOpen:y}=(e=>{let{open:g,onOpen:t,onClose:I}=e;const l=n.useRef("boolean"===typeof g).current,[C,o]=n.useState(!1);return n.useEffect((()=>{if(l){if("boolean"!==typeof g)throw new Error("You must not mix controlling and uncontrolled mode for `open` prop");o(g)}}),[l,g]),{isOpen:C,setIsOpen:n.useCallback((e=>{l||o(e),e&&t&&t(),!e&&I&&I()}),[l,t,I])}})(g),[B,S]=n.useState((()=>{let e;return e=void 0!==r?r:void 0!==u?u:t.emptyValue,{draft:e,lastPublishedValue:e,lastCommittedValue:e,lastControlledValue:r,hasBeenModifiedSinceMount:!1}})),{timezone:W,handleValueChange:V}=CZ({timezone:s,value:r,defaultValue:u,onChange:a,valueManager:t});lZ((0,we.A)({},g,{value:B.draft,timezone:W}),C,t.isSameError,t.defaultErrorState);const v=(0,Ta.A)((e=>{const I={action:e,dateState:B,hasChanged:g=>!t.areValuesEqual(b,e.value,g),isControlled:m,closeOnSelect:c},n=(e=>{const{action:g,hasChanged:t,dateState:I,isControlled:n}=e,l=!n&&!I.hasBeenModifiedSinceMount;return"setValueFromField"===g.name||("setValueFromAction"===g.name?!(!l||!["accept","today","clear"].includes(g.pickerAction))||t(I.lastPublishedValue):("setValueFromView"===g.name&&"shallow"!==g.selectionState||"setValueFromShortcut"===g.name)&&(!!l||t(I.lastPublishedValue)))})(I),l=(e=>{const{action:g,hasChanged:t,dateState:I,isControlled:n,closeOnSelect:l}=e,C=!n&&!I.hasBeenModifiedSinceMount;return"setValueFromAction"===g.name?!(!C||!["accept","today","clear"].includes(g.pickerAction))||t(I.lastCommittedValue):"setValueFromView"===g.name&&"finish"===g.selectionState&&l?!!C||t(I.lastCommittedValue):"setValueFromShortcut"===g.name&&"accept"===g.changeImportance&&t(I.lastCommittedValue)})(I),a=(e=>{const{action:g,closeOnSelect:t}=e;return"setValueFromAction"===g.name||("setValueFromView"===g.name?"finish"===g.selectionState&&t:"setValueFromShortcut"===g.name&&"accept"===g.changeImportance)})(I);if(S((g=>(0,we.A)({},g,{draft:e.value,lastPublishedValue:n?e.value:g.lastPublishedValue,lastCommittedValue:l?e.value:g.lastCommittedValue,hasBeenModifiedSinceMount:!0}))),n){const t={validationError:"setValueFromField"===e.name?e.context.validationError:C({adapter:Z,value:e.value,props:(0,we.A)({},g,{value:e.value,timezone:W})})};"setValueFromShortcut"===e.name&&null!=e.shortcut&&(t.shortcut=e.shortcut),V(e.value,t)}l&&o&&o(e.value),a&&y(!1)}));if(void 0!==r&&(void 0===B.lastControlledValue||!t.areValuesEqual(b,B.lastControlledValue,r))){const e=t.areValuesEqual(b,B.draft,r);S((g=>(0,we.A)({},g,{lastControlledValue:r},e?{}:{lastCommittedValue:r,lastPublishedValue:r,draft:r,hasBeenModifiedSinceMount:!0})))}const R=(0,Ta.A)((()=>{v({value:t.emptyValue,name:"setValueFromAction",pickerAction:"clear"})})),f=(0,Ta.A)((()=>{v({value:B.lastPublishedValue,name:"setValueFromAction",pickerAction:"accept"})})),X=(0,Ta.A)((()=>{v({value:B.lastPublishedValue,name:"setValueFromAction",pickerAction:"dismiss"})})),k=(0,Ta.A)((()=>{v({value:B.lastCommittedValue,name:"setValueFromAction",pickerAction:"cancel"})})),J=(0,Ta.A)((()=>{v({value:t.getTodayValue(b,W,I),name:"setValueFromAction",pickerAction:"today"})})),Y=(0,Ta.A)((()=>y(!0))),w=(0,Ta.A)((()=>y(!1))),H=(0,Ta.A)((function(e){return v({name:"setValueFromView",value:e,selectionState:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"partial"})})),N=(0,Ta.A)(((e,g,t)=>v({name:"setValueFromShortcut",value:e,changeImportance:null!=g?g:"accept",shortcut:t}))),F=(0,Ta.A)(((e,g)=>v({name:"setValueFromField",value:e,context:g}))),K=(0,Ta.A)((e=>{h(e),null==d||d(e)})),x={onClear:R,onAccept:f,onDismiss:X,onCancel:k,onSetToday:J,onOpen:Y,onClose:w},M={value:B.draft,onChange:F,selectedSections:p,onSelectedSectionsChange:K},z=n.useMemo((()=>t.cleanValue(b,B.draft)),[b,t,B.draft]);return{open:G,fieldProps:M,viewProps:{value:z,onChange:H,onClose:w,open:G,onSelectedSectionsChange:K},layoutProps:(0,we.A)({},x,{value:z,onChange:H,onSelectShortcut:N,isValid:e=>{const I=C({adapter:Z,value:e,props:(0,we.A)({},g,{value:e,timezone:W})});return!t.hasError(I)}}),actions:x}};function rZ(e){let{onChange:g,onViewChange:t,openTo:I,view:l,views:C,autoFocus:o,focusedView:a,onFocusedViewChange:r}=e;var i,c;const A=n.useRef(I),d=n.useRef(C),s=n.useRef(C.includes(I)?I:C[0]),[u,m]=(0,nZ.A)({name:"useViews",state:"view",controlled:l,default:s.current}),b=n.useRef(o?u:null),[Z,p]=(0,nZ.A)({name:"useViews",state:"focusedView",controlled:a,default:b.current});n.useEffect((()=>{(A.current&&A.current!==I||d.current&&d.current.some((e=>!C.includes(e))))&&(m(C.includes(I)?I:C[0]),d.current=C,A.current=I)}),[I,m,u,C]);const h=C.indexOf(u),G=null!=(i=C[h-1])?i:null,y=null!=(c=C[h+1])?c:null,B=(0,Ta.A)(((e,g)=>{p(g?e:g=>e===g?null:g),null==r||r(e,g)})),S=(0,Ta.A)((e=>{e!==u&&(m(e),B(e,!0),t&&t(e))})),W=(0,Ta.A)((()=>{y&&S(y),B(y,!0)})),V=(0,Ta.A)(((e,t,I)=>{const n="finish"===t,l=I?C.indexOf(I)<C.length-1:Boolean(y);g(e,n&&l?"partial":t),n&&W()})),v=(0,Ta.A)(((e,t,I)=>{g(e,t?"partial":"finish",I),t&&(S(t),B(t,!0))}));return{view:u,setView:S,focusedView:Z,setFocusedView:B,nextView:y,previousView:G,defaultView:C.includes(I)?I:C[0],goToNextView:W,setValueAndGoToNextView:V,setValueAndGoToView:v}}const iZ=["className","sx"],cZ=e=>{let{props:g,propsFromPickerValue:t,additionalViewProps:I,inputRef:l,autoFocusView:C}=e;const{onChange:o,open:a,onSelectedSectionsChange:r,onClose:i}=t,{views:c,openTo:A,onViewChange:d,disableOpenPicker:s,viewRenderers:u,timezone:m}=g,b=(0,He.A)(g,iZ),{view:Z,setView:p,defaultView:h,focusedView:G,setFocusedView:y,setValueAndGoToNextView:B}=rZ({view:void 0,views:c,openTo:A,onChange:o,onViewChange:d,autoFocus:C}),{hasUIView:S,viewModeLookup:W}=n.useMemo((()=>c.reduce(((e,g)=>{let t;return t=s?"field":null!=u[g]?"UI":"field",e.viewModeLookup[g]=t,"UI"===t&&(e.hasUIView=!0),e}),{hasUIView:!1,viewModeLookup:{}})),[s,u,c]),V=n.useMemo((()=>c.reduce(((e,g)=>null!=u[g]&&(e=>fu.includes(e))(g)?e+1:e),0)),[u,c]),v=W[Z],R=(0,Ta.A)((()=>"UI"===v)),[f,X]=n.useState("UI"===v?Z:null);f!==Z&&"UI"===W[Z]&&X(Z),(0,Vn.A)((()=>{"field"===v&&a&&(i(),setTimeout((()=>{null==l||l.current.focus(),r(Z)})))}),[Z]),(0,Vn.A)((()=>{if(!a)return;let e=Z;"field"===v&&null!=f&&(e=f),e!==h&&"UI"===W[e]&&"UI"===W[h]&&(e=h),e!==Z&&p(e),y(e,!0)}),[a]);return{hasUIView:S,shouldRestoreFocus:R,layoutProps:{views:c,view:f,onViewChange:p},renderCurrentView:()=>{if(null==f)return null;const e=u[f];return null==e?null:e((0,we.A)({},b,I,t,{views:c,timezone:m,onChange:B,view:f,onViewChange:p,focusedView:G,onFocusedViewChange:y,showViewSwitcher:V>1,timeViewsCount:V}))}}};function AZ(){return"undefined"===typeof window?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?90===Math.abs(window.screen.orientation.angle)?"landscape":"portrait":window.orientation&&90===Math.abs(Number(window.orientation))?"landscape":"portrait"}const dZ=(e,g)=>{const[t,I]=n.useState(AZ);if((0,Vn.A)((()=>{const e=()=>{I(AZ())};return window.addEventListener("orientationchange",e),()=>{window.removeEventListener("orientationchange",e)}}),[]),l=e,C=["hours","minutes","seconds"],Array.isArray(C)?C.every((e=>-1!==l.indexOf(e))):-1!==l.indexOf(C))return!1;var l,C;return"landscape"===(g||t)},sZ=(function(e){let g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning",t=!1;const I=Array.isArray(e)?e.join("\n"):e}(["The `renderInput` prop has been removed in version 6.0 of the Date and Time Pickers.","You can replace it with the `textField` component slot in most cases.","For more information, please have a look at the migration guide (https://mui.com/x/migration/migration-pickers-v5/#input-renderer-required-in-v5)."]),e=>{let{props:g,valueManager:t,valueType:I,wrapperVariant:n,inputRef:l,additionalViewProps:C,validator:o,autoFocusView:a}=e;const r=aZ({props:g,valueManager:t,valueType:I,wrapperVariant:n,validator:o}),i=cZ({props:g,inputRef:l,additionalViewProps:C,autoFocusView:a,propsFromPickerValue:r.viewProps}),c=(e=>{let{props:g,propsFromPickerValue:t,propsFromPickerViews:I,wrapperVariant:n}=e;const{orientation:l}=g,C=dZ(I.views,l);return{layoutProps:(0,we.A)({},I,t,{isLandscape:C,wrapperVariant:n,disabled:g.disabled,readOnly:g.readOnly})}})({props:g,wrapperVariant:n,propsFromPickerValue:r.layoutProps,propsFromPickerViews:i.layoutProps});return{open:r.open,actions:r.actions,fieldProps:r.fieldProps,renderCurrentView:i.renderCurrentView,hasUIView:i.hasUIView,shouldRestoreFocus:i.shouldRestoreFocus,layoutProps:c.layoutProps}});function uZ(e){return(0,Yl.Ay)("MuiPickersLayout",e)}const mZ=(0,$n.A)("MuiPickersLayout",["root","landscape","contentWrapper","toolbar","actionBar","shortcuts"]),bZ=["onAccept","onClear","onCancel","onSetToday","actions"];function ZZ(e){const{onAccept:g,onClear:t,onCancel:I,onSetToday:n,actions:l}=e,C=(0,He.A)(e,bZ),o=Cm();if(null==l||0===l.length)return null;const a=null==l?void 0:l.map((e=>{switch(e){case"clear":return(0,Qe.jsx)(Gi,{onClick:t,children:o.clearButtonLabel},e);case"cancel":return(0,Qe.jsx)(Gi,{onClick:I,children:o.cancelButtonLabel},e);case"accept":return(0,Qe.jsx)(Gi,{onClick:g,children:o.okButtonLabel},e);case"today":return(0,Qe.jsx)(Gi,{onClick:n,children:o.todayButtonLabel},e);default:return null}}));return(0,Qe.jsx)(dA,(0,we.A)({},C,{children:a}))}function pZ(e){return(0,Yl.Ay)("MuiListItem",e)}const hZ=(0,$n.A)("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]);const GZ=(0,$n.A)("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function yZ(e){return(0,Yl.Ay)("MuiListItemSecondaryAction",e)}(0,$n.A)("MuiListItemSecondaryAction",["root","disableGutters"]);const BZ=["className"],SZ=(0,nl.Ay)("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,t.disableGutters&&g.disableGutters]}})((e=>{let{ownerState:g}=e;return(0,we.A)({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},g.disableGutters&&{right:0})})),WZ=n.forwardRef((function(e,g){const t=(0,ll.b)({props:e,name:"MuiListItemSecondaryAction"}),{className:I}=t,l=(0,He.A)(t,BZ),C=n.useContext(qo),o=(0,we.A)({},t,{disableGutters:C.disableGutters}),a=(e=>{const{disableGutters:g,classes:t}=e,I={root:["root",g&&"disableGutters"]};return(0,tl.A)(I,yZ,t)})(o);return(0,Qe.jsx)(SZ,(0,we.A)({className:(0,Ln.A)(a.root,I),ownerState:o,ref:g},l))}));WZ.muiName="ListItemSecondaryAction";const VZ=WZ,vZ=["className"],RZ=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],fZ=(0,nl.Ay)("div",{name:"MuiListItem",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,t.dense&&g.dense,"flex-start"===t.alignItems&&g.alignItemsFlexStart,t.divider&&g.divider,!t.disableGutters&&g.gutters,!t.disablePadding&&g.padding,t.button&&g.button,t.hasSecondaryAction&&g.secondaryAction]}})((e=>{let{theme:g,ownerState:t}=e;return(0,we.A)({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!t.disablePadding&&(0,we.A)({paddingTop:8,paddingBottom:8},t.dense&&{paddingTop:4,paddingBottom:4},!t.disableGutters&&{paddingLeft:16,paddingRight:16},!!t.secondaryAction&&{paddingRight:48}),!!t.secondaryAction&&{[`& > .${GZ.root}`]:{paddingRight:48}},{[`&.${hZ.focusVisible}`]:{backgroundColor:(g.vars||g).palette.action.focus},[`&.${hZ.selected}`]:{backgroundColor:g.vars?`rgba(${g.vars.palette.primary.mainChannel} / ${g.vars.palette.action.selectedOpacity})`:(0,Il.X4)(g.palette.primary.main,g.palette.action.selectedOpacity),[`&.${hZ.focusVisible}`]:{backgroundColor:g.vars?`rgba(${g.vars.palette.primary.mainChannel} / calc(${g.vars.palette.action.selectedOpacity} + ${g.vars.palette.action.focusOpacity}))`:(0,Il.X4)(g.palette.primary.main,g.palette.action.selectedOpacity+g.palette.action.focusOpacity)}},[`&.${hZ.disabled}`]:{opacity:(g.vars||g).palette.action.disabledOpacity}},"flex-start"===t.alignItems&&{alignItems:"flex-start"},t.divider&&{borderBottom:`1px solid ${(g.vars||g).palette.divider}`,backgroundClip:"padding-box"},t.button&&{transition:g.transitions.create("background-color",{duration:g.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(g.vars||g).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${hZ.selected}:hover`]:{backgroundColor:g.vars?`rgba(${g.vars.palette.primary.mainChannel} / calc(${g.vars.palette.action.selectedOpacity} + ${g.vars.palette.action.hoverOpacity}))`:(0,Il.X4)(g.palette.primary.main,g.palette.action.selectedOpacity+g.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:g.vars?`rgba(${g.vars.palette.primary.mainChannel} / ${g.vars.palette.action.selectedOpacity})`:(0,Il.X4)(g.palette.primary.main,g.palette.action.selectedOpacity)}}},t.hasSecondaryAction&&{paddingRight:48})})),XZ=(0,nl.Ay)("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,g)=>g.container})({position:"relative"}),kZ=n.forwardRef((function(e,g){const t=(0,ll.b)({props:e,name:"MuiListItem"}),{alignItems:I="center",autoFocus:l=!1,button:C=!1,children:o,className:a,component:r,components:i={},componentsProps:c={},ContainerComponent:A="li",ContainerProps:{className:d}={},dense:s=!1,disabled:u=!1,disableGutters:m=!1,disablePadding:b=!1,divider:Z=!1,focusVisibleClassName:p,secondaryAction:h,selected:G=!1,slotProps:y={},slots:B={}}=t,S=(0,He.A)(t.ContainerProps,vZ),W=(0,He.A)(t,RZ),V=n.useContext(qo),v=n.useMemo((()=>({dense:s||V.dense||!1,alignItems:I,disableGutters:m})),[I,V.dense,s,m]),R=n.useRef(null);(0,JC.A)((()=>{l&&R.current&&R.current.focus()}),[l]);const f=n.Children.toArray(o),X=f.length&&(0,ko.A)(f[f.length-1],["ListItemSecondaryAction"]),k=(0,we.A)({},t,{alignItems:I,autoFocus:l,button:C,dense:v.dense,disabled:u,disableGutters:m,disablePadding:b,divider:Z,hasSecondaryAction:X,selected:G}),J=(e=>{const{alignItems:g,button:t,classes:I,dense:n,disabled:l,disableGutters:C,disablePadding:o,divider:a,hasSecondaryAction:r,selected:i}=e,c={root:["root",n&&"dense",!C&&"gutters",!o&&"padding",a&&"divider",l&&"disabled",t&&"button","flex-start"===g&&"alignItemsFlexStart",r&&"secondaryAction",i&&"selected"],container:["container"]};return(0,tl.A)(c,pZ,I)})(k),Y=(0,Cl.A)(R,g),w=B.root||i.Root||fZ,H=y.root||c.root||{},N=(0,we.A)({className:(0,Ln.A)(J.root,H.className,a),disabled:u},W);let F=r||"li";return C&&(N.component=r||"div",N.focusVisibleClassName=(0,Ln.A)(hZ.focusVisible,p),F=Kl),X?(F=N.component||r?F:"div","li"===A&&("li"===F?F="div":"li"===N.component&&(N.component="div")),(0,Qe.jsx)(qo.Provider,{value:v,children:(0,Qe.jsxs)(XZ,(0,we.A)({as:A,className:(0,Ln.A)(J.container,d),ref:Y,ownerState:k},S,{children:[(0,Qe.jsx)(w,(0,we.A)({},H,!GC(w)&&{as:F,ownerState:(0,we.A)({},k,H.ownerState)},N,{children:f})),f.pop()]}))})):(0,Qe.jsx)(qo.Provider,{value:v,children:(0,Qe.jsxs)(w,(0,we.A)({},H,{as:F,ref:Y},!GC(w)&&{ownerState:(0,we.A)({},k,H.ownerState)},N,{children:[f,h&&(0,Qe.jsx)(VZ,{children:h})]}))})})),JZ=(0,Tr.A)((0,Qe.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function YZ(e){return(0,Yl.Ay)("MuiChip",e)}const wZ=(0,$n.A)("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),HZ=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],NZ=(0,nl.Ay)("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e,{color:I,iconColor:n,clickable:l,onDelete:C,size:o,variant:a}=t;return[{[`& .${wZ.avatar}`]:g.avatar},{[`& .${wZ.avatar}`]:g[`avatar${(0,xl.A)(o)}`]},{[`& .${wZ.avatar}`]:g[`avatarColor${(0,xl.A)(I)}`]},{[`& .${wZ.icon}`]:g.icon},{[`& .${wZ.icon}`]:g[`icon${(0,xl.A)(o)}`]},{[`& .${wZ.icon}`]:g[`iconColor${(0,xl.A)(n)}`]},{[`& .${wZ.deleteIcon}`]:g.deleteIcon},{[`& .${wZ.deleteIcon}`]:g[`deleteIcon${(0,xl.A)(o)}`]},{[`& .${wZ.deleteIcon}`]:g[`deleteIconColor${(0,xl.A)(I)}`]},{[`& .${wZ.deleteIcon}`]:g[`deleteIcon${(0,xl.A)(a)}Color${(0,xl.A)(I)}`]},g.root,g[`size${(0,xl.A)(o)}`],g[`color${(0,xl.A)(I)}`],l&&g.clickable,l&&"default"!==I&&g[`clickableColor${(0,xl.A)(I)})`],C&&g.deletable,C&&"default"!==I&&g[`deletableColor${(0,xl.A)(I)}`],g[a],g[`${a}${(0,xl.A)(I)}`]]}})((e=>{let{theme:g,ownerState:t}=e;const I="light"===g.palette.mode?g.palette.grey[700]:g.palette.grey[300];return(0,we.A)({maxWidth:"100%",fontFamily:g.typography.fontFamily,fontSize:g.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(g.vars||g).palette.text.primary,backgroundColor:(g.vars||g).palette.action.selected,borderRadius:16,whiteSpace:"nowrap",transition:g.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${wZ.disabled}`]:{opacity:(g.vars||g).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${wZ.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:g.vars?g.vars.palette.Chip.defaultAvatarColor:I,fontSize:g.typography.pxToRem(12)},[`& .${wZ.avatarColorPrimary}`]:{color:(g.vars||g).palette.primary.contrastText,backgroundColor:(g.vars||g).palette.primary.dark},[`& .${wZ.avatarColorSecondary}`]:{color:(g.vars||g).palette.secondary.contrastText,backgroundColor:(g.vars||g).palette.secondary.dark},[`& .${wZ.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:g.typography.pxToRem(10)},[`& .${wZ.icon}`]:(0,we.A)({marginLeft:5,marginRight:-6},"small"===t.size&&{fontSize:18,marginLeft:4,marginRight:-4},t.iconColor===t.color&&(0,we.A)({color:g.vars?g.vars.palette.Chip.defaultIconColor:I},"default"!==t.color&&{color:"inherit"})),[`& .${wZ.deleteIcon}`]:(0,we.A)({WebkitTapHighlightColor:"transparent",color:g.vars?`rgba(${g.vars.palette.text.primaryChannel} / 0.26)`:(0,Il.X4)(g.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:g.vars?`rgba(${g.vars.palette.text.primaryChannel} / 0.4)`:(0,Il.X4)(g.palette.text.primary,.4)}},"small"===t.size&&{fontSize:16,marginRight:4,marginLeft:-4},"default"!==t.color&&{color:g.vars?`rgba(${g.vars.palette[t.color].contrastTextChannel} / 0.7)`:(0,Il.X4)(g.palette[t.color].contrastText,.7),"&:hover, &:active":{color:(g.vars||g).palette[t.color].contrastText}})},"small"===t.size&&{height:24},"default"!==t.color&&{backgroundColor:(g.vars||g).palette[t.color].main,color:(g.vars||g).palette[t.color].contrastText},t.onDelete&&{[`&.${wZ.focusVisible}`]:{backgroundColor:g.vars?`rgba(${g.vars.palette.action.selectedChannel} / calc(${g.vars.palette.action.selectedOpacity} + ${g.vars.palette.action.focusOpacity}))`:(0,Il.X4)(g.palette.action.selected,g.palette.action.selectedOpacity+g.palette.action.focusOpacity)}},t.onDelete&&"default"!==t.color&&{[`&.${wZ.focusVisible}`]:{backgroundColor:(g.vars||g).palette[t.color].dark}})}),(e=>{let{theme:g,ownerState:t}=e;return(0,we.A)({},t.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:g.vars?`rgba(${g.vars.palette.action.selectedChannel} / calc(${g.vars.palette.action.selectedOpacity} + ${g.vars.palette.action.hoverOpacity}))`:(0,Il.X4)(g.palette.action.selected,g.palette.action.selectedOpacity+g.palette.action.hoverOpacity)},[`&.${wZ.focusVisible}`]:{backgroundColor:g.vars?`rgba(${g.vars.palette.action.selectedChannel} / calc(${g.vars.palette.action.selectedOpacity} + ${g.vars.palette.action.focusOpacity}))`:(0,Il.X4)(g.palette.action.selected,g.palette.action.selectedOpacity+g.palette.action.focusOpacity)},"&:active":{boxShadow:(g.vars||g).shadows[1]}},t.clickable&&"default"!==t.color&&{[`&:hover, &.${wZ.focusVisible}`]:{backgroundColor:(g.vars||g).palette[t.color].dark}})}),(e=>{let{theme:g,ownerState:t}=e;return(0,we.A)({},"outlined"===t.variant&&{backgroundColor:"transparent",border:g.vars?`1px solid ${g.vars.palette.Chip.defaultBorder}`:`1px solid ${"light"===g.palette.mode?g.palette.grey[400]:g.palette.grey[700]}`,[`&.${wZ.clickable}:hover`]:{backgroundColor:(g.vars||g).palette.action.hover},[`&.${wZ.focusVisible}`]:{backgroundColor:(g.vars||g).palette.action.focus},[`& .${wZ.avatar}`]:{marginLeft:4},[`& .${wZ.avatarSmall}`]:{marginLeft:2},[`& .${wZ.icon}`]:{marginLeft:4},[`& .${wZ.iconSmall}`]:{marginLeft:2},[`& .${wZ.deleteIcon}`]:{marginRight:5},[`& .${wZ.deleteIconSmall}`]:{marginRight:3}},"outlined"===t.variant&&"default"!==t.color&&{color:(g.vars||g).palette[t.color].main,border:`1px solid ${g.vars?`rgba(${g.vars.palette[t.color].mainChannel} / 0.7)`:(0,Il.X4)(g.palette[t.color].main,.7)}`,[`&.${wZ.clickable}:hover`]:{backgroundColor:g.vars?`rgba(${g.vars.palette[t.color].mainChannel} / ${g.vars.palette.action.hoverOpacity})`:(0,Il.X4)(g.palette[t.color].main,g.palette.action.hoverOpacity)},[`&.${wZ.focusVisible}`]:{backgroundColor:g.vars?`rgba(${g.vars.palette[t.color].mainChannel} / ${g.vars.palette.action.focusOpacity})`:(0,Il.X4)(g.palette[t.color].main,g.palette.action.focusOpacity)},[`& .${wZ.deleteIcon}`]:{color:g.vars?`rgba(${g.vars.palette[t.color].mainChannel} / 0.7)`:(0,Il.X4)(g.palette[t.color].main,.7),"&:hover, &:active":{color:(g.vars||g).palette[t.color].main}}})})),FZ=(0,nl.Ay)("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,g)=>{const{ownerState:t}=e,{size:I}=t;return[g.label,g[`label${(0,xl.A)(I)}`]]}})((e=>{let{ownerState:g}=e;return(0,we.A)({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},"outlined"===g.variant&&{paddingLeft:11,paddingRight:11},"small"===g.size&&{paddingLeft:8,paddingRight:8},"small"===g.size&&"outlined"===g.variant&&{paddingLeft:7,paddingRight:7})}));function KZ(e){return"Backspace"===e.key||"Delete"===e.key}const xZ=n.forwardRef((function(e,g){const t=(0,ll.b)({props:e,name:"MuiChip"}),{avatar:I,className:l,clickable:C,color:o="default",component:a,deleteIcon:r,disabled:i=!1,icon:c,label:A,onClick:d,onDelete:s,onKeyDown:u,onKeyUp:m,size:b="medium",variant:Z="filled",tabIndex:p,skipFocusWhenDisabled:h=!1}=t,G=(0,He.A)(t,HZ),y=n.useRef(null),B=(0,Cl.A)(y,g),S=e=>{e.stopPropagation(),s&&s(e)},W=!(!1===C||!d)||C,V=W||s?Kl:a||"div",v=(0,we.A)({},t,{component:V,disabled:i,size:b,color:o,iconColor:n.isValidElement(c)&&c.props.color||o,onDelete:!!s,clickable:W,variant:Z}),R=(e=>{const{classes:g,disabled:t,size:I,color:n,iconColor:l,onDelete:C,clickable:o,variant:a}=e,r={root:["root",a,t&&"disabled",`size${(0,xl.A)(I)}`,`color${(0,xl.A)(n)}`,o&&"clickable",o&&`clickableColor${(0,xl.A)(n)}`,C&&"deletable",C&&`deletableColor${(0,xl.A)(n)}`,`${a}${(0,xl.A)(n)}`],label:["label",`label${(0,xl.A)(I)}`],avatar:["avatar",`avatar${(0,xl.A)(I)}`,`avatarColor${(0,xl.A)(n)}`],icon:["icon",`icon${(0,xl.A)(I)}`,`iconColor${(0,xl.A)(l)}`],deleteIcon:["deleteIcon",`deleteIcon${(0,xl.A)(I)}`,`deleteIconColor${(0,xl.A)(n)}`,`deleteIcon${(0,xl.A)(a)}Color${(0,xl.A)(n)}`]};return(0,tl.A)(r,YZ,g)})(v),f=V===Kl?(0,we.A)({component:a||"div",focusVisibleClassName:R.focusVisible},s&&{disableRipple:!0}):{};let X=null;s&&(X=r&&n.isValidElement(r)?n.cloneElement(r,{className:(0,Ln.A)(r.props.className,R.deleteIcon),onClick:S}):(0,Qe.jsx)(JZ,{className:(0,Ln.A)(R.deleteIcon),onClick:S}));let k=null;I&&n.isValidElement(I)&&(k=n.cloneElement(I,{className:(0,Ln.A)(R.avatar,I.props.className)}));let J=null;return c&&n.isValidElement(c)&&(J=n.cloneElement(c,{className:(0,Ln.A)(R.icon,c.props.className)})),(0,Qe.jsxs)(NZ,(0,we.A)({as:V,className:(0,Ln.A)(R.root,l),disabled:!(!W||!i)||void 0,onClick:d,onKeyDown:e=>{e.currentTarget===e.target&&KZ(e)&&e.preventDefault(),u&&u(e)},onKeyUp:e=>{e.currentTarget===e.target&&(s&&KZ(e)?s(e):"Escape"===e.key&&y.current&&y.current.blur()),m&&m(e)},ref:B,tabIndex:h&&i?-1:p,ownerState:v},f,G,{children:[k||J,(0,Qe.jsx)(FZ,{className:(0,Ln.A)(R.label),ownerState:v,children:A}),X]}))})),MZ=320,zZ=["items","changeImportance","isLandscape","onChange","isValid"],EZ=["getValue"];function DZ(e){const{items:g,changeImportance:t,onChange:I,isValid:n}=e,l=(0,He.A)(e,zZ);if(null==g||0===g.length)return null;const C=g.map((e=>{let{getValue:g}=e,l=(0,He.A)(e,EZ);const C=g({isValid:n});return{label:l.label,onClick:()=>{I(C,t,l)},disabled:!n(C)}}));return(0,Qe.jsx)(ga,(0,we.A)({dense:!0,sx:[{maxHeight:334,maxWidth:200,overflow:"auto"},...Array.isArray(l.sx)?l.sx:[l.sx]]},l,{children:C.map((e=>(0,Qe.jsx)(kZ,{children:(0,Qe.jsx)(xZ,(0,we.A)({},e))},e.label)))}))}const UZ=e=>{var g,t;const{wrapperVariant:I,onAccept:n,onClear:l,onCancel:C,onSetToday:o,view:a,views:r,onViewChange:i,value:c,onChange:A,onSelectShortcut:d,isValid:s,isLandscape:u,disabled:m,readOnly:b,children:Z,components:p,componentsProps:h,slots:G,slotProps:y}=e,B=null!=G?G:bm(p),S=null!=y?y:h,W=(e=>{const{classes:g,isLandscape:t}=e,I={root:["root",t&&"landscape"],contentWrapper:["contentWrapper"],toolbar:["toolbar"],actionBar:["actionBar"],tabs:["tabs"],landscape:["landscape"],shortcuts:["shortcuts"]};return(0,tl.A)(I,uZ,g)})(e),V=null!=(g=null==B?void 0:B.actionBar)?g:ZZ,v=ym({elementType:V,externalSlotProps:null==S?void 0:S.actionBar,additionalProps:{onAccept:n,onClear:l,onCancel:C,onSetToday:o,actions:"desktop"===I?[]:["cancel","accept"],className:W.actionBar},ownerState:(0,we.A)({},e,{wrapperVariant:I})}),R=(0,Qe.jsx)(V,(0,we.A)({},v)),f=null==B?void 0:B.toolbar,X=ym({elementType:f,externalSlotProps:null==S?void 0:S.toolbar,additionalProps:{isLandscape:u,onChange:A,value:c,view:a,onViewChange:i,views:r,disabled:m,readOnly:b,className:W.toolbar},ownerState:(0,we.A)({},e,{wrapperVariant:I})}),k=function(e){return null!==e.view}(X)&&f?(0,Qe.jsx)(f,(0,we.A)({},X)):null,J=Z,Y=null==B?void 0:B.tabs,w=a&&Y?(0,Qe.jsx)(Y,(0,we.A)({view:a,onViewChange:i},null==S?void 0:S.tabs)):null,H=null!=(t=null==B?void 0:B.shortcuts)?t:DZ,N=ym({elementType:H,externalSlotProps:null==S?void 0:S.shortcuts,additionalProps:{isValid:s,isLandscape:u,onChange:d,className:W.shortcuts},ownerState:{isValid:s,isLandscape:u,onChange:d,className:W.shortcuts,wrapperVariant:I}});return{toolbar:k,content:J,tabs:w,actionBar:R,shortcuts:a&&H?(0,Qe.jsx)(H,(0,we.A)({},N)):null}},TZ=(0,nl.Ay)("div",{name:"MuiPickersLayout",slot:"Root",overridesResolver:(e,g)=>g.root})((e=>{let{theme:g,ownerState:t}=e;return{display:"grid",gridAutoColumns:"max-content auto max-content",gridAutoRows:"max-content auto max-content",[`& .${mZ.toolbar}`]:t.isLandscape?{gridColumn:"rtl"===g.direction?3:1,gridRow:"2 / 3"}:{gridColumn:"2 / 4",gridRow:1},[`.${mZ.shortcuts}`]:t.isLandscape?{gridColumn:"2 / 4",gridRow:1}:{gridColumn:"rtl"===g.direction?3:1,gridRow:"2 / 3"},[`& .${mZ.actionBar}`]:{gridColumn:"1 / 4",gridRow:3}}}));TZ.propTypes={as:mu().elementType,ownerState:mu().shape({isLandscape:mu().bool.isRequired}).isRequired,sx:mu().oneOfType([mu().arrayOf(mu().oneOfType([mu().func,mu().object,mu().bool])),mu().func,mu().object])};const LZ=(0,nl.Ay)("div",{name:"MuiPickersLayout",slot:"ContentWrapper",overridesResolver:(e,g)=>g.contentWrapper})({gridColumn:2,gridRow:2,display:"flex",flexDirection:"column"}),QZ=function(e){const g=Le({props:e,name:"MuiPickersLayout"}),{toolbar:t,content:I,tabs:l,actionBar:C,shortcuts:o}=UZ(g),{sx:a,className:r,isLandscape:i,ref:c,wrapperVariant:A}=g,d=g,s=(e=>{const{isLandscape:g,classes:t}=e,I={root:["root",g&&"landscape"],contentWrapper:["contentWrapper"]};return(0,tl.A)(I,uZ,t)})(d);return(0,Qe.jsxs)(TZ,{ref:c,sx:a,className:(0,Ln.A)(r,s.root),ownerState:d,children:[i?o:t,i?t:o,(0,Qe.jsx)(LZ,{className:s.contentWrapper,children:"desktop"===A?(0,Qe.jsxs)(n.Fragment,{children:[I,l]}):(0,Qe.jsxs)(n.Fragment,{children:[l,I]})}),C]})},jZ=["props","getOpenDialogAriaText"],PZ=["ownerState"],OZ=["ownerState"],qZ=(0,Tr.A)((0,Qe.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),$Z=(0,Tr.A)((0,Qe.jsx)("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"ArrowLeft"),_Z=(0,Tr.A)((0,Qe.jsx)("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"ArrowRight"),ep=(0,Tr.A)((0,Qe.jsx)("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}),"Calendar"),gp=((0,Tr.A)((0,Qe.jsxs)(n.Fragment,{children:[(0,Qe.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),(0,Qe.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Clock"),(0,Tr.A)((0,Qe.jsx)("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}),"DateRange"),(0,Tr.A)((0,Qe.jsxs)(n.Fragment,{children:[(0,Qe.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),(0,Qe.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]}),"Time"),(0,Tr.A)((0,Qe.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear")),tp=e=>{const g=nm(),t=Cm(),I=Im(),l="rtl"===ya().direction,{valueManager:C,fieldValueManager:o,valueType:a,validator:r,internalProps:i,internalProps:{value:c,defaultValue:A,referenceDate:d,onChange:s,format:u,formatDensity:m="dense",selectedSections:b,onSelectedSectionsChange:Z,shouldRespectLeadingZeros:p=!1,timezone:h}}=e,{timezone:G,value:y,handleValueChange:B}=CZ({timezone:h,value:c,defaultValue:A,onChange:s,valueManager:C}),S=n.useMemo((()=>((e,g)=>{const t=e.dateWithTimezone(void 0,g),I=e.endOfYear(t),n=e.endOfDay(t),{maxDaysInMonth:l,longestMonth:C}=yu(e,t).reduce(((g,t)=>{const I=e.getDaysInMonth(t);return I>g.maxDaysInMonth?{maxDaysInMonth:I,longestMonth:t}:g}),{maxDaysInMonth:0,longestMonth:null});return{year:t=>{let{format:I}=t;return{minimum:0,maximum:Tu(e,g,I)?9999:99}},month:()=>({minimum:1,maximum:e.getMonth(I)+1}),day:g=>{let{currentDate:t}=g;return{minimum:1,maximum:null!=t&&e.isValid(t)?e.getDaysInMonth(t):l,longestMonth:C}},weekDay:t=>{let{format:I,contentType:n}=t;if("digit"===n){const t=Hu(e,g,I).map(Number);return{minimum:Math.min(...t),maximum:Math.max(...t)}}return{minimum:1,maximum:7}},hours:g=>{let{format:I}=g;const l=e.getHours(n);return e.formatByString(e.endOfDay(t),I)!==l.toString()?{minimum:1,maximum:Number(e.formatByString(e.startOfDay(t),I))}:{minimum:0,maximum:l}},minutes:()=>({minimum:0,maximum:e.getMinutes(n)}),seconds:()=>({minimum:0,maximum:e.getSeconds(n)}),meridiem:()=>({minimum:0,maximum:0})}})(g,G)),[g,G]),W=n.useCallback((function(e){let I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return o.getSectionsFromValue(g,e,I,l,(e=>Qu(g,G,t,u,e,m,p,l)))}),[o,u,t,l,p,g,m,G]),V=n.useMemo((()=>o.getValueStrFromSections(W(C.emptyValue),l)),[o,W,C.emptyValue,l]),[v,R]=n.useState((()=>{const e=W(y);ju();const t={sections:e,value:y,referenceValue:C.emptyValue,tempValueStrAndroid:null},I=(e=>Math.max(...e.map((e=>{var g;return null!=(g=ku[e.type])?g:1}))))(e),n=C.getInitialReferenceValue({referenceDate:d,value:y,utils:g,props:i,granularity:I,timezone:G});return(0,we.A)({},t,{referenceValue:n})})),[f,X]=(0,nZ.A)({controlled:b,default:null,name:"useField",state:"selectedSectionIndexes"}),k=e=>{X(e),null==Z||Z(e),R((e=>(0,we.A)({},e,{selectedSectionQuery:null})))},J=n.useMemo((()=>{if(null==f)return null;if("all"===f)return{startIndex:0,endIndex:v.sections.length-1,shouldSelectBoundarySelectors:!0};if("number"===typeof f)return{startIndex:f,endIndex:f};if("string"===typeof f){const e=v.sections.findIndex((e=>e.type===f));return{startIndex:e,endIndex:e}}return f}),[f,v.sections]),Y=e=>{let{value:t,referenceValue:n,sections:l}=e;if(R((e=>(0,we.A)({},e,{sections:l,value:t,referenceValue:n,tempValueStrAndroid:null}))),C.areValuesEqual(g,v.value,t))return;const o={validationError:r({adapter:I,value:t,props:(0,we.A)({},i,{value:t,timezone:G})})};B(t,o)},w=(e,g)=>{const t=[...v.sections];return t[e]=(0,we.A)({},t[e],{value:g,modified:!0}),Eu(t,l)};return n.useEffect((()=>{const e=W(v.value);ju(),R((g=>(0,we.A)({},g,{sections:e})))}),[u,g.locale]),n.useEffect((()=>{let e=!1;e=!C.areValuesEqual(g,v.value,y)||C.getTimezone(g,v.value)!==C.getTimezone(g,y),e&&R((e=>(0,we.A)({},e,{value:y,referenceValue:o.updateReferenceValue(g,y,e.referenceValue),sections:W(y)})))}),[y]),{state:v,selectedSectionIndexes:J,setSelectedSections:k,clearValue:()=>{Y({value:C.emptyValue,referenceValue:v.referenceValue,sections:W(C.emptyValue)})},clearActiveSection:()=>{if(null==J)return;const e=v.sections[J.startIndex],t=o.getActiveDateManager(g,v,e),I=t.getSections(v.sections).filter((e=>""!==e.value)).length===(""===e.value?0:1),n=w(J.startIndex,""),l=I?null:g.date(new Date("")),C=t.getNewValuesFromNewActiveDate(l);(null!=l&&!g.isValid(l))!==(null!=t.date&&!g.isValid(t.date))?Y((0,we.A)({},C,{sections:n})):R((e=>(0,we.A)({},e,C,{sections:n,tempValueStrAndroid:null})))},updateSectionValue:e=>{let{activeSection:t,newSectionValue:I,shouldGoToNextSection:n}=e;n&&J&&J.startIndex<v.sections.length-1?k(J.startIndex+1):J&&J.startIndex!==J.endIndex&&k(J.startIndex);const l=o.getActiveDateManager(g,v,t),C=w(J.startIndex,I),a=l.getSections(C),r=((e,g)=>{const t=g.some((e=>"day"===e.type)),I=[],n=[];for(let o=0;o<g.length;o+=1){const e=g[o];t&&"weekDay"===e.type||(I.push(e.format),n.push(Mu(e,"non-input")))}const l=I.join(" "),C=n.join(" ");return e.parse(C,l)})(g,a);let i,c;if(null!=r&&g.isValid(r)){const e=Ou(g,G,r,a,l.referenceDate,!0);i=l.getNewValuesFromNewActiveDate(e),c=!0}else i=l.getNewValuesFromNewActiveDate(r),c=(null!=r&&!g.isValid(r))!==(null!=l.date&&!g.isValid(l.date));return c?Y((0,we.A)({},i,{sections:C})):R((e=>(0,we.A)({},e,i,{sections:C,tempValueStrAndroid:null})))},updateValueFromValueStr:e=>{const I=o.parseValueStr(e,v.referenceValue,((e,I)=>{const n=g.parse(e,u);if(null==n||!g.isValid(n))return null;const C=Qu(g,G,t,u,n,m,p,l);return Ou(g,G,n,C,I,!1)})),n=o.updateReferenceValue(g,I,v.referenceValue);Y({value:I,referenceValue:n,sections:W(I,v.sections)})},setTempAndroidValueStr:e=>R((g=>(0,we.A)({},g,{tempValueStrAndroid:e}))),sectionsValueBoundaries:S,placeholder:V,timezone:G}},Ip=e=>null!=e.saveQuery,np=e=>{let{sections:g,updateSectionValue:t,sectionsValueBoundaries:I,setTempAndroidValueStr:l,timezone:C}=e;const o=nm(),[a,r]=n.useState(null),i=(0,Ta.A)((()=>r(null)));n.useEffect((()=>{var e;null!=a&&(null==(e=g[a.sectionIndex])?void 0:e.type)!==a.sectionType&&i()}),[g,a,i]),n.useEffect((()=>{if(null!=a){const e=setTimeout((()=>i()),5e3);return()=>{window.clearTimeout(e)}}return()=>{}}),[a,i]);const c=(e,t,I)=>{let{keyPressed:n,sectionIndex:l}=e;const C=n.toLowerCase(),o=g[l];if(null!=a&&(!I||I(a.value))&&a.sectionIndex===l){const e=`${a.value}${C}`,g=t(e,o);if(!Ip(g))return r({sectionIndex:l,value:e,sectionType:o.type}),g}const c=t(C,o);return Ip(c)&&!c.saveQuery?(i(),null):(r({sectionIndex:l,value:C,sectionType:o.type}),Ip(c)?null:c)};return{applyCharacterEditing:(0,Ta.A)((e=>{const n=g[e.sectionIndex],a=!Number.isNaN(Number(e.keyPressed))?(e=>{const g=(e,g)=>{const t=Number(`${e}`),n=I[g.type]({currentDate:null,format:g.format,contentType:g.contentType});if(t>n.maximum)return{saveQuery:!1};if(t<n.minimum)return{saveQuery:!0};const l=Number(`${e}0`)>n.maximum||e.length===n.maximum.toString().length;return{sectionValue:Ku(o,0,t,n,g),shouldGoToNextSection:l}};return c(e,((e,t)=>{if("digit"===t.contentType||"digit-with-letter"===t.contentType)return g(e,t);if("month"===t.type){const I=Lu(o,C,"digit","month","MM"),n=g(e,{type:t.type,format:"MM",hasLeadingZerosInFormat:I,hasLeadingZerosInInput:!0,contentType:"digit",maxLength:2});if(Ip(n))return n;const l=Uu(o,n.sectionValue,"MM",t.format);return(0,we.A)({},n,{sectionValue:l})}if("weekDay"===t.type){const I=g(e,t);if(Ip(I))return I;const n=Hu(o,C,t.format)[Number(I.sectionValue)-1];return(0,we.A)({},I,{sectionValue:n})}return{saveQuery:!1}}),(e=>!Number.isNaN(Number(e))))})(e):(e=>{const g=(e,g,t)=>{const I=g.filter((e=>e.toLowerCase().startsWith(t)));return 0===I.length?{saveQuery:!1}:{sectionValue:I[0],shouldGoToNextSection:1===I.length}},t=(e,t,I,n)=>{const l=e=>Nu(o,C,t.type,e);if("letter"===t.contentType)return g(t.format,l(t.format),e);if(I&&null!=n&&"letter"===wu(o,I).contentType){const t=l(I),C=g(0,t,e);return Ip(C)?{saveQuery:!1}:(0,we.A)({},C,{sectionValue:n(C.sectionValue,t)})}return{saveQuery:!1}};return c(e,((e,g)=>{switch(g.type){case"month":{const I=e=>Uu(o,e,o.formats.month,g.format);return t(e,g,o.formats.month,I)}case"weekDay":{const I=(e,g)=>g.indexOf(e).toString();return t(e,g,o.formats.weekday,I)}case"meridiem":return t(e,g);default:return{saveQuery:!1}}}))})(e);null==a?l(null):t({activeSection:n,newSectionValue:a.sectionValue,shouldGoToNextSection:a.shouldGoToNextSection})})),resetCharacterQuery:i}},lp=["onClick","onKeyDown","onFocus","onBlur","onMouseUp","onPaste","error","clearable","onClear","disabled"],Cp=e=>{const g=nm(),{state:t,selectedSectionIndexes:I,setSelectedSections:l,clearValue:C,clearActiveSection:o,updateSectionValue:a,updateValueFromValueStr:r,setTempAndroidValueStr:i,sectionsValueBoundaries:c,placeholder:A,timezone:d}=tp(e),{inputRef:s,internalProps:u,internalProps:{readOnly:m=!1,unstableFieldRef:b,minutesStep:Z},forwardedProps:{onClick:p,onKeyDown:h,onFocus:G,onBlur:y,onMouseUp:B,onPaste:S,error:W,clearable:V,onClear:v,disabled:R},fieldValueManager:f,valueManager:X,validator:k}=e,J=(0,He.A)(e.forwardedProps,lp),{applyCharacterEditing:Y,resetCharacterQuery:w}=np({sections:t.sections,updateSectionValue:a,sectionsValueBoundaries:c,setTempAndroidValueStr:i,timezone:d}),H=n.useRef(null),N=(0,yC.A)(s,H),F=n.useRef(void 0),K="rtl"===ya().direction,x=n.useMemo((()=>((e,g)=>{const t={};if(!g)return e.forEach(((g,I)=>{const n=0===I?null:I-1,l=I===e.length-1?null:I+1;t[I]={leftIndex:n,rightIndex:l}})),{neighbors:t,startIndex:0,endIndex:e.length-1};const I={},n={};let l=0,C=0,o=e.length-1;for(;o>=0;){C=e.findIndex(((e,g)=>{var t;return g>=l&&(null==(t=e.endSeparator)?void 0:t.includes(" "))&&" / "!==e.endSeparator})),-1===C&&(C=e.length-1);for(let e=C;e>=l;e-=1)n[e]=o,I[o]=e,o-=1;l=C+1}return e.forEach(((g,l)=>{const C=n[l],o=0===C?null:I[C-1],a=C===e.length-1?null:I[C+1];t[l]={leftIndex:o,rightIndex:a}})),{neighbors:t,startIndex:I[0],endIndex:I[e.length-1]}})(t.sections,K)),[t.sections,K]),M=()=>{var e;if(m)return void l(null);const g=null!=(e=H.current.selectionStart)?e:0;let I;I=g<=t.sections[0].startInInput||g>=t.sections[t.sections.length-1].endInInput?1:t.sections.findIndex((e=>e.startInInput-e.startSeparator.length>g));const n=-1===I?t.sections.length-1:I-1;l(n)},z=(0,Ta.A)((function(e){if(!e.isDefaultPrevented()){for(var g=arguments.length,t=new Array(g>1?g-1:0),I=1;I<g;I++)t[I-1]=arguments[I];null==p||p(e,...t),M()}})),E=(0,Ta.A)((e=>{null==B||B(e),e.preventDefault()})),D=(0,Ta.A)((function(){null==G||G(...arguments);const e=H.current;window.clearTimeout(F.current),F.current=setTimeout((()=>{e&&e===H.current&&(null!=I||m||(e.value.length&&Number(e.selectionEnd)-Number(e.selectionStart)===e.value.length?l("all"):M()))}))})),U=(0,Ta.A)((function(){null==y||y(...arguments),l(null)})),T=(0,Ta.A)((e=>{if(null==S||S(e),m)return void e.preventDefault();const g=e.clipboardData.getData("text");if(I&&I.startIndex===I.endIndex){const n=t.sections[I.startIndex],l=/^[a-zA-Z]+$/.test(g),C=/^[0-9]+$/.test(g),o=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(g);if("letter"===n.contentType&&l||"digit"===n.contentType&&C||"digit-with-letter"===n.contentType&&o)return w(),a({activeSection:n,newSectionValue:g,shouldGoToNextSection:!0}),void e.preventDefault();if(l||C)return void e.preventDefault()}e.preventDefault(),w(),r(g)})),L=(0,Ta.A)((e=>{if(m)return;const g=e.target.value;if(""===g)return w(),void C();const n=e.nativeEvent.data,l=n&&n.length>1,a=l?n:g,c=zu(a);if(null==I||l)return void r(l?n:c);let A;if(0===I.startIndex&&I.endIndex===t.sections.length-1&&1===c.length)A=c;else{const e=zu(f.getValueStrFromSections(t.sections,K));let g=-1,n=-1;for(let t=0;t<e.length;t+=1)-1===g&&e[t]!==c[t]&&(g=t),-1===n&&e[e.length-t-1]!==c[c.length-t-1]&&(n=t);const l=t.sections[I.startIndex];if(g<l.start||e.length-n-1>l.end)return;const C=c.length-e.length+l.end-zu(l.endSeparator||"").length;A=c.slice(l.start+zu(l.startSeparator||"").length,C)}0!==A.length?Y({keyPressed:A,sectionIndex:I.startIndex}):navigator.userAgent.toLowerCase().indexOf("android")>-1?i(a):(w(),o())})),Q=(0,Ta.A)((e=>{switch(null==h||h(e),!0){case"a"===e.key&&(e.ctrlKey||e.metaKey):e.preventDefault(),l("all");break;case"ArrowRight"===e.key:if(e.preventDefault(),null==I)l(x.startIndex);else if(I.startIndex!==I.endIndex)l(I.endIndex);else{const e=x.neighbors[I.startIndex].rightIndex;null!==e&&l(e)}break;case"ArrowLeft"===e.key:if(e.preventDefault(),null==I)l(x.endIndex);else if(I.startIndex!==I.endIndex)l(I.startIndex);else{const e=x.neighbors[I.startIndex].leftIndex;null!==e&&l(e)}break;case"Delete"===e.key:if(e.preventDefault(),m)break;null==I||0===I.startIndex&&I.endIndex===t.sections.length-1?C():o(),w();break;case["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(e.key):{if(e.preventDefault(),m||null==I)break;const n=t.sections[I.startIndex],l=f.getActiveDateManager(g,t,n),C=xu(g,d,n,e.key,c,l.date,{minutesStep:Z});a({activeSection:n,newSectionValue:C,shouldGoToNextSection:!1});break}}}));(0,Vn.A)((()=>{if(!H.current)return;if(null==I)return void(H.current.scrollLeft&&(H.current.scrollLeft=0));const e=t.sections[I.startIndex],g=t.sections[I.endIndex];let n=e.startInInput,l=g.endInInput;if(I.shouldSelectBoundarySelectors&&(n-=e.startSeparator.length,l+=g.endSeparator.length),n!==H.current.selectionStart||l!==H.current.selectionEnd){const e=H.current.scrollTop;H.current===Lb(document)&&H.current.setSelectionRange(n,l),H.current.scrollTop=e}}));const j=lZ((0,we.A)({},u,{value:t.value,timezone:d}),k,X.isSameError,X.defaultErrorState),P=n.useMemo((()=>void 0!==W?W:X.hasError(j)),[X,j,W]);n.useEffect((()=>{P||I||w()}),[t.referenceValue,I,P]),n.useEffect((()=>(H.current&&H.current===document.activeElement&&l("all"),()=>window.clearTimeout(F.current))),[]),n.useEffect((()=>{null!=t.tempValueStrAndroid&&null!=I&&(w(),o())}),[t.tempValueStrAndroid]);const O=n.useMemo((()=>{var e;return null!=(e=t.tempValueStrAndroid)?e:f.getValueStrFromSections(t.sections,K)}),[t.sections,f,t.tempValueStrAndroid,K]),q=n.useMemo((()=>null==I||"letter"===t.sections[I.startIndex].contentType?"text":"numeric"),[I,t.sections]),$=H.current&&H.current===Lb(document),_=X.areValuesEqual(g,t.value,X.emptyValue),ee=!$&&_;n.useImperativeHandle(b,(()=>({getSections:()=>t.sections,getActiveSectionIndex:()=>{var e,g;const I=null!=(e=H.current.selectionStart)?e:0,n=null!=(g=H.current.selectionEnd)?g:0;if(0===I&&0===n)return null;const l=I<=t.sections[0].startInInput?1:t.sections.findIndex((e=>e.startInInput-e.startSeparator.length>I));return-1===l?t.sections.length-1:l-1},setSelectedSections:e=>l(e)})));const ge=(0,Ta.A)((function(e){var g;e.preventDefault();for(var t=arguments.length,I=new Array(t>1?t-1:0),n=1;n<t;n++)I[n-1]=arguments[n];null==v||v(e,...I),C(),null==H||null==(g=H.current)||g.focus(),l(0)}));return(0,we.A)({placeholder:A,autoComplete:"off",disabled:Boolean(R)},J,{value:ee?"":O,inputMode:q,readOnly:m,onClick:z,onFocus:D,onBlur:U,onPaste:T,onChange:L,onKeyDown:Q,onMouseUp:E,onClear:ge,error:P,ref:N,clearable:Boolean(V&&!_&&!m&&!R)})},op=["disablePast","disableFuture","minDate","maxDate","shouldDisableDate","shouldDisableMonth","shouldDisableYear"],ap=["disablePast","disableFuture","minTime","maxTime","shouldDisableClock","shouldDisableTime","minutesStep","ampm","disableIgnoringDatePartForTimeValidation"],rp=["minDateTime","maxDateTime"],ip=[...op,...ap,...rp],cp=e=>ip.reduce(((g,t)=>(e.hasOwnProperty(t)&&(g[t]=e[t]),g)),{}),Ap=["value","defaultValue","referenceDate","format","formatDensity","onChange","timezone","readOnly","onError","shouldRespectLeadingZeros","selectedSections","onSelectedSectionsChange","unstableFieldRef"],dp=e=>{let{props:g,inputRef:t}=e;const I=(e=>{var g,t,I;const n=nm(),l=lm();return(0,we.A)({},e,{disablePast:null!=(g=e.disablePast)&&g,disableFuture:null!=(t=e.disableFuture)&&t,format:null!=(I=e.format)?I:n.formats.keyboardDate,minDate:Gu(n,e.minDate,l.minDate),maxDate:Gu(n,e.maxDate,l.maxDate)})})(g),{forwardedProps:n,internalProps:l}=((e,g)=>{const t=(0,we.A)({},e),I={},n=e=>{t.hasOwnProperty(e)&&(I[e]=t[e],delete t[e])};return Ap.forEach(n),"date"===g?op.forEach(n):"time"===g?ap.forEach(n):"date-time"===g&&(op.forEach(n),ap.forEach(n),rp.forEach(n)),{forwardedProps:t,internalProps:I}})(I,"date");return Cp({inputRef:t,forwardedProps:n,internalProps:l,valueManager:$u,fieldValueManager:_u,validator:pm,valueType:"date"})},sp=["ownerState"],up=["components","componentsProps","slots","slotProps","InputProps","inputProps"],mp=["inputRef"],bp=["ref","onPaste","onKeyDown","inputMode","readOnly","clearable","onClear"],Zp=n.forwardRef((function(e,g){var t,I,l;const C=Le({props:e,name:"MuiDateField"}),{components:o,componentsProps:a,slots:r,slotProps:i,InputProps:c,inputProps:A}=C,d=(0,He.A)(C,up),s=C,u=null!=(t=null!=(I=null==r?void 0:r.textField)?I:null==o?void 0:o.TextField)?t:li,m=ym({elementType:u,externalSlotProps:null!=(l=null==i?void 0:i.textField)?l:null==a?void 0:a.textField,externalForwardedProps:d,ownerState:s}),{inputRef:b}=m,Z=(0,He.A)(m,mp);Z.inputProps=(0,we.A)({},A,Z.inputProps),Z.InputProps=(0,we.A)({},c,Z.InputProps);const p=dp({props:Z,inputRef:b}),{ref:h,onPaste:G,onKeyDown:y,inputMode:B,readOnly:S,clearable:W,onClear:V}=p,v=(0,He.A)(p,bp),{InputProps:R,fieldProps:f}=(e=>{let{clearable:g,fieldProps:t,InputProps:I,onClear:l,slots:C,slotProps:o,components:a,componentsProps:r}=e;var i,c,A,d,s,u;const m=Cm(),b=null!=(i=null!=(c=null==C?void 0:C.clearButton)?c:null==a?void 0:a.ClearButton)?i:Ul,Z=ym({elementType:b,externalSlotProps:null!=(A=null==o?void 0:o.clearButton)?A:null==r?void 0:r.clearButton,ownerState:{},className:"clearButton",additionalProps:{title:m.fieldClearLabel}}),p=(0,He.A)(Z,sp),h=null!=(d=null!=(s=null==C?void 0:C.clearIcon)?s:null==a?void 0:a.ClearIcon)?d:gp,G=ym({elementType:h,externalSlotProps:null!=(u=null==o?void 0:o.clearIcon)?u:null==r?void 0:r.clearIcon,ownerState:{}});return{InputProps:(0,we.A)({},I,{endAdornment:g?(0,Qe.jsxs)(n.Fragment,{children:[(0,Qe.jsx)(ci,{position:"end",sx:{marginRight:null!=I&&I.endAdornment?-1:-1.5},children:(0,Qe.jsx)(b,(0,we.A)({},p,{onClick:l,children:(0,Qe.jsx)(h,(0,we.A)({fontSize:"small"},G))}))}),null==I?void 0:I.endAdornment]}):null==I?void 0:I.endAdornment}),fieldProps:(0,we.A)({},t,{sx:[{"& .clearButton":{opacity:1},"@media (pointer: fine)":{"& .clearButton":{opacity:0},"&:hover, &:focus-within":{".clearButton":{opacity:1}}}},...Array.isArray(t.sx)?t.sx:[t.sx]]})}})({onClear:V,clearable:W,fieldProps:v,InputProps:v.InputProps,slots:r,slotProps:i,components:o,componentsProps:a});return(0,Qe.jsx)(u,(0,we.A)({ref:g},f,{InputProps:(0,we.A)({},R,{readOnly:S}),inputProps:(0,we.A)({},v.inputProps,{inputMode:B,onPaste:G,onKeyDown:y,ref:h})}))})),pp=e=>{let{shouldDisableDate:g,shouldDisableMonth:t,shouldDisableYear:I,minDate:l,maxDate:C,disableFuture:o,disablePast:a,timezone:r}=e;const i=Im();return n.useCallback((e=>null!==pm({adapter:i,value:e,props:{shouldDisableDate:g,shouldDisableMonth:t,shouldDisableYear:I,minDate:l,maxDate:C,disableFuture:o,disablePast:a,timezone:r}})),[i,g,t,I,l,C,o,a,r])},hp=e=>{const{value:g,referenceDate:t,defaultCalendarMonth:I,disableFuture:l,disablePast:C,disableSwitchToMonthOnDayFocus:o=!1,maxDate:a,minDate:r,onMonthChange:i,reduceAnimations:c,shouldDisableDate:A,timezone:d}=e,s=om(d),u=nm(),m=n.useRef(((e,g,t)=>(I,n)=>{switch(n.type){case"changeMonth":return(0,we.A)({},I,{slideDirection:n.direction,currentMonth:n.newMonth,isMonthSwitchingAnimating:!e});case"finishMonthSwitchingAnimation":return(0,we.A)({},I,{isMonthSwitchingAnimating:!1});case"changeFocusedDay":{if(null!=I.focusedDay&&null!=n.focusedDay&&t.isSameDay(n.focusedDay,I.focusedDay))return I;const l=null!=n.focusedDay&&!g&&!t.isSameMonth(I.currentMonth,n.focusedDay);return(0,we.A)({},I,{focusedDay:n.focusedDay,isMonthSwitchingAnimating:l&&!e&&!n.withoutMonthSwitchingAnimation,currentMonth:l?t.startOfMonth(n.focusedDay):I.currentMonth,slideDirection:null!=n.focusedDay&&t.isAfterDay(n.focusedDay,I.currentMonth)?"left":"right"})}default:throw new Error("missing support")}})(Boolean(c),o,u)).current,b=n.useMemo((()=>{let n=null;return t?n=t:I&&(n=u.startOfMonth(I)),$u.getInitialReferenceValue({value:g,utils:u,timezone:d,props:e,referenceDate:n,granularity:ku.day})}),[]),[Z,p]=n.useReducer(m,{isMonthSwitchingAnimating:!1,focusedDay:u.isValid(g)?g:s,currentMonth:u.startOfMonth(b),slideDirection:"left"}),h=n.useCallback((e=>{p((0,we.A)({type:"changeMonth"},e)),i&&i(e.newMonth)}),[i]),G=n.useCallback((e=>{const g=e;u.isSameMonth(g,Z.currentMonth)||h({newMonth:u.startOfMonth(g),direction:u.isAfterDay(g,Z.currentMonth)?"left":"right"})}),[Z.currentMonth,h,u]),y=pp({shouldDisableDate:A,minDate:r,maxDate:a,disableFuture:l,disablePast:C,timezone:d}),B=n.useCallback((()=>{p({type:"finishMonthSwitchingAnimation"})}),[]),S=(0,Ta.A)(((e,g)=>{y(e)||p({type:"changeFocusedDay",focusedDay:e,withoutMonthSwitchingAnimation:g})}));return{referenceDate:b,calendarState:Z,changeMonth:G,changeFocusedDay:S,isDateDisabled:y,onMonthSwitchingAnimationEnd:B,handleChangeMonth:h}},Gp=e=>(0,Yl.Ay)("MuiPickersFadeTransitionGroup",e),yp=((0,$n.A)("MuiPickersFadeTransitionGroup",["root"]),(0,nl.Ay)(ml,{name:"MuiPickersFadeTransitionGroup",slot:"Root",overridesResolver:(e,g)=>g.root})({display:"block",position:"relative"}));function Bp(e){const g=Le({props:e,name:"MuiPickersFadeTransitionGroup"}),{children:t,className:I,reduceAnimations:n,transKey:l}=g,C=(e=>{const{classes:g}=e;return(0,tl.A)({root:["root"]},Gp,g)})(g),o=ya();return n?t:(0,Qe.jsx)(yp,{className:(0,Ln.A)(C.root,I),children:(0,Qe.jsx)(Ma,{appear:!1,mountOnEnter:!0,unmountOnExit:!0,timeout:{appear:o.transitions.duration.enteringScreen,enter:o.transitions.duration.enteringScreen,exit:0},children:t},l)})}var Sp=t(1188);function Wp(e){let g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,Sp.A)(e,g,t)}function Vp(e){if(e.type)return e;if("#"===e.charAt(0))return Vp(function(e){e=e.slice(1);const g=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let t=e.match(g);return t&&1===t[0].length&&(t=t.map((e=>e+e))),t?`rgb${4===t.length?"a":""}(${t.map(((e,g)=>g<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}(e));const g=e.indexOf("("),t=e.substring(0,g);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(t))throw new Error((0,hC.A)(9,e));let I,n=e.substring(g+1,e.length-1);if("color"===t){if(n=n.split(" "),I=n.shift(),4===n.length&&"/"===n[3].charAt(0)&&(n[3]=n[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(I))throw new Error((0,hC.A)(10,I))}else n=n.split(",");return n=n.map((e=>parseFloat(e))),{type:t,values:n,colorSpace:I}}function vp(e){const{type:g,colorSpace:t}=e;let{values:I}=e;return-1!==g.indexOf("rgb")?I=I.map(((e,g)=>g<3?parseInt(e,10):e)):-1!==g.indexOf("hsl")&&(I[1]=`${I[1]}%`,I[2]=`${I[2]}%`),I=-1!==g.indexOf("color")?`${t} ${I.join(" ")}`:`${I.join(", ")}`,`${g}(${I})`}function Rp(e,g){return e=Vp(e),g=Wp(g),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]=`/${g}`:e.values[3]=g,vp(e)}function fp(e){return(0,Yl.Ay)("MuiPickersDay",e)}const Xp=(0,$n.A)("MuiPickersDay",["root","dayWithMargin","dayOutsideMonth","hiddenDaySpacingFiller","today","selected","disabled"]),kp=["autoFocus","className","day","disabled","disableHighlightToday","disableMargin","hidden","isAnimating","onClick","onDaySelect","onFocus","onBlur","onKeyDown","onMouseDown","onMouseEnter","outsideCurrentMonth","selected","showDaysOutsideCurrentMonth","children","today","isFirstVisibleCell","isLastVisibleCell"],Jp=e=>{let{theme:g,ownerState:t}=e;return(0,we.A)({},g.typography.caption,{width:36,height:36,borderRadius:"50%",padding:0,backgroundColor:"transparent",transition:g.transitions.create("background-color",{duration:g.transitions.duration.short}),color:(g.vars||g).palette.text.primary,"@media (pointer: fine)":{"&:hover":{backgroundColor:g.vars?`rgba(${g.vars.palette.primary.mainChannel} / ${g.vars.palette.action.hoverOpacity})`:Rp(g.palette.primary.main,g.palette.action.hoverOpacity)}},"&:focus":{backgroundColor:g.vars?`rgba(${g.vars.palette.primary.mainChannel} / ${g.vars.palette.action.focusOpacity})`:Rp(g.palette.primary.main,g.palette.action.focusOpacity),[`&.${Xp.selected}`]:{willChange:"background-color",backgroundColor:(g.vars||g).palette.primary.dark}},[`&.${Xp.selected}`]:{color:(g.vars||g).palette.primary.contrastText,backgroundColor:(g.vars||g).palette.primary.main,fontWeight:g.typography.fontWeightMedium,"&:hover":{willChange:"background-color",backgroundColor:(g.vars||g).palette.primary.dark}},[`&.${Xp.disabled}:not(.${Xp.selected})`]:{color:(g.vars||g).palette.text.disabled},[`&.${Xp.disabled}&.${Xp.selected}`]:{opacity:.6}},!t.disableMargin&&{margin:"0 2px"},t.outsideCurrentMonth&&t.showDaysOutsideCurrentMonth&&{color:(g.vars||g).palette.text.secondary},!t.disableHighlightToday&&t.today&&{[`&:not(.${Xp.selected})`]:{border:`1px solid ${(g.vars||g).palette.text.secondary}`}})},Yp=(e,g)=>{const{ownerState:t}=e;return[g.root,!t.disableMargin&&g.dayWithMargin,!t.disableHighlightToday&&t.today&&g.today,!t.outsideCurrentMonth&&t.showDaysOutsideCurrentMonth&&g.dayOutsideMonth,t.outsideCurrentMonth&&!t.showDaysOutsideCurrentMonth&&g.hiddenDaySpacingFiller]},wp=(0,nl.Ay)(Kl,{name:"MuiPickersDay",slot:"Root",overridesResolver:Yp})(Jp),Hp=(0,nl.Ay)("div",{name:"MuiPickersDay",slot:"Root",overridesResolver:Yp})((e=>{let{theme:g,ownerState:t}=e;return(0,we.A)({},Jp({theme:g,ownerState:t}),{opacity:0,pointerEvents:"none"})})),Np=()=>{},Fp=n.forwardRef((function(e,g){const t=Le({props:e,name:"MuiPickersDay"}),{autoFocus:I=!1,className:l,day:C,disabled:o=!1,disableHighlightToday:a=!1,disableMargin:r=!1,isAnimating:i,onClick:c,onDaySelect:A,onFocus:d=Np,onBlur:s=Np,onKeyDown:u=Np,onMouseDown:m=Np,onMouseEnter:b=Np,outsideCurrentMonth:Z,selected:p=!1,showDaysOutsideCurrentMonth:h=!1,children:G,today:y=!1}=t,B=(0,He.A)(t,kp),S=(0,we.A)({},t,{autoFocus:I,disabled:o,disableHighlightToday:a,disableMargin:r,selected:p,showDaysOutsideCurrentMonth:h,today:y}),W=(e=>{const{selected:g,disableMargin:t,disableHighlightToday:I,today:n,disabled:l,outsideCurrentMonth:C,showDaysOutsideCurrentMonth:o,classes:a}=e,r=C&&!o,i={root:["root",g&&!r&&"selected",l&&"disabled",!t&&"dayWithMargin",!I&&n&&"today",C&&o&&"dayOutsideMonth",r&&"hiddenDaySpacingFiller"],hiddenDaySpacingFiller:["hiddenDaySpacingFiller"]};return(0,tl.A)(i,fp,a)})(S),V=nm(),v=n.useRef(null),R=(0,yC.A)(v,g);(0,Vn.A)((()=>{!I||o||i||Z||v.current.focus()}),[I,o,i,Z]);return Z&&!h?(0,Qe.jsx)(Hp,{className:(0,Ln.A)(W.root,W.hiddenDaySpacingFiller,l),ownerState:S,role:B.role}):(0,Qe.jsx)(wp,(0,we.A)({className:(0,Ln.A)(W.root,l),ref:R,centerRipple:!0,disabled:o,tabIndex:p?0:-1,onKeyDown:e=>u(e,C),onFocus:e=>d(e,C),onBlur:e=>s(e,C),onMouseEnter:e=>b(e,C),onClick:e=>{o||A(C),Z&&e.currentTarget.focus(),c&&c(e)},onMouseDown:e=>{m(e),Z&&e.preventDefault()}},B,{ownerState:S,children:G||V.format(C,"dayOfMonth")}))})),Kp=n.memo(Fp);function xp(e,g){return e.replace(new RegExp("(^|\\s)"+g+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var Mp=function(e,g){return e&&g&&g.split(" ").forEach((function(g){return I=g,void((t=e).classList?t.classList.remove(I):"string"===typeof t.className?t.className=xp(t.className,I):t.setAttribute("class",xp(t.className&&t.className.baseVal||"",I)));var t,I}))},zp=function(e){function g(){for(var g,t=arguments.length,I=new Array(t),n=0;n<t;n++)I[n]=arguments[n];return(g=e.call.apply(e,[this].concat(I))||this).appliedClasses={appear:{},enter:{},exit:{}},g.onEnter=function(e,t){var I=g.resolveArguments(e,t),n=I[0],l=I[1];g.removeClasses(n,"exit"),g.addClass(n,l?"appear":"enter","base"),g.props.onEnter&&g.props.onEnter(e,t)},g.onEntering=function(e,t){var I=g.resolveArguments(e,t),n=I[0],l=I[1]?"appear":"enter";g.addClass(n,l,"active"),g.props.onEntering&&g.props.onEntering(e,t)},g.onEntered=function(e,t){var I=g.resolveArguments(e,t),n=I[0],l=I[1]?"appear":"enter";g.removeClasses(n,l),g.addClass(n,l,"done"),g.props.onEntered&&g.props.onEntered(e,t)},g.onExit=function(e){var t=g.resolveArguments(e)[0];g.removeClasses(t,"appear"),g.removeClasses(t,"enter"),g.addClass(t,"exit","base"),g.props.onExit&&g.props.onExit(e)},g.onExiting=function(e){var t=g.resolveArguments(e)[0];g.addClass(t,"exit","active"),g.props.onExiting&&g.props.onExiting(e)},g.onExited=function(e){var t=g.resolveArguments(e)[0];g.removeClasses(t,"exit"),g.addClass(t,"exit","done"),g.props.onExited&&g.props.onExited(e)},g.resolveArguments=function(e,t){return g.props.nodeRef?[g.props.nodeRef.current,e]:[e,t]},g.getClassNames=function(e){var t=g.props.classNames,I="string"===typeof t,n=I?""+(I&&t?t+"-":"")+e:t[e];return{baseClassName:n,activeClassName:I?n+"-active":t[e+"Active"],doneClassName:I?n+"-done":t[e+"Done"]}},g}rl(g,e);var t=g.prototype;return t.addClass=function(e,g,t){var I=this.getClassNames(g)[t+"ClassName"],n=this.getClassNames("enter").doneClassName;"appear"===g&&"done"===t&&n&&(I+=" "+n),"active"===t&&e&&da(e),I&&(this.appliedClasses[g][t]=I,function(e,g){e&&g&&g.split(" ").forEach((function(g){return I=g,void((t=e).classList?t.classList.add(I):function(e,g){return e.classList?!!g&&e.classList.contains(g):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+g+" ")}(t,I)||("string"===typeof t.className?t.className=t.className+" "+I:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+I)));var t,I}))}(e,I))},t.removeClasses=function(e,g){var t=this.appliedClasses[g],I=t.base,n=t.active,l=t.done;this.appliedClasses[g]={},I&&Mp(e,I),n&&Mp(e,n),l&&Mp(e,l)},t.render=function(){var e=this.props,g=(e.classNames,(0,He.A)(e,["classNames"]));return n.createElement(Ga,(0,we.A)({},g,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},g}(n.Component);zp.defaultProps={classNames:""},zp.propTypes={};const Ep=zp,Dp=e=>(0,Yl.Ay)("MuiPickersSlideTransition",e),Up=(0,$n.A)("MuiPickersSlideTransition",["root","slideEnter-left","slideEnter-right","slideEnterActive","slideExit","slideExitActiveLeft-left","slideExitActiveLeft-right"]),Tp=["children","className","reduceAnimations","slideDirection","transKey","classes"],Lp=(0,nl.Ay)(ml,{name:"MuiPickersSlideTransition",slot:"Root",overridesResolver:(e,g)=>[g.root,{[`.${Up["slideEnter-left"]}`]:g["slideEnter-left"]},{[`.${Up["slideEnter-right"]}`]:g["slideEnter-right"]},{[`.${Up.slideEnterActive}`]:g.slideEnterActive},{[`.${Up.slideExit}`]:g.slideExit},{[`.${Up["slideExitActiveLeft-left"]}`]:g["slideExitActiveLeft-left"]},{[`.${Up["slideExitActiveLeft-right"]}`]:g["slideExitActiveLeft-right"]}]})((e=>{let{theme:g}=e;const t=g.transitions.create("transform",{duration:g.transitions.duration.complex,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{display:"block",position:"relative",overflowX:"hidden","& > *":{position:"absolute",top:0,right:0,left:0},[`& .${Up["slideEnter-left"]}`]:{willChange:"transform",transform:"translate(100%)",zIndex:1},[`& .${Up["slideEnter-right"]}`]:{willChange:"transform",transform:"translate(-100%)",zIndex:1},[`& .${Up.slideEnterActive}`]:{transform:"translate(0%)",transition:t},[`& .${Up.slideExit}`]:{transform:"translate(0%)"},[`& .${Up["slideExitActiveLeft-left"]}`]:{willChange:"transform",transform:"translate(-100%)",transition:t,zIndex:0},[`& .${Up["slideExitActiveLeft-right"]}`]:{willChange:"transform",transform:"translate(100%)",transition:t,zIndex:0}}}));const Qp=e=>(0,Yl.Ay)("MuiDayCalendar",e),jp=((0,$n.A)("MuiDayCalendar",["root","header","weekDayLabel","loadingContainer","slideTransition","monthContainer","weekContainer","weekNumberLabel","weekNumber"]),["parentProps","day","focusableDay","selectedDays","isDateDisabled","currentMonthNumber","isViewFocused"]),Pp=["ownerState"],Op=(0,nl.Ay)("div",{name:"MuiDayCalendar",slot:"Root",overridesResolver:(e,g)=>g.root})({}),qp=(0,nl.Ay)("div",{name:"MuiDayCalendar",slot:"Header",overridesResolver:(e,g)=>g.header})({display:"flex",justifyContent:"center",alignItems:"center"}),$p=(0,nl.Ay)(ZC,{name:"MuiDayCalendar",slot:"WeekDayLabel",overridesResolver:(e,g)=>g.weekDayLabel})((e=>{let{theme:g}=e;return{width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:(g.vars||g).palette.text.secondary}})),_p=(0,nl.Ay)(ZC,{name:"MuiDayCalendar",slot:"WeekNumberLabel",overridesResolver:(e,g)=>g.weekNumberLabel})((e=>{let{theme:g}=e;return{width:36,height:40,margin:"0 2px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",color:g.palette.text.disabled}})),eh=(0,nl.Ay)(ZC,{name:"MuiDayCalendar",slot:"WeekNumber",overridesResolver:(e,g)=>g.weekNumber})((e=>{let{theme:g}=e;return(0,we.A)({},g.typography.caption,{width:36,height:36,padding:0,margin:"0 2px",color:g.palette.text.disabled,fontSize:"0.75rem",alignItems:"center",justifyContent:"center",display:"inline-flex"})})),gh=(0,nl.Ay)("div",{name:"MuiDayCalendar",slot:"LoadingContainer",overridesResolver:(e,g)=>g.loadingContainer})({display:"flex",justifyContent:"center",alignItems:"center",minHeight:240}),th=(0,nl.Ay)((function(e){const g=Le({props:e,name:"MuiPickersSlideTransition"}),{children:t,className:I,reduceAnimations:l,transKey:C}=g,o=(0,He.A)(g,Tp),a=(e=>{const{classes:g,slideDirection:t}=e,I={root:["root"],exit:["slideExit"],enterActive:["slideEnterActive"],enter:[`slideEnter-${t}`],exitActive:[`slideExitActiveLeft-${t}`]};return(0,tl.A)(I,Dp,g)})(g),r=ya();if(l)return(0,Qe.jsx)("div",{className:(0,Ln.A)(a.root,I),children:t});const i={exit:a.exit,enterActive:a.enterActive,enter:a.enter,exitActive:a.exitActive};return(0,Qe.jsx)(Lp,{className:(0,Ln.A)(a.root,I),childFactory:e=>n.cloneElement(e,{classNames:i}),role:"presentation",children:(0,Qe.jsx)(Ep,(0,we.A)({mountOnEnter:!0,unmountOnExit:!0,timeout:r.transitions.duration.complex,classNames:i},o,{children:t}),C)})}),{name:"MuiDayCalendar",slot:"SlideTransition",overridesResolver:(e,g)=>g.slideTransition})({minHeight:240}),Ih=(0,nl.Ay)("div",{name:"MuiDayCalendar",slot:"MonthContainer",overridesResolver:(e,g)=>g.monthContainer})({overflow:"hidden"}),nh=(0,nl.Ay)("div",{name:"MuiDayCalendar",slot:"WeekContainer",overridesResolver:(e,g)=>g.weekContainer})({margin:"2px 0",display:"flex",justifyContent:"center"});function lh(e){var g,t,I;let{parentProps:l,day:C,focusableDay:o,selectedDays:a,isDateDisabled:r,currentMonthNumber:i,isViewFocused:c}=e,A=(0,He.A)(e,jp);const{disabled:d,disableHighlightToday:s,isMonthSwitchingAnimating:u,showDaysOutsideCurrentMonth:m,components:b,componentsProps:Z,slots:p,slotProps:h,timezone:G}=l,y=nm(),B=om(G),S=null!==o&&y.isSameDay(C,o),W=a.some((e=>y.isSameDay(e,C))),V=y.isSameDay(C,B),v=null!=(g=null!=(t=null==p?void 0:p.day)?t:null==b?void 0:b.Day)?g:Kp,R=ym({elementType:v,externalSlotProps:null!=(I=null==h?void 0:h.day)?I:null==Z?void 0:Z.day,additionalProps:(0,we.A)({disableHighlightToday:s,showDaysOutsideCurrentMonth:m,role:"gridcell",isAnimating:u,"data-timestamp":y.toJsDate(C).valueOf()},A),ownerState:(0,we.A)({},l,{day:C,selected:W})}),f=(0,He.A)(R,Pp),X=n.useMemo((()=>d||r(C)),[d,r,C]),k=n.useMemo((()=>y.getMonth(C)!==i),[y,C,i]),J=n.useMemo((()=>{const e=y.startOfMonth(y.setMonth(C,i));return m?y.isSameDay(C,y.startOfWeek(e)):y.isSameDay(C,e)}),[i,C,m,y]),Y=n.useMemo((()=>{const e=y.endOfMonth(y.setMonth(C,i));return m?y.isSameDay(C,y.endOfWeek(e)):y.isSameDay(C,e)}),[i,C,m,y]);return(0,Qe.jsx)(v,(0,we.A)({},f,{day:C,disabled:X,autoFocus:c&&S,today:V,outsideCurrentMonth:k,isFirstVisibleCell:J,isLastVisibleCell:Y,selected:W,tabIndex:S?0:-1,"aria-selected":W,"aria-current":V?"date":void 0}))}function Ch(e){const g=Le({props:e,name:"MuiDayCalendar"}),{onFocusedDayChange:t,className:I,currentMonth:l,selectedDays:C,focusedDay:o,loading:a,onSelectedDaysChange:r,onMonthSwitchingAnimationEnd:i,readOnly:c,reduceAnimations:A,renderLoading:d=()=>(0,Qe.jsx)("span",{children:"..."}),slideDirection:s,TransitionProps:u,disablePast:m,disableFuture:b,minDate:Z,maxDate:p,shouldDisableDate:h,shouldDisableMonth:G,shouldDisableYear:y,dayOfWeekFormatter:B,hasFocus:S,onFocusedViewChange:W,gridLabelId:V,displayWeekNumber:v,fixedWeekNumber:R,autoFocus:f,timezone:X}=g,k=om(X),J=nm(),Y=(e=>{const{classes:g}=e;return(0,tl.A)({root:["root"],header:["header"],weekDayLabel:["weekDayLabel"],loadingContainer:["loadingContainer"],slideTransition:["slideTransition"],monthContainer:["monthContainer"],weekContainer:["weekContainer"],weekNumberLabel:["weekNumberLabel"],weekNumber:["weekNumber"]},Qp,g)})(g),w="rtl"===ya().direction,H=B||((e,g)=>J.format(g,"weekdayShort").charAt(0).toUpperCase()),N=pp({shouldDisableDate:h,shouldDisableMonth:G,shouldDisableYear:y,minDate:Z,maxDate:p,disablePast:m,disableFuture:b,timezone:X}),F=Cm(),[K,x]=(0,nZ.A)({name:"DayCalendar",state:"hasFocus",controlled:S,default:null!=f&&f}),[M,z]=n.useState((()=>o||k)),E=(0,Ta.A)((e=>{c||r(e)})),D=e=>{N(e)||(t(e),z(e),null==W||W(!0),x(!0))},U=(0,Ta.A)(((e,g)=>{switch(e.key){case"ArrowUp":D(J.addDays(g,-7)),e.preventDefault();break;case"ArrowDown":D(J.addDays(g,7)),e.preventDefault();break;case"ArrowLeft":{const t=J.addDays(g,w?1:-1),I=J.addMonths(g,w?1:-1),n=hu({utils:J,date:t,minDate:w?t:J.startOfMonth(I),maxDate:w?J.endOfMonth(I):t,isDateDisabled:N,timezone:X});D(n||t),e.preventDefault();break}case"ArrowRight":{const t=J.addDays(g,w?-1:1),I=J.addMonths(g,w?-1:1),n=hu({utils:J,date:t,minDate:w?J.startOfMonth(I):t,maxDate:w?t:J.endOfMonth(I),isDateDisabled:N,timezone:X});D(n||t),e.preventDefault();break}case"Home":D(J.startOfWeek(g)),e.preventDefault();break;case"End":D(J.endOfWeek(g)),e.preventDefault();break;case"PageUp":D(J.addMonths(g,1)),e.preventDefault();break;case"PageDown":D(J.addMonths(g,-1)),e.preventDefault()}})),T=(0,Ta.A)(((e,g)=>D(g))),L=(0,Ta.A)(((e,g)=>{K&&J.isSameDay(M,g)&&(null==W||W(!1))})),Q=J.getMonth(l),j=n.useMemo((()=>C.filter((e=>!!e)).map((e=>J.startOfDay(e)))),[J,C]),P=Q,O=n.useMemo((()=>n.createRef()),[P]),q=J.startOfWeek(k),$=n.useMemo((()=>{const e=J.startOfMonth(l),g=J.endOfMonth(l);return N(M)||J.isAfterDay(M,g)||J.isBeforeDay(M,e)?hu({utils:J,date:M,minDate:e,maxDate:g,disablePast:m,disableFuture:b,isDateDisabled:N,timezone:X}):M}),[l,b,m,M,N,J,X]),_=n.useMemo((()=>{const e=J.setTimezone(l,X),g=J.getWeekArray(e);let t=J.addMonths(e,1);for(;R&&g.length<R;){const e=J.getWeekArray(t),I=J.isSameDay(g[g.length-1][0],e[0][0]);e.slice(I?1:0).forEach((e=>{g.length<R&&g.push(e)})),t=J.addMonths(t,1)}return g}),[l,R,J,X]);return(0,Qe.jsxs)(Op,{role:"grid","aria-labelledby":V,className:Y.root,children:[(0,Qe.jsxs)(qp,{role:"row",className:Y.header,children:[v&&(0,Qe.jsx)(_p,{variant:"caption",role:"columnheader","aria-label":F.calendarWeekNumberHeaderLabel,className:Y.weekNumberLabel,children:F.calendarWeekNumberHeaderText}),Ru(J,k).map(((e,g)=>{var t;const I=J.format(e,"weekdayShort");return(0,Qe.jsx)($p,{variant:"caption",role:"columnheader","aria-label":J.format(J.addDays(q,g),"weekday"),className:Y.weekDayLabel,children:null!=(t=null==H?void 0:H(I,e))?t:I},I+g.toString())}))]}),a?(0,Qe.jsx)(gh,{className:Y.loadingContainer,children:d()}):(0,Qe.jsx)(th,(0,we.A)({transKey:P,onExited:i,reduceAnimations:A,slideDirection:s,className:(0,Ln.A)(I,Y.slideTransition)},u,{nodeRef:O,children:(0,Qe.jsx)(Ih,{ref:O,role:"rowgroup",className:Y.monthContainer,children:_.map(((e,t)=>(0,Qe.jsxs)(nh,{role:"row",className:Y.weekContainer,"aria-rowindex":t+1,children:[v&&(0,Qe.jsx)(eh,{className:Y.weekNumber,role:"rowheader","aria-label":F.calendarWeekNumberAriaLabelText(J.getWeekNumber(e[0])),children:F.calendarWeekNumberText(J.getWeekNumber(e[0]))}),e.map(((e,t)=>(0,Qe.jsx)(lh,{parentProps:g,day:e,selectedDays:j,focusableDay:$,onKeyDown:U,onFocus:T,onBlur:L,onDaySelect:E,isDateDisabled:N,currentMonthNumber:Q,isViewFocused:K,"aria-colindex":t+1},e.toString())))]},`week-${e[0]}`)))})}))]})}function oh(e){return(0,Yl.Ay)("MuiPickersMonth",e)}const ah=(0,$n.A)("MuiPickersMonth",["root","monthButton","disabled","selected"]),rh=["autoFocus","children","disabled","selected","value","tabIndex","onClick","onKeyDown","onFocus","onBlur","aria-current","aria-label","monthsPerRow"],ih=(0,nl.Ay)("div",{name:"MuiPickersMonth",slot:"Root",overridesResolver:(e,g)=>[g.root]})((e=>{let{ownerState:g}=e;return{flexBasis:3===g.monthsPerRow?"33.3%":"25%",display:"flex",alignItems:"center",justifyContent:"center"}})),ch=(0,nl.Ay)("button",{name:"MuiPickersMonth",slot:"MonthButton",overridesResolver:(e,g)=>[g.monthButton,{[`&.${ah.disabled}`]:g.disabled},{[`&.${ah.selected}`]:g.selected}]})((e=>{let{theme:g}=e;return(0,we.A)({color:"unset",backgroundColor:"transparent",border:0,outline:0},g.typography.subtitle1,{margin:"8px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:g.vars?`rgba(${g.vars.palette.action.activeChannel} / ${g.vars.palette.action.hoverOpacity})`:Rp(g.palette.action.active,g.palette.action.hoverOpacity)},"&:hover":{backgroundColor:g.vars?`rgba(${g.vars.palette.action.activeChannel} / ${g.vars.palette.action.hoverOpacity})`:Rp(g.palette.action.active,g.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${ah.disabled}`]:{color:(g.vars||g).palette.text.secondary},[`&.${ah.selected}`]:{color:(g.vars||g).palette.primary.contrastText,backgroundColor:(g.vars||g).palette.primary.main,"&:focus, &:hover":{backgroundColor:(g.vars||g).palette.primary.dark}}})})),Ah=n.memo((function(e){const g=Le({props:e,name:"MuiPickersMonth"}),{autoFocus:t,children:I,disabled:l,selected:C,value:o,tabIndex:a,onClick:r,onKeyDown:i,onFocus:c,onBlur:A,"aria-current":d,"aria-label":s}=g,u=(0,He.A)(g,rh),m=n.useRef(null),b=(e=>{const{disabled:g,selected:t,classes:I}=e,n={root:["root"],monthButton:["monthButton",g&&"disabled",t&&"selected"]};return(0,tl.A)(n,oh,I)})(g);return(0,Vn.A)((()=>{var e;t&&(null==(e=m.current)||e.focus())}),[t]),(0,Qe.jsx)(ih,(0,we.A)({className:b.root,ownerState:g},u,{children:(0,Qe.jsx)(ch,{ref:m,disabled:l,type:"button",role:"radio",tabIndex:l?-1:a,"aria-current":d,"aria-checked":C,"aria-label":s,onClick:e=>r(e,o),onKeyDown:e=>i(e,o),onFocus:e=>c(e,o),onBlur:e=>A(e,o),className:b.monthButton,ownerState:g,children:I})}))}));function dh(e){return(0,Yl.Ay)("MuiMonthCalendar",e)}(0,$n.A)("MuiMonthCalendar",["root"]);const sh=["className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","shouldDisableMonth","readOnly","disableHighlightToday","autoFocus","onMonthFocus","hasFocus","onFocusedViewChange","monthsPerRow","timezone","gridLabelId"];const uh=(0,nl.Ay)("div",{name:"MuiMonthCalendar",slot:"Root",overridesResolver:(e,g)=>g.root})({display:"flex",flexWrap:"wrap",alignContent:"stretch",padding:"0 4px",width:MZ,boxSizing:"border-box"}),mh=n.forwardRef((function(e,g){const t=function(e,g){const t=nm(),I=lm(),n=Le({props:e,name:g});return(0,we.A)({disableFuture:!1,disablePast:!1},n,{minDate:Gu(t,n.minDate,I.minDate),maxDate:Gu(t,n.maxDate,I.maxDate)})}(e,"MuiMonthCalendar"),{className:I,value:l,defaultValue:C,referenceDate:o,disabled:a,disableFuture:r,disablePast:i,maxDate:c,minDate:A,onChange:d,shouldDisableMonth:s,readOnly:u,disableHighlightToday:m,autoFocus:b=!1,onMonthFocus:Z,hasFocus:p,onFocusedViewChange:h,monthsPerRow:G=3,timezone:y,gridLabelId:B}=t,S=(0,He.A)(t,sh),{value:W,handleValueChange:V,timezone:v}=oZ({name:"MonthCalendar",timezone:y,value:l,defaultValue:C,onChange:d,valueManager:$u}),R=om(v),f=Ee(),X=nm(),k=n.useMemo((()=>$u.getInitialReferenceValue({value:W,utils:X,props:t,timezone:v,referenceDate:o,granularity:ku.month})),[]),J=t,Y=(e=>{const{classes:g}=e;return(0,tl.A)({root:["root"]},dh,g)})(J),w=n.useMemo((()=>X.getMonth(R)),[X,R]),H=n.useMemo((()=>null!=W?X.getMonth(W):m?null:X.getMonth(k)),[W,X,m,k]),[N,F]=n.useState((()=>H||w)),[K,x]=(0,nZ.A)({name:"MonthCalendar",state:"hasFocus",controlled:p,default:null!=b&&b}),M=(0,Ta.A)((e=>{x(e),h&&h(e)})),z=n.useCallback((e=>{const g=X.startOfMonth(i&&X.isAfter(R,A)?R:A),t=X.startOfMonth(r&&X.isBefore(R,c)?R:c),I=X.startOfMonth(e);return!!X.isBefore(I,g)||(!!X.isAfter(I,t)||!!s&&s(I))}),[r,i,c,A,R,s,X]),E=(0,Ta.A)(((e,g)=>{if(u)return;const t=X.setMonth(null!=W?W:k,g);V(t)})),D=(0,Ta.A)((e=>{z(X.setMonth(null!=W?W:k,e))||(F(e),M(!0),Z&&Z(e))}));n.useEffect((()=>{F((e=>null!==H&&e!==H?H:e))}),[H]);const U=(0,Ta.A)(((e,g)=>{const t=12;switch(e.key){case"ArrowUp":D((t+g-3)%t),e.preventDefault();break;case"ArrowDown":D((t+g+3)%t),e.preventDefault();break;case"ArrowLeft":D((t+g+("ltr"===f.direction?-1:1))%t),e.preventDefault();break;case"ArrowRight":D((t+g+("ltr"===f.direction?1:-1))%t),e.preventDefault()}})),T=(0,Ta.A)(((e,g)=>{D(g)})),L=(0,Ta.A)(((e,g)=>{N===g&&M(!1)}));return(0,Qe.jsx)(uh,(0,we.A)({ref:g,className:(0,Ln.A)(Y.root,I),ownerState:J,role:"radiogroup","aria-labelledby":B},S,{children:yu(X,null!=W?W:k).map((e=>{const g=X.getMonth(e),t=X.format(e,"monthShort"),I=X.format(e,"month"),n=g===H,l=a||z(e);return(0,Qe.jsx)(Ah,{selected:n,value:g,onClick:E,onKeyDown:U,autoFocus:K&&g===N,disabled:l,tabIndex:g===N?0:-1,onFocus:T,onBlur:L,"aria-current":w===g?"date":void 0,"aria-label":I,monthsPerRow:G,children:t},t)}))}))}));function bh(e){return(0,Yl.Ay)("MuiPickersYear",e)}const Zh=(0,$n.A)("MuiPickersYear",["root","yearButton","selected","disabled"]),ph=["autoFocus","className","children","disabled","selected","value","tabIndex","onClick","onKeyDown","onFocus","onBlur","aria-current","yearsPerRow"],hh=(0,nl.Ay)("div",{name:"MuiPickersYear",slot:"Root",overridesResolver:(e,g)=>[g.root]})((e=>{let{ownerState:g}=e;return{flexBasis:3===g.yearsPerRow?"33.3%":"25%",display:"flex",alignItems:"center",justifyContent:"center"}})),Gh=(0,nl.Ay)("button",{name:"MuiPickersYear",slot:"YearButton",overridesResolver:(e,g)=>[g.yearButton,{[`&.${Zh.disabled}`]:g.disabled},{[`&.${Zh.selected}`]:g.selected}]})((e=>{let{theme:g}=e;return(0,we.A)({color:"unset",backgroundColor:"transparent",border:0,outline:0},g.typography.subtitle1,{margin:"6px 0",height:36,width:72,borderRadius:18,cursor:"pointer","&:focus":{backgroundColor:g.vars?`rgba(${g.vars.palette.action.activeChannel} / ${g.vars.palette.action.focusOpacity})`:Rp(g.palette.action.active,g.palette.action.focusOpacity)},"&:hover":{backgroundColor:g.vars?`rgba(${g.vars.palette.action.activeChannel} / ${g.vars.palette.action.hoverOpacity})`:Rp(g.palette.action.active,g.palette.action.hoverOpacity)},"&:disabled":{cursor:"auto",pointerEvents:"none"},[`&.${Zh.disabled}`]:{color:(g.vars||g).palette.text.secondary},[`&.${Zh.selected}`]:{color:(g.vars||g).palette.primary.contrastText,backgroundColor:(g.vars||g).palette.primary.main,"&:focus, &:hover":{backgroundColor:(g.vars||g).palette.primary.dark}}})})),yh=n.memo((function(e){const g=Le({props:e,name:"MuiPickersYear"}),{autoFocus:t,className:I,children:l,disabled:C,selected:o,value:a,tabIndex:r,onClick:i,onKeyDown:c,onFocus:A,onBlur:d,"aria-current":s}=g,u=(0,He.A)(g,ph),m=n.useRef(null),b=(e=>{const{disabled:g,selected:t,classes:I}=e,n={root:["root"],yearButton:["yearButton",g&&"disabled",t&&"selected"]};return(0,tl.A)(n,bh,I)})(g);return n.useEffect((()=>{t&&m.current.focus()}),[t]),(0,Qe.jsx)(hh,(0,we.A)({className:(0,Ln.A)(b.root,I),ownerState:g},u,{children:(0,Qe.jsx)(Gh,{ref:m,disabled:C,type:"button",role:"radio",tabIndex:C?-1:r,"aria-current":s,"aria-checked":o,onClick:e=>i(e,a),onKeyDown:e=>c(e,a),onFocus:e=>A(e,a),onBlur:e=>d(e,a),className:b.yearButton,ownerState:g,children:l})}))}));function Bh(e){return(0,Yl.Ay)("MuiYearCalendar",e)}(0,$n.A)("MuiYearCalendar",["root"]);const Sh=["autoFocus","className","value","defaultValue","referenceDate","disabled","disableFuture","disablePast","maxDate","minDate","onChange","readOnly","shouldDisableYear","disableHighlightToday","onYearFocus","hasFocus","onFocusedViewChange","yearsPerRow","timezone","gridLabelId"];const Wh=(0,nl.Ay)("div",{name:"MuiYearCalendar",slot:"Root",overridesResolver:(e,g)=>g.root})({display:"flex",flexDirection:"row",flexWrap:"wrap",overflowY:"auto",height:"100%",padding:"0 4px",width:MZ,maxHeight:280,boxSizing:"border-box",position:"relative"}),Vh=n.forwardRef((function(e,g){const t=function(e,g){var t;const I=nm(),n=lm(),l=Le({props:e,name:g});return(0,we.A)({disablePast:!1,disableFuture:!1},l,{yearsPerRow:null!=(t=l.yearsPerRow)?t:3,minDate:Gu(I,l.minDate,n.minDate),maxDate:Gu(I,l.maxDate,n.maxDate)})}(e,"MuiYearCalendar"),{autoFocus:I,className:l,value:C,defaultValue:o,referenceDate:a,disabled:r,disableFuture:i,disablePast:c,maxDate:A,minDate:d,onChange:s,readOnly:u,shouldDisableYear:m,disableHighlightToday:b,onYearFocus:Z,hasFocus:p,onFocusedViewChange:h,yearsPerRow:G,timezone:y,gridLabelId:B}=t,S=(0,He.A)(t,Sh),{value:W,handleValueChange:V,timezone:v}=oZ({name:"YearCalendar",timezone:y,value:C,defaultValue:o,onChange:s,valueManager:$u}),R=om(v),f=Ee(),X=nm(),k=n.useMemo((()=>$u.getInitialReferenceValue({value:W,utils:X,props:t,timezone:v,referenceDate:a,granularity:ku.year})),[]),J=t,Y=(e=>{const{classes:g}=e;return(0,tl.A)({root:["root"]},Bh,g)})(J),w=n.useMemo((()=>X.getYear(R)),[X,R]),H=n.useMemo((()=>null!=W?X.getYear(W):b?null:X.getYear(k)),[W,X,b,k]),[N,F]=n.useState((()=>H||w)),[K,x]=(0,nZ.A)({name:"YearCalendar",state:"hasFocus",controlled:p,default:null!=I&&I}),M=(0,Ta.A)((e=>{x(e),h&&h(e)})),z=n.useCallback((e=>{if(c&&X.isBeforeYear(e,R))return!0;if(i&&X.isAfterYear(e,R))return!0;if(d&&X.isBeforeYear(e,d))return!0;if(A&&X.isAfterYear(e,A))return!0;if(!m)return!1;const g=X.startOfYear(e);return m(g)}),[i,c,A,d,R,m,X]),E=(0,Ta.A)(((e,g)=>{if(u)return;const t=X.setYear(null!=W?W:k,g);V(t)})),D=(0,Ta.A)((e=>{z(X.setYear(null!=W?W:k,e))||(F(e),M(!0),null==Z||Z(e))}));n.useEffect((()=>{F((e=>null!==H&&e!==H?H:e))}),[H]);const U=(0,Ta.A)(((e,g)=>{switch(e.key){case"ArrowUp":D(g-G),e.preventDefault();break;case"ArrowDown":D(g+G),e.preventDefault();break;case"ArrowLeft":D(g+("ltr"===f.direction?-1:1)),e.preventDefault();break;case"ArrowRight":D(g+("ltr"===f.direction?1:-1)),e.preventDefault()}})),T=(0,Ta.A)(((e,g)=>{D(g)})),L=(0,Ta.A)(((e,g)=>{N===g&&M(!1)})),Q=n.useRef(null),j=(0,yC.A)(g,Q);return n.useEffect((()=>{if(I||null===Q.current)return;const e=Q.current.querySelector('[tabindex="0"]');if(!e)return;const g=e.offsetHeight,t=e.offsetTop,n=Q.current.clientHeight,l=Q.current.scrollTop,C=t+g;g>n||t<l||(Q.current.scrollTop=C-n/2-g/2)}),[I]),(0,Qe.jsx)(Wh,(0,we.A)({ref:j,className:(0,Ln.A)(Y.root,l),ownerState:J,role:"radiogroup","aria-labelledby":B},S,{children:X.getYearRange(d,A).map((e=>{const g=X.getYear(e),t=g===H,I=r||z(e);return(0,Qe.jsx)(yh,{selected:t,value:g,onClick:E,onKeyDown:U,autoFocus:K&&g===N,disabled:I,tabIndex:g===N?0:-1,onFocus:T,onBlur:L,"aria-current":w===g?"date":void 0,yearsPerRow:G,children:X.format(e,"year")},X.format(e,"year"))}))}))}));function vh(e){return(0,Yl.Ay)("MuiPickersArrowSwitcher",e)}(0,$n.A)("MuiPickersArrowSwitcher",["root","spacer","button"]);const Rh=["children","className","slots","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel"],fh=["ownerState"],Xh=["ownerState"],kh=(0,nl.Ay)("div",{name:"MuiPickersArrowSwitcher",slot:"Root",overridesResolver:(e,g)=>g.root})({display:"flex"}),Jh=(0,nl.Ay)("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer",overridesResolver:(e,g)=>g.spacer})((e=>{let{theme:g}=e;return{width:g.spacing(3)}})),Yh=(0,nl.Ay)(Ul,{name:"MuiPickersArrowSwitcher",slot:"Button",overridesResolver:(e,g)=>g.button})((e=>{let{ownerState:g}=e;return(0,we.A)({},g.hidden&&{visibility:"hidden"})})),wh=n.forwardRef((function(e,g){var t,I,n,l;const C="rtl"===ya().direction,o=Le({props:e,name:"MuiPickersArrowSwitcher"}),{children:a,className:r,slots:i,slotProps:c,isNextDisabled:A,isNextHidden:d,onGoToNext:s,nextLabel:u,isPreviousDisabled:m,isPreviousHidden:b,onGoToPrevious:Z,previousLabel:p}=o,h=(0,He.A)(o,Rh),G=o,y=(e=>{const{classes:g}=e;return(0,tl.A)({root:["root"],spacer:["spacer"],button:["button"]},vh,g)})(G),B={isDisabled:A,isHidden:d,goTo:s,label:u},S={isDisabled:m,isHidden:b,goTo:Z,label:p},W=null!=(t=null==i?void 0:i.previousIconButton)?t:Yh,V=ym({elementType:W,externalSlotProps:null==c?void 0:c.previousIconButton,additionalProps:{size:"medium",title:S.label,"aria-label":S.label,disabled:S.isDisabled,edge:"end",onClick:S.goTo},ownerState:(0,we.A)({},G,{hidden:S.isHidden}),className:y.button}),v=null!=(I=null==i?void 0:i.nextIconButton)?I:Yh,R=ym({elementType:v,externalSlotProps:null==c?void 0:c.nextIconButton,additionalProps:{size:"medium",title:B.label,"aria-label":B.label,disabled:B.isDisabled,edge:"start",onClick:B.goTo},ownerState:(0,we.A)({},G,{hidden:B.isHidden}),className:y.button}),f=null!=(n=null==i?void 0:i.leftArrowIcon)?n:$Z,X=ym({elementType:f,externalSlotProps:null==c?void 0:c.leftArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:void 0}),k=(0,He.A)(X,fh),J=null!=(l=null==i?void 0:i.rightArrowIcon)?l:_Z,Y=ym({elementType:J,externalSlotProps:null==c?void 0:c.rightArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:void 0}),w=(0,He.A)(Y,Xh);return(0,Qe.jsxs)(kh,(0,we.A)({ref:g,className:(0,Ln.A)(y.root,r),ownerState:G},h,{children:[(0,Qe.jsx)(W,(0,we.A)({},V,{children:C?(0,Qe.jsx)(J,(0,we.A)({},w)):(0,Qe.jsx)(f,(0,we.A)({},k))})),a?(0,Qe.jsx)(ZC,{variant:"subtitle1",component:"span",children:a}):(0,Qe.jsx)(Jh,{className:y.spacer,ownerState:G}),(0,Qe.jsx)(v,(0,we.A)({},R,{children:C?(0,Qe.jsx)(f,(0,we.A)({},k)):(0,Qe.jsx)(J,(0,we.A)({},w))}))]}))}));const Hh=e=>(0,Yl.Ay)("MuiPickersCalendarHeader",e),Nh=(0,$n.A)("MuiPickersCalendarHeader",["root","labelContainer","label","switchViewButton","switchViewIcon"]),Fh=["slots","slotProps","components","componentsProps","currentMonth","disabled","disableFuture","disablePast","maxDate","minDate","onMonthChange","onViewChange","view","reduceAnimations","views","labelId","className","timezone"],Kh=["ownerState"],xh=(0,nl.Ay)("div",{name:"MuiPickersCalendarHeader",slot:"Root",overridesResolver:(e,g)=>g.root})({display:"flex",alignItems:"center",marginTop:16,marginBottom:8,paddingLeft:24,paddingRight:12,maxHeight:30,minHeight:30}),Mh=(0,nl.Ay)("div",{name:"MuiPickersCalendarHeader",slot:"LabelContainer",overridesResolver:(e,g)=>g.labelContainer})((e=>{let{theme:g}=e;return(0,we.A)({display:"flex",overflow:"hidden",alignItems:"center",cursor:"pointer",marginRight:"auto"},g.typography.body1,{fontWeight:g.typography.fontWeightMedium})})),zh=(0,nl.Ay)("div",{name:"MuiPickersCalendarHeader",slot:"Label",overridesResolver:(e,g)=>g.label})({marginRight:6}),Eh=(0,nl.Ay)(Ul,{name:"MuiPickersCalendarHeader",slot:"SwitchViewButton",overridesResolver:(e,g)=>g.switchViewButton})((e=>{let{ownerState:g}=e;return(0,we.A)({marginRight:"auto"},"year"===g.view&&{[`.${Nh.switchViewIcon}`]:{transform:"rotate(180deg)"}})})),Dh=(0,nl.Ay)(qZ,{name:"MuiPickersCalendarHeader",slot:"SwitchViewIcon",overridesResolver:(e,g)=>g.switchViewIcon})((e=>{let{theme:g}=e;return{willChange:"transform",transition:g.transitions.create("transform"),transform:"rotate(0deg)"}})),Uh=n.forwardRef((function(e,g){var t,I,l,C;const o=Cm(),a=nm(),r=Le({props:e,name:"MuiPickersCalendarHeader"}),{slots:i,slotProps:c,components:A,currentMonth:d,disabled:s,disableFuture:u,disablePast:m,maxDate:b,minDate:Z,onMonthChange:p,onViewChange:h,view:G,reduceAnimations:y,views:B,labelId:S,className:W,timezone:V}=r,v=(0,He.A)(r,Fh),R=r,f=(e=>{const{classes:g}=e;return(0,tl.A)({root:["root"],labelContainer:["labelContainer"],label:["label"],switchViewButton:["switchViewButton"],switchViewIcon:["switchViewIcon"]},Hh,g)})(r),X=null!=(t=null!=(I=null==i?void 0:i.switchViewButton)?I:null==A?void 0:A.SwitchViewButton)?t:Eh,k=ym({elementType:X,externalSlotProps:null==c?void 0:c.switchViewButton,additionalProps:{size:"small","aria-label":o.calendarViewSwitchingButtonAriaLabel(G)},ownerState:R,className:f.switchViewButton}),J=null!=(l=null!=(C=null==i?void 0:i.switchViewIcon)?C:null==A?void 0:A.SwitchViewIcon)?l:Dh,Y=ym({elementType:J,externalSlotProps:null==c?void 0:c.switchViewIcon,ownerState:void 0,className:f.switchViewIcon}),w=(0,He.A)(Y,Kh),H=function(e,g){let{disableFuture:t,maxDate:I,timezone:l}=g;const C=nm();return n.useMemo((()=>{const g=C.dateWithTimezone(void 0,l),n=C.startOfMonth(t&&C.isBefore(g,I)?g:I);return!C.isAfter(n,e)}),[t,I,e,C,l])}(d,{disableFuture:u,maxDate:b,timezone:V}),N=function(e,g){let{disablePast:t,minDate:I,timezone:l}=g;const C=nm();return n.useMemo((()=>{const g=C.dateWithTimezone(void 0,l),n=C.startOfMonth(t&&C.isAfter(g,I)?g:I);return!C.isBefore(n,e)}),[t,I,e,C,l])}(d,{disablePast:m,minDate:Z,timezone:V});return 1===B.length&&"year"===B[0]?null:(0,Qe.jsxs)(xh,(0,we.A)({},v,{ownerState:R,className:(0,Ln.A)(W,f.root),ref:g,children:[(0,Qe.jsxs)(Mh,{role:"presentation",onClick:()=>{if(1!==B.length&&h&&!s)if(2===B.length)h(B.find((e=>e!==G))||B[0]);else{const e=0!==B.indexOf(G)?0:1;h(B[e])}},ownerState:R,"aria-live":"polite",className:f.labelContainer,children:[(0,Qe.jsx)(Bp,{reduceAnimations:y,transKey:a.format(d,"monthAndYear"),children:(0,Qe.jsx)(zh,{id:S,ownerState:R,className:f.label,children:a.format(d,"monthAndYear")})}),B.length>1&&!s&&(0,Qe.jsx)(X,(0,we.A)({},k,{children:(0,Qe.jsx)(J,(0,we.A)({},w))}))]}),(0,Qe.jsx)(Ma,{in:"day"===G,children:(0,Qe.jsx)(wh,{slots:i,slotProps:c,onGoToPrevious:()=>p(a.addMonths(d,-1),"right"),isPreviousDisabled:N,previousLabel:o.previousMonth,onGoToNext:()=>p(a.addMonths(d,1),"left"),isNextDisabled:H,nextLabel:o.nextMonth})})]}))})),Th=(0,nl.Ay)("div")({overflow:"hidden",width:MZ,maxHeight:334,display:"flex",flexDirection:"column",margin:"0 auto"}),Lh=e=>(0,Yl.Ay)("MuiDateCalendar",e),Qh=((0,$n.A)("MuiDateCalendar",["root","viewTransitionContainer"]),["autoFocus","onViewChange","value","defaultValue","referenceDate","disableFuture","disablePast","defaultCalendarMonth","onChange","onYearChange","onMonthChange","reduceAnimations","shouldDisableDate","shouldDisableMonth","shouldDisableYear","view","views","openTo","className","disabled","readOnly","minDate","maxDate","disableHighlightToday","focusedView","onFocusedViewChange","showDaysOutsideCurrentMonth","fixedWeekNumber","dayOfWeekFormatter","components","componentsProps","slots","slotProps","loading","renderLoading","displayWeekNumber","yearsPerRow","monthsPerRow","timezone"]);const jh=(0,nl.Ay)(Th,{name:"MuiDateCalendar",slot:"Root",overridesResolver:(e,g)=>g.root})({display:"flex",flexDirection:"column",height:334}),Ph=(0,nl.Ay)(Bp,{name:"MuiDateCalendar",slot:"ViewTransitionContainer",overridesResolver:(e,g)=>g.viewTransitionContainer})({}),Oh=n.forwardRef((function(e,g){var t,I,l;const C=nm(),o=(0,pC.A)(),a=function(e,g){var t,I,n,l,C,o,a;const r=nm(),i=lm(),c=$b(),A=Le({props:e,name:g});return(0,we.A)({},A,{loading:null!=(t=A.loading)&&t,disablePast:null!=(I=A.disablePast)&&I,disableFuture:null!=(n=A.disableFuture)&&n,openTo:null!=(l=A.openTo)?l:"day",views:null!=(C=A.views)?C:["year","day"],reduceAnimations:null!=(o=A.reduceAnimations)?o:c,renderLoading:null!=(a=A.renderLoading)?a:()=>(0,Qe.jsx)("span",{children:"..."}),minDate:Gu(r,A.minDate,i.minDate),maxDate:Gu(r,A.maxDate,i.maxDate)})}(e,"MuiDateCalendar"),{autoFocus:r,onViewChange:i,value:c,defaultValue:A,referenceDate:d,disableFuture:s,disablePast:u,defaultCalendarMonth:m,onChange:b,onYearChange:Z,onMonthChange:p,reduceAnimations:h,shouldDisableDate:G,shouldDisableMonth:y,shouldDisableYear:B,view:S,views:W,openTo:V,className:v,disabled:R,readOnly:f,minDate:X,maxDate:k,disableHighlightToday:J,focusedView:Y,onFocusedViewChange:w,showDaysOutsideCurrentMonth:H,fixedWeekNumber:N,dayOfWeekFormatter:F,components:K,componentsProps:x,slots:M,slotProps:z,loading:E,renderLoading:D,displayWeekNumber:U,yearsPerRow:T,monthsPerRow:L,timezone:Q}=a,j=(0,He.A)(a,Qh),{value:P,handleValueChange:O,timezone:q}=oZ({name:"DateCalendar",timezone:Q,value:c,defaultValue:A,onChange:b,valueManager:$u}),{view:$,setView:_,focusedView:ee,setFocusedView:ge,goToNextView:te,setValueAndGoToNextView:Ie}=rZ({view:S,views:W,openTo:V,onChange:O,onViewChange:i,autoFocus:r,focusedView:Y,onFocusedViewChange:w}),{referenceDate:ne,calendarState:le,changeFocusedDay:Ce,changeMonth:oe,handleChangeMonth:ae,isDateDisabled:re,onMonthSwitchingAnimationEnd:ie}=hp({value:P,defaultCalendarMonth:m,referenceDate:d,reduceAnimations:h,onMonthChange:p,minDate:X,maxDate:k,shouldDisableDate:G,disablePast:u,disableFuture:s,timezone:q}),ce=R&&P||X,Ae=R&&P||k,de=`${o}-grid-label`,se=null!==ee,ue=null!=(t=null!=(I=null==M?void 0:M.calendarHeader)?I:null==K?void 0:K.CalendarHeader)?t:Uh,me=ym({elementType:ue,externalSlotProps:null!=(l=null==z?void 0:z.calendarHeader)?l:null==x?void 0:x.calendarHeader,additionalProps:{views:W,view:$,currentMonth:le.currentMonth,onViewChange:_,onMonthChange:(e,g)=>ae({newMonth:e,direction:g}),minDate:ce,maxDate:Ae,disabled:R,disablePast:u,disableFuture:s,reduceAnimations:h,timezone:q,labelId:de,slots:M,slotProps:z},ownerState:a}),be=(0,Ta.A)((e=>{const g=C.startOfMonth(e),t=C.endOfMonth(e),I=re(e)?hu({utils:C,date:e,minDate:C.isBefore(X,g)?g:X,maxDate:C.isAfter(k,t)?t:k,disablePast:u,disableFuture:s,isDateDisabled:re,timezone:q}):e;I?(Ie(I,"finish"),null==p||p(g)):(te(),oe(g)),Ce(I,!0)})),Ze=(0,Ta.A)((e=>{const g=C.startOfYear(e),t=C.endOfYear(e),I=re(e)?hu({utils:C,date:e,minDate:C.isBefore(X,g)?g:X,maxDate:C.isAfter(k,t)?t:k,disablePast:u,disableFuture:s,isDateDisabled:re,timezone:q}):e;I?(Ie(I,"finish"),null==Z||Z(I)):(te(),oe(g)),Ce(I,!0)})),pe=(0,Ta.A)((e=>O(e?Bu(C,e,null!=P?P:ne):e,"finish")));n.useEffect((()=>{null!=P&&C.isValid(P)&&oe(P)}),[P]);const he=a,Ge=(e=>{const{classes:g}=e;return(0,tl.A)({root:["root"],viewTransitionContainer:["viewTransitionContainer"]},Lh,g)})(he),ye={disablePast:u,disableFuture:s,maxDate:k,minDate:X},Be={disableHighlightToday:J,readOnly:f,disabled:R,timezone:q,gridLabelId:de},Se=n.useRef($);n.useEffect((()=>{Se.current!==$&&(ee===Se.current&&ge($,!0),Se.current=$)}),[ee,ge,$]);const We=n.useMemo((()=>[P]),[P]);return(0,Qe.jsxs)(jh,(0,we.A)({ref:g,className:(0,Ln.A)(Ge.root,v),ownerState:he},j,{children:[(0,Qe.jsx)(ue,(0,we.A)({},me)),(0,Qe.jsx)(Ph,{reduceAnimations:h,className:Ge.viewTransitionContainer,transKey:$,ownerState:he,children:(0,Qe.jsxs)("div",{children:["year"===$&&(0,Qe.jsx)(Vh,(0,we.A)({},ye,Be,{value:P,onChange:Ze,shouldDisableYear:B,hasFocus:se,onFocusedViewChange:e=>ge("year",e),yearsPerRow:T,referenceDate:ne})),"month"===$&&(0,Qe.jsx)(mh,(0,we.A)({},ye,Be,{hasFocus:se,className:v,value:P,onChange:be,shouldDisableMonth:y,onFocusedViewChange:e=>ge("month",e),monthsPerRow:L,referenceDate:ne})),"day"===$&&(0,Qe.jsx)(Ch,(0,we.A)({},le,ye,Be,{onMonthSwitchingAnimationEnd:ie,onFocusedDayChange:Ce,reduceAnimations:h,selectedDays:We,onSelectedDaysChange:pe,shouldDisableDate:G,shouldDisableMonth:y,shouldDisableYear:B,hasFocus:se,onFocusedViewChange:e=>ge("day",e),showDaysOutsideCurrentMonth:H,fixedWeekNumber:N,dayOfWeekFormatter:F,displayWeekNumber:U,components:K,componentsProps:x,slots:M,slotProps:z,loading:E,renderLoading:D}))]})})]}))})),qh=e=>{let{view:g,onViewChange:t,views:I,focusedView:n,onFocusedViewChange:l,value:C,defaultValue:o,referenceDate:a,onChange:r,className:i,classes:c,disableFuture:A,disablePast:d,minDate:s,maxDate:u,shouldDisableDate:m,shouldDisableMonth:b,shouldDisableYear:Z,reduceAnimations:p,onMonthChange:h,monthsPerRow:G,onYearChange:y,yearsPerRow:B,defaultCalendarMonth:S,components:W,componentsProps:V,slots:v,slotProps:R,loading:f,renderLoading:X,disableHighlightToday:k,readOnly:J,disabled:Y,showDaysOutsideCurrentMonth:w,dayOfWeekFormatter:H,sx:N,autoFocus:F,fixedWeekNumber:K,displayWeekNumber:x,timezone:M}=e;return(0,Qe.jsx)(Oh,{view:g,onViewChange:t,views:I.filter(Vu),focusedView:n&&Vu(n)?n:null,onFocusedViewChange:l,value:C,defaultValue:o,referenceDate:a,onChange:r,className:i,classes:c,disableFuture:A,disablePast:d,minDate:s,maxDate:u,shouldDisableDate:m,shouldDisableMonth:b,shouldDisableYear:Z,reduceAnimations:p,onMonthChange:h,monthsPerRow:G,onYearChange:y,yearsPerRow:B,defaultCalendarMonth:S,components:W,componentsProps:V,slots:v,slotProps:R,loading:f,renderLoading:X,disableHighlightToday:k,readOnly:J,disabled:Y,showDaysOutsideCurrentMonth:w,dayOfWeekFormatter:H,sx:N,autoFocus:F,fixedWeekNumber:K,displayWeekNumber:x,timezone:M})},$h=n.forwardRef((function(e,g){var t,I,l,C;const o=Cm(),a=nm(),r=Zm(e,"MuiDesktopDatePicker"),i=(0,we.A)({day:qh,month:qh,year:qh},r.viewRenderers),c=(0,we.A)({},r,{viewRenderers:i,format:vu(a,r,!1),yearsPerRow:null!=(t=r.yearsPerRow)?t:4,slots:(0,we.A)({openPickerIcon:ep,field:Zp},r.slots),slotProps:(0,we.A)({},r.slotProps,{field:e=>{var t;return(0,we.A)({},bu(null==(t=r.slotProps)?void 0:t.field,e),cp(r),{ref:g})},toolbar:(0,we.A)({hidden:!0},null==(I=r.slotProps)?void 0:I.toolbar)})}),{renderPicker:A}=(e=>{var g,t,I,l,C;let{props:o,getOpenDialogAriaText:a}=e,r=(0,He.A)(e,jZ);const{slots:i,slotProps:c,className:A,sx:d,format:s,formatDensity:u,timezone:m,name:b,label:Z,inputRef:p,readOnly:h,disabled:G,autoFocus:y,localeText:B,reduceAnimations:S}=o,W=nm(),V=n.useRef(null),v=n.useRef(null),R=(0,pC.A)(),f=null!=(g=null==c||null==(t=c.toolbar)?void 0:t.hidden)&&g,{open:X,actions:k,hasUIView:J,layoutProps:Y,renderCurrentView:w,shouldRestoreFocus:H,fieldProps:N}=sZ((0,we.A)({},r,{props:o,inputRef:V,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"desktop"})),F=null!=(I=i.inputAdornment)?I:ci,K=ym({elementType:F,externalSlotProps:null==c?void 0:c.inputAdornment,additionalProps:{position:"end"},ownerState:o}),x=(0,He.A)(K,PZ),M=null!=(l=i.openPickerButton)?l:Ul,z=ym({elementType:M,externalSlotProps:null==c?void 0:c.openPickerButton,additionalProps:{disabled:G||h,onClick:X?k.onClose:k.onOpen,"aria-label":a(N.value,W),edge:x.position},ownerState:o}),E=(0,He.A)(z,OZ),D=i.openPickerIcon,U=i.field,T=ym({elementType:U,externalSlotProps:null==c?void 0:c.field,additionalProps:(0,we.A)({},N,f&&{id:R},{readOnly:h,disabled:G,className:A,sx:d,format:s,formatDensity:u,timezone:m,label:Z,name:b,autoFocus:y&&!o.open,focused:!!X||void 0}),ownerState:o});J&&(T.InputProps=(0,we.A)({},T.InputProps,{ref:v,[`${x.position}Adornment`]:(0,Qe.jsx)(F,(0,we.A)({},x,{children:(0,Qe.jsx)(M,(0,we.A)({},E,{children:(0,Qe.jsx)(D,(0,we.A)({},null==c?void 0:c.openPickerIcon))}))}))}));const L=(0,we.A)({textField:i.textField,clearIcon:i.clearIcon,clearButton:i.clearButton},T.slots),Q=null!=(C=i.layout)?C:QZ,j=(0,yC.A)(V,T.inputRef,p);let P=R;f&&(P=Z?`${R}-label`:void 0);const O=(0,we.A)({},c,{toolbar:(0,we.A)({},null==c?void 0:c.toolbar,{titleId:R}),popper:(0,we.A)({"aria-labelledby":P},null==c?void 0:c.popper)});return{renderPicker:()=>(0,Qe.jsxs)(Oe,{localeText:B,children:[(0,Qe.jsx)(U,(0,we.A)({},T,{slots:L,slotProps:O,inputRef:j})),(0,Qe.jsx)(IZ,(0,we.A)({role:"dialog",placement:"bottom-start",anchorEl:v.current},k,{open:X,slots:i,slotProps:O,shouldRestoreFocus:H,reduceAnimations:S,children:(0,Qe.jsx)(Q,(0,we.A)({},Y,null==O?void 0:O.layout,{slots:i,slotProps:O,children:w()}))}))]})}})({props:c,valueManager:$u,valueType:"date",getOpenDialogAriaText:null!=(l=null==(C=c.localeText)?void 0:C.openDatePickerDialogue)?l:o.openDatePickerDialogue,validator:pm});return A()}));$h.propTypes={autoFocus:mu().bool,className:mu().string,closeOnSelect:mu().bool,components:mu().object,componentsProps:mu().object,dayOfWeekFormatter:mu().func,defaultCalendarMonth:mu().any,defaultValue:mu().any,disabled:mu().bool,disableFuture:mu().bool,disableHighlightToday:mu().bool,disableOpenPicker:mu().bool,disablePast:mu().bool,displayWeekNumber:mu().bool,fixedWeekNumber:mu().number,format:mu().string,formatDensity:mu().oneOf(["dense","spacious"]),inputRef:Zu,label:mu().node,loading:mu().bool,localeText:mu().object,maxDate:mu().any,minDate:mu().any,monthsPerRow:mu().oneOf([3,4]),name:mu().string,onAccept:mu().func,onChange:mu().func,onClose:mu().func,onError:mu().func,onMonthChange:mu().func,onOpen:mu().func,onSelectedSectionsChange:mu().func,onViewChange:mu().func,onYearChange:mu().func,open:mu().bool,openTo:mu().oneOf(["day","month","year"]),orientation:mu().oneOf(["landscape","portrait"]),readOnly:mu().bool,reduceAnimations:mu().bool,referenceDate:mu().any,renderLoading:mu().func,selectedSections:mu().oneOfType([mu().oneOf(["all","day","hours","meridiem","minutes","month","seconds","weekDay","year"]),mu().number,mu().shape({endIndex:mu().number.isRequired,startIndex:mu().number.isRequired})]),shouldDisableDate:mu().func,shouldDisableMonth:mu().func,shouldDisableYear:mu().func,showDaysOutsideCurrentMonth:mu().bool,slotProps:mu().object,slots:mu().object,sx:mu().oneOfType([mu().arrayOf(mu().oneOfType([mu().func,mu().object,mu().bool])),mu().func,mu().object]),timezone:mu().string,value:mu().any,view:mu().oneOf(["day","month","year"]),viewRenderers:mu().shape({day:mu().func,month:mu().func,year:mu().func}),views:mu().arrayOf(mu().oneOf(["day","month","year"]).isRequired),yearsPerRow:mu().oneOf([3,4])};const _h=(0,nl.Ay)(eA)({[`& .${Qc.container}`]:{outline:0},[`& .${Qc.paper}`]:{outline:0,minWidth:MZ}}),eG=(0,nl.Ay)(rA)({"&:first-of-type":{padding:0}});function gG(e){var g,t;const{children:I,onDismiss:n,open:l,slots:C,slotProps:o}=e,a=null!=(g=null==C?void 0:C.dialog)?g:_h,r=null!=(t=null==C?void 0:C.mobileTransition)?t:Ma;return(0,Qe.jsx)(a,(0,we.A)({open:l,onClose:n},null==o?void 0:o.dialog,{TransitionComponent:r,TransitionProps:null==o?void 0:o.mobileTransition,PaperComponent:null==C?void 0:C.mobilePaper,PaperProps:null==o?void 0:o.mobilePaper,children:(0,Qe.jsx)(eG,{children:I})}))}const tG=["props","getOpenDialogAriaText"],IG=n.forwardRef((function(e,g){var t,I,l;const C=Cm(),o=nm(),a=Zm(e,"MuiMobileDatePicker"),r=(0,we.A)({day:qh,month:qh,year:qh},a.viewRenderers),i=(0,we.A)({},a,{viewRenderers:r,format:vu(o,a,!1),slots:(0,we.A)({field:Zp},a.slots),slotProps:(0,we.A)({},a.slotProps,{field:e=>{var t;return(0,we.A)({},bu(null==(t=a.slotProps)?void 0:t.field,e),cp(a),{ref:g})},toolbar:(0,we.A)({hidden:!1},null==(t=a.slotProps)?void 0:t.toolbar)})}),{renderPicker:c}=(e=>{var g,t,I;let{props:l,getOpenDialogAriaText:C}=e,o=(0,He.A)(e,tG);const{slots:a,slotProps:r,className:i,sx:c,format:A,formatDensity:d,timezone:s,name:u,label:m,inputRef:b,readOnly:Z,disabled:p,localeText:h}=l,G=nm(),y=n.useRef(null),B=(0,pC.A)(),S=null!=(g=null==r||null==(t=r.toolbar)?void 0:t.hidden)&&g,{open:W,actions:V,layoutProps:v,renderCurrentView:R,fieldProps:f}=sZ((0,we.A)({},o,{props:l,inputRef:y,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"mobile"})),X=a.field,k=ym({elementType:X,externalSlotProps:null==r?void 0:r.field,additionalProps:(0,we.A)({},f,S&&{id:B},!(p||Z)&&{onClick:V.onOpen,onKeyDown:(J=V.onOpen,e=>{"Enter"!==e.key&&" "!==e.key||(J(e),e.preventDefault(),e.stopPropagation()),Y&&Y(e)})},{readOnly:null==Z||Z,disabled:p,className:i,sx:c,format:A,formatDensity:d,timezone:s,label:m,name:u}),ownerState:l});var J,Y;k.inputProps=(0,we.A)({},k.inputProps,{"aria-label":C(f.value,G)});const w=(0,we.A)({textField:a.textField},k.slots),H=null!=(I=a.layout)?I:QZ,N=(0,yC.A)(y,k.inputRef,b);let F=B;S&&(F=m?`${B}-label`:void 0);const K=(0,we.A)({},r,{toolbar:(0,we.A)({},null==r?void 0:r.toolbar,{titleId:B}),mobilePaper:(0,we.A)({"aria-labelledby":F},null==r?void 0:r.mobilePaper)});return{renderPicker:()=>(0,Qe.jsxs)(Oe,{localeText:h,children:[(0,Qe.jsx)(X,(0,we.A)({},k,{slots:w,slotProps:K,inputRef:N})),(0,Qe.jsx)(gG,(0,we.A)({},V,{open:W,slots:a,slotProps:K,children:(0,Qe.jsx)(H,(0,we.A)({},v,null==K?void 0:K.layout,{slots:a,slotProps:K,children:R()}))}))]})}})({props:i,valueManager:$u,valueType:"date",getOpenDialogAriaText:null!=(I=null==(l=i.localeText)?void 0:l.openDatePickerDialogue)?I:C.openDatePickerDialogue,validator:pm});return c()}));IG.propTypes={autoFocus:mu().bool,className:mu().string,closeOnSelect:mu().bool,components:mu().object,componentsProps:mu().object,dayOfWeekFormatter:mu().func,defaultCalendarMonth:mu().any,defaultValue:mu().any,disabled:mu().bool,disableFuture:mu().bool,disableHighlightToday:mu().bool,disableOpenPicker:mu().bool,disablePast:mu().bool,displayWeekNumber:mu().bool,fixedWeekNumber:mu().number,format:mu().string,formatDensity:mu().oneOf(["dense","spacious"]),inputRef:Zu,label:mu().node,loading:mu().bool,localeText:mu().object,maxDate:mu().any,minDate:mu().any,monthsPerRow:mu().oneOf([3,4]),name:mu().string,onAccept:mu().func,onChange:mu().func,onClose:mu().func,onError:mu().func,onMonthChange:mu().func,onOpen:mu().func,onSelectedSectionsChange:mu().func,onViewChange:mu().func,onYearChange:mu().func,open:mu().bool,openTo:mu().oneOf(["day","month","year"]),orientation:mu().oneOf(["landscape","portrait"]),readOnly:mu().bool,reduceAnimations:mu().bool,referenceDate:mu().any,renderLoading:mu().func,selectedSections:mu().oneOfType([mu().oneOf(["all","day","hours","meridiem","minutes","month","seconds","weekDay","year"]),mu().number,mu().shape({endIndex:mu().number.isRequired,startIndex:mu().number.isRequired})]),shouldDisableDate:mu().func,shouldDisableMonth:mu().func,shouldDisableYear:mu().func,showDaysOutsideCurrentMonth:mu().bool,slotProps:mu().object,slots:mu().object,sx:mu().oneOfType([mu().arrayOf(mu().oneOfType([mu().func,mu().object,mu().bool])),mu().func,mu().object]),timezone:mu().string,value:mu().any,view:mu().oneOf(["day","month","year"]),viewRenderers:mu().shape({day:mu().func,month:mu().func,year:mu().func}),views:mu().arrayOf(mu().oneOf(["day","month","year"]).isRequired),yearsPerRow:mu().oneOf([3,4])};const nG=["desktopModeMediaQuery"],lG=n.forwardRef((function(e,g){const t=Le({props:e,name:"MuiDatePicker"}),{desktopModeMediaQuery:I=Qb}=t,n=(0,He.A)(t,nG);return Xn(I,{defaultMatches:!0})?(0,Qe.jsx)($h,(0,we.A)({ref:g},n)):(0,Qe.jsx)(IG,(0,we.A)({ref:g},n))})),CG=async(e,g,t)=>(await xs.get(`/attendance/statistics/${e}`,{params:{startDate:g,endDate:t}})).data,oG=()=>{const[e,g]=(0,n.useState)([]),[t,I]=(0,n.useState)(""),[l,C]=(0,n.useState)(null),[o,a]=(0,n.useState)(null),[r,i]=(0,n.useState)(!1),[c,A]=(0,n.useState)(null),[d,s]=(0,n.useState)(0),[u,m]=(0,n.useState)(10);(0,n.useEffect)((()=>{t&&l&&o&&(async()=>{if(t&&l&&o)try{const e=await CG(t,l.toISOString(),o.toISOString());g(e)}catch(e){console.error("Erreur lors du chargement des sessions:",e)}})()}),[t,l,o]);const b=e=>(e.presentCount/e.totalStudents*100).toFixed(1);return(0,Qe.jsxs)(gl,{sx:{p:3},children:[(0,Qe.jsx)(ZC,{variant:"h5",gutterBottom:!0,children:"Historique des s\xe9ances"}),(0,Qe.jsxs)(gl,{sx:{display:"flex",gap:2,mb:3},children:[(0,Qe.jsxs)(Ho,{sx:{minWidth:200},children:[(0,Qe.jsx)(Xo,{children:"Cours"}),(0,Qe.jsxs)(ei,{value:t,label:"Cours",onChange:e=>I(e.target.value),children:[(0,Qe.jsx)(cc,{value:"COURSE1",children:"Cours 1"}),(0,Qe.jsx)(cc,{value:"COURSE2",children:"Cours 2"}),(0,Qe.jsx)(cc,{value:"COURSE3",children:"Cours 3"})]})]}),(0,Qe.jsx)(lG,{label:"Date d\xe9but",value:l,onChange:e=>C(e)}),(0,Qe.jsx)(lG,{label:"Date fin",value:o,onChange:e=>a(e)})]}),(0,Qe.jsx)(uc,{component:AC,children:(0,Qe.jsxs)(Gc,{children:[(0,Qe.jsx)(Rc,{children:(0,Qe.jsxs)(wc,{children:[(0,Qe.jsx)(xc,{children:"Date"}),(0,Qe.jsx)(xc,{children:"Type"}),(0,Qe.jsx)(xc,{children:"Total \xc9tudiants"}),(0,Qe.jsx)(xc,{children:"Pr\xe9sents"}),(0,Qe.jsx)(xc,{children:"Absents"}),(0,Qe.jsx)(xc,{children:"Taux de pr\xe9sence"}),(0,Qe.jsx)(xc,{children:"Actions"})]})}),(0,Qe.jsx)(Tc,{children:e.map(((e,g)=>(0,Qe.jsxs)(wc,{children:[(0,Qe.jsx)(xc,{children:new Date(e.date).toLocaleDateString()}),(0,Qe.jsx)(xc,{children:e.type}),(0,Qe.jsx)(xc,{children:e.totalStudents}),(0,Qe.jsx)(xc,{children:e.presentCount}),(0,Qe.jsx)(xc,{children:e.absentCount}),(0,Qe.jsxs)(xc,{children:[b(e),"%"]}),(0,Qe.jsx)(xc,{children:(0,Qe.jsx)(Gi,{variant:"outlined",onClick:()=>{A(e),i(!0)},children:"D\xe9tails"})})]},g)))})]})}),(0,Qe.jsxs)(eA,{open:r,onClose:()=>i(!1),children:[(0,Qe.jsx)(lA,{children:"D\xe9tails de la s\xe9ance"}),(0,Qe.jsx)(rA,{children:c&&(0,Qe.jsxs)(gl,{sx:{p:2},children:[(0,Qe.jsxs)(ZC,{children:["Date: ",new Date(c.date).toLocaleDateString()]}),(0,Qe.jsxs)(ZC,{children:["Type: ",c.type]}),(0,Qe.jsxs)(ZC,{children:["Taux de pr\xe9sence: ",b(c),"%"]})]})})]}),"// Dans le return, apr\xe8s le TableContainer",(0,Qe.jsx)(su,{component:"div",count:e.length,page:d,onPageChange:(e,g)=>s(g),rowsPerPage:u,onRowsPerPageChange:e=>{m(parseInt(e.target.value,10)),s(0)},labelRowsPerPage:"Lignes par page"})]})};const aG=function(){return(0,Qe.jsx)(Oe,{dateAdapter:hn,adapterLocale:Wn,children:(0,Qe.jsx)(Ve,{children:(0,Qe.jsxs)(he,{children:[(0,Qe.jsx)(Ze,{path:"/",element:(0,Qe.jsx)(Fi,{})}),(0,Qe.jsx)(Ze,{path:"/professor/dashboard",element:(0,Qe.jsx)(Ic,{})}),(0,Qe.jsx)(Ze,{path:"/professor/attendance",element:(0,Qe.jsx)(mA,{})}),(0,Qe.jsx)(Ze,{path:"/professor/quiz",element:(0,Qe.jsx)(pA,{})}),(0,Qe.jsx)(Ze,{path:"/professor/absence-requests",element:(0,Qe.jsx)(Ds,{})}),(0,Qe.jsx)(Ze,{path:"/professor/history",element:(0,Qe.jsx)(oG,{})})]})})})},rG=e=>{e&&e instanceof Function&&t.e(488).then(t.bind(t,2488)).then((g=>{let{getCLS:t,getFID:I,getFCP:n,getLCP:l,getTTFB:C}=g;t(e),I(e),n(e),l(e),C(e)}))};C.createRoot(document.getElementById("root")).render((0,Qe.jsx)(n.StrictMode,{children:(0,Qe.jsx)(aG,{})})),rG()})()})();
//# sourceMappingURL=main.92180e62.js.map